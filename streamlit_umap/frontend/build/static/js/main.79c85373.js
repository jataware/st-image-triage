/*! For license information please see main.79c85373.js.LICENSE.txt */
(()=>{var t={89:t=>{"use strict";function e(t,e,i){i=i||2;var o,s,a,l,d,h,p,g=e&&e.length,m=g?e[0]*i:t.length,y=n(t,0,m,i,!0),v=[];if(!y||y.next===y.prev)return v;if(g&&(y=function(t,e,i,r){var o,s,a,l=[];for(o=0,s=e.length;o<s;o++)(a=n(t,e[o]*r,o<s-1?e[o+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),l.push(f(a));for(l.sort(c),o=0;o<l.length;o++)i=u(l[o],i);return i}(t,e,y,i)),t.length>80*i){o=a=t[0],s=l=t[1];for(var b=i;b<m;b+=i)(d=t[b])<o&&(o=d),(h=t[b+1])<s&&(s=h),d>a&&(a=d),h>l&&(l=h);p=0!==(p=Math.max(a-o,l-s))?32767/p:0}return r(y,v,i,o,s,p,0),v}function n(t,e,n,i,r){var o,s;if(r===P(t,e,n,i)>0)for(o=e;o<n;o+=i)s=S(o,t[o],t[o+1],s);else for(o=n-i;o>=e;o-=i)s=S(o,t[o],t[o+1],s);return s&&y(s,s.next)&&(E(s),s=s.next),s}function i(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!y(i,i.next)&&0!==m(i.prev,i,i.next))i=i.next;else{if(E(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function r(t,e,n,c,u,d,f){if(t){!f&&d&&function(t,e,n,i){var r=t;do{0===r.z&&(r.z=h(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,s,a,l,c=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ);e++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(s>1)}(r)}(t,c,u,d);for(var p,g,m=t;t.prev!==t.next;)if(p=t.prev,g=t.next,d?s(t,c,u,d):o(t))e.push(p.i/n|0),e.push(t.i/n|0),e.push(g.i/n|0),E(t),t=g.next,m=g.next;else if((t=g)===m){f?1===f?r(t=a(i(t),e,n),e,n,c,u,d,2):2===f&&l(t,e,n,c,u,d):r(i(t),e,n,c,u,d,1);break}}}function o(t){var e=t.prev,n=t,i=t.next;if(m(e,n,i)>=0)return!1;for(var r=e.x,o=n.x,s=i.x,a=e.y,l=n.y,c=i.y,u=r<o?r<s?r:s:o<s?o:s,d=a<l?a<c?a:c:l<c?l:c,h=r>o?r>s?r:s:o>s?o:s,f=a>l?a>c?a:c:l>c?l:c,g=i.next;g!==e;){if(g.x>=u&&g.x<=h&&g.y>=d&&g.y<=f&&p(r,a,o,l,s,c,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function s(t,e,n,i){var r=t.prev,o=t,s=t.next;if(m(r,o,s)>=0)return!1;for(var a=r.x,l=o.x,c=s.x,u=r.y,d=o.y,f=s.y,g=a<l?a<c?a:c:l<c?l:c,y=u<d?u<f?u:f:d<f?d:f,v=a>l?a>c?a:c:l>c?l:c,b=u>d?u>f?u:f:d>f?d:f,_=h(g,y,e,n,i),w=h(v,b,e,n,i),x=t.prevZ,S=t.nextZ;x&&x.z>=_&&S&&S.z<=w;){if(x.x>=g&&x.x<=v&&x.y>=y&&x.y<=b&&x!==r&&x!==s&&p(a,u,l,d,c,f,x.x,x.y)&&m(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,S.x>=g&&S.x<=v&&S.y>=y&&S.y<=b&&S!==r&&S!==s&&p(a,u,l,d,c,f,S.x,S.y)&&m(S.prev,S,S.next)>=0)return!1;S=S.nextZ}for(;x&&x.z>=_;){if(x.x>=g&&x.x<=v&&x.y>=y&&x.y<=b&&x!==r&&x!==s&&p(a,u,l,d,c,f,x.x,x.y)&&m(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;S&&S.z<=w;){if(S.x>=g&&S.x<=v&&S.y>=y&&S.y<=b&&S!==r&&S!==s&&p(a,u,l,d,c,f,S.x,S.y)&&m(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function a(t,e,n){var r=t;do{var o=r.prev,s=r.next.next;!y(o,s)&&v(o,r,r.next,s)&&w(o,s)&&w(s,o)&&(e.push(o.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),E(r),E(r.next),r=t=s),r=r.next}while(r!==t);return i(r)}function l(t,e,n,o,s,a){var l=t;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&g(l,c)){var u=x(l,c);return l=i(l,l.next),u=i(u,u.next),r(l,e,n,o,s,a,0),void r(u,e,n,o,s,a,0)}c=c.next}l=l.next}while(l!==t)}function c(t,e){return t.x-e.x}function u(t,e){var n=function(t,e){var n,i=e,r=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s&&(s=a,n=i.x<i.next.x?i:i.next,a===r))return n}i=i.next}while(i!==e);if(!n)return null;var l,c=n,u=n.x,h=n.y,f=1/0;i=n;do{r>=i.x&&i.x>=u&&r!==i.x&&p(o<h?r:s,o,u,h,o<h?s:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),w(i,t)&&(l<f||l===f&&(i.x>n.x||i.x===n.x&&d(n,i)))&&(n=i,f=l)),i=i.next}while(i!==c);return n}(t,e);if(!n)return e;var r=x(n,t);return i(r,r.next),i(n,n.next)}function d(t,e){return m(t.prev,t,e.prev)<0&&m(e.next,t,t.next)<0}function h(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function p(t,e,n,i,r,o,s,a){return(r-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(i-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(r-s)*(i-a)}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&v(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(w(t,e)&&w(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(m(t.prev,t,e.prev)||m(t,e.prev,e))||y(t,e)&&m(t.prev,t,t.next)>0&&m(e.prev,e,e.next)>0)}function m(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function v(t,e,n,i){var r=_(m(t,e,n)),o=_(m(t,e,i)),s=_(m(n,i,t)),a=_(m(n,i,e));return r!==o&&s!==a||(!(0!==r||!b(t,n,e))||(!(0!==o||!b(t,i,e))||(!(0!==s||!b(n,t,i))||!(0!==a||!b(n,e,i)))))}function b(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function _(t){return t>0?1:t<0?-1:0}function w(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function x(t,e){var n=new T(t.i,t.x,t.y),i=new T(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function S(t,e,n,i){var r=new T(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function E(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function T(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,s=Math.abs(P(t,0,o,n));if(r)for(var a=0,l=e.length;a<l;a++){var c=e[a]*n,u=a<l-1?e[a+1]*n:t.length;s-=Math.abs(P(t,c,u,n))}var d=0;for(a=0;a<i.length;a+=3){var h=i[a]*n,f=i[a+1]*n,p=i[a+2]*n;d+=Math.abs((t[h]-t[p])*(t[f+1]-t[h+1])-(t[h]-t[f])*(t[p+1]-t[h+1]))}return 0===s&&0===d?0:Math.abs((d-s)/s)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}},97:(t,e,n)=>{var i;!function(r,o,s,a){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],u=o.createElement("div"),d="function",h=Math.round,f=Math.abs,p=Date.now;function g(t,e,n){return setTimeout(x(t,n),e)}function m(t,e,n){return!!Array.isArray(t)&&(y(t,n[e],n),!0)}function y(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==a)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function v(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,i,n),t.apply(this,arguments)}}l="function"!==typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==a&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign;var b=v((function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)(!n||n&&t[i[r]]===a)&&(t[i[r]]=e[i[r]]),r++;return t}),"extend","Use `assign`."),_=v((function(t,e){return b(t,e,!0)}),"merge","Use `assign`.");function w(t,e,n){var i,r=e.prototype;(i=t.prototype=Object.create(r)).constructor=t,i._super=r,n&&l(i,n)}function x(t,e){return function(){return t.apply(e,arguments)}}function S(t,e){return typeof t==d?t.apply(e&&e[0]||a,e):t}function E(t,e){return t===a?e:t}function T(t,e,n){y(I(e),(function(e){t.addEventListener(e,n,!1)}))}function P(t,e,n){y(I(e),(function(e){t.removeEventListener(e,n,!1)}))}function A(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function C(t,e){return t.indexOf(e)>-1}function I(t){return t.trim().split(/\s+/g)}function M(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function k(t){return Array.prototype.slice.call(t,0)}function O(t,e,n){for(var i=[],r=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];M(r,s)<0&&i.push(t[o]),r[o]=s,o++}return n&&(i=e?i.sort((function(t,n){return t[e]>n[e]})):i.sort()),i}function L(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),o=0;o<c.length;){if((i=(n=c[o])?n+r:e)in t)return i;o++}return a}var R=1;function F(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}var B="ontouchstart"in r,N=L(r,"PointerEvent")!==a,z=B&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),D="touch",j="mouse",U=25,V=1,W=4,H=8,G=1,q=2,Y=4,X=8,K=16,Z=q|Y,$=X|K,Q=Z|$,J=["x","y"],tt=["clientX","clientY"];function et(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){S(t.options.enable,[t])&&n.handler(e)},this.init()}function nt(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,o=e&V&&i-r===0,s=e&(W|H)&&i-r===0;n.isFirst=!!o,n.isFinal=!!s,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=it(e));r>1&&!n.firstMultiple?n.firstMultiple=it(e):1===r&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,l=s?s.center:o.center,c=e.center=rt(i);e.timeStamp=p(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=lt(l,c),e.distance=at(l,c),function(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};e.eventType!==V&&o.eventType!==W||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y});e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}(n,e),e.offsetDirection=st(e.deltaX,e.deltaY);var u=ot(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=f(u.x)>f(u.y)?u.x:u.y,e.scale=s?(d=s.pointers,h=i,at(h[0],h[1],tt)/at(d[0],d[1],tt)):1,e.rotation=s?function(t,e){return lt(e[1],e[0],tt)+lt(t[1],t[0],tt)}(s.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,i,r,o,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(e.eventType!=H&&(l>U||s.velocity===a)){var c=e.deltaX-s.deltaX,u=e.deltaY-s.deltaY,d=ot(l,c,u);i=d.x,r=d.y,n=f(d.x)>f(d.y)?d.x:d.y,o=st(c,u),t.lastInterval=e}else n=s.velocity,i=s.velocityX,r=s.velocityY,o=s.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=o}(n,e);var d,h;var g=t.element;A(e.srcEvent.target,g)&&(g=e.srcEvent.target);e.target=g}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function it(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:h(t.pointers[n].clientX),clientY:h(t.pointers[n].clientY)},n++;return{timeStamp:p(),pointers:e,center:rt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function rt(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var n=0,i=0,r=0;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:h(n/e),y:h(i/e)}}function ot(t,e,n){return{x:e/t||0,y:n/t||0}}function st(t,e){return t===e?G:f(t)>=f(e)?t<0?q:Y:e<0?X:K}function at(t,e,n){n||(n=J);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function lt(t,e,n){n||(n=J);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}et.prototype={handler:function(){},init:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(F(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&P(this.element,this.evEl,this.domHandler),this.evTarget&&P(this.target,this.evTarget,this.domHandler),this.evWin&&P(F(this.element),this.evWin,this.domHandler)}};var ct={mousedown:V,mousemove:2,mouseup:W},ut="mousedown",dt="mousemove mouseup";function ht(){this.evEl=ut,this.evWin=dt,this.pressed=!1,et.apply(this,arguments)}w(ht,et,{handler:function(t){var e=ct[t.type];e&V&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=W),this.pressed&&(e&W&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:j,srcEvent:t}))}});var ft={pointerdown:V,pointermove:2,pointerup:W,pointercancel:H,pointerout:H},pt={2:D,3:"pen",4:j,5:"kinect"},gt="pointerdown",mt="pointermove pointerup pointercancel";function yt(){this.evEl=gt,this.evWin=mt,et.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(gt="MSPointerDown",mt="MSPointerMove MSPointerUp MSPointerCancel"),w(yt,et,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=ft[i],o=pt[t.pointerType]||t.pointerType,s=o==D,a=M(e,t.pointerId,"pointerId");r&V&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):r&(W|H)&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(a,1))}});var vt={touchstart:V,touchmove:2,touchend:W,touchcancel:H};function bt(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,et.apply(this,arguments)}function _t(t,e){var n=k(t.touches),i=k(t.changedTouches);return e&(W|H)&&(n=O(n.concat(i),"identifier",!0)),[n,i]}w(bt,et,{handler:function(t){var e=vt[t.type];if(e===V&&(this.started=!0),this.started){var n=_t.call(this,t,e);e&(W|H)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:D,srcEvent:t})}}});var wt={touchstart:V,touchmove:2,touchend:W,touchcancel:H},xt="touchstart touchmove touchend touchcancel";function St(){this.evTarget=xt,this.targetIds={},et.apply(this,arguments)}function Et(t,e){var n=k(t.touches),i=this.targetIds;if(e&(2|V)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,s=k(t.changedTouches),a=[],l=this.target;if(o=n.filter((function(t){return A(t.target,l)})),e===V)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;for(r=0;r<s.length;)i[s[r].identifier]&&a.push(s[r]),e&(W|H)&&delete i[s[r].identifier],r++;return a.length?[O(o.concat(a),"identifier",!0),a]:void 0}w(St,et,{handler:function(t){var e=wt[t.type],n=Et.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:D,srcEvent:t})}});var Tt=2500;function Pt(){et.apply(this,arguments);var t=x(this.handler,this);this.touch=new St(this.manager,t),this.mouse=new ht(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function At(t,e){t&V?(this.primaryTouch=e.changedPointers[0].identifier,Ct.call(this,e)):t&(W|H)&&Ct.call(this,e)}function Ct(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout((function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)}),Tt)}}function It(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(e-r.x),s=Math.abs(n-r.y);if(o<=25&&s<=25)return!0}return!1}w(Pt,et,{handler:function(t,e,n){var i=n.pointerType==D,r=n.pointerType==j;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)At.call(this,e,n);else if(r&&It.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Mt=L(u.style,"touchAction"),kt=Mt!==a,Ot="compute",Lt="auto",Rt="manipulation",Ft="none",Bt="pan-x",Nt="pan-y",zt=function(){if(!kt)return!1;var t={},e=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||r.CSS.supports("touch-action",n)})),t}();function Dt(t,e){this.manager=t,this.set(e)}Dt.prototype={set:function(t){t==Ot&&(t=this.compute()),kt&&this.manager.element.style&&zt[t]&&(this.manager.element.style[Mt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return y(this.manager.recognizers,(function(e){S(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(C(t,Ft))return Ft;var e=C(t,Bt),n=C(t,Nt);if(e&&n)return Ft;if(e||n)return e?Bt:Nt;if(C(t,Rt))return Rt;return Lt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,r=C(i,Ft)&&!zt[Ft],o=C(i,Nt)&&!zt[Nt],s=C(i,Bt)&&!zt[Bt];if(r){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}if(!s||!o)return r||o&&n&Z||s&&n&$?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var jt=1,Ut=32;function Vt(t){this.options=l({},this.defaults,t||{}),this.id=R++,this.manager=null,this.options.enable=E(this.options.enable,!0),this.state=jt,this.simultaneous={},this.requireFail=[]}function Wt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Ht(t){return t==K?"down":t==X?"up":t==q?"left":t==Y?"right":""}function Gt(t,e){var n=e.manager;return n?n.get(t):t}function qt(){Vt.apply(this,arguments)}function Yt(){qt.apply(this,arguments),this.pX=null,this.pY=null}function Xt(){qt.apply(this,arguments)}function Kt(){Vt.apply(this,arguments),this._timer=null,this._input=null}function Zt(){qt.apply(this,arguments)}function $t(){qt.apply(this,arguments)}function Qt(){Vt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Jt(t,e){return(e=e||{}).recognizers=E(e.recognizers,Jt.defaults.preset),new te(t,e)}Vt.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(m(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Gt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return m(t,"dropRecognizeWith",this)||(t=Gt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(m(t,"requireFailure",this))return this;var e=this.requireFail;return-1===M(e,t=Gt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(m(t,"dropRequireFailure",this))return this;t=Gt(t,this);var e=M(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function i(n){e.manager.emit(n,t)}n<8&&i(e.options.event+Wt(n)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),n>=8&&i(e.options.event+Wt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Ut},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(Ut|jt)))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!S(this.options.enable,[this,e]))return this.reset(),void(this.state=Ut);56&this.state&&(this.state=jt),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},w(qt,Vt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=6&e,r=this.attrTest(t);return i&&(n&H||!r)?16|e:i||r?n&W?8|e:2&e?4|e:2:Ut}}),w(Yt,qt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Q},getTouchAction:function(){var t=this.options.direction,e=[];return t&Z&&e.push(Nt),t&$&&e.push(Bt),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,o=t.deltaX,s=t.deltaY;return r&e.direction||(e.direction&Z?(r=0===o?G:o<0?q:Y,n=o!=this.pX,i=Math.abs(t.deltaX)):(r=0===s?G:s<0?X:K,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},attrTest:function(t){return qt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Ht(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),w(Xt,qt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ft]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),w(Kt,Vt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Lt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(W|H)&&!r)this.reset();else if(t.eventType&V)this.reset(),this._timer=g((function(){this.state=8,this.tryEmit()}),e.time,this);else if(t.eventType&W)return 8;return Ut},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&t.eventType&W?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),w(Zt,qt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ft]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),w($t,qt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Z|$,pointers:1},getTouchAction:function(){return Yt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Z|$)?e=t.overallVelocity:n&Z?e=t.overallVelocityX:n&$&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&f(e)>this.options.velocity&&t.eventType&W},emit:function(t){var e=Ht(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),w(Qt,Vt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Rt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&V&&0===this.count)return this.failTimeout();if(i&&r&&n){if(t.eventType!=W)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||at(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=g((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Ut},failTimeout:function(){return this._timer=g((function(){this.state=Ut}),this.options.interval,this),Ut},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Jt.VERSION="2.0.7",Jt.defaults={domEvents:!1,touchAction:Ot,enable:!0,inputTarget:null,inputClass:null,preset:[[Zt,{enable:!1}],[Xt,{enable:!1},["rotate"]],[$t,{direction:Z}],[Yt,{direction:Z},["swipe"]],[Qt],[Qt,{event:"doubletap",taps:2},["tap"]],[Kt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function te(t,e){var n;this.options=l({},Jt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(N?yt:z?St:B?Pt:ht))(n,nt),this.touchAction=new Dt(this,this.options.touchAction),ee(this,!0),y(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function ee(t,e){var n,i=t.element;i.style&&(y(t.options.cssProps,(function(r,o){n=L(i.style,o),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}te.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var i=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(r=e.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],2===e.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&14&n.state&&(r=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Vt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(m(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(m(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=M(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var n=this.handlers;return y(I(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==a){var n=this.handlers;return y(I(t),(function(t){e?n[t]&&n[t].splice(M(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&ee(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Jt,{INPUT_START:V,INPUT_MOVE:2,INPUT_END:W,INPUT_CANCEL:H,STATE_POSSIBLE:jt,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Ut,DIRECTION_NONE:G,DIRECTION_LEFT:q,DIRECTION_RIGHT:Y,DIRECTION_UP:X,DIRECTION_DOWN:K,DIRECTION_HORIZONTAL:Z,DIRECTION_VERTICAL:$,DIRECTION_ALL:Q,Manager:te,Input:et,TouchAction:Dt,TouchInput:St,MouseInput:ht,PointerEventInput:yt,TouchMouseInput:Pt,SingleTouchInput:bt,Recognizer:Vt,AttrRecognizer:qt,Tap:Qt,Pan:Yt,Swipe:$t,Pinch:Xt,Rotate:Zt,Press:Kt,on:T,off:P,each:y,merge:_,extend:b,assign:l,inherit:w,bindFn:x,prefixed:L}),("undefined"!==typeof r?r:"undefined"!==typeof self?self:{}).Hammer=Jt,(i=function(){return Jt}.call(e,n,e,t))===a||(t.exports=i)}(window,document)},110:(t,e,n)=>{"use strict";var i=n(309),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(t){return i.isMemo(t)?s:a[t.$$typeof]||r}a[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[i.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;t.exports=function t(e,n,i){if("string"!==typeof n){if(p){var r=f(n);r&&r!==p&&t(e,r,i)}var s=u(n);d&&(s=s.concat(d(n)));for(var a=l(e),g=l(n),m=0;m<s.length;++m){var y=s[m];if(!o[y]&&(!i||!i[y])&&(!g||!g[y])&&(!a||!a[y])){var v=h(n,y);try{c(e,y,v)}catch(b){}}}}return e}},746:(t,e)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function w(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case u:case d:case o:case a:case s:case f:return t;default:switch(t=t&&t.$$typeof){case c:case h:case m:case g:case l:return t;default:return e}}case r:return e}}}function x(t){return w(t)===d}e.AsyncMode=u,e.ConcurrentMode=d,e.ContextConsumer=c,e.ContextProvider=l,e.Element=i,e.ForwardRef=h,e.Fragment=o,e.Lazy=m,e.Memo=g,e.Portal=r,e.Profiler=a,e.StrictMode=s,e.Suspense=f,e.isAsyncMode=function(t){return x(t)||w(t)===u},e.isConcurrentMode=x,e.isContextConsumer=function(t){return w(t)===c},e.isContextProvider=function(t){return w(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return w(t)===h},e.isFragment=function(t){return w(t)===o},e.isLazy=function(t){return w(t)===m},e.isMemo=function(t){return w(t)===g},e.isPortal=function(t){return w(t)===r},e.isProfiler=function(t){return w(t)===a},e.isStrictMode=function(t){return w(t)===s},e.isSuspense=function(t){return w(t)===f},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===o||t===d||t===a||t===s||t===f||t===p||"object"===typeof t&&null!==t&&(t.$$typeof===m||t.$$typeof===g||t.$$typeof===l||t.$$typeof===c||t.$$typeof===h||t.$$typeof===v||t.$$typeof===b||t.$$typeof===_||t.$$typeof===y)},e.typeOf=w},309:(t,e,n)=>{"use strict";t.exports=n(746)},725:t=>{"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(r){return!1}}()?Object.assign:function(t,r){for(var o,s,a=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))n.call(o,c)&&(a[c]=o[c]);if(e){s=e(o);for(var u=0;u<s.length;u++)i.call(o,s[u])&&(a[s[u]]=o[s[u]])}}return a}},463:(t,e,n)=>{"use strict";var i=n(791),r=n(296);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(a[t]=e,t=0;t<e.length;t++)s.add(e[t])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(t,e,n,i,r,o,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){m[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];m[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){m[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){m[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){m[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){m[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){m[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){m[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){m[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function b(t,e,n,i){var r=m.hasOwnProperty(e)?m[e]:null;(null!==r?0!==r.type:i||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,i){if(null===e||"undefined"===typeof e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!d.call(p,t)||!d.call(f,t)&&(h.test(t)?p[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,v);m[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,v);m[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,v);m[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var _=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),A=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function F(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=R&&t[R]||t["@@iterator"])?t:null}var B,N=Object.assign;function z(t){if(void 0===B)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);B=e&&e[1]||""}return"\n"+B+t}var D=!1;function j(t,e){if(!t||D)return"";D=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),o=i.stack.split("\n"),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||r[s]!==o[a]){var l="\n"+r[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=s&&0<=a);break}}}finally{D=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?z(t):""}function U(t){switch(t.tag){case 5:return z(t.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return t=j(t.type,!1);case 11:return t=j(t.type.render,!1);case 1:return t=j(t.type,!0);default:return""}}function V(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case x:return"Portal";case T:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case M:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case A:return(t.displayName||"Context")+".Consumer";case P:return(t._context.displayName||"Context")+".Provider";case C:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case k:return null!==(e=t.displayName||null)?e:V(t.type)||"Memo";case O:e=t._payload,t=t._init;try{return V(t(e))}catch(n){}}return null}function W(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(e);case 8:return e===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function H(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function G(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function q(t){t._valueTracker||(t._valueTracker=function(t){var e=G(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Y(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=G(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function X(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function K(t,e){var n=e.checked;return N({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Z(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=H(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function $(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function Q(t,e){$(t,e);var n=H(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,H(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function J(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&X(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+H(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function it(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return N({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(et(n)){if(1<n.length)throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:H(n)}}function ot(t,e){var n=H(e.value),i=H(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function st(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?at(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ut,dt=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction((function(){return ut(t,e)}))}:ut);function ht(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function gt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function mt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=gt(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(ft).forEach((function(t){pt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var yt=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function bt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=null;function wt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var xt=null,St=null,Et=null;function Tt(t){if(t=br(t)){if("function"!==typeof xt)throw Error(o(280));var e=t.stateNode;e&&(e=wr(e),xt(t.stateNode,t.type,e))}}function Pt(t){St?Et?Et.push(t):Et=[t]:St=t}function At(){if(St){var t=St,e=Et;if(Et=St=null,Tt(t),e)for(t=0;t<e.length;t++)Tt(e[t])}}function Ct(t,e){return t(e)}function It(){}var Mt=!1;function kt(t,e,n){if(Mt)return t(e,n);Mt=!0;try{return Ct(t,e,n)}finally{Mt=!1,(null!==St||null!==Et)&&(It(),At())}}function Ot(t,e){var n=t.stateNode;if(null===n)return null;var i=wr(n);if(null===i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(o(231,e,typeof n));return n}var Lt=!1;if(u)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch(ut){Lt=!1}function Ft(t,e,n,i,r,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Bt=!1,Nt=null,zt=!1,Dt=null,jt={onError:function(t){Bt=!0,Nt=t}};function Ut(t,e,n,i,r,o,s,a,l){Bt=!1,Nt=null,Ft.apply(jt,arguments)}function Vt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Wt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Ht(t){if(Vt(t)!==t)throw Error(o(188))}function Gt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Vt(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Ht(r),t;if(s===i)return Ht(r),e;s=s.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t))?qt(t):null}function qt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=qt(t);if(null!==e)return e;t=t.sibling}return null}var Yt=r.unstable_scheduleCallback,Xt=r.unstable_cancelCallback,Kt=r.unstable_shouldYield,Zt=r.unstable_requestPaint,$t=r.unstable_now,Qt=r.unstable_getCurrentPriorityLevel,Jt=r.unstable_ImmediatePriority,te=r.unstable_UserBlockingPriority,ee=r.unstable_NormalPriority,ne=r.unstable_LowPriority,ie=r.unstable_IdlePriority,re=null,oe=null;var se=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(ae(t)/le|0)|0},ae=Math.log,le=Math.LN2;var ce=64,ue=4194304;function de(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function he(t,e){var n=t.pendingLanes;if(0===n)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,s=268435455&n;if(0!==s){var a=s&~r;0!==a?i=de(a):0!==(o&=s)&&(i=de(o))}else 0!==(s=n&~r)?i=de(s):0!==o&&(i=de(o));if(0===i)return 0;if(0!==e&&e!==i&&0===(e&r)&&((r=i&-i)>=(o=e&-e)||16===r&&0!==(4194240&o)))return e;if(0!==(4&i)&&(i|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)r=1<<(n=31-se(e)),i|=t[n],e&=~r;return i}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ge(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function me(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ye(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-se(e)]=n}function ve(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-se(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var be=0;function _e(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var we,xe,Se,Ee,Te,Pe=!1,Ae=[],Ce=null,Ie=null,Me=null,ke=new Map,Oe=new Map,Le=[],Re="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fe(t,e){switch(t){case"focusin":case"focusout":Ce=null;break;case"dragenter":case"dragleave":Ie=null;break;case"mouseover":case"mouseout":Me=null;break;case"pointerover":case"pointerout":ke.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oe.delete(e.pointerId)}}function Be(t,e,n,i,r,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},null!==e&&(null!==(e=br(e))&&xe(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function Ne(t){var e=vr(t.target);if(null!==e){var n=Vt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Wt(n)))return t.blockedOn=e,void Te(t.priority,(function(){Se(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ze(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ke(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=br(n))&&xe(e),t.blockedOn=n,!1;var i=new(n=t.nativeEvent).constructor(n.type,n);_t=i,n.target.dispatchEvent(i),_t=null,e.shift()}return!0}function De(t,e,n){ze(t)&&n.delete(e)}function je(){Pe=!1,null!==Ce&&ze(Ce)&&(Ce=null),null!==Ie&&ze(Ie)&&(Ie=null),null!==Me&&ze(Me)&&(Me=null),ke.forEach(De),Oe.forEach(De)}function Ue(t,e){t.blockedOn===e&&(t.blockedOn=null,Pe||(Pe=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,je)))}function Ve(t){function e(e){return Ue(e,t)}if(0<Ae.length){Ue(Ae[0],t);for(var n=1;n<Ae.length;n++){var i=Ae[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==Ce&&Ue(Ce,t),null!==Ie&&Ue(Ie,t),null!==Me&&Ue(Me,t),ke.forEach(e),Oe.forEach(e),n=0;n<Le.length;n++)(i=Le[n]).blockedOn===t&&(i.blockedOn=null);for(;0<Le.length&&null===(n=Le[0]).blockedOn;)Ne(n),null===n.blockedOn&&Le.shift()}var We=_.ReactCurrentBatchConfig,He=!0;function Ge(t,e,n,i){var r=be,o=We.transition;We.transition=null;try{be=1,Ye(t,e,n,i)}finally{be=r,We.transition=o}}function qe(t,e,n,i){var r=be,o=We.transition;We.transition=null;try{be=4,Ye(t,e,n,i)}finally{be=r,We.transition=o}}function Ye(t,e,n,i){if(He){var r=Ke(t,e,n,i);if(null===r)Hi(t,e,i,Xe,n),Fe(t,i);else if(function(t,e,n,i,r){switch(e){case"focusin":return Ce=Be(Ce,t,e,n,i,r),!0;case"dragenter":return Ie=Be(Ie,t,e,n,i,r),!0;case"mouseover":return Me=Be(Me,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return ke.set(o,Be(ke.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Oe.set(o,Be(Oe.get(o)||null,t,e,n,i,r)),!0}return!1}(r,t,e,n,i))i.stopPropagation();else if(Fe(t,i),4&e&&-1<Re.indexOf(t)){for(;null!==r;){var o=br(r);if(null!==o&&we(o),null===(o=Ke(t,e,n,i))&&Hi(t,e,i,Xe,n),o===r)break;r=o}null!==r&&i.stopPropagation()}else Hi(t,e,i,null,n)}}var Xe=null;function Ke(t,e,n,i){if(Xe=null,null!==(t=vr(t=wt(i))))if(null===(e=Vt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Wt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xe=t,null}function Ze(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qt()){case Jt:return 1;case te:return 4;case ee:case ne:return 16;case ie:return 536870912;default:return 16}default:return 16}}var $e=null,Qe=null,Je=null;function tn(){if(Je)return Je;var t,e,n=Qe,i=n.length,r="value"in $e?$e.value:$e.textContent,o=r.length;for(t=0;t<i&&n[t]===r[t];t++);var s=i-t;for(e=1;e<=s&&n[i-e]===r[o-e];e++);return Je=r.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function on(t){function e(e,n,i,r,o){for(var s in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return N(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=N({},cn,{view:0,detail:0}),hn=on(dn),fn=N({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(sn=t.screenX-ln.screenX,an=t.screenY-ln.screenY):an=sn=0,ln=t),sn)},movementY:function(t){return"movementY"in t?t.movementY:an}}),pn=on(fn),gn=on(N({},fn,{dataTransfer:0})),mn=on(N({},dn,{relatedTarget:0})),yn=on(N({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=N({},cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bn=on(vn),_n=on(N({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Sn[t])&&!!e[t]}function Tn(){return En}var Pn=N({},dn,{key:function(t){if(t.key){var e=wn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?xn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),An=on(Pn),Cn=on(N({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=on(N({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Mn=on(N({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=N({},fn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),On=on(kn),Ln=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Fn=null;u&&"documentMode"in document&&(Fn=document.documentMode);var Bn=u&&"TextEvent"in window&&!Fn,Nn=u&&(!Rn||Fn&&8<Fn&&11>=Fn),zn=String.fromCharCode(32),Dn=!1;function jn(t,e){switch(t){case"keyup":return-1!==Ln.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Vn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Wn[t.type]:"textarea"===e}function Gn(t,e,n,i){Pt(i),0<(e=qi(e,"onChange")).length&&(n=new un("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var qn=null,Yn=null;function Xn(t){zi(t,0)}function Kn(t){if(Y(_r(t)))return t}function Zn(t,e){if("change"===t)return e}var $n=!1;if(u){var Qn;if(u){var Jn="oninput"in document;if(!Jn){var ti=document.createElement("div");ti.setAttribute("oninput","return;"),Jn="function"===typeof ti.oninput}Qn=Jn}else Qn=!1;$n=Qn&&(!document.documentMode||9<document.documentMode)}function ei(){qn&&(qn.detachEvent("onpropertychange",ni),Yn=qn=null)}function ni(t){if("value"===t.propertyName&&Kn(Yn)){var e=[];Gn(e,Yn,t,wt(t)),kt(Xn,e)}}function ii(t,e,n){"focusin"===t?(ei(),Yn=n,(qn=e).attachEvent("onpropertychange",ni)):"focusout"===t&&ei()}function ri(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Kn(Yn)}function oi(t,e){if("click"===t)return Kn(e)}function si(t,e){if("input"===t||"change"===t)return Kn(e)}var ai="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function li(t,e){if(ai(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!d.call(e,r)||!ai(t[r],e[r]))return!1}return!0}function ci(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ui(t,e){var n,i=ci(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=ci(i)}}function di(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?di(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function hi(){for(var t=window,e=X();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=X((t=e.contentWindow).document)}return e}function fi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pi(t){var e=hi(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(e=i.start,void 0===(t=i.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=void 0===i.end?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=ui(n,o);var s=ui(n,i);r&&s&&(1!==t.rangeCount||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&((e=e.createRange()).setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gi=u&&"documentMode"in document&&11>=document.documentMode,mi=null,yi=null,vi=null,bi=!1;function _i(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==mi||mi!==X(i)||("selectionStart"in(i=mi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},vi&&li(vi,i)||(vi=i,0<(i=qi(yi,"onSelect")).length&&(e=new un("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=mi)))}function wi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xi={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionend:wi("Transition","TransitionEnd")},Si={},Ei={};function Ti(t){if(Si[t])return Si[t];if(!xi[t])return t;var e,n=xi[t];for(e in n)if(n.hasOwnProperty(e)&&e in Ei)return Si[t]=n[e];return t}u&&(Ei=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);var Pi=Ti("animationend"),Ai=Ti("animationiteration"),Ci=Ti("animationstart"),Ii=Ti("transitionend"),Mi=new Map,ki="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oi(t,e){Mi.set(t,e),l(e,[t])}for(var Li=0;Li<ki.length;Li++){var Ri=ki[Li];Oi(Ri.toLowerCase(),"on"+(Ri[0].toUpperCase()+Ri.slice(1)))}Oi(Pi,"onAnimationEnd"),Oi(Ai,"onAnimationIteration"),Oi(Ci,"onAnimationStart"),Oi("dblclick","onDoubleClick"),Oi("focusin","onFocus"),Oi("focusout","onBlur"),Oi(Ii,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fi));function Ni(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,i,r,s,a,l,c){if(Ut.apply(this,arguments),Bt){if(!Bt)throw Error(o(198));var u=Nt;Bt=!1,Nt=null,zt||(zt=!0,Dt=u)}}(i,e,void 0,t),t.currentTarget=null}function zi(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;t:{var o=void 0;if(e)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&r.isPropagationStopped())break t;Ni(r,a,c),o=l}else for(s=0;s<i.length;s++){if(l=(a=i[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&r.isPropagationStopped())break t;Ni(r,a,c),o=l}}}if(zt)throw t=Dt,zt=!1,Dt=null,t}function Di(t,e){var n=e[gr];void 0===n&&(n=e[gr]=new Set);var i=t+"__bubble";n.has(i)||(Wi(e,t,2,!1),n.add(i))}function ji(t,e,n){var i=0;e&&(i|=4),Wi(n,t,i,e)}var Ui="_reactListening"+Math.random().toString(36).slice(2);function Vi(t){if(!t[Ui]){t[Ui]=!0,s.forEach((function(e){"selectionchange"!==e&&(Bi.has(e)||ji(e,!1,t),ji(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Ui]||(e[Ui]=!0,ji("selectionchange",!1,e))}}function Wi(t,e,n,i){switch(Ze(e)){case 1:var r=Ge;break;case 4:r=qe;break;default:r=Ye}n=r.bind(null,e,n,t),r=void 0,!Lt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),i?void 0!==r?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):void 0!==r?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Hi(t,e,n,i,r){var o=i;if(0===(1&e)&&0===(2&e)&&null!==i)t:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===s)for(s=i.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;s=s.return}for(;null!==a;){if(null===(s=vr(a)))return;if(5===(l=s.tag)||6===l){i=o=s;continue t}a=a.parentNode}}i=i.return}kt((function(){var i=o,r=wt(n),s=[];t:{var a=Mi.get(t);if(void 0!==a){var l=un,c=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=An;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Pi:case Ai:case Ci:l=yn;break;case Ii:l=Mn;break;case"scroll":l=hn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&e),d=!u&&"scroll"===t,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=i;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=Ot(p,h))&&u.push(Gi(p,g,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,r),s.push({event:a,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||n===_t||!(c=n.relatedTarget||n.fromElement)||!vr(c)&&!c[pr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?vr(c):null)&&(c!==(d=Vt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(u=Cn,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:_r(l),f=null==c?a:_r(c),(a=new u(g,p+"leave",l,n,r)).target=d,a.relatedTarget=f,g=null,vr(r)===i&&((u=new u(h,p+"enter",c,n,r)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)t:{for(h=c,p=0,f=u=l;f;f=Yi(f))p++;for(f=0,g=h;g;g=Yi(g))f++;for(;0<p-f;)u=Yi(u),p--;for(;0<f-p;)h=Yi(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break t;u=Yi(u),h=Yi(h)}u=null}else u=null;null!==l&&Xi(s,a,l,u,!1),null!==c&&null!==d&&Xi(s,d,c,u,!0)}if("select"===(l=(a=i?_r(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Zn;else if(Hn(a))if($n)m=si;else{m=ri;var y=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=oi);switch(m&&(m=m(t,i))?Gn(s,m,n,r):(y&&y(t,a,i),"focusout"===t&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&tt(a,"number",a.value)),y=i?_r(i):window,t){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mi=y,yi=i,vi=null);break;case"focusout":vi=yi=mi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,_i(s,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":_i(s,n,r)}var v;if(Rn)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Vn?jn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(Nn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(v=tn()):(Qe="value"in($e=r)?$e.value:$e.textContent,Vn=!0)),0<(y=qi(i,b)).length&&(b=new _n(b,t,null,n,r),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=Un(n))&&(b.data=v))),(v=Bn?function(t,e){switch(t){case"compositionend":return Un(e);case"keypress":return 32!==e.which?null:(Dn=!0,zn);case"textInput":return(t=e.data)===zn&&Dn?null:t;default:return null}}(t,n):function(t,e){if(Vn)return"compositionend"===t||!Rn&&jn(t,e)?(t=tn(),Je=Qe=$e=null,Vn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Nn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(i=qi(i,"onBeforeInput")).length&&(r=new _n("onBeforeInput","beforeinput",null,n,r),s.push({event:r,listeners:i}),r.data=v))}zi(s,e)}))}function Gi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qi(t,e){for(var n=e+"Capture",i=[];null!==t;){var r=t,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Ot(t,n))&&i.unshift(Gi(t,o,r)),null!=(o=Ot(t,e))&&i.push(Gi(t,o,r))),t=t.return}return i}function Yi(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Xi(t,e,n,i,r){for(var o=e._reactName,s=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=Ot(n,o))&&s.unshift(Gi(n,l,a)):r||null!=(l=Ot(n,o))&&s.push(Gi(n,l,a))),n=n.return}0!==s.length&&t.push({event:e,listeners:s})}var Ki=/\r\n?/g,Zi=/\u0000|\uFFFD/g;function $i(t){return("string"===typeof t?t:""+t).replace(Ki,"\n").replace(Zi,"")}function Qi(t,e,n){if(e=$i(e),$i(t)!==e&&n)throw Error(o(425))}function Ji(){}var tr=null,er=null;function nr(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,or="function"===typeof Promise?Promise:void 0,sr="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof or?function(t){return or.resolve(null).then(t).catch(ar)}:ir;function ar(t){setTimeout((function(){throw t}))}function lr(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return t.removeChild(r),void Ve(e);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Ve(e)}function cr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ur(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var dr=Math.random().toString(36).slice(2),hr="__reactFiber$"+dr,fr="__reactProps$"+dr,pr="__reactContainer$"+dr,gr="__reactEvents$"+dr,mr="__reactListeners$"+dr,yr="__reactHandles$"+dr;function vr(t){var e=t[hr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pr]||n[hr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ur(t);null!==t;){if(n=t[hr])return n;t=ur(t)}return e}n=(t=n).parentNode}return null}function br(t){return!(t=t[hr]||t[pr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function _r(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function wr(t){return t[fr]||null}var xr=[],Sr=-1;function Er(t){return{current:t}}function Tr(t){0>Sr||(t.current=xr[Sr],xr[Sr]=null,Sr--)}function Pr(t,e){Sr++,xr[Sr]=t.current,t.current=e}var Ar={},Cr=Er(Ar),Ir=Er(!1),Mr=Ar;function kr(t,e){var n=t.type.contextTypes;if(!n)return Ar;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Or(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Lr(){Tr(Ir),Tr(Cr)}function Rr(t,e,n){if(Cr.current!==Ar)throw Error(o(168));Pr(Cr,e),Pr(Ir,n)}function Fr(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in e))throw Error(o(108,W(t)||"Unknown",r));return N({},n,i)}function Br(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ar,Mr=Cr.current,Pr(Cr,t),Pr(Ir,Ir.current),!0}function Nr(t,e,n){var i=t.stateNode;if(!i)throw Error(o(169));n?(t=Fr(t,e,Mr),i.__reactInternalMemoizedMergedChildContext=t,Tr(Ir),Tr(Cr),Pr(Cr,t)):Tr(Ir),Pr(Ir,n)}var zr=null,Dr=!1,jr=!1;function Ur(t){null===zr?zr=[t]:zr.push(t)}function Vr(){if(!jr&&null!==zr){jr=!0;var t=0,e=be;try{var n=zr;for(be=1;t<n.length;t++){var i=n[t];do{i=i(!0)}while(null!==i)}zr=null,Dr=!1}catch(r){throw null!==zr&&(zr=zr.slice(t+1)),Yt(Jt,Vr),r}finally{be=e,jr=!1}}return null}var Wr=[],Hr=0,Gr=null,qr=0,Yr=[],Xr=0,Kr=null,Zr=1,$r="";function Qr(t,e){Wr[Hr++]=qr,Wr[Hr++]=Gr,Gr=t,qr=e}function Jr(t,e,n){Yr[Xr++]=Zr,Yr[Xr++]=$r,Yr[Xr++]=Kr,Kr=t;var i=Zr;t=$r;var r=32-se(i)-1;i&=~(1<<r),n+=1;var o=32-se(e)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,Zr=1<<32-se(e)+r|n<<r|i,$r=o+t}else Zr=1<<o|n<<r|i,$r=t}function to(t){null!==t.return&&(Qr(t,1),Jr(t,1,0))}function eo(t){for(;t===Gr;)Gr=Wr[--Hr],Wr[Hr]=null,qr=Wr[--Hr],Wr[Hr]=null;for(;t===Kr;)Kr=Yr[--Xr],Yr[Xr]=null,$r=Yr[--Xr],Yr[Xr]=null,Zr=Yr[--Xr],Yr[Xr]=null}var no=null,io=null,ro=!1,oo=null;function so(t,e){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function ao(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,no=t,io=cr(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,no=t,io=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Kr?{id:Zr,overflow:$r}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=e,n.return=t,t.child=n,no=t,io=null,!0);default:return!1}}function lo(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function co(t){if(ro){var e=io;if(e){var n=e;if(!ao(t,e)){if(lo(t))throw Error(o(418));e=cr(n.nextSibling);var i=no;e&&ao(t,e)?so(i,n):(t.flags=-4097&t.flags|2,ro=!1,no=t)}}else{if(lo(t))throw Error(o(418));t.flags=-4097&t.flags|2,ro=!1,no=t}}}function uo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;no=t}function ho(t){if(t!==no)return!1;if(!ro)return uo(t),ro=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!nr(t.type,t.memoizedProps)),e&&(e=io)){if(lo(t))throw fo(),Error(o(418));for(;e;)so(t,e),e=cr(e.nextSibling)}if(uo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){io=cr(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}io=null}}else io=no?cr(t.stateNode.nextSibling):null;return!0}function fo(){for(var t=io;t;)t=cr(t.nextSibling)}function po(){io=no=null,ro=!1}function go(t){null===oo?oo=[t]:oo.push(t)}var mo=_.ReactCurrentBatchConfig;function yo(t,e){if(t&&t.defaultProps){for(var n in e=N({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var vo=Er(null),bo=null,_o=null,wo=null;function xo(){wo=_o=bo=null}function So(t){var e=vo.current;Tr(vo),t._currentValue=e}function Eo(t,e,n){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==i&&(i.childLanes|=e)):null!==i&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function To(t,e){bo=t,wo=_o=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(_a=!0),t.firstContext=null)}function Po(t){var e=t._currentValue;if(wo!==t)if(t={context:t,memoizedValue:e,next:null},null===_o){if(null===bo)throw Error(o(308));_o=t,bo.dependencies={lanes:0,firstContext:t}}else _o=_o.next=t;return e}var Ao=null;function Co(t){null===Ao?Ao=[t]:Ao.push(t)}function Io(t,e,n,i){var r=e.interleaved;return null===r?(n.next=n,Co(e)):(n.next=r.next,r.next=n),e.interleaved=n,Mo(t,i)}function Mo(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var ko=!1;function Oo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lo(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ro(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fo(t,e,n){var i=t.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Il)){var r=i.pending;return null===r?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Mo(t,n)}return null===(r=i.interleaved)?(e.next=e,Co(i)):(e.next=r.next,r.next=e),i.interleaved=e,Mo(t,n)}function Bo(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ve(t,n)}}function No(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?r=o=e:o=o.next=e}else r=o=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zo(t,e,n,i){var r=t.updateQueue;ko=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=t.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=r.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,f=a.eventTime;if((i&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break t}d=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break t;d=N({},d,h);break t;case 2:ko=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(h=r.effects)?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(h=a).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(e=r.shared.interleaved)){r=e;do{s|=r.lane,r=r.next}while(r!==e)}else null===o&&(r.shared.lanes=0);Nl|=s,t.lanes=s,t.memoizedState=d}}function Do(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var jo=(new i.Component).refs;function Uo(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:N({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Vo={isMounted:function(t){return!!(t=t._reactInternals)&&Vt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ec(),r=nc(t),o=Ro(i,r);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Fo(t,o,r))&&(ic(e,t,r,i),Bo(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ec(),r=nc(t),o=Ro(i,r);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Fo(t,o,r))&&(ic(e,t,r,i),Bo(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ec(),i=nc(t),r=Ro(n,i);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),null!==(e=Fo(t,r,i))&&(ic(e,t,i,n),Bo(e,t,i))}};function Wo(t,e,n,i,r,o,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!li(n,i)||!li(r,o))}function Ho(t,e,n){var i=!1,r=Ar,o=e.contextType;return"object"===typeof o&&null!==o?o=Po(o):(r=Or(e)?Mr:Cr.current,o=(i=null!==(i=e.contextTypes)&&void 0!==i)?kr(t,r):Ar),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Vo,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function Go(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Vo.enqueueReplaceState(e,e.state,null)}function qo(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=jo,Oo(t);var o=e.contextType;"object"===typeof o&&null!==o?r.context=Po(o):(o=Or(e)?Mr:Cr.current,r.context=kr(t,o)),r.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(Uo(t,e,o,n),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&Vo.enqueueReplaceState(r,r.state,null),zo(t,n,r,i),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308)}function Yo(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,t));var r=i,s=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===s?e.ref:(e=function(t){var e=r.refs;e===jo&&(e=r.refs={}),null===t?delete e[s]:e[s]=t},e._stringRef=s,e)}if("string"!==typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function Xo(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ko(t){return(0,t._init)(t._payload)}function Zo(t){function e(e,n){if(t){var i=e.deletions;null===i?(e.deletions=[n],e.flags|=16):i.push(n)}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=Rc(t,e)).index=0,t.sibling=null,t}function s(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags|=2,n):i:(e.flags|=2,n):(e.flags|=1048576,n)}function a(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=zc(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function c(t,e,n,i){var o=n.type;return o===S?d(t,e,n.props.children,i,n.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&Ko(o)===e.type)?((i=r(e,n.props)).ref=Yo(t,e,n),i.return=t,i):((i=Fc(n.type,n.key,n.props,null,t.mode,i)).ref=Yo(t,e,n),i.return=t,i)}function u(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Dc(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function d(t,e,n,i,o){return null===e||7!==e.tag?((e=Bc(n,t.mode,i,o)).return=t,e):((e=r(e,n)).return=t,e)}function h(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=zc(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case w:return(n=Fc(e.type,e.key,e.props,null,t.mode,n)).ref=Yo(t,null,e),n.return=t,n;case x:return(e=Dc(e,t.mode,n)).return=t,e;case O:return h(t,(0,e._init)(e._payload),n)}if(et(e)||F(e))return(e=Bc(e,t.mode,n,null)).return=t,e;Xo(t,e)}return null}function f(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?c(t,e,n,i):null;case x:return n.key===r?u(t,e,n,i):null;case O:return f(t,e,(r=n._init)(n._payload),i)}if(et(n)||F(n))return null!==r?null:d(t,e,n,i,null);Xo(t,n)}return null}function p(t,e,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(e,t=t.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return c(e,t=t.get(null===i.key?n:i.key)||null,i,r);case x:return u(e,t=t.get(null===i.key?n:i.key)||null,i,r);case O:return p(t,e,n,(0,i._init)(i._payload),r)}if(et(i)||F(i))return d(e,t=t.get(n)||null,i,r,null);Xo(e,i)}return null}function g(r,o,a,l){for(var c=null,u=null,d=o,g=o=0,m=null;null!==d&&g<a.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=f(r,d,a[g],l);if(null===y){null===d&&(d=m);break}t&&d&&null===y.alternate&&e(r,d),o=s(y,o,g),null===u?c=y:u.sibling=y,u=y,d=m}if(g===a.length)return n(r,d),ro&&Qr(r,g),c;if(null===d){for(;g<a.length;g++)null!==(d=h(r,a[g],l))&&(o=s(d,o,g),null===u?c=d:u.sibling=d,u=d);return ro&&Qr(r,g),c}for(d=i(r,d);g<a.length;g++)null!==(m=p(d,r,g,a[g],l))&&(t&&null!==m.alternate&&d.delete(null===m.key?g:m.key),o=s(m,o,g),null===u?c=m:u.sibling=m,u=m);return t&&d.forEach((function(t){return e(r,t)})),ro&&Qr(r,g),c}function m(r,a,l,c){var u=F(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,g=a,m=a=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(r,g,v.value,c);if(null===b){null===g&&(g=y);break}t&&g&&null===b.alternate&&e(r,g),a=s(b,a,m),null===d?u=b:d.sibling=b,d=b,g=y}if(v.done)return n(r,g),ro&&Qr(r,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=h(r,v.value,c))&&(a=s(v,a,m),null===d?u=v:d.sibling=v,d=v);return ro&&Qr(r,m),u}for(g=i(r,g);!v.done;m++,v=l.next())null!==(v=p(g,r,m,v.value,c))&&(t&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=s(v,a,m),null===d?u=v:d.sibling=v,d=v);return t&&g.forEach((function(t){return e(r,t)})),ro&&Qr(r,m),u}return function t(i,o,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:t:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===S){if(7===u.tag){n(i,u.sibling),(o=r(u,s.props.children)).return=i,i=o;break t}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Ko(c)===u.type){n(i,u.sibling),(o=r(u,s.props)).ref=Yo(i,u,s),o.return=i,i=o;break t}n(i,u);break}e(i,u),u=u.sibling}s.type===S?((o=Bc(s.props.children,i.mode,l,s.key)).return=i,i=o):((l=Fc(s.type,s.key,s.props,null,i.mode,l)).ref=Yo(i,o,s),l.return=i,i=l)}return a(i);case x:t:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(i,o.sibling),(o=r(o,s.children||[])).return=i,i=o;break t}n(i,o);break}e(i,o),o=o.sibling}(o=Dc(s,i.mode,l)).return=i,i=o}return a(i);case O:return t(i,o,(u=s._init)(s._payload),l)}if(et(s))return g(i,o,s,l);if(F(s))return m(i,o,s,l);Xo(i,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(i,o.sibling),(o=r(o,s)).return=i,i=o):(n(i,o),(o=zc(s,i.mode,l)).return=i,i=o),a(i)):n(i,o)}}var $o=Zo(!0),Qo=Zo(!1),Jo={},ts=Er(Jo),es=Er(Jo),ns=Er(Jo);function is(t){if(t===Jo)throw Error(o(174));return t}function rs(t,e){switch(Pr(ns,e),Pr(es,t),Pr(ts,Jo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Tr(ts),Pr(ts,e)}function os(){Tr(ts),Tr(es),Tr(ns)}function ss(t){is(ns.current);var e=is(ts.current),n=lt(e,t.type);e!==n&&(Pr(es,t),Pr(ts,n))}function as(t){es.current===t&&(Tr(ts),Tr(es))}var ls=Er(0);function cs(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var us=[];function ds(){for(var t=0;t<us.length;t++)us[t]._workInProgressVersionPrimary=null;us.length=0}var hs=_.ReactCurrentDispatcher,fs=_.ReactCurrentBatchConfig,ps=0,gs=null,ms=null,ys=null,vs=!1,bs=!1,_s=0,ws=0;function xs(){throw Error(o(321))}function Ss(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ai(t[n],e[n]))return!1;return!0}function Es(t,e,n,i,r,s){if(ps=s,gs=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hs.current=null===t||null===t.memoizedState?aa:la,t=n(i,r),bs){s=0;do{if(bs=!1,_s=0,25<=s)throw Error(o(301));s+=1,ys=ms=null,e.updateQueue=null,hs.current=ca,t=n(i,r)}while(bs)}if(hs.current=sa,e=null!==ms&&null!==ms.next,ps=0,ys=ms=gs=null,vs=!1,e)throw Error(o(300));return t}function Ts(){var t=0!==_s;return _s=0,t}function Ps(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ys?gs.memoizedState=ys=t:ys=ys.next=t,ys}function As(){if(null===ms){var t=gs.alternate;t=null!==t?t.memoizedState:null}else t=ms.next;var e=null===ys?gs.memoizedState:ys.next;if(null!==e)ys=e,ms=t;else{if(null===t)throw Error(o(310));t={memoizedState:(ms=t).memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},null===ys?gs.memoizedState=ys=t:ys=ys.next=t}return ys}function Cs(t,e){return"function"===typeof e?e(t):e}function Is(t){var e=As(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var i=ms,r=i.baseQueue,s=n.pending;if(null!==s){if(null!==r){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,n.pending=null}if(null!==r){s=r.next,i=i.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ps&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=i):c=c.next=h,gs.lanes|=d,Nl|=d}u=u.next}while(null!==u&&u!==s);null===c?a=i:c.next=l,ai(i,e.memoizedState)||(_a=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,n.lastRenderedState=i}if(null!==(t=n.interleaved)){r=t;do{s=r.lane,gs.lanes|=s,Nl|=s,r=r.next}while(r!==t)}else null===r&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ms(t){var e=As(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{s=t(s,a.action),a=a.next}while(a!==r);ai(s,e.memoizedState)||(_a=!0),e.memoizedState=s,null===e.baseQueue&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function ks(){}function Os(t,e){var n=gs,i=As(),r=e(),s=!ai(i.memoizedState,r);if(s&&(i.memoizedState=r,_a=!0),i=i.queue,Hs(Fs.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||null!==ys&&1&ys.memoizedState.tag){if(n.flags|=2048,Ds(9,Rs.bind(null,n,i,r,e),void 0,null),null===Ml)throw Error(o(349));0!==(30&ps)||Ls(n,e,r)}return r}function Ls(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=gs.updateQueue)?(e={lastEffect:null,stores:null},gs.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Rs(t,e,n,i){e.value=n,e.getSnapshot=i,Bs(e)&&Ns(t)}function Fs(t,e,n){return n((function(){Bs(e)&&Ns(t)}))}function Bs(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ai(t,n)}catch(i){return!0}}function Ns(t){var e=Mo(t,1);null!==e&&ic(e,t,1,-1)}function zs(t){var e=Ps();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:t},e.queue=t,t=t.dispatch=na.bind(null,gs,t),[e.memoizedState,t]}function Ds(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=gs.updateQueue)?(e={lastEffect:null,stores:null},gs.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function js(){return As().memoizedState}function Us(t,e,n,i){var r=Ps();gs.flags|=t,r.memoizedState=Ds(1|e,n,void 0,void 0===i?null:i)}function Vs(t,e,n,i){var r=As();i=void 0===i?null:i;var o=void 0;if(null!==ms){var s=ms.memoizedState;if(o=s.destroy,null!==i&&Ss(i,s.deps))return void(r.memoizedState=Ds(e,n,o,i))}gs.flags|=t,r.memoizedState=Ds(1|e,n,o,i)}function Ws(t,e){return Us(8390656,8,t,e)}function Hs(t,e){return Vs(2048,8,t,e)}function Gs(t,e){return Vs(4,2,t,e)}function qs(t,e){return Vs(4,4,t,e)}function Ys(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Xs(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Vs(4,4,Ys.bind(null,e,t),n)}function Ks(){}function Zs(t,e){var n=As();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&Ss(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function $s(t,e){var n=As();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&Ss(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Qs(t,e,n){return 0===(21&ps)?(t.baseState&&(t.baseState=!1,_a=!0),t.memoizedState=n):(ai(n,e)||(n=ge(),gs.lanes|=n,Nl|=n,t.baseState=!0),e)}function Js(t,e){var n=be;be=0!==n&&4>n?n:4,t(!0);var i=fs.transition;fs.transition={};try{t(!1),e()}finally{be=n,fs.transition=i}}function ta(){return As().memoizedState}function ea(t,e,n){var i=nc(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ia(t))ra(e,n);else if(null!==(n=Io(t,e,n,i))){ic(n,t,i,ec()),oa(n,e,i)}}function na(t,e,n){var i=nc(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ia(t))ra(e,r);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var s=e.lastRenderedState,a=o(s,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,s)){var l=e.interleaved;return null===l?(r.next=r,Co(e)):(r.next=l.next,l.next=r),void(e.interleaved=r)}}catch(c){}null!==(n=Io(t,e,r,i))&&(ic(n,t,i,r=ec()),oa(n,e,i))}}function ia(t){var e=t.alternate;return t===gs||null!==e&&e===gs}function ra(t,e){bs=vs=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function oa(t,e,n){if(0!==(4194240&n)){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ve(t,n)}}var sa={readContext:Po,useCallback:xs,useContext:xs,useEffect:xs,useImperativeHandle:xs,useInsertionEffect:xs,useLayoutEffect:xs,useMemo:xs,useReducer:xs,useRef:xs,useState:xs,useDebugValue:xs,useDeferredValue:xs,useTransition:xs,useMutableSource:xs,useSyncExternalStore:xs,useId:xs,unstable_isNewReconciler:!1},aa={readContext:Po,useCallback:function(t,e){return Ps().memoizedState=[t,void 0===e?null:e],t},useContext:Po,useEffect:Ws,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Us(4194308,4,Ys.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Us(4194308,4,t,e)},useInsertionEffect:function(t,e){return Us(4,2,t,e)},useMemo:function(t,e){var n=Ps();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ps();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=ea.bind(null,gs,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},Ps().memoizedState=t},useState:zs,useDebugValue:Ks,useDeferredValue:function(t){return Ps().memoizedState=t},useTransition:function(){var t=zs(!1),e=t[0];return t=Js.bind(null,t[1]),Ps().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=gs,r=Ps();if(ro){if(void 0===n)throw Error(o(407));n=n()}else{if(n=e(),null===Ml)throw Error(o(349));0!==(30&ps)||Ls(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Ws(Fs.bind(null,i,s,t),[t]),i.flags|=2048,Ds(9,Rs.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Ps(),e=Ml.identifierPrefix;if(ro){var n=$r;e=":"+e+"R"+(n=(Zr&~(1<<32-se(Zr)-1)).toString(32)+n),0<(n=_s++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=ws++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},la={readContext:Po,useCallback:Zs,useContext:Po,useEffect:Hs,useImperativeHandle:Xs,useInsertionEffect:Gs,useLayoutEffect:qs,useMemo:$s,useReducer:Is,useRef:js,useState:function(){return Is(Cs)},useDebugValue:Ks,useDeferredValue:function(t){return Qs(As(),ms.memoizedState,t)},useTransition:function(){return[Is(Cs)[0],As().memoizedState]},useMutableSource:ks,useSyncExternalStore:Os,useId:ta,unstable_isNewReconciler:!1},ca={readContext:Po,useCallback:Zs,useContext:Po,useEffect:Hs,useImperativeHandle:Xs,useInsertionEffect:Gs,useLayoutEffect:qs,useMemo:$s,useReducer:Ms,useRef:js,useState:function(){return Ms(Cs)},useDebugValue:Ks,useDeferredValue:function(t){var e=As();return null===ms?e.memoizedState=t:Qs(e,ms.memoizedState,t)},useTransition:function(){return[Ms(Cs)[0],As().memoizedState]},useMutableSource:ks,useSyncExternalStore:Os,useId:ta,unstable_isNewReconciler:!1};function ua(t,e){try{var n="",i=e;do{n+=U(i),i=i.return}while(i);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:r,digest:null}}function da(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function ha(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(t,e,n){(n=Ro(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Gl||(Gl=!0,ql=i),ha(0,e)},n}function ga(t,e,n){(n=Ro(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"===typeof i){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){ha(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ha(0,e),"function"!==typeof i&&(null===Yl?Yl=new Set([this]):Yl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function ma(t,e,n){var i=t.pingCache;if(null===i){i=t.pingCache=new fa;var r=new Set;i.set(e,r)}else void 0===(r=i.get(e))&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Pc.bind(null,t,e,n),e.then(t,t))}function ya(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function va(t,e,n,i,r){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Ro(-1,1)).tag=2,Fo(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}var ba=_.ReactCurrentOwner,_a=!1;function wa(t,e,n,i){e.child=null===t?Qo(e,null,n,i):$o(e,t.child,n,i)}function xa(t,e,n,i,r){n=n.render;var o=e.ref;return To(e,r),i=Es(t,e,n,i,o,r),n=Ts(),null===t||_a?(ro&&n&&to(e),e.flags|=1,wa(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ga(t,e,r))}function Sa(t,e,n,i,r){if(null===t){var o=n.type;return"function"!==typeof o||Lc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Fc(n.type,null,i,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Ea(t,e,o,i,r))}if(o=t.child,0===(t.lanes&r)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:li)(s,i)&&t.ref===e.ref)return Ga(t,e,r)}return e.flags|=1,(t=Rc(o,i)).ref=e.ref,t.return=e,e.child=t}function Ea(t,e,n,i,r){if(null!==t){var o=t.memoizedProps;if(li(o,i)&&t.ref===e.ref){if(_a=!1,e.pendingProps=i=o,0===(t.lanes&r))return e.lanes=t.lanes,Ga(t,e,r);0!==(131072&t.flags)&&(_a=!0)}}return Aa(t,e,n,i,r)}function Ta(t,e,n){var i=e.pendingProps,r=i.children,o=null!==t?t.memoizedState:null;if("hidden"===i.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pr(Rl,Ll),Ll|=n;else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pr(Rl,Ll),Ll|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==o?o.baseLanes:n,Pr(Rl,Ll),Ll|=i}else null!==o?(i=o.baseLanes|n,e.memoizedState=null):i=n,Pr(Rl,Ll),Ll|=i;return wa(t,e,r,n),e.child}function Pa(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Aa(t,e,n,i,r){var o=Or(n)?Mr:Cr.current;return o=kr(e,o),To(e,r),n=Es(t,e,n,i,o,r),i=Ts(),null===t||_a?(ro&&i&&to(e),e.flags|=1,wa(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ga(t,e,r))}function Ca(t,e,n,i,r){if(Or(n)){var o=!0;Br(e)}else o=!1;if(To(e,r),null===e.stateNode)Ha(t,e),Ho(e,n,i),qo(e,n,i,r),i=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Po(c):c=kr(e,c=Or(n)?Mr:Cr.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==i||l!==c)&&Go(e,s,i,c),ko=!1;var h=e.memoizedState;s.state=h,zo(e,i,s,r),l=e.memoizedState,a!==i||h!==l||Ir.current||ko?("function"===typeof u&&(Uo(e,n,u,i),l=e.memoizedState),(a=ko||Wo(e,n,a,i,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.flags|=4194308)):("function"===typeof s.componentDidMount&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),s.props=i,s.state=l,s.context=c,i=a):("function"===typeof s.componentDidMount&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,Lo(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:yo(e.type,a),s.props=c,d=e.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Po(l):l=kr(e,l=Or(n)?Mr:Cr.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&Go(e,s,i,l),ko=!1,h=e.memoizedState,s.state=h,zo(e,i,s,r);var p=e.memoizedState;a!==d||h!==p||Ir.current||ko?("function"===typeof f&&(Uo(e,n,f,i),p=e.memoizedState),(c=ko||Wo(e,n,c,i,h,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof s.componentDidUpdate&&(e.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),s.props=i,s.state=p,s.context=l,i=c):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return Ia(t,e,n,i,o,r)}function Ia(t,e,n,i,r,o){Pa(t,e);var s=0!==(128&e.flags);if(!i&&!s)return r&&Nr(e,n,!1),Ga(t,e,o);i=e.stateNode,ba.current=e;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&s?(e.child=$o(e,t.child,null,o),e.child=$o(e,null,a,o)):wa(t,e,a,o),e.memoizedState=i.state,r&&Nr(e,n,!0),e.child}function Ma(t){var e=t.stateNode;e.pendingContext?Rr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Rr(0,e.context,!1),rs(t,e.containerInfo)}function ka(t,e,n,i,r){return po(),go(r),e.flags|=256,wa(t,e,n,i),e.child}var Oa,La,Ra,Fa,Ba={dehydrated:null,treeContext:null,retryLane:0};function Na(t){return{baseLanes:t,cachePool:null,transitions:null}}function za(t,e,n){var i,r=e.pendingProps,s=ls.current,a=!1,l=0!==(128&e.flags);if((i=l)||(i=(null===t||null!==t.memoizedState)&&0!==(2&s)),i?(a=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(s|=1),Pr(ls,1&s),null===t)return co(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=r.children,t=r.fallback,a?(r=e.mode,a=e.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Nc(l,r,0,null),t=Bc(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Na(n),e.memoizedState=Ba,t):Da(e,l));if(null!==(s=t.memoizedState)&&null!==(i=s.dehydrated))return function(t,e,n,i,r,s,a){if(n)return 256&e.flags?(e.flags&=-257,ja(t,e,a,i=da(Error(o(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Nc({mode:"visible",children:i.children},r,0,null),(s=Bc(s,r,a,null)).flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,0!==(1&e.mode)&&$o(e,t.child,null,a),e.child.memoizedState=Na(a),e.memoizedState=Ba,s);if(0===(1&e.mode))return ja(t,e,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,ja(t,e,a,i=da(s=Error(o(419)),i,void 0))}if(l=0!==(a&t.childLanes),_a||l){if(null!==(i=Ml)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==s.retryLane&&(s.retryLane=r,Mo(t,r),ic(i,t,r,-1))}return mc(),ja(t,e,a,i=da(Error(o(421))))}return"$?"===r.data?(e.flags|=128,e.child=t.child,e=Cc.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,io=cr(r.nextSibling),no=e,ro=!0,oo=null,null!==t&&(Yr[Xr++]=Zr,Yr[Xr++]=$r,Yr[Xr++]=Kr,Zr=t.id,$r=t.overflow,Kr=e),e=Da(e,i.children),e.flags|=4096,e)}(t,e,l,r,i,s,n);if(a){a=r.fallback,l=e.mode,i=(s=t.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&e.child!==s?((r=e.child).childLanes=0,r.pendingProps=c,e.deletions=null):(r=Rc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==i?a=Rc(i,a):(a=Bc(a,l,n,null)).flags|=2,a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,l=null===(l=t.child.memoizedState)?Na(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=Ba,r}return t=(a=t.child).sibling,r=Rc(a,{mode:"visible",children:r.children}),0===(1&e.mode)&&(r.lanes=n),r.return=e,r.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Da(t,e){return(e=Nc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function ja(t,e,n,i){return null!==i&&go(i),$o(e,t.child,null,n),(t=Da(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Ua(t,e,n){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),Eo(t.return,e,n)}function Va(t,e,n,i,r){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function Wa(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(wa(t,e,i.children,n),0!==(2&(i=ls.current)))i=1&i|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ua(t,n,e);else if(19===t.tag)Ua(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Pr(ls,i),0===(1&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===cs(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Va(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===cs(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Va(e,!0,n,null,o);break;case"together":Va(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ha(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ga(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Nl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=Rc(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Rc(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function qa(t,e){if(!ro)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ya(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=t,r=r.sibling;else for(r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Xa(t,e,n){var i=e.pendingProps;switch(eo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ya(e),null;case 1:case 17:return Or(e.type)&&Lr(),Ya(e),null;case 3:return i=e.stateNode,os(),Tr(Ir),Tr(Cr),ds(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(ho(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==oo&&(ac(oo),oo=null))),La(t,e),Ya(e),null;case 5:as(e);var r=is(ns.current);if(n=e.type,null!==t&&null!=e.stateNode)Ra(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(null===e.stateNode)throw Error(o(166));return Ya(e),null}if(t=is(ts.current),ho(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[hr]=e,i[fr]=s,t=0!==(1&e.mode),n){case"dialog":Di("cancel",i),Di("close",i);break;case"iframe":case"object":case"embed":Di("load",i);break;case"video":case"audio":for(r=0;r<Fi.length;r++)Di(Fi[r],i);break;case"source":Di("error",i);break;case"img":case"image":case"link":Di("error",i),Di("load",i);break;case"details":Di("toggle",i);break;case"input":Z(i,s),Di("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Di("invalid",i);break;case"textarea":rt(i,s),Di("invalid",i)}for(var l in vt(n,s),r=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==s.suppressHydrationWarning&&Qi(i.textContent,c,t),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Qi(i.textContent,c,t),r=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Di("scroll",i)}switch(n){case"input":q(i),J(i,s,!0);break;case"textarea":q(i),st(i);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(i.onclick=Ji)}i=r,e.updateQueue=i,null!==i&&(e.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=at(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof i.is?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),"select"===n&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[hr]=e,t[fr]=i,Oa(t,e,!1,!1),e.stateNode=t;t:{switch(l=bt(n,i),n){case"dialog":Di("cancel",t),Di("close",t),r=i;break;case"iframe":case"object":case"embed":Di("load",t),r=i;break;case"video":case"audio":for(r=0;r<Fi.length;r++)Di(Fi[r],t);r=i;break;case"source":Di("error",t),r=i;break;case"img":case"image":case"link":Di("error",t),Di("load",t),r=i;break;case"details":Di("toggle",t),r=i;break;case"input":Z(t,i),r=K(t,i),Di("invalid",t);break;case"option":default:r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=N({},i,{value:void 0}),Di("invalid",t);break;case"textarea":rt(t,i),r=it(t,i),Di("invalid",t)}for(s in vt(n,r),c=r)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?mt(t,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&dt(t,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&ht(t,u):"number"===typeof u&&ht(t,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Di("scroll",t):null!=u&&b(t,s,u,l))}switch(n){case"input":q(t),J(t,i,!1);break;case"textarea":q(t),st(t);break;case"option":null!=i.value&&t.setAttribute("value",""+H(i.value));break;case"select":t.multiple=!!i.multiple,null!=(s=i.value)?nt(t,!!i.multiple,s,!1):null!=i.defaultValue&&nt(t,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(t.onclick=Ji)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Ya(e),null;case 6:if(t&&null!=e.stateNode)Fa(t,e,t.memoizedProps,i);else{if("string"!==typeof i&&null===e.stateNode)throw Error(o(166));if(n=is(ns.current),is(ts.current),ho(e)){if(i=e.stateNode,n=e.memoizedProps,i[hr]=e,(s=i.nodeValue!==n)&&null!==(t=no))switch(t.tag){case 3:Qi(i.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Qi(i.nodeValue,n,0!==(1&t.mode))}s&&(e.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[hr]=e,e.stateNode=i}return Ya(e),null;case 13:if(Tr(ls),i=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(ro&&null!==io&&0!==(1&e.mode)&&0===(128&e.flags))fo(),po(),e.flags|=98560,s=!1;else if(s=ho(e),null!==i&&null!==i.dehydrated){if(null===t){if(!s)throw Error(o(318));if(!(s=null!==(s=e.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hr]=e}else po(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Ya(e),s=!1}else null!==oo&&(ac(oo),oo=null),s=!0;if(!s)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((i=null!==i)!==(null!==t&&null!==t.memoizedState)&&i&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&ls.current)?0===Fl&&(Fl=3):mc())),null!==e.updateQueue&&(e.flags|=4),Ya(e),null);case 4:return os(),La(t,e),null===t&&Vi(e.stateNode.containerInfo),Ya(e),null;case 10:return So(e.type._context),Ya(e),null;case 19:if(Tr(ls),null===(s=e.memoizedState))return Ya(e),null;if(i=0!==(128&e.flags),null===(l=s.rendering))if(i)qa(s,!1);else{if(0!==Fl||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=cs(t))){for(e.flags|=128,qa(s,!1),null!==(i=l.updateQueue)&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;null!==n;)t=i,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pr(ls,1&ls.current|2),e.child}t=t.sibling}null!==s.tail&&$t()>Wl&&(e.flags|=128,i=!0,qa(s,!1),e.lanes=4194304)}else{if(!i)if(null!==(t=cs(l))){if(e.flags|=128,i=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),qa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ro)return Ya(e),null}else 2*$t()-s.renderingStartTime>Wl&&1073741824!==n&&(e.flags|=128,i=!0,qa(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=s.last)?n.sibling=l:e.child=l,s.last=l)}return null!==s.tail?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=$t(),e.sibling=null,n=ls.current,Pr(ls,i?1&n|2:1&n),e):(Ya(e),null);case 22:case 23:return hc(),i=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==i&&(e.flags|=8192),i&&0!==(1&e.mode)?0!==(1073741824&Ll)&&(Ya(e),6&e.subtreeFlags&&(e.flags|=8192)):Ya(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}function Ka(t,e){switch(eo(e),e.tag){case 1:return Or(e.type)&&Lr(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return os(),Tr(Ir),Tr(Cr),ds(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return as(e),null;case 13:if(Tr(ls),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));po()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Tr(ls),null;case 4:return os(),null;case 10:return So(e.type._context),null;case 22:case 23:return hc(),null;default:return null}}Oa=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},La=function(){},Ra=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,is(ts.current);var o,s=null;switch(n){case"input":r=K(t,r),i=K(t,i),s=[];break;case"select":r=N({},r,{value:void 0}),i=N({},i,{value:void 0}),s=[];break;case"textarea":r=it(t,r),i=it(t,i),s=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(t.onclick=Ji)}for(u in vt(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Di("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}},Fa=function(t,e,n,i){n!==i&&(e.flags|=4)};var Za=!1,$a=!1,Qa="function"===typeof WeakSet?WeakSet:Set,Ja=null;function tl(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Tc(t,e,i)}else n.current=null}function el(t,e,n){try{n()}catch(i){Tc(t,e,i)}}var nl=!1;function il(t,e,n){var i=e.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,void 0!==o&&el(e,n,o)}r=r.next}while(r!==i)}}function rl(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function ol(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function sl(t){var e=t.alternate;null!==e&&(t.alternate=null,sl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[hr],delete e[fr],delete e[gr],delete e[mr],delete e[yr])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function al(t){return 5===t.tag||3===t.tag||4===t.tag}function ll(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||al(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function cl(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Ji));else if(4!==i&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}function ul(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==i&&null!==(t=t.child))for(ul(t,e,n),t=t.sibling;null!==t;)ul(t,e,n),t=t.sibling}var dl=null,hl=!1;function fl(t,e,n){for(n=n.child;null!==n;)pl(t,e,n),n=n.sibling}function pl(t,e,n){if(oe&&"function"===typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(re,n)}catch(a){}switch(n.tag){case 5:$a||tl(n,e);case 6:var i=dl,r=hl;dl=null,fl(t,e,n),hl=r,null!==(dl=i)&&(hl?(t=dl,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(t=dl,n=n.stateNode,8===t.nodeType?lr(t.parentNode,n):1===t.nodeType&&lr(t,n),Ve(t)):lr(dl,n.stateNode));break;case 4:i=dl,r=hl,dl=n.stateNode.containerInfo,hl=!0,fl(t,e,n),dl=i,hl=r;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var o=r,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&el(n,e,s),r=r.next}while(r!==i)}fl(t,e,n);break;case 1:if(!$a&&(tl(n,e),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Tc(n,e,a)}fl(t,e,n);break;case 21:fl(t,e,n);break;case 22:1&n.mode?($a=(i=$a)||null!==n.memoizedState,fl(t,e,n),$a=i):fl(t,e,n);break;default:fl(t,e,n)}}function gl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Qa),e.forEach((function(e){var i=Ic.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))}))}}function ml(t,e){var n=e.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,a=e,l=a;t:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break t;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break t}l=l.return}if(null===dl)throw Error(o(160));pl(s,a,r),dl=null,hl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Tc(r,e,u)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)yl(e,t),e=e.sibling}function yl(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ml(e,t),vl(t),4&i){try{il(3,t,t.return),rl(3,t)}catch(m){Tc(t,t.return,m)}try{il(5,t,t.return)}catch(m){Tc(t,t.return,m)}}break;case 1:ml(e,t),vl(t),512&i&&null!==n&&tl(n,n.return);break;case 5:if(ml(e,t),vl(t),512&i&&null!==n&&tl(n,n.return),32&t.flags){var r=t.stateNode;try{ht(r,"")}catch(m){Tc(t,t.return,m)}}if(4&i&&null!=(r=t.stateNode)){var s=t.memoizedProps,a=null!==n?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&$(r,s),bt(l,a);var u=bt(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?mt(r,h):"dangerouslySetInnerHTML"===d?dt(r,h):"children"===d?ht(r,h):b(r,d,h,u)}switch(l){case"input":Q(r,s);break;case"textarea":ot(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?nt(r,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?nt(r,!!s.multiple,s.defaultValue,!0):nt(r,!!s.multiple,s.multiple?[]:"",!1))}r[fr]=s}catch(m){Tc(t,t.return,m)}}break;case 6:if(ml(e,t),vl(t),4&i){if(null===t.stateNode)throw Error(o(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){Tc(t,t.return,m)}}break;case 3:if(ml(e,t),vl(t),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ve(e.containerInfo)}catch(m){Tc(t,t.return,m)}break;case 4:default:ml(e,t),vl(t);break;case 13:ml(e,t),vl(t),8192&(r=t.child).flags&&(s=null!==r.memoizedState,r.stateNode.isHidden=s,!s||null!==r.alternate&&null!==r.alternate.memoizedState||(Vl=$t())),4&i&&gl(t);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&t.mode?($a=(u=$a)||d,ml(e,t),$a=u):ml(e,t),vl(t),8192&i){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!d&&0!==(1&t.mode))for(Ja=t,d=t.child;null!==d;){for(h=Ja=d;null!==Ja;){switch(p=(f=Ja).child,f.tag){case 0:case 11:case 14:case 15:il(4,f,f.return);break;case 1:tl(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){i=f,n=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Tc(i,n,m)}}break;case 5:tl(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==p?(p.return=f,Ja=p):xl(h)}d=d.sibling}t:for(d=null,h=t;;){if(5===h.tag){if(null===d){d=h;try{r=h.stateNode,u?"function"===typeof(s=r.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=gt("display",a))}catch(m){Tc(t,t.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Tc(t,t.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===t)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===t)break t;for(;null===h.sibling;){if(null===h.return||h.return===t)break t;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(e,t),vl(t),4&i&&gl(t);case 21:}}function vl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(al(n)){var i=n;break t}n=n.return}throw Error(o(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(ht(r,""),i.flags&=-33),ul(t,ll(t),r);break;case 3:case 4:var s=i.stateNode.containerInfo;cl(t,ll(t),s);break;default:throw Error(o(161))}}catch(a){Tc(t,t.return,a)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function bl(t,e,n){Ja=t,_l(t,e,n)}function _l(t,e,n){for(var i=0!==(1&t.mode);null!==Ja;){var r=Ja,o=r.child;if(22===r.tag&&i){var s=null!==r.memoizedState||Za;if(!s){var a=r.alternate,l=null!==a&&null!==a.memoizedState||$a;a=Za;var c=$a;if(Za=s,($a=l)&&!c)for(Ja=r;null!==Ja;)l=(s=Ja).child,22===s.tag&&null!==s.memoizedState?Sl(r):null!==l?(l.return=s,Ja=l):Sl(r);for(;null!==o;)Ja=o,_l(o,e,n),o=o.sibling;Ja=r,Za=a,$a=c}wl(t)}else 0!==(8772&r.subtreeFlags)&&null!==o?(o.return=r,Ja=o):wl(t)}}function wl(t){for(;null!==Ja;){var e=Ja;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:$a||rl(5,e);break;case 1:var i=e.stateNode;if(4&e.flags&&!$a)if(null===n)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:yo(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;null!==s&&Do(e,s,i);break;case 3:var a=e.updateQueue;if(null!==a){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Do(e,a,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ve(h)}}}break;default:throw Error(o(163))}$a||512&e.flags&&ol(e)}catch(f){Tc(e,e.return,f)}}if(e===t){Ja=null;break}if(null!==(n=e.sibling)){n.return=e.return,Ja=n;break}Ja=e.return}}function xl(t){for(;null!==Ja;){var e=Ja;if(e===t){Ja=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Ja=n;break}Ja=e.return}}function Sl(t){for(;null!==Ja;){var e=Ja;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rl(4,e)}catch(l){Tc(e,n,l)}break;case 1:var i=e.stateNode;if("function"===typeof i.componentDidMount){var r=e.return;try{i.componentDidMount()}catch(l){Tc(e,r,l)}}var o=e.return;try{ol(e)}catch(l){Tc(e,o,l)}break;case 5:var s=e.return;try{ol(e)}catch(l){Tc(e,s,l)}}}catch(l){Tc(e,e.return,l)}if(e===t){Ja=null;break}var a=e.sibling;if(null!==a){a.return=e.return,Ja=a;break}Ja=e.return}}var El,Tl=Math.ceil,Pl=_.ReactCurrentDispatcher,Al=_.ReactCurrentOwner,Cl=_.ReactCurrentBatchConfig,Il=0,Ml=null,kl=null,Ol=0,Ll=0,Rl=Er(0),Fl=0,Bl=null,Nl=0,zl=0,Dl=0,jl=null,Ul=null,Vl=0,Wl=1/0,Hl=null,Gl=!1,ql=null,Yl=null,Xl=!1,Kl=null,Zl=0,$l=0,Ql=null,Jl=-1,tc=0;function ec(){return 0!==(6&Il)?$t():-1!==Jl?Jl:Jl=$t()}function nc(t){return 0===(1&t.mode)?1:0!==(2&Il)&&0!==Ol?Ol&-Ol:null!==mo.transition?(0===tc&&(tc=ge()),tc):0!==(t=be)?t:t=void 0===(t=window.event)?16:Ze(t.type)}function ic(t,e,n,i){if(50<$l)throw $l=0,Ql=null,Error(o(185));ye(t,n,i),0!==(2&Il)&&t===Ml||(t===Ml&&(0===(2&Il)&&(zl|=n),4===Fl&&lc(t,Ol)),rc(t,i),1===n&&0===Il&&0===(1&e.mode)&&(Wl=$t()+500,Dr&&Vr()))}function rc(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-se(o),a=1<<s,l=r[s];-1===l?0!==(a&n)&&0===(a&i)||(r[s]=fe(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}(t,e);var i=he(t,t===Ml?Ol:0);if(0===i)null!==n&&Xt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(null!=n&&Xt(n),1===e)0===t.tag?function(t){Dr=!0,Ur(t)}(cc.bind(null,t)):Ur(cc.bind(null,t)),sr((function(){0===(6&Il)&&Vr()})),n=null;else{switch(_e(i)){case 1:n=Jt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=ie}n=Mc(n,oc.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function oc(t,e){if(Jl=-1,tc=0,0!==(6&Il))throw Error(o(327));var n=t.callbackNode;if(Sc()&&t.callbackNode!==n)return null;var i=he(t,t===Ml?Ol:0);if(0===i)return null;if(0!==(30&i)||0!==(i&t.expiredLanes)||e)e=yc(t,i);else{e=i;var r=Il;Il|=2;var s=gc();for(Ml===t&&Ol===e||(Hl=null,Wl=$t()+500,fc(t,e));;)try{bc();break}catch(l){pc(t,l)}xo(),Pl.current=s,Il=r,null!==kl?e=0:(Ml=null,Ol=0,e=Fl)}if(0!==e){if(2===e&&(0!==(r=pe(t))&&(i=r,e=sc(t,r))),1===e)throw n=Bl,fc(t,0),lc(t,i),rc(t,$t()),n;if(6===e)lc(t,i);else{if(r=t.current.alternate,0===(30&i)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ai(o(),r))return!1}catch(a){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(r)&&(2===(e=yc(t,i))&&(0!==(s=pe(t))&&(i=s,e=sc(t,s))),1===e))throw n=Bl,fc(t,0),lc(t,i),rc(t,$t()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(o(345));case 2:case 5:xc(t,Ul,Hl);break;case 3:if(lc(t,i),(130023424&i)===i&&10<(e=Vl+500-$t())){if(0!==he(t,0))break;if(((r=t.suspendedLanes)&i)!==i){ec(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=ir(xc.bind(null,t,Ul,Hl),e);break}xc(t,Ul,Hl);break;case 4:if(lc(t,i),(4194240&i)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-se(i);s=1<<a,(a=e[a])>r&&(r=a),i&=~s}if(i=r,10<(i=(120>(i=$t()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Tl(i/1960))-i)){t.timeoutHandle=ir(xc.bind(null,t,Ul,Hl),i);break}xc(t,Ul,Hl);break;default:throw Error(o(329))}}}return rc(t,$t()),t.callbackNode===n?oc.bind(null,t):null}function sc(t,e){var n=jl;return t.current.memoizedState.isDehydrated&&(fc(t,e).flags|=256),2!==(t=yc(t,e))&&(e=Ul,Ul=n,null!==e&&ac(e)),t}function ac(t){null===Ul?Ul=t:Ul.push.apply(Ul,t)}function lc(t,e){for(e&=~Dl,e&=~zl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-se(e),i=1<<n;t[n]=-1,e&=~i}}function cc(t){if(0!==(6&Il))throw Error(o(327));Sc();var e=he(t,0);if(0===(1&e))return rc(t,$t()),null;var n=yc(t,e);if(0!==t.tag&&2===n){var i=pe(t);0!==i&&(e=i,n=sc(t,i))}if(1===n)throw n=Bl,fc(t,0),lc(t,e),rc(t,$t()),n;if(6===n)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xc(t,Ul,Hl),rc(t,$t()),null}function uc(t,e){var n=Il;Il|=1;try{return t(e)}finally{0===(Il=n)&&(Wl=$t()+500,Dr&&Vr())}}function dc(t){null!==Kl&&0===Kl.tag&&0===(6&Il)&&Sc();var e=Il;Il|=1;var n=Cl.transition,i=be;try{if(Cl.transition=null,be=1,t)return t()}finally{be=i,Cl.transition=n,0===(6&(Il=e))&&Vr()}}function hc(){Ll=Rl.current,Tr(Rl)}function fc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,rr(n)),null!==kl)for(n=kl.return;null!==n;){var i=n;switch(eo(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Lr();break;case 3:os(),Tr(Ir),Tr(Cr),ds();break;case 5:as(i);break;case 4:os();break;case 13:case 19:Tr(ls);break;case 10:So(i.type._context);break;case 22:case 23:hc()}n=n.return}if(Ml=t,kl=t=Rc(t.current,null),Ol=Ll=e,Fl=0,Bl=null,Dl=zl=Nl=0,Ul=jl=null,null!==Ao){for(e=0;e<Ao.length;e++)if(null!==(i=(n=Ao[e]).interleaved)){n.interleaved=null;var r=i.next,o=n.pending;if(null!==o){var s=o.next;o.next=r,i.next=s}n.pending=i}Ao=null}return t}function pc(t,e){for(;;){var n=kl;try{if(xo(),hs.current=sa,vs){for(var i=gs.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}vs=!1}if(ps=0,ys=ms=gs=null,bs=!1,_s=0,Al.current=null,null===n||null===n.return){Fl=1,Bl=e,kl=null;break}t:{var s=t,a=n.return,l=n,c=e;if(e=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,e),1&p.mode&&ma(s,u,e),c=u;var g=(e=p).updateQueue;if(null===g){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break t}if(0===(1&e)){ma(s,u,e),mc();break t}c=Error(o(426))}else if(ro&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,e),go(ua(c,l));break t}}s=c=ua(c,l),4!==Fl&&(Fl=2),null===jl?jl=[s]:jl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e,No(s,pa(0,c,e));break t;case 1:l=c;var v=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Yl||!Yl.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e,No(s,ga(s,l,e));break t}}s=s.return}while(null!==s)}wc(n)}catch(_){e=_,kl===n&&null!==n&&(kl=n=n.return);continue}break}}function gc(){var t=Pl.current;return Pl.current=sa,null===t?sa:t}function mc(){0!==Fl&&3!==Fl&&2!==Fl||(Fl=4),null===Ml||0===(268435455&Nl)&&0===(268435455&zl)||lc(Ml,Ol)}function yc(t,e){var n=Il;Il|=2;var i=gc();for(Ml===t&&Ol===e||(Hl=null,fc(t,e));;)try{vc();break}catch(r){pc(t,r)}if(xo(),Il=n,Pl.current=i,null!==kl)throw Error(o(261));return Ml=null,Ol=0,Fl}function vc(){for(;null!==kl;)_c(kl)}function bc(){for(;null!==kl&&!Kt();)_c(kl)}function _c(t){var e=El(t.alternate,t,Ll);t.memoizedProps=t.pendingProps,null===e?wc(t):kl=e,Al.current=null}function wc(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Xa(n,e,Ll)))return void(kl=n)}else{if(null!==(n=Ka(n,e)))return n.flags&=32767,void(kl=n);if(null===t)return Fl=6,void(kl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(kl=e);kl=e=t}while(null!==e);0===Fl&&(Fl=5)}function xc(t,e,n){var i=be,r=Cl.transition;try{Cl.transition=null,be=1,function(t,e,n,i){do{Sc()}while(null!==Kl);if(0!==(6&Il))throw Error(o(327));n=t.finishedWork;var r=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-se(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}(t,s),t===Ml&&(kl=Ml=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Mc(ee,(function(){return Sc(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Cl.transition,Cl.transition=null;var a=be;be=1;var l=Il;Il|=4,Al.current=null,function(t,e){if(tr=He,fi(t=hi())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var i=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break t}var a=0,l=-1,c=-1,u=0,d=0,h=t,f=null;e:for(;;){for(var p;h!==n||0!==r&&3!==h.nodeType||(l=a+r),h!==s||0!==i&&3!==h.nodeType||(c=a+i),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===t)break e;if(f===n&&++u===r&&(l=a),f===s&&++d===i&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(er={focusedElem:t,selectionRange:n},He=!1,Ja=e;null!==Ja;)if(t=(e=Ja).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Ja=t;else for(;null!==Ja;){e=Ja;try{var g=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:yo(e.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=e.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(o(163))}}catch(w){Tc(e,e.return,w)}if(null!==(t=e.sibling)){t.return=e.return,Ja=t;break}Ja=e.return}g=nl,nl=!1}(t,n),yl(n,t),pi(er),He=!!tr,er=tr=null,t.current=n,bl(n,t,r),Zt(),Il=l,be=a,Cl.transition=s}else t.current=n;if(Xl&&(Xl=!1,Kl=t,Zl=r),s=t.pendingLanes,0===s&&(Yl=null),function(t){if(oe&&"function"===typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(re,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),rc(t,$t()),null!==e)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Gl)throw Gl=!1,t=ql,ql=null,t;0!==(1&Zl)&&0!==t.tag&&Sc(),s=t.pendingLanes,0!==(1&s)?t===Ql?$l++:($l=0,Ql=t):$l=0,Vr()}(t,e,n,i)}finally{Cl.transition=r,be=i}return null}function Sc(){if(null!==Kl){var t=_e(Zl),e=Cl.transition,n=be;try{if(Cl.transition=null,be=16>t?16:t,null===Kl)var i=!1;else{if(t=Kl,Kl=null,Zl=0,0!==(6&Il))throw Error(o(331));var r=Il;for(Il|=4,Ja=t.current;null!==Ja;){var s=Ja,a=s.child;if(0!==(16&Ja.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ja=u;null!==Ja;){var d=Ja;switch(d.tag){case 0:case 11:case 15:il(8,d,s)}var h=d.child;if(null!==h)h.return=d,Ja=h;else for(;null!==Ja;){var f=(d=Ja).sibling,p=d.return;if(sl(d),d===u){Ja=null;break}if(null!==f){f.return=p,Ja=f;break}Ja=p}}}var g=s.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Ja=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Ja=a;else t:for(;null!==Ja;){if(0!==(2048&(s=Ja).flags))switch(s.tag){case 0:case 11:case 15:il(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,Ja=v;break t}Ja=s.return}}var b=t.current;for(Ja=b;null!==Ja;){var _=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==_)_.return=a,Ja=_;else t:for(a=b;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(x){Tc(l,l.return,x)}if(l===a){Ja=null;break t}var w=l.sibling;if(null!==w){w.return=l.return,Ja=w;break t}Ja=l.return}}if(Il=r,Vr(),oe&&"function"===typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(re,t)}catch(x){}i=!0}return i}finally{be=n,Cl.transition=e}}return!1}function Ec(t,e,n){t=Fo(t,e=pa(0,e=ua(n,e),1),1),e=ec(),null!==t&&(ye(t,1,e),rc(t,e))}function Tc(t,e,n){if(3===t.tag)Ec(t,t,n);else for(;null!==e;){if(3===e.tag){Ec(e,t,n);break}if(1===e.tag){var i=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Yl||!Yl.has(i))){e=Fo(e,t=ga(e,t=ua(n,t),1),1),t=ec(),null!==e&&(ye(e,1,t),rc(e,t));break}}e=e.return}}function Pc(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=ec(),t.pingedLanes|=t.suspendedLanes&n,Ml===t&&(Ol&n)===n&&(4===Fl||3===Fl&&(130023424&Ol)===Ol&&500>$t()-Vl?fc(t,0):Dl|=n),rc(t,e)}function Ac(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var n=ec();null!==(t=Mo(t,e))&&(ye(t,e,n),rc(t,n))}function Cc(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Ac(t,n)}function Ic(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(o(314))}null!==i&&i.delete(e),Ac(t,n)}function Mc(t,e){return Yt(t,e)}function kc(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(t,e,n,i){return new kc(t,e,n,i)}function Lc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Rc(t,e){var n=t.alternate;return null===n?((n=Oc(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fc(t,e,n,i,r,s){var a=2;if(i=t,"function"===typeof t)Lc(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case S:return Bc(n.children,r,s,e);case E:a=8,r|=8;break;case T:return(t=Oc(12,n,e,2|r)).elementType=T,t.lanes=s,t;case I:return(t=Oc(13,n,e,r)).elementType=I,t.lanes=s,t;case M:return(t=Oc(19,n,e,r)).elementType=M,t.lanes=s,t;case L:return Nc(n,r,s,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case P:a=10;break t;case A:a=9;break t;case C:a=11;break t;case k:a=14;break t;case O:a=16,i=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Oc(a,n,e,r)).elementType=t,e.type=i,e.lanes=s,e}function Bc(t,e,n,i){return(t=Oc(7,t,i,e)).lanes=n,t}function Nc(t,e,n,i){return(t=Oc(22,t,i,e)).elementType=L,t.lanes=n,t.stateNode={isHidden:!1},t}function zc(t,e,n){return(t=Oc(6,t,null,e)).lanes=n,t}function Dc(t,e,n){return(e=Oc(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jc(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=me(0),this.expirationTimes=me(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Uc(t,e,n,i,r,o,s,a,l){return t=new jc(t,e,n,a,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Oc(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oo(o),t}function Vc(t){if(!t)return Ar;t:{if(Vt(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Or(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var n=t.type;if(Or(n))return Fr(t,n,e)}return e}function Wc(t,e,n,i,r,o,s,a,l){return(t=Uc(n,i,!0,t,0,o,0,a,l)).context=Vc(null),n=t.current,(o=Ro(i=ec(),r=nc(n))).callback=void 0!==e&&null!==e?e:null,Fo(n,o,r),t.current.lanes=r,ye(t,r,i),rc(t,i),t}function Hc(t,e,n,i){var r=e.current,o=ec(),s=nc(r);return n=Vc(n),null===e.context?e.context=n:e.pendingContext=n,(e=Ro(o,s)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),null!==(t=Fo(r,e,s))&&(ic(t,r,s,o),Bo(t,r,s)),s}function Gc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function qc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Yc(t,e){qc(t,e),(t=t.alternate)&&qc(t,e)}El=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ir.current)_a=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return _a=!1,function(t,e,n){switch(e.tag){case 3:Ma(e),po();break;case 5:ss(e);break;case 1:Or(e.type)&&Br(e);break;case 4:rs(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Pr(vo,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=e.memoizedState))return null!==i.dehydrated?(Pr(ls,1&ls.current),e.flags|=128,null):0!==(n&e.child.childLanes)?za(t,e,n):(Pr(ls,1&ls.current),null!==(t=Ga(t,e,n))?t.sibling:null);Pr(ls,1&ls.current);break;case 19:if(i=0!==(n&e.childLanes),0!==(128&t.flags)){if(i)return Wa(t,e,n);e.flags|=128}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Pr(ls,ls.current),i)break;return null;case 22:case 23:return e.lanes=0,Ta(t,e,n)}return Ga(t,e,n)}(t,e,n);_a=0!==(131072&t.flags)}else _a=!1,ro&&0!==(1048576&e.flags)&&Jr(e,qr,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ha(t,e),t=e.pendingProps;var r=kr(e,Cr.current);To(e,n),r=Es(null,e,i,t,r,n);var s=Ts();return e.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Or(i)?(s=!0,Br(e)):s=!1,e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Oo(e),r.updater=Vo,e.stateNode=r,r._reactInternals=e,qo(e,i,t,n),e=Ia(null,e,i,!0,s,n)):(e.tag=0,ro&&s&&to(e),wa(null,e,r,n),e=e.child),e;case 16:i=e.elementType;t:{switch(Ha(t,e),t=e.pendingProps,i=(r=i._init)(i._payload),e.type=i,r=e.tag=function(t){if("function"===typeof t)return Lc(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===C)return 11;if(t===k)return 14}return 2}(i),t=yo(i,t),r){case 0:e=Aa(null,e,i,t,n);break t;case 1:e=Ca(null,e,i,t,n);break t;case 11:e=xa(null,e,i,t,n);break t;case 14:e=Sa(null,e,i,yo(i.type,t),n);break t}throw Error(o(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,Aa(t,e,i,r=e.elementType===i?r:yo(i,r),n);case 1:return i=e.type,r=e.pendingProps,Ca(t,e,i,r=e.elementType===i?r:yo(i,r),n);case 3:t:{if(Ma(e),null===t)throw Error(o(387));i=e.pendingProps,r=(s=e.memoizedState).element,Lo(t,e),zo(e,i,null,n);var a=e.memoizedState;if(i=a.element,s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,256&e.flags){e=ka(t,e,i,n,r=ua(Error(o(423)),e));break t}if(i!==r){e=ka(t,e,i,n,r=ua(Error(o(424)),e));break t}for(io=cr(e.stateNode.containerInfo.firstChild),no=e,ro=!0,oo=null,n=Qo(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),i===r){e=Ga(t,e,n);break t}wa(t,e,i,n)}e=e.child}return e;case 5:return ss(e),null===t&&co(e),i=e.type,r=e.pendingProps,s=null!==t?t.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==s&&nr(i,s)&&(e.flags|=32),Pa(t,e),wa(t,e,a,n),e.child;case 6:return null===t&&co(e),null;case 13:return za(t,e,n);case 4:return rs(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=$o(e,null,i,n):wa(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,xa(t,e,i,r=e.elementType===i?r:yo(i,r),n);case 7:return wa(t,e,e.pendingProps,n),e.child;case 8:case 12:return wa(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,Pr(vo,i._currentValue),i._currentValue=a,null!==s)if(ai(s.value,a)){if(s.children===r.children&&!Ir.current){e=Ga(t,e,n);break t}}else for(null!==(s=e.child)&&(s.return=e);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===s.tag){(c=Ro(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Eo(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===e.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Eo(a,n,e),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===e){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}wa(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,To(e,n),i=i(r=Po(r)),e.flags|=1,wa(t,e,i,n),e.child;case 14:return r=yo(i=e.type,e.pendingProps),Sa(t,e,i,r=yo(i.type,r),n);case 15:return Ea(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:yo(i,r),Ha(t,e),e.tag=1,Or(i)?(t=!0,Br(e)):t=!1,To(e,n),Ho(e,i,r),qo(e,i,r,n),Ia(null,e,i,!0,t,n);case 19:return Wa(t,e,n);case 22:return Ta(t,e,n)}throw Error(o(156,e.tag))};var Xc="function"===typeof reportError?reportError:function(t){console.error(t)};function Kc(t){this._internalRoot=t}function Zc(t){this._internalRoot=t}function $c(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Qc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Jc(){}function tu(t,e,n,i,r){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof r){var a=r;r=function(){var t=Gc(s);a.call(t)}}Hc(e,s,t,r)}else s=function(t,e,n,i,r){if(r){if("function"===typeof i){var o=i;i=function(){var t=Gc(s);o.call(t)}}var s=Wc(e,i,t,0,null,!1,0,"",Jc);return t._reactRootContainer=s,t[pr]=s.current,Vi(8===t.nodeType?t.parentNode:t),dc(),s}for(;r=t.lastChild;)t.removeChild(r);if("function"===typeof i){var a=i;i=function(){var t=Gc(l);a.call(t)}}var l=Uc(t,0,!1,null,0,!1,0,"",Jc);return t._reactRootContainer=l,t[pr]=l.current,Vi(8===t.nodeType?t.parentNode:t),dc((function(){Hc(e,l,n,i)})),l}(n,e,t,r,i);return Gc(s)}Zc.prototype.render=Kc.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));Hc(t,e,null,null)},Zc.prototype.unmount=Kc.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;dc((function(){Hc(null,t,null,null)})),e[pr]=null}},Zc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ee();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Le.length&&0!==e&&e<Le[n].priority;n++);Le.splice(n,0,t),0===n&&Ne(t)}},we=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=de(e.pendingLanes);0!==n&&(ve(e,1|n),rc(e,$t()),0===(6&Il)&&(Wl=$t()+500,Vr()))}break;case 13:dc((function(){var e=Mo(t,1);if(null!==e){var n=ec();ic(e,t,1,n)}})),Yc(t,1)}},xe=function(t){if(13===t.tag){var e=Mo(t,134217728);if(null!==e)ic(e,t,134217728,ec());Yc(t,134217728)}},Se=function(t){if(13===t.tag){var e=nc(t),n=Mo(t,e);if(null!==n)ic(n,t,e,ec());Yc(t,e)}},Ee=function(){return be},Te=function(t,e){var n=be;try{return be=t,e()}finally{be=n}},xt=function(t,e,n){switch(e){case"input":if(Q(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=wr(i);if(!r)throw Error(o(90));Y(i),Q(i,r)}}}break;case"textarea":ot(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Ct=uc,It=dc;var eu={usingClientEntryPoint:!1,Events:[br,_r,wr,Pt,At,uc]},nu={findFiberByHostInstance:vr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iu={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Gt(t))?null:t.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{re=ru.inject(iu),oe=ru}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(e))throw Error(o(200));return function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!$c(t))throw Error(o(299));var n=!1,i="",r=Xc;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(i=e.identifierPrefix),void 0!==e.onRecoverableError&&(r=e.onRecoverableError)),e=Uc(t,1,!1,null,0,n,0,i,r),t[pr]=e.current,Vi(8===t.nodeType?t.parentNode:t),new Kc(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=null===(t=Gt(e))?null:t.stateNode},e.flushSync=function(t){return dc(t)},e.hydrate=function(t,e,n){if(!Qc(e))throw Error(o(200));return tu(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!$c(t))throw Error(o(405));var i=null!=n&&n.hydratedSources||null,r=!1,s="",a=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),e=Wc(e,null,t,1,null!=n?n:null,r,0,s,a),t[pr]=e.current,Vi(t),i)for(t=0;t<i.length;t++)r=(r=(n=i[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Zc(e)},e.render=function(t,e,n){if(!Qc(e))throw Error(o(200));return tu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Qc(t))throw Error(o(40));return!!t._reactRootContainer&&(dc((function(){tu(null,null,t,!1,(function(){t._reactRootContainer=null,t[pr]=null}))})),!0)},e.unstable_batchedUpdates=uc,e.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Qc(n))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return tu(t,e,n,!1,i)},e.version="18.2.0-next-9e3b772b8-20220608"},164:(t,e,n)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(463)},372:(t,e)=>{"use strict";var n,i=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function y(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case o:case a:case s:case h:case f:return t;default:switch(t=t&&t.$$typeof){case u:case c:case d:case g:case p:case l:return t;default:return e}}case r:return e}}}n=Symbol.for("react.module.reference")},441:(t,e,n)=>{"use strict";n(372)},374:(t,e,n)=>{"use strict";var i=n(791),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var i,o={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)s.call(e,i)&&!l.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===o[i]&&(o[i]=e[i]);return{$$typeof:r,type:t,key:c,ref:u,props:o,_owner:a.current}}e.Fragment=o,e.jsx=c,e.jsxs=c},117:(t,e)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}function v(){}function b(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var _=b.prototype=new v;_.constructor=b,g(_,y.prototype),_.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function T(t,e,i){var r,o={},s=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)x.call(e,r)&&!E.hasOwnProperty(r)&&(o[r]=e[r]);var l=arguments.length-2;if(1===l)o.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:n,type:t,key:s,ref:a,props:o,_owner:S.current}}function P(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var A=/\/+/g;function C(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function I(t,e,r,o,s){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case i:l=!0}}if(l)return s=s(l=t),t=""===o?"."+C(l,0):o,w(s)?(r="",null!=t&&(r=t.replace(A,"$&/")+"/"),I(s,e,r,"",(function(t){return t}))):null!=s&&(P(s)&&(s=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(A,"$&/")+"/")+t)),e.push(s)),1;if(l=0,o=""===o?".":o+":",w(t))for(var c=0;c<t.length;c++){var u=o+C(a=t[c],c);l+=I(a,e,r,u,s)}else if(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof u)for(t=u.call(t),c=0;!(a=t.next()).done;)l+=I(a=a.value,e,r,u=o+C(a,c++),s);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function M(t,e,n){if(null==t)return t;var i=[],r=0;return I(t,i,"","",(function(t){return e.call(n,t,r++)})),i}function k(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var O={current:null},L={transition:null},R={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:L,ReactCurrentOwner:S};e.Children={map:M,forEach:function(t,e,n){M(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return M(t,(function(){e++})),e},toArray:function(t){return M(t,(function(t){return t}))||[]},only:function(t){if(!P(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=r,e.Profiler=s,e.PureComponent=b,e.StrictMode=o,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,e.cloneElement=function(t,e,i){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=g({},t.props),o=t.key,s=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,a=S.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)x.call(e,c)&&!E.hasOwnProperty(c)&&(r[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:t.type,key:o,ref:s,props:r,_owner:a}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=T,e.createFactory=function(t){var e=T.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=P,e.lazy=function(t){return{$$typeof:h,_payload:{_status:-1,_result:t},_init:k}},e.memo=function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=L.transition;L.transition={};try{t()}finally{L.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return O.current.useCallback(t,e)},e.useContext=function(t){return O.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return O.current.useDeferredValue(t)},e.useEffect=function(t,e){return O.current.useEffect(t,e)},e.useId=function(){return O.current.useId()},e.useImperativeHandle=function(t,e,n){return O.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return O.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return O.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return O.current.useMemo(t,e)},e.useReducer=function(t,e,n){return O.current.useReducer(t,e,n)},e.useRef=function(t){return O.current.useRef(t)},e.useState=function(t){return O.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return O.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return O.current.useTransition()},e.version="18.2.0"},791:(t,e,n)=>{"use strict";t.exports=n(117)},184:(t,e,n)=>{"use strict";t.exports=n(374)},813:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,r=t[i];if(!(0<o(r,e)))break t;t[i]=e,t[n]=r,n=i}}function i(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length,s=r>>>1;i<s;){var a=2*(i+1)-1,l=t[a],c=a+1,u=t[c];if(0>o(l,n))c<r&&0>o(u,l)?(t[i]=u,t[c]=n,i=c):(t[i]=l,t[a]=n,i=a);else{if(!(c<r&&0>o(u,n)))break t;t[i]=u,t[c]=n,i=c}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(t){for(var e=i(u);null!==e;){if(null===e.callback)r(u);else{if(!(e.startTime<=t))break;r(u),e.sortIndex=e.expirationTime,n(c,e)}e=i(u)}}function w(t){if(m=!1,_(t),!g)if(null!==i(c))g=!0,L(x);else{var e=i(u);null!==e&&R(w,e.startTime-t)}}function x(t,n){g=!1,m&&(m=!1,v(P),P=-1),p=!0;var o=f;try{for(_(n),h=i(c);null!==h&&(!(h.expirationTime>n)||t&&!I());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?h.callback=a:h===i(c)&&r(c),_(n)}else r(c);h=i(c)}if(null!==h)var l=!0;else{var d=i(u);null!==d&&R(w,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,T=null,P=-1,A=5,C=-1;function I(){return!(e.unstable_now()-C<A)}function M(){if(null!==T){var t=e.unstable_now();C=t;var n=!0;try{n=T(!0,t)}finally{n?S():(E=!1,T=null)}}else E=!1}if("function"===typeof b)S=function(){b(M)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,O=k.port2;k.port1.onmessage=M,S=function(){O.postMessage(null)}}else S=function(){y(M,0)};function L(t){T=t,E||(E=!0,S())}function R(t,n){P=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,L(x))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return i(c)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,r,o){var s=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:d++,callback:r,priorityLevel:t,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(t.sortIndex=o,n(u,t),null===i(c)&&t===i(u)&&(m?(v(P),P=-1):m=!0,R(w,o-s))):(t.sortIndex=a,n(c,t),g||p||(g=!0,L(x))),t},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},296:(t,e,n)=>{"use strict";t.exports=n(813)},500:(t,e,n)=>{"use strict";var i=n(725),r="function"===typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,s=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,l=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,d=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,m="function"===typeof Symbol&&Symbol.iterator;function y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function _(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||v}function w(){}function x(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||v}_.prototype.isReactComponent={},_.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(y(85));this.updater.enqueueSetState(this,t,e,"setState")},_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},w.prototype=_.prototype;var S=x.prototype=new w;S.constructor=x,i(S,_.prototype),S.isPureReactComponent=!0;var E={current:null},T=Object.prototype.hasOwnProperty,P={key:!0,ref:!0,__self:!0,__source:!0};function A(t,e,n){var i,r={},s=null,a=null;if(null!=e)for(i in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)T.call(e,i)&&!P.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===r[i]&&(r[i]=l[i]);return{$$typeof:o,type:t,key:s,ref:a,props:r,_owner:E.current}}function C(t){return"object"===typeof t&&null!==t&&t.$$typeof===o}var I=/\/+/g,M=[];function k(t,e,n,i){if(M.length){var r=M.pop();return r.result=t,r.keyPrefix=e,r.func=n,r.context=i,r.count=0,r}return{result:t,keyPrefix:e,func:n,context:i,count:0}}function O(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>M.length&&M.push(t)}function L(t,e,n,i){var r=typeof t;"undefined"!==r&&"boolean"!==r||(t=null);var a=!1;if(null===t)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case o:case s:a=!0}}if(a)return n(i,t,""===e?"."+F(t,0):e),1;if(a=0,e=""===e?".":e+":",Array.isArray(t))for(var l=0;l<t.length;l++){var c=e+F(r=t[l],l);a+=L(r,c,n,i)}else if(null===t||"object"!==typeof t?c=null:c="function"===typeof(c=m&&t[m]||t["@@iterator"])?c:null,"function"===typeof c)for(t=c.call(t),l=0;!(r=t.next()).done;)a+=L(r=r.value,c=e+F(r,l++),n,i);else if("object"===r)throw n=""+t,Error(y(31,"[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return a}function R(t,e,n){return null==t?0:L(t,"",e,n)}function F(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function B(t,e){t.func.call(t.context,e,t.count++)}function N(t,e,n){var i=t.result,r=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?z(t,i,n,(function(t){return t})):null!=t&&(C(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,r+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(I,"$&/")+"/")+n)),i.push(t))}function z(t,e,n,i,r){var o="";null!=n&&(o=(""+n).replace(I,"$&/")+"/"),R(t,N,e=k(e,o,i,r)),O(e)}var D={current:null};function j(){var t=D.current;if(null===t)throw Error(y(321));return t}var U={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:E,IsSomeRendererActing:{current:!1},assign:i};e.Children={map:function(t,e,n){if(null==t)return t;var i=[];return z(t,i,null,e,n),i},forEach:function(t,e,n){if(null==t)return t;R(t,B,e=k(null,null,e,n)),O(e)},count:function(t){return R(t,(function(){return null}),null)},toArray:function(t){var e=[];return z(t,e,null,(function(t){return t})),e},only:function(t){if(!C(t))throw Error(y(143));return t}},e.Component=_,e.Fragment=a,e.Profiler=c,e.PureComponent=x,e.StrictMode=l,e.Suspense=f,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(y(267,t));var r=i({},t.props),s=t.key,a=t.ref,l=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,l=E.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)T.call(e,u)&&!P.hasOwnProperty(u)&&(r[u]=void 0===e[u]&&void 0!==c?c[u]:e[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:o,type:t.type,key:s,ref:a,props:r,_owner:l}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:d,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:t},t.Consumer=t},e.createElement=A,e.createFactory=function(t){var e=A.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:h,render:t}},e.isValidElement=C,e.lazy=function(t){return{$$typeof:g,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:p,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return j().useCallback(t,e)},e.useContext=function(t,e){return j().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return j().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return j().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return j().useLayoutEffect(t,e)},e.useMemo=function(t,e){return j().useMemo(t,e)},e.useReducer=function(t,e,n){return j().useReducer(t,e,n)},e.useRef=function(t){return j().useRef(t)},e.useState=function(t){return j().useState(t)},e.version="16.14.0"},291:(t,e,n)=>{"use strict";t.exports=n(500)}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var o=Object.create(null);n.r(o);var s={};t=t||[null,e({}),e([]),e(e)];for(var a=2&r&&i;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>s[t]=()=>i[t]));return s.default=()=>i,n.d(o,s),o}})(),n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t=n(791),e=n.t(t,2),i=n(164);function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===r(e)?e:String(e)}function s(t,e,n){return(e=o(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let a=1,l=1;class c{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){const{delay:e=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:r=1}=t,o=a++,s={time:0,delay:e,duration:n,rate:i,repeat:r};return this._setChannelTime(s,this.time),this.channels.set(o,s),o}removeChannel(t){this.channels.delete(t);for(const[e,n]of this.animations)n.channel===t&&this.detachAnimation(e)}isFinished(t){const e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}getTime(t){if(void 0===t)return this.time;const e=this.channels.get(t);return void 0===e?-1:e.time}setTime(t){this.time=Math.max(0,t);const e=this.channels.values();for(const i of e)this._setChannelTime(i,this.time);const n=this.animations.values();for(const i of n){const{animation:t,channel:e}=i;t.setTime(this.getTime(e))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,e){const n=l++;return this.animations.set(n,{animation:t,channel:e}),t.setTime(this.getTime(e)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,e){const n=e-t.delay;n>=t.duration*t.repeat?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}const u="Awaiting state",d="Matched. State transferred from previous layer",h="Initialized",f="Discarded. Awaiting garbage collection",p="No longer matched. Awaiting garbage collection",g="Finalized! Awaiting garbage collection",m=Symbol.for("component"),y=Symbol.for("propTypes"),v=Symbol.for("deprecatedProps"),b=Symbol.for("asyncPropDefaults"),_=Symbol.for("asyncPropOriginal"),w=Symbol.for("asyncPropResolved");function x(t){if("undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof process&&"object"===typeof process.versions&&Boolean(process.versions.electron))return!0;const e="object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function S(){return!("object"===typeof process&&"[object process]"===String(process)&&!process.browser)||x()}const E="undefined"!==typeof __VERSION__?__VERSION__:"untranspiled source";S();class T{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";s(this,"storage",void 0),s(this,"id",void 0),s(this,"config",void 0),this.storage=function(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(e){return null}}(n),this.id=t,this.config=e,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let t={};if(this.storage){const e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}function P(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));const o=t.width*n,s=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(r,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let A;function C(t){return"string"===typeof t?A[t.toUpperCase()]||A.WHITE:t}function I(t,e){if(!t)throw new Error(e||"Assertion failed")}!function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(A||(A={}));const M={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof n.g&&n.g,document:"undefined"!==typeof document&&document,process:"object"===typeof process&&process},k=M.window||M.self||M.global,O=M.process||{};function L(){let t;var e,n;if(S&&"performance"in k)t=null===k||void 0===k||null===(e=k.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in O){var i;const e=null===O||void 0===O||null===(i=O.hrtime)||void 0===i?void 0:i.call(O);t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}const R={debug:S&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},F={enabled:!0,level:0};function B(){}const N={},z={once:!0};class D{constructor(){let{id:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};s(this,"id",void 0),s(this,"VERSION",E),s(this,"_startTs",L()),s(this,"_deltaTs",L()),s(this,"_storage",void 0),s(this,"userData",{}),s(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this.userData={},this._storage=new T("__probe-".concat(this.id,"__"),F),this.timeStamp("".concat(this.id," started")),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n);for(const r of i)"function"===typeof t[r]&&(e.find((t=>r===t))||(t[r]=t[r].bind(t)))}(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((L()-this._startTs).toPrecision(10))}getDelta(){return Number((L()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,e){this._storage.setConfiguration({[t]:e})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,e){I(t,e)}warn(t){return this._getLogFunction(0,t,R.warn,arguments,z)}error(t){return this._getLogFunction(0,t,R.error,arguments)}deprecated(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}removed(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}probe(t,e){return this._getLogFunction(t,e,R.log,arguments,{time:!0,once:!0})}log(t,e){return this._getLogFunction(t,e,R.debug,arguments)}info(t,e){return this._getLogFunction(t,e,console.info,arguments)}once(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this._getLogFunction(t,e,R.debug||R.info,arguments,z)}table(t,e,n){return e?this._getLogFunction(t,e,console.table||B,n&&[n],{tag:V(e)}):B}image(t){let{logLevel:e,priority:n,image:i,message:r="",scale:o=1}=t;return this._shouldLog(e||n)?S?function(t){let{image:e,message:n="",scale:i=1}=t;if("string"===typeof e){const t=new Image;return t.onload=()=>{const e=P(t,n,i);console.log(...e)},t.src=e,B}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...P(e,n,i)),B;if("canvas"===r.toLowerCase()){const t=new Image;return t.onload=()=>console.log(...P(t,n,i)),t.src=e.toDataURL(),B}return B}({image:i,message:r,scale:o}):function(t){let{image:e,message:n="",scale:i=1}=t;return console.warn("removed"),B}({image:i,message:r,scale:o}):B}time(t,e){return this._getLogFunction(t,e,console.time?console.time:console.info)}timeEnd(t,e){return this._getLogFunction(t,e,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,e){return this._getLogFunction(t,e,console.timeStamp||B)}group(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const i=U({logLevel:t,message:e,opts:n}),{collapsed:r}=n;return i.method=(r?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||B)}withGroup(t,e,n){this.group(t,e)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=j(t)}_getLogFunction(t,e,n,i,r){if(this._shouldLog(t)){r=U({logLevel:t,message:e,args:i,opts:r}),I(n=n||r.method),r.total=this.getTotal(),r.delta=this.getDelta(),this._deltaTs=L();const o=r.tag||r.message;if(r.once){if(N[o])return B;N[o]=L()}return e=function(t,e,n){if("string"===typeof e){const i=n.time?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=function(t,e,n){return S||"string"!==typeof t||(e&&(e=C(e),t="\x1b[".concat(e,"m").concat(t,"\x1b[39m")),n&&(e=C(n),t="\x1b[".concat(n+10,"m").concat(t,"\x1b[49m"))),t}(e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,r.message,r),n.bind(console,e,...r.args)}return B}}function j(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return I(Number.isFinite(e)&&e>=0),e}function U(t){const{logLevel:e,message:n}=t;t.logLevel=j(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"===typeof t.message&&(t.message=t.message());const r=typeof t.message;return I("string"===r||"object"===r),Object.assign(t,{args:i},t.opts)}function V(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}s(D,"VERSION",E);const W=new D({id:"deck"});let H={};function G(t){H=t}function q(t,e,n,i){W.level>0&&H[t]&&H[t].call(null,e,n,i)}function Y(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;return Array.isArray(t)?X(t,e,[]):e(t)?[t]:[]}function X(t,e,n){let i=-1;for(;++i<t.length;){const r=t[i];Array.isArray(r)?X(r,e,n):e(r)&&n.push(r)}return n}function K(t){let{target:e,source:n,start:i=0,count:r=1}=t;const o=n.length,s=r*o;let a=0;for(let l=i;a<o;a++)e[l++]=n[a];for(;a<s;)a<s-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+s-a),a=s);return e}function Z(){let t;if("undefined"!==typeof window&&window.performance)t=window.performance.now();else if("undefined"!==typeof process&&process.hrtime){const e=process.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}class ${constructor(t,e){s(this,"name",void 0),s(this,"type",void 0),s(this,"sampleSize",1),s(this,"time",void 0),s(this,"count",void 0),s(this,"samples",void 0),s(this,"lastTiming",void 0),s(this,"lastSampleTime",void 0),s(this,"lastSampleCount",void 0),s(this,"_count",0),s(this,"_time",0),s(this,"_samples",0),s(this,"_startTime",0),s(this,"_timerPending",!1),this.name=t,this.type=e,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Z(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Z()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Q{constructor(t){s(this,"id",void 0),s(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const e in this.stats)t(this.stats[e])}getTable(){const t={};return this.forEach((e=>{t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>this._getOrCreate(t)))}_getOrCreate(t){if(!t||!t.name)return null;const{name:e,type:n}=t;return this.stats[e]||(this.stats[e]=t instanceof $?t:new $(e,n)),this.stats[e]}}const J=t=>"boolean"===typeof t,tt=t=>"function"===typeof t,et=t=>null!==t&&"object"===typeof t,nt=t=>et(t)&&t.constructor==={}.constructor,it=t=>t&&"function"===typeof t[Symbol.iterator],rt=t=>t&&"function"===typeof t[Symbol.asyncIterator],ot=t=>"undefined"!==typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,st=t=>"undefined"!==typeof Blob&&t instanceof Blob,at=t=>t&&"object"===typeof t&&t.isBuffer,lt=t=>(t=>"undefined"!==typeof ReadableStream&&t instanceof ReadableStream||et(t)&&tt(t.tee)&&tt(t.cancel)&&tt(t.getReader))(t)||(t=>et(t)&&tt(t.read)&&tt(t.pipe)&&J(t.readable))(t);function ct(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function ut(t){var e;if(!t)return!1;Array.isArray(t)&&(t=t[0]);return Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions)}function dt(t){var e,n;let i;return ct(t,"null loader"),ct(ut(t),"invalid loader"),Array.isArray(t)&&(i=t[1],t=t[0],t={...t,options:{...t.options,...i}}),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(n=t)&&void 0!==n&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}let ht="";const ft={};const pt=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,gt=/^([-\w.]+\/[-\w.+]+)/;function mt(t){const e=pt.exec(t);return e?e[1]:""}const yt=/\?.*/;function vt(t){return t.replace(yt,"")}function bt(t){if(ot(t)){return t.url}if(st(t)){return t.name||""}return"string"===typeof t?t:""}function _t(t){if(ot(t)){const e=t,n=e.headers.get("content-type")||"",i=vt(e.url);return function(t){const e=gt.exec(t);return e?e[1]:t}(n)||mt(i)}if(st(t)){return t.type||""}return"string"===typeof t?mt(t):""}async function wt(t){if(ot(t))return t;const e={},n=function(t){if(ot(t))return t.headers["content-length"]||-1;if(st(t))return t.size;return"string"===typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}(t);n>=0&&(e["content-length"]=String(n));const i=bt(t),r=_t(t);r&&(e["content-type"]=r);const o=await async function(t){const e=5;if("string"===typeof t)return"data:,".concat(t.slice(0,e));if(t instanceof Blob){const e=t.slice(0,5);return await new Promise((t=>{const n=new FileReader;n.onload=e=>{var n;return t(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.result)},n.readAsDataURL(e)}))}if(t instanceof ArrayBuffer){const n=function(t){let e="";const n=new Uint8Array(t);for(let i=0;i<n.byteLength;i++)e+=String.fromCharCode(n[i]);return btoa(e)}(t.slice(0,e));return"data:base64,".concat(n)}return null}(t);o&&(e["x-first-bytes"]=o),"string"===typeof t&&(t=(new TextEncoder).encode(t));const s=new Response(t,{headers:e});return Object.defineProperty(s,"url",{value:i}),s}async function xt(t,e){if("string"===typeof t){t=function(t){for(const e in ft)if(t.startsWith(e)){const n=ft[e];t=t.replace(e,n)}return t.startsWith("http://")||t.startsWith("https://")||(t="".concat(ht).concat(t)),t}(t);let n=e;return null!==e&&void 0!==e&&e.fetch&&"function"!==typeof(null===e||void 0===e?void 0:e.fetch)&&(n=e.fetch),await fetch(t,n)}return await wt(t)}function St(){return!("object"===typeof process&&"[object process]"===String(process)&&!process.browser)||function(t){if("undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof process&&"object"===typeof process.versions&&Boolean(process.versions.electron))return!0;const e="object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}()}const Et="undefined"!==typeof __VERSION__?__VERSION__:"untranspiled source";St();class Tt{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";this.storage=void 0,this.id=void 0,this.config=void 0,this.storage=function(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(e){return null}}(n),this.id=t,this.config=e,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let t={};if(this.storage){const e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}function Pt(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));const o=t.width*n,s=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(r,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let At;!function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(At||(At={}));const Ct=10;function It(t){return"string"!==typeof t?t:(t=t.toUpperCase(),At[t]||At.WHITE)}function Mt(t,e){if(!t)throw new Error(e||"Assertion failed")}globalThis.self||globalThis.window||globalThis.global;const kt=globalThis.window||globalThis.self||globalThis.global,Ot=(globalThis.document,globalThis.process||{});globalThis.console,globalThis.navigator;function Lt(){let t;var e,n;if(St()&&kt.performance)t=null===kt||void 0===kt||null===(e=kt.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in Ot){var i;const e=null===Ot||void 0===Ot||null===(i=Ot.hrtime)||void 0===i?void 0:i.call(Ot);t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}const Rt={debug:St()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Ft={enabled:!0,level:0};function Bt(){}const Nt={},zt={once:!0};class Dt{constructor(){let{id:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};this.id=void 0,this.VERSION=Et,this._startTs=Lt(),this._deltaTs=Lt(),this._storage=void 0,this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=t,this.userData={},this._storage=new Tt("__probe-".concat(this.id,"__"),Ft),this.timeStamp("".concat(this.id," started")),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n),r=t;for(const o of i){const n=r[o];"function"===typeof n&&(e.find((t=>o===t))||(r[o]=n.bind(t)))}}(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Lt()-this._startTs).toPrecision(10))}getDelta(){return Number((Lt()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,e){this._storage.setConfiguration({[t]:e})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,e){Mt(t,e)}warn(t){return this._getLogFunction(0,t,Rt.warn,arguments,zt)}error(t){return this._getLogFunction(0,t,Rt.error,arguments)}deprecated(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}removed(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}probe(t,e){return this._getLogFunction(t,e,Rt.log,arguments,{time:!0,once:!0})}log(t,e){return this._getLogFunction(t,e,Rt.debug,arguments)}info(t,e){return this._getLogFunction(t,e,console.info,arguments)}once(t,e){return this._getLogFunction(t,e,Rt.debug||Rt.info,arguments,zt)}table(t,e,n){return e?this._getLogFunction(t,e,console.table||Bt,n&&[n],{tag:Vt(e)}):Bt}image(t){let{logLevel:e,priority:n,image:i,message:r="",scale:o=1}=t;return this._shouldLog(e||n)?St()?function(t){let{image:e,message:n="",scale:i=1}=t;if("string"===typeof e){const t=new Image;return t.onload=()=>{const e=Pt(t,n,i);console.log(...e)},t.src=e,Bt}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...Pt(e,n,i)),Bt;if("canvas"===r.toLowerCase()){const t=new Image;return t.onload=()=>console.log(...Pt(t,n,i)),t.src=e.toDataURL(),Bt}return Bt}({image:i,message:r,scale:o}):function(t){let{image:e,message:n="",scale:i=1}=t;return console.warn("removed"),Bt}({image:i,message:r,scale:o}):Bt}time(t,e){return this._getLogFunction(t,e,console.time?console.time:console.info)}timeEnd(t,e){return this._getLogFunction(t,e,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,e){return this._getLogFunction(t,e,console.timeStamp||Bt)}group(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const i=Ut({logLevel:t,message:e,opts:n}),{collapsed:r}=n;return i.method=(r?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||Bt)}withGroup(t,e,n){this.group(t,e)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=jt(t)}_getLogFunction(t,e,n,i,r){if(this._shouldLog(t)){r=Ut({logLevel:t,message:e,args:i,opts:r}),Mt(n=n||r.method),r.total=this.getTotal(),r.delta=this.getDelta(),this._deltaTs=Lt();const o=r.tag||r.message;if(r.once&&o){if(Nt[o])return Bt;Nt[o]=Lt()}return e=function(t,e,n){if("string"===typeof e){const i=n.time?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=function(t,e,n){if(!St&&"string"===typeof t){if(e){const n=It(e);t="\x1b[".concat(n,"m").concat(t,"\x1b[39m")}if(n){const e=It(n);t="\x1b[".concat(e+Ct,"m").concat(t,"\x1b[49m")}}return t}(e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,r.message,r),n.bind(console,e,...r.args)}return Bt}}function jt(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Mt(Number.isFinite(e)&&e>=0),e}function Ut(t){const{logLevel:e,message:n}=t;t.logLevel=jt(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"===typeof t.message&&(t.message=t.message());const r=typeof t.message;return Mt("string"===r||"object"===r),Object.assign(t,{args:i},t.opts)}function Vt(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}Dt.VERSION=Et;const Wt=new Dt({id:"loaders.gl"});class Ht{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}"undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof n.g&&n.g,"undefined"!==typeof document&&document;const Gt=Boolean("object"!==typeof process||"[object process]"!==String(process)||process.browser),qt="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version),Yt=(qt&&parseFloat(qt[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){s(this,"console",void 0),this.console=console}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.log.bind(this.console,...e)}info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.info.bind(this.console,...e)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.warn.bind(this.console,...e)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Gt,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),Xt={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function Kt(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const Zt=()=>{const t=Kt();return t.globalOptions=t.globalOptions||{...Yt},t.globalOptions};function $t(t,e,n,i){return n=n||[],function(t,e){Qt(t,null,Yt,Xt,e);for(const n of e){const i=t&&t[n.id]||{},r=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};Qt(i,n.id,r,o,e)}}(t,n=Array.isArray(n)?n:[n]),te(e,t,i)}function Qt(t,e,n,i,r){const o=e||"Top level",s=e?"".concat(e,"."):"";for(const a in t){const l=!e&&et(t[a]);if(!(a in n)&&!("baseUri"===a&&!e)&&!("workerUrl"===a&&e))if(a in i)Wt.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(i[a],"'"))();else if(!l){const t=Jt(a,r);Wt.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(t))()}}}function Jt(t,e){const n=t.toLowerCase();let i="";for(const r of e)for(const e in r.options){if(t===e)return"Did you mean '".concat(r.id,".").concat(e,"'?");const o=e.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(i=i||"Did you mean '".concat(r.id,".").concat(e,"'?"))}return i}function te(t,e,n){const i={...t.options||{}};return function(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(i,n),null===i.log&&(i.log=new Ht),ee(i,Zt()),ee(i,e),i}function ee(t,e){for(const n in e)if(n in e){const i=e[n];nt(i)&&nt(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function ne(t,e){const n=Zt(),i=t||n;return"function"===typeof i.fetch?i.fetch:et(i.fetch)?t=>xt(t,i):null!==e&&void 0!==e&&e.fetch?null===e||void 0===e?void 0:e.fetch:xt}function ie(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const re="3.4.14";"undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof n.g&&n.g,"undefined"!==typeof document&&document;const oe="object"!==typeof process||"[object process]"!==String(process)||process.browser,se="undefined"!==typeof window&&"undefined"!==typeof window.orientation,ae="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version);ae&&parseFloat(ae[1]);class le{terminate(){}}const ce=new Map;function ue(t){ie(t.source&&!t.url||!t.source&&t.url);let e=ce.get(t.source||t.url);return e||(t.url&&(e=function(t){if(!t.startsWith("http"))return t;return de((e=t,"try {\n  importScripts('".concat(e,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")));var e}(t.url),ce.set(t.url,e)),t.source&&(e=de(t.source),ce.set(t.source,e))),ie(e),e}function de(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function he(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const i=n||new Set;if(t){if(fe(t))i.add(t);else if(fe(t.buffer))i.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"===typeof t)for(const r in t)he(t[r],e,i)}else;return void 0===n?Array.from(i):[]}function fe(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!==typeof MessagePort&&t instanceof MessagePort||("undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}const pe=()=>{};class ge{static isSupported(){return"undefined"!==typeof Worker&&oe||"undefined"!==typeof le&&!oe}constructor(t){s(this,"name",void 0),s(this,"source",void 0),s(this,"url",void 0),s(this,"terminated",!1),s(this,"worker",void 0),s(this,"onMessage",void 0),s(this,"onError",void 0),s(this,"_loadableURL","");const{name:e,source:n,url:i}=t;ie(n||i),this.name=e,this.source=n,this.url=i,this.onMessage=pe,this.onError=t=>console.log(t),this.worker=oe?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=pe,this.onError=pe,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,e){e=e||he(t),this.worker.postMessage(t,e)}_getErrorFromErrorEvent(t){let e="Failed to load ";return e+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(e+="".concat(t.message," in ")),t.lineno&&(e+=":".concat(t.lineno,":").concat(t.colno)),new Error(e)}_createBrowserWorker(){this._loadableURL=ue({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},t.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},t.onmessageerror=t=>console.error(t),t}_createNodeWorker(){let t;if(this.url){const e=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new le(e,{eval:!1})}else{if(!this.source)throw new Error("no worker");t=new le(this.source,{eval:!0})}return t.on("message",(t=>{this.onMessage(t)})),t.on("error",(t=>{this.onError(t)})),t.on("exit",(t=>{})),t}}class me{constructor(t,e){s(this,"name",void 0),s(this,"workerThread",void 0),s(this,"isRunning",!0),s(this,"result",void 0),s(this,"_resolve",(()=>{})),s(this,"_reject",(()=>{})),this.name=t,this.workerThread=e,this.result=new Promise(((t,e)=>{this._resolve=t,this._reject=e}))}postMessage(t,e){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:e})}done(t){ie(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){ie(this.isRunning),this.isRunning=!1,this._reject(t)}}class ye{static isSupported(){return ge.isSupported()}constructor(t){s(this,"name","unnamed"),s(this,"source",void 0),s(this,"url",void 0),s(this,"maxConcurrency",1),s(this,"maxMobileConcurrency",1),s(this,"onDebug",(()=>{})),s(this,"reuseWorkers",!0),s(this,"props",{}),s(this,"jobQueue",[]),s(this,"idleQueue",[]),s(this,"count",0),s(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach((t=>t.destroy())),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)}async startJob(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t,e,n)=>t.done(n),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(t,e)=>t.error(e);const i=new Promise((i=>(this.jobQueue.push({name:t,onMessage:e,onError:n,onStart:i}),this)));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const e=this.jobQueue.shift();if(e){this.onDebug({message:"Starting job",name:e.name,workerThread:t,backlog:this.jobQueue.length});const n=new me(e.name,t);t.onMessage=t=>e.onMessage(n,t.type,t.payload),t.onError=t=>e.onError(n,t),e.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new ge({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return se?this.maxMobileConcurrency:this.maxConcurrency}}const ve={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class be{static isSupported(){return ge.isSupported()}static getWorkerFarm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return be._workerFarm=be._workerFarm||new be({}),be._workerFarm.setProps(t),be._workerFarm}constructor(t){s(this,"props",void 0),s(this,"workerPools",new Map),this.props={...ve},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const e of this.workerPools.values())e.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:e,source:n,url:i}=t;let r=this.workerPools.get(e);return r||(r=new ye({name:e,source:n,url:i}),r.setProps(this._getWorkerPoolProps()),this.workerPools.set(e,r)),r}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}s(be,"_workerFarm",void 0);const _e="latest";async function we(t,e,n,i,r){const o=t.id,s=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e[t.id]||{},i="".concat(t.id,"-worker.js");let r=n.workerUrl;if(r||"compression"!==t.id||(r=e.workerUrl),"test"===e._workerType&&(r="modules/".concat(t.module,"/dist/").concat(i)),!r){let e=t.version;"latest"===e&&(e=_e);const n=e?"@".concat(e):"";r="https://unpkg.com/@loaders.gl/".concat(t.module).concat(n,"/dist/").concat(i)}return ie(r),r}(t,n),a=be.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));const l=await a.startJob("process-on-worker",xe.bind(null,r));l.postMessage("process",{input:e,options:n,context:i});const c=await l.result;return await c.result}async function xe(t,e,n,i){switch(n){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:o,input:s,options:a}=i;try{const n=await t(s,a);e.postMessage("done",{id:o,result:n})}catch(r){const t=r instanceof Error?r.message:"unknown error";e.postMessage("error",{id:o,error:t})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}async function Se(t){const e=[];for await(const n of t)e.push(n);return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=e.map((t=>t instanceof ArrayBuffer?new Uint8Array(t):t)),r=i.reduce(((t,e)=>t+e.byteLength),0),o=new Uint8Array(r);let s=0;for(const a of i)o.set(a,s),s+=a.byteLength;return o.buffer}(...e)}const Ee=262144;const Te=262144;const Pe=1048576;function Ae(t){if((e=t)&&"object"===typeof e&&e.isBuffer)return t;var e;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"===typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"===typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function Ce(t,e){return Gt?async function*(t,e){const n=t.getReader();let i;try{for(;;){const t=i||n.read();null!==e&&void 0!==e&&e._streamReadAhead&&(i=n.read());const{done:r,value:o}=await t;if(r)return;yield Ae(o)}}catch(r){n.releaseLock()}}(t,e):async function*(t,e){for await(const n of t)yield Ae(n)}(t)}function Ie(t,e){if("string"===typeof t)return function*(t,e){const n=(null===e||void 0===e?void 0:e.chunkSize)||Ee;let i=0;const r=new TextEncoder;for(;i<t.length;){const e=Math.min(t.length-i,n),o=t.slice(i,i+e);i+=e,yield r.encode(o)}}(t,e);if(t instanceof ArrayBuffer)return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const{chunkSize:n=Te}=e;let i=0;for(;i<t.byteLength;){const e=Math.min(t.byteLength-i,n),r=new ArrayBuffer(e),o=new Uint8Array(t,i,e);new Uint8Array(r).set(o),i+=e,yield r}}()}(t,e);if(st(t))return async function*(t,e){const n=(null===e||void 0===e?void 0:e.chunkSize)||Pe;let i=0;for(;i<t.size;){const e=i+n,r=await t.slice(i,e).arrayBuffer();i=e,yield r}}(t,e);if(lt(t))return Ce(t,e);if(ot(t)){return Ce(t.body,e)}throw new Error("makeIterator")}const Me="Cannot convert supplied data type";async function ke(t,e,n){const i=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"===typeof t||i)return function(t,e,n){if(e.text&&"string"===typeof t)return t;if(at(t)&&(t=t.buffer),t instanceof ArrayBuffer){const n=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let n=t.buffer;const i=t.byteLength||t.length;return 0===t.byteOffset&&i===n.byteLength||(n=n.slice(t.byteOffset,t.byteOffset+i)),n}throw new Error(Me)}(t,e);if(st(t)&&(t=await wt(t)),ot(t)){const n=t;return await async function(t){if(!t.ok){const e=await async function(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let i=t.statusText;n.includes("application/json")&&(i+=" ".concat(await t.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch(n){}return e}(t);throw new Error(e)}}(n),e.binary?await n.arrayBuffer():await n.text()}if(lt(t)&&(t=Ie(t,n)),it(t)||rt(t))return Se(t);throw new Error(Me)}function Oe(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function Le(t,e,n){if(n)return n;const i={fetch:ne(e,t),...t};if(i.url){const t=vt(i.url);i.baseUrl=t,i.queryString=function(t){const e=t.match(yt);return e&&e[0]}(i.url),i.filename=Oe(t),i.baseUrl=function(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}(t)}return Array.isArray(i.loaders)||(i.loaders=null),i}const Re=new Dt({id:"loaders.gl"}),Fe=()=>{const t=Kt();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};const Be=/\.([^.]+)$/;function Ne(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!ze(t))return null;if(e&&!Array.isArray(e))return dt(e);let r=[];e&&(r=r.concat(e)),null!==n&&void 0!==n&&n.ignoreRegisteredLoaders||r.push(...Fe()),function(t){for(const e of t)dt(e)}(r);const o=function(t,e,n,i){const r=bt(t),o=_t(t),s=vt(r)||(null===i||void 0===i?void 0:i.url);let a=null,l="";null!==n&&void 0!==n&&n.mimeType&&(a=je(e,null===n||void 0===n?void 0:n.mimeType),l="match forced by supplied MIME type ".concat(null===n||void 0===n?void 0:n.mimeType));var c;a=a||function(t,e){const n=e&&Be.exec(e),i=n&&n[1];return i?function(t,e){e=e.toLowerCase();for(const n of t)for(const t of n.extensions)if(t.toLowerCase()===e)return n;return null}(t,i):null}(e,s),l=l||(a?"matched url ".concat(s):""),a=a||je(e,o),l=l||(a?"matched MIME type ".concat(o):""),a=a||function(t,e){if(!e)return null;for(const n of t)if("string"===typeof e){if(Ue(e,n))return n}else if(ArrayBuffer.isView(e)){if(Ve(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer){if(Ve(e,0,n))return n}return null}(e,t),l=l||(a?"matched initial data ".concat(We(t)):""),a=a||je(e,null===n||void 0===n?void 0:n.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(o):""),l&&Re.log(1,"selectLoader selected ".concat(null===(c=a)||void 0===c?void 0:c.name,": ").concat(l,"."));return a}(t,r,n,i);if(!o&&(null===n||void 0===n||!n.nothrow))throw new Error(De(t));return o}function ze(t){return!(t instanceof Response&&204===t.status)}function De(t){const e=bt(t),n=_t(t);let i="No valid loader found (";i+=e?"".concat(Oe(e),", "):"no url provided, ",i+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const r=t?We(t):"";return i+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",i+=")",i}function je(t,e){for(const n of t){if(n.mimeTypes&&n.mimeTypes.includes(e))return n;if(e==="application/x.".concat(n.id))return n}return null}function Ue(t,e){if(e.testText)return e.testText(t);return(Array.isArray(e.tests)?e.tests:[e.tests]).some((e=>t.startsWith(e)))}function Ve(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((i=>function(t,e,n,i){if(i instanceof ArrayBuffer)return function(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const i=new Uint8Array(t),r=new Uint8Array(e);for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(i,t,i.byteLength);switch(typeof i){case"function":return i(t,n);case"string":return i===He(t,e,i.length);default:return!1}}(t,e,n,i)))}function We(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"===typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return He(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer){return He(t,0,e)}return""}function He(t,e,n){if(t.byteLength<e+n)return"";const i=new DataView(t);let r="";for(let o=0;o<n;o++)r+=String.fromCharCode(i.getUint8(e+o));return r}async function Ge(t,e,n,i){ie(!i||"object"===typeof i),!e||Array.isArray(e)||ut(e)||(i=void 0,n=e,e=void 0),n=n||{};const r=bt(t=await t),o=function(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const t=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...t]:t}return n&&n.length?n:null}(e,i),s=await async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!ze(t))return null;let r=Ne(t,e,{...n,nothrow:!0},i);if(r)return r;if(st(t)&&(r=Ne(t=await t.slice(0,10).arrayBuffer(),e,n,i)),!r&&(null===n||void 0===n||!n.nothrow))throw new Error(De(t));return r}(t,o,n);return s?(i=Le({url:r,parse:Ge,loaders:o},n=$t(n,s,o,r),i||null),await async function(t,e,n,i){if(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:re;ie(t,"no worker provided");const n=t.version}(t),ot(e)){const t=e,{ok:n,redirected:r,status:o,statusText:s,type:a,url:l}=t,c=Object.fromEntries(t.headers.entries());i.response={headers:c,ok:n,redirected:r,status:o,statusText:s,type:a,url:l}}if(e=await ke(e,t,n),t.parseTextSync&&"string"===typeof e)return n.dataType="text",t.parseTextSync(e,n,i,t);if(function(t,e){return!!be.isSupported()&&!!(oe||null!==e&&void 0!==e&&e._nodeWorkers)&&t.worker&&(null===e||void 0===e?void 0:e.worker)}(t,n))return await we(t,e,n,i,Ge);if(t.parseText&&"string"===typeof e)return await t.parseText(e,n,i,t);if(t.parse)return await t.parse(e,n,i,t);throw ie(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}(s,t,n,i)):null}async function qe(t,e,n,i){Array.isArray(e)||ut(e)||(void 0,n=e,e=void 0);const r=ne(n);let o=t;return"string"===typeof t&&(o=await r(t)),st(t)&&(o=await r(t)),await Ge(o,e,n)}class Ye{constructor(t,e,n){s(this,"id",void 0),s(this,"context",void 0),s(this,"isLoaded",void 0),s(this,"persistent",void 0),s(this,"_loadCount",0),s(this,"_subscribers",new Set),s(this,"_data",void 0),s(this,"_loader",void 0),s(this,"_error",void 0),s(this,"_content",void 0),this.id=t,this.context=n,this.setData(e)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((()=>this.getData()))}setData(t,e){if(t===this._data&&!e)return;this._data=t;const n=++this._loadCount;let i=t;"string"===typeof t&&(i=qe(t)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then((t=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=t)})).catch((t=>{this._loadCount===n&&(this.isLoaded=!0,this._error=t||!0)}))):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const r of this._subscribers)r.onChange(this.getData())}}class Xe{constructor(t){let{gl:e,protocol:n}=t;s(this,"protocol",void 0),s(this,"_context",void 0),s(this,"_resources",void 0),s(this,"_consumers",void 0),s(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return!!t.startsWith(this.protocol)||t in this._resources}add(t){let{resourceId:e,data:n,forceUpdate:i=!1,persistent:r=!0}=t,o=this._resources[e];o?o.setData(n,i):(o=new Ye(e,n,this._context),this._resources[e]=o),o.persistent=r}remove(t){const e=this._resources[t];e&&(e.delete(),delete this._resources[t])}unsubscribe(t){let{consumerId:e}=t;const n=this._consumers[e];if(n){for(const t in n){const e=n[t],i=this._resources[e.resourceId];i&&i.unsubscribe(e)}delete this._consumers[e],this.prune()}}subscribe(t){let{resourceId:e,onChange:n,consumerId:i,requestId:r="default"}=t;const{_resources:o,protocol:s}=this;e.startsWith(s)&&(e=e.replace(s,""),o[e]||this.add({resourceId:e,data:null,persistent:!1}));const a=o[e];if(this._track(i,r,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout((()=>this._prune()),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,e,n,i){const r=this._consumers,o=r[t]=r[t]||{},s=o[e]||{},a=s.resourceId&&this._resources[s.resourceId];a&&(a.unsubscribe(s),this.prune()),n&&(o[e]=s,s.onChange=i,s.resourceId=n.id,n.subscribe(s))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const e=this._resources[t];e.persistent||e.inUse()||(e.delete(),delete this._resources[t])}}}const Ke=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,"_pool",[]),s(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,e,n){let{size:i=1,type:r,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:l}=n;const c=r||t&&t.constructor||Float32Array,u=e*i+o;if(ArrayBuffer.isView(t)){if(u<=t.length)return t;if(u*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new c(t.buffer,0,u)}let d=1/0;l&&(d=l*i+o);const h=this._allocate(c,u,a,d);return t&&s?h.set(t):a||h.fill(0,0,4),this._release(t),h}release(t){this._release(t)}_allocate(t,e,n,i){let r=Math.max(Math.ceil(e*this.opts.overAlloc),1);r>i&&(r=i);const o=this._pool,s=t.BYTES_PER_ELEMENT*r,a=o.findIndex((t=>t.byteLength>=s));if(a>=0){const e=new t(o.splice(a,1)[0],0,r);return n&&e.fill(0),e}return new t(r)}_release(t){if(!ArrayBuffer.isView(t))return;const e=this._pool,{buffer:n}=t,{byteLength:i}=n,r=e.findIndex((t=>t.byteLength>=i));r<0?e.push(n):(r>0||e.length<this.opts.poolSize)&&e.splice(r,0,n),e.length>this.opts.poolSize&&e.shift()}},Ze=(Math.PI,Math.PI,{EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0});function $e(t){let{precision:e=Ze.precision}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=function(t){return Math.round(t/Ze.EPSILON)*Ze.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function Qe(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Je(t,e,n){return nn(t,(t=>Math.max(e,Math.min(n,t))))}function tn(t,e,n){return Qe(t)?t.map(((t,i)=>tn(t,e[i],n))):n*e+(1-n)*t}function en(t,e,n){const i=Ze.EPSILON;n&&(Ze.EPSILON=n);try{if(t===e)return!0;if(Qe(t)&&Qe(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!en(t[n],e[n]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"===typeof t&&"number"===typeof e&&Math.abs(t-e)<=Ze.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{Ze.EPSILON=i}}function nn(t,e,n){if(Qe(t)){const i=t;n=n||function(t){return t.clone?t.clone():new Array(t.length)}(i);for(let r=0;r<n.length&&r<i.length;++r)n[r]=e(t[r],r,n);return n}return e(t)}class rn extends(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:Qe(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Ze)}formatString(t){let e="";for(let n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+$e(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!en(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,n){if(void 0===n)return this.lerp(this,t,e);for(let i=0;i<this.ELEMENTS;++i){const r=t[i];this[i]=r+n*(e[i]-r)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const i of e)for(let t=0;t<this.ELEMENTS;++t)this[t]+=i[t];return this.check()}subtract(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const i of e)for(let t=0;t<this.ELEMENTS;++t)this[t]-=i[t];return this.check()}scale(t){if("number"===typeof t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;else for(let e=0;e<this.ELEMENTS&&e<t.length;++e)this[e]*=t[e];return this.check()}multiplyByScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}check(){if(Ze.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}get elements(){return this}}function on(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function sn(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(Ze.debug&&!function(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}function an(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}class ln extends rn{get x(){return this[0]}set x(t){this[0]=on(t)}get y(){return this[1]}set y(t){this[1]=on(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let n=0;n<this.ELEMENTS;++n){const i=this[n]-t[n];e+=i*i}return on(e)}dot(t){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return on(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const i of e)for(let t=0;t<this.ELEMENTS;++t)this[t]*=i[t];return this.check()}divide(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const i of e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=i[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return an(t>=0&&t<this.ELEMENTS,"index is out of range"),on(this[t])}setComponent(t,e){return an(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}var cn=1e-6,un="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function dn(){var t=new un(3);return un!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function hn(t,e,n){var i=new un(3);return i[0]=t,i[1]=e,i[2]=n,i}function fn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function pn(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],l=n[2];return t[0]=r*l-o*a,t[1]=o*s-i*l,t[2]=i*a-r*s,t}function gn(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[3]*i+n[7]*r+n[11]*o+n[15];return s=s||1,t[0]=(n[0]*i+n[4]*r+n[8]*o+n[12])/s,t[1]=(n[1]*i+n[5]*r+n[9]*o+n[13])/s,t[2]=(n[2]*i+n[6]*r+n[10]*o+n[14])/s,t}function mn(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t}function yn(t,e,n){var i=n[0],r=n[1],o=n[2],s=n[3],a=e[0],l=e[1],c=e[2],u=r*c-o*l,d=o*a-i*c,h=i*l-r*a,f=r*h-o*d,p=o*u-i*h,g=i*d-r*u,m=2*s;return u*=m,d*=m,h*=m,f*=2,p*=2,g*=2,t[0]=a+u+f,t[1]=l+d+p,t[2]=c+h+g,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var vn=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},bn=function(t){var e=t[0],n=t[1],i=t[2];return Math.hypot(e,n,i)},_n=function(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i};!function(){var t=dn()}();function wn(t,e,n){const i=e[0],r=e[1],o=e[2],s=n[3]*i+n[7]*r+n[11]*o||1;return t[0]=(n[0]*i+n[4]*r+n[8]*o)/s,t[1]=(n[1]*i+n[5]*r+n[9]*o)/s,t[2]=(n[2]*i+n[6]*r+n[10]*o)/s,t}function xn(t,e,n){const i=e[0],r=e[1],o=e[2];return t[0]=n[0]*i+n[3]*r+n[6]*o,t[1]=n[1]*i+n[4]*r+n[7]*o,t[2]=n[2]*i+n[5]*r+n[8]*o,t[3]=e[3],t}const Sn=[0,0,0];let En;class Tn extends ln{static get ZERO(){return En||(En=new Tn(0,0,0),Object.freeze(En)),En}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(-0,-0,-0),1===arguments.length&&Qe(t)?this.copy(t):(Ze.debug&&(on(t),on(e),on(n)),this[0]=t,this[1]=e,this[2]=n)}set(t,e,n){return this[0]=t,this[1]=e,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return Ze.debug&&(on(t.x),on(t.y),on(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=on(t)}angle(t){return function(t,e){var n=t[0],i=t[1],r=t[2],o=e[0],s=e[1],a=e[2],l=Math.sqrt(n*n+i*i+r*r)*Math.sqrt(o*o+s*s+a*a),c=l&&fn(t,e)/l;return Math.acos(Math.min(Math.max(c,-1),1))}(this,t)}cross(t){return pn(this,this,t),this.check()}rotateX(t){let{radians:e,origin:n=Sn}=t;return function(t,e,n,i){var r=[],o=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}rotateY(t){let{radians:e,origin:n=Sn}=t;return function(t,e,n,i){var r=[],o=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}rotateZ(t){let{radians:e,origin:n=Sn}=t;return function(t,e,n,i){var r=[],o=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return gn(this,this,t),this.check()}transformAsVector(t){return wn(this,this,t),this.check()}transformByMatrix3(t){return mn(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2]}(this,this,t),this.check()}transformByQuaternion(t){return yn(this,this,t),this.check()}}const Pn=new Tn;function An(t,e,n,i){Pn.set(t,e,n);const r=Pn.len();return{distance:i/r,normal:new Tn(-t/r,-e/r,-n/r)}}let Cn;function In(t,e){const{size:n=1,startIndex:i=0}=e,r=void 0!==e.endIndex?e.endIndex:t.length,o=(r-i)/n;Cn=Ke.allocate(Cn,o,{type:Float32Array,size:2*n});let s=i,a=0;for(;s<r;){for(let e=0;e<n;e++){const i=t[s++];Cn[a+e]=i,Cn[a+e+n]=(l=i)-Math.fround(l)}a+=2*n}var l;return Cn.subarray(0,o*n*2)}function Mn(t){let e=null,n=!1;for(const i of t)i&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],i[0][0]),e[0][1]=Math.min(e[0][1],i[0][1]),e[1][0]=Math.max(e[1][0],i[1][0]),e[1][1]=Math.max(e[1][1],i[1][1])):e=i);return e}class kn extends rn{toString(){let t="[";if(Ze.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+e])}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=" ".concat(this[e])}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,n){return this[e*this.RANK+t]=on(n),this}getColumn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0);const n=t*this.RANK;for(let i=0;i<this.RANK;++i)e[i]=this[n+i];return e}setColumn(t,e){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)this[n+i]=e[i];return this}}function On(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],g=e[13],m=e[14],y=e[15],v=n*a-i*s,b=n*l-r*s,_=n*c-o*s,w=i*l-r*a,x=i*c-o*a,S=r*c-o*l,E=u*g-d*p,T=u*m-h*p,P=u*y-f*p,A=d*m-h*g,C=d*y-f*g,I=h*y-f*m,M=v*I-b*C+_*A+w*P-x*T+S*E;return M?(M=1/M,t[0]=(a*I-l*C+c*A)*M,t[1]=(r*C-i*I-o*A)*M,t[2]=(g*S-m*x+y*w)*M,t[3]=(h*x-d*S-f*w)*M,t[4]=(l*P-s*I-c*T)*M,t[5]=(n*I-r*P+o*T)*M,t[6]=(m*_-p*S-y*b)*M,t[7]=(u*S-h*_+f*b)*M,t[8]=(s*C-a*P+c*E)*M,t[9]=(i*P-n*C-o*E)*M,t[10]=(p*x-g*_+y*v)*M,t[11]=(d*_-u*x-f*v)*M,t[12]=(a*T-s*A-l*E)*M,t[13]=(n*A-i*T+r*E)*M,t[14]=(g*b-p*w-m*v)*M,t[15]=(u*w-d*b+h*v)*M,t):null}function Ln(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],f=e[10],p=e[11],g=e[12],m=e[13],y=e[14],v=e[15],b=n[0],_=n[1],w=n[2],x=n[3];return t[0]=b*i+_*a+w*d+x*g,t[1]=b*r+_*l+w*h+x*m,t[2]=b*o+_*c+w*f+x*y,t[3]=b*s+_*u+w*p+x*v,b=n[4],_=n[5],w=n[6],x=n[7],t[4]=b*i+_*a+w*d+x*g,t[5]=b*r+_*l+w*h+x*m,t[6]=b*o+_*c+w*f+x*y,t[7]=b*s+_*u+w*p+x*v,b=n[8],_=n[9],w=n[10],x=n[11],t[8]=b*i+_*a+w*d+x*g,t[9]=b*r+_*l+w*h+x*m,t[10]=b*o+_*c+w*f+x*y,t[11]=b*s+_*u+w*p+x*v,b=n[12],_=n[13],w=n[14],x=n[15],t[12]=b*i+_*a+w*d+x*g,t[13]=b*r+_*l+w*h+x*m,t[14]=b*o+_*c+w*f+x*y,t[15]=b*s+_*u+w*p+x*v,t}function Rn(t,e,n){var i,r,o,s,a,l,c,u,d,h,f,p,g=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*y+e[12],t[13]=e[1]*g+e[5]*m+e[9]*y+e[13],t[14]=e[2]*g+e[6]*m+e[10]*y+e[14],t[15]=e[3]*g+e[7]*m+e[11]*y+e[15]):(i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],f=e[10],p=e[11],t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=c,t[7]=u,t[8]=d,t[9]=h,t[10]=f,t[11]=p,t[12]=i*g+a*m+d*y+e[12],t[13]=r*g+l*m+h*y+e[13],t[14]=o*g+c*m+f*y+e[14],t[15]=s*g+u*m+p*y+e[15]),t}function Fn(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Bn(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+c*i,t[5]=s*r+u*i,t[6]=a*r+d*i,t[7]=l*r+h*i,t[8]=c*r-o*i,t[9]=u*r-s*i,t[10]=d*r-a*i,t[11]=h*r-l*i,t}function Nn(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],l=e[3],c=e[4],u=e[5],d=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+c*i,t[1]=s*r+u*i,t[2]=a*r+d*i,t[3]=l*r+h*i,t[4]=c*r-o*i,t[5]=u*r-s*i,t[6]=d*r-a*i,t[7]=h*r-l*i,t}function zn(t,e){var n=e[0],i=e[1],r=e[2],o=e[4],s=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.hypot(n,i,r),t[1]=Math.hypot(o,s,a),t[2]=Math.hypot(l,c,u),t}var Dn=function(t,e,n,i,r){var o,s=1/Math.tan(e/2);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(o=1/(i-r),t[10]=(r+i)*o,t[14]=2*r*i*o):(t[10]=-1,t[14]=-2*i),t};var jn=function(t,e,n,i,r,o,s){var a=1/(e-n),l=1/(i-r),c=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*l,t[14]=(s+o)*c,t[15]=1,t};function Un(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function Vn(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Wn(t,e,n,i){var r=e[0],o=e[1];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t}!function(){var t=function(){var t=new un(2);return un!=Float32Array&&(t[0]=0,t[1]=0),t}()}();function Hn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Gn(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.hypot(e,n,i,r)}function qn(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}function Yn(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*s,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*s,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*s,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*s,t}var Xn;!function(){var t=function(){var t=new un(4);return un!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}()}();!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"}(Xn||(Xn={}));const Kn=45*Math.PI/180,Zn=1,$n=.1,Qn=500,Jn=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class ti extends kn{static get IDENTITY(){return function(){ni||(ni=new ti,Object.freeze(ni));return ni}()}static get ZERO(){return function(){ei||(ei=new ti([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(ei));return ei}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return Xn}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,n,i,r,o,s,a,l,c,u,d,h,f,p,g){return this[0]=t,this[1]=e,this[2]=n,this[3]=i,this[4]=r,this[5]=o,this[6]=s,this[7]=a,this[8]=l,this[9]=c,this[10]=u,this[11]=d,this[12]=h,this[13]=f,this[14]=p,this[15]=g,this.check()}setRowMajor(t,e,n,i,r,o,s,a,l,c,u,d,h,f,p,g){return this[0]=t,this[1]=r,this[2]=l,this[3]=h,this[4]=e,this[5]=o,this[6]=c,this[7]=f,this[8]=n,this[9]=s,this[10]=u,this[11]=p,this[12]=i,this[13]=a,this[14]=d,this[15]=g,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(Jn)}fromObject(t){return this.check()}fromQuaternion(t){return function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n+n,a=i+i,l=r+r,c=n*s,u=i*s,d=i*a,h=r*s,f=r*a,p=r*l,g=o*s,m=o*a,y=o*l;t[0]=1-d-p,t[1]=u+y,t[2]=h-m,t[3]=0,t[4]=u-y,t[5]=1-c-p,t[6]=f+g,t[7]=0,t[8]=h+m,t[9]=f-g,t[10]=1-c-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this.check()}frustum(t){const{left:e,right:n,bottom:i,top:r,near:o=$n,far:s=Qn}=t;return s===1/0?function(t,e,n,i,r,o){const s=2*o/(n-e),a=2*o/(r-i),l=(n+e)/(n-e),c=(r+i)/(r-i),u=-1,d=-1,h=-2*o;t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=l,t[9]=c,t[10]=u,t[11]=d,t[12]=0,t[13]=0,t[14]=h,t[15]=0}(this,e,n,i,r,o):function(t,e,n,i,r,o,s){var a=1/(n-e),l=1/(r-i),c=1/(o-s);t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(r+i)*l,t[10]=(s+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*c,t[15]=0}(this,e,n,i,r,o,s),this.check()}lookAt(t){const{eye:e,center:n=[0,0,0],up:i=[0,1,0]}=t;return function(t,e,n,i){var r,o,s,a,l,c,u,d,h,f,p=e[0],g=e[1],m=e[2],y=i[0],v=i[1],b=i[2],_=n[0],w=n[1],x=n[2];Math.abs(p-_)<cn&&Math.abs(g-w)<cn&&Math.abs(m-x)<cn?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(u=p-_,d=g-w,h=m-x,r=v*(h*=f=1/Math.hypot(u,d,h))-b*(d*=f),o=b*(u*=f)-y*h,s=y*d-v*u,(f=Math.hypot(r,o,s))?(r*=f=1/f,o*=f,s*=f):(r=0,o=0,s=0),a=d*s-h*o,l=h*r-u*s,c=u*o-d*r,(f=Math.hypot(a,l,c))?(a*=f=1/f,l*=f,c*=f):(a=0,l=0,c=0),t[0]=r,t[1]=a,t[2]=u,t[3]=0,t[4]=o,t[5]=l,t[6]=d,t[7]=0,t[8]=s,t[9]=c,t[10]=h,t[11]=0,t[12]=-(r*p+o*g+s*m),t[13]=-(a*p+l*g+c*m),t[14]=-(u*p+d*g+h*m),t[15]=1)}(this,e,n,i),this.check()}ortho(t){const{left:e,right:n,bottom:i,top:r,near:o=$n,far:s=Qn}=t;return jn(this,e,n,i,r,o,s),this.check()}orthographic(t){const{fovy:e=Kn,aspect:n=Zn,focalDistance:i=1,near:r=$n,far:o=Qn}=t;ii(e);const s=e/2,a=i*Math.tan(s),l=a*n;return this.ortho({left:-l,right:l,bottom:-a,top:a,near:r,far:o})}perspective(t){const{fovy:e=45*Math.PI/180,aspect:n=1,near:i=.1,far:r=500}=t;return ii(e),Dn(this,e,n,i,r),this.check()}determinant(){return function(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11],f=t[12],p=t[13],g=t[14],m=t[15];return(e*s-n*o)*(d*m-h*g)-(e*a-i*o)*(u*m-h*p)+(e*l-r*o)*(u*g-d*p)+(n*a-i*s)*(c*m-h*f)-(n*l-r*s)*(c*g-d*f)+(i*l-r*a)*(c*p-u*f)}(this)}getScale(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const n=this.getScale(e),i=1/n[0],r=1/n[1],o=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*r,t[2]=this[2]*o,t[3]=0,t[4]=this[4]*i,t[5]=this[5]*r,t[6]=this[6]*o,t[7]=0,t[8]=this[8]*i,t[9]=this[9]*r,t[10]=this[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const n=this.getScale(e),i=1/n[0],r=1/n[1],o=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*r,t[2]=this[2]*o,t[3]=this[4]*i,t[4]=this[5]*r,t[5]=this[6]*o,t[6]=this[8]*i,t[7]=this[9]*r,t[8]=this[10]*o,t}transpose(){return function(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[11]=e[14],t[12]=r,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return On(this,this),this.check()}multiplyLeft(t){return Ln(this,t,this),this.check()}multiplyRight(t){return Ln(this,this,t),this.check()}rotateX(t){return Bn(this,this,t),this.check()}rotateY(t){return function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],l=e[3],c=e[8],u=e[9],d=e[10],h=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-c*i,t[1]=s*r-u*i,t[2]=a*r-d*i,t[3]=l*r-h*i,t[8]=o*i+c*r,t[9]=s*i+u*r,t[10]=a*i+d*r,t[11]=l*i+h*r}(this,this,t),this.check()}rotateZ(t){return Nn(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,e){return function(t,e,n,i){var r,o,s,a,l,c,u,d,h,f,p,g,m,y,v,b,_,w,x,S,E,T,P,A,C=i[0],I=i[1],M=i[2],k=Math.hypot(C,I,M);k<cn||(C*=k=1/k,I*=k,M*=k,r=Math.sin(n),s=1-(o=Math.cos(n)),a=e[0],l=e[1],c=e[2],u=e[3],d=e[4],h=e[5],f=e[6],p=e[7],g=e[8],m=e[9],y=e[10],v=e[11],b=C*C*s+o,_=I*C*s+M*r,w=M*C*s-I*r,x=C*I*s-M*r,S=I*I*s+o,E=M*I*s+C*r,T=C*M*s+I*r,P=I*M*s-C*r,A=M*M*s+o,t[0]=a*b+d*_+g*w,t[1]=l*b+h*_+m*w,t[2]=c*b+f*_+y*w,t[3]=u*b+p*_+v*w,t[4]=a*x+d*S+g*E,t[5]=l*x+h*S+m*E,t[6]=c*x+f*S+y*E,t[7]=u*x+p*S+v*E,t[8]=a*T+d*P+g*A,t[9]=l*T+h*P+m*A,t[10]=c*T+f*P+y*A,t[11]=u*T+p*P+v*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,t,e),this.check()}scale(t){return Fn(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return Rn(this,this,t),this.check()}transform(t,e){return 4===t.length?(sn(e=Yn(e||[-0,-0,-0,-0],t,this),4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:n}=t;let i;switch(n){case 2:i=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}(e||[-0,-0],t,this);break;case 3:i=gn(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return sn(i,t.length),i}transformAsVector(t,e){let n;switch(t.length){case 2:n=function(t,e,n){const i=e[0],r=e[1],o=n[3]*i+n[7]*r||1;return t[0]=(n[0]*i+n[4]*r)/o,t[1]=(n[1]*i+n[5]*r)/o,t}(e||[-0,-0],t,this);break;case 3:n=wn(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return sn(n,t.length),n}transformPoint(t,e){return this.transformAsPoint(t,e)}transformVector(t,e){return this.transformAsPoint(t,e)}transformDirection(t,e){return this.transformAsVector(t,e)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,n){return this.identity().translate([t,e,n])}}let ei,ni;function ii(t){if(t>2*Math.PI)throw Error("expected radians")}function ri(t,e){const n=Yn([],e,t);return Hn(n,n,1/n[3]),n}function oi(t,e){const n=t%e;return n<0?e+n:n}function si(t,e,n){return t<e?e:t>n?n:t}const ai=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function li(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const ci=Math.PI,ui=ci/4,di=ci/180,hi=180/ci,fi=512,pi=4003e4,gi=85.051129,mi=1.5;function yi(t){const[e,n]=t;li(Number.isFinite(e)),li(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const i=n*di;return[fi*(e*di+ci)/(2*ci),fi*(ci+Math.log(Math.tan(ui+.5*i)))/(2*ci)]}function vi(t){const[e,n]=t,i=e/fi*(2*ci)-ci,r=2*(Math.atan(Math.exp(n/fi*(2*ci)-ci))-ui);return[i*hi,r*hi]}function bi(t){const{latitude:e}=t;li(Number.isFinite(e));const n=Math.cos(e*di);return function(t){return ai(t)}(pi*n)-9}function _i(t){const e=Math.cos(t*di);return fi/pi/e}function wi(t){const{latitude:e,longitude:n,highPrecision:i=!1}=t;li(Number.isFinite(e)&&Number.isFinite(n));const r=fi,o=Math.cos(e*di),s=r/360,a=s/o,l=r/pi/o,c={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[s,a,l],degreesPerUnit:[1/s,1/a,1/l]};if(i){const t=di*Math.tan(e*di)/o,n=s*t/2,i=r/pi*t,u=i/a*l;c.unitsPerDegree2=[0,n,i],c.unitsPerMeter2=[u,0,u]}return c}function xi(t,e){const[n,i,r]=t,[o,s,a]=e,{unitsPerMeter:l,unitsPerMeter2:c}=wi({longitude:n,latitude:i,highPrecision:!0}),u=yi(t);u[0]+=o*(l[0]+c[0]*s),u[1]+=s*(l[1]+c[1]*s);const d=vi(u),h=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[d[0],d[1],h]:d}function Si(t){const{width:e,height:n,altitude:i,pitch:r=0,offset:o,center:s,scale:a,nearZMultiplier:l=1,farZMultiplier:c=1}=t;let{fovy:u=Ei(mi)}=t;void 0!==i&&(u=Ei(i));const d=u*di,h=r*di,f=Ti(u);let p=f;s&&(p+=s[2]*a/Math.cos(h)/n);const g=d*(.5+(o?o[1]:0)/n),m=Math.sin(g)*p/Math.sin(si(Math.PI/2-h-g,.01,Math.PI-.01)),y=Math.sin(h)*m+p,v=10*p;return{fov:d,aspect:e/n,focalDistance:f,near:l,far:Math.min(y*c,v)}}function Ei(t){return 2*Math.atan(.5/t)*hi}function Ti(t){return.5/Math.tan(.5*t*di)}function Pi(t,e){const[n,i,r=0]=t;return li(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(r)),ri(e,[n,i,r,1])}function Ai(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const[i,r,o]=t;if(li(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(o)){return ri(e,[i,r,o,1])}const s=ri(e,[i,r,0,1]),a=ri(e,[i,r,1,1]),l=s[2],c=a[2];return Wn([],s,a,l===c?0:((n||0)-l)/(c-l))}function Ci(t){const{width:e,height:n,bounds:i,minExtent:r=0,maxZoom:o=24,offset:s=[0,0]}=t,[[a,l],[c,u]]=i,d=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("number"===typeof t)return{top:t,bottom:t,left:t,right:t};return li(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t}(t.padding),h=yi([a,si(u,-85.051129,gi)]),f=yi([c,si(l,-85.051129,gi)]),p=[Math.max(Math.abs(f[0]-h[0]),r),Math.max(Math.abs(f[1]-h[1]),r)],g=[e-d.left-d.right-2*Math.abs(s[0]),n-d.top-d.bottom-2*Math.abs(s[1])];li(g[0]>0&&g[1]>0);const m=g[0]/p[0],y=g[1]/p[1],v=(d.right-d.left)/2/m,b=(d.top-d.bottom)/2/y,_=vi([(f[0]+h[0])/2+v,(f[1]+h[1])/2+b]),w=Math.min(o,ai(Math.abs(Math.min(m,y))));return li(Number.isFinite(w)),{longitude:_[0],latitude:_[1],zoom:w}}const Ii=Math.PI/180;function Mi(t,e,n){const{pixelUnprojectionMatrix:i}=t,r=ri(i,[e,0,1,1]),o=ri(i,[e,t.height,1,1]),s=vi(Wn([],r,o,(n*t.distanceScales.unitsPerMeter[2]-r[2])/(o[2]-r[2])));return s.push(n),s}const ki={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(ki,"IDENTITY",{get:()=>(W.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Oi={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Li={common:0,meters:1,pixels:2},Ri={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},Fi=Math.PI/180,Bi=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Ni=[0,0,0],zi={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class Di{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,"id",void 0),s(this,"x",void 0),s(this,"y",void 0),s(this,"width",void 0),s(this,"height",void 0),s(this,"padding",void 0),s(this,"isGeospatial",void 0),s(this,"zoom",void 0),s(this,"focalDistance",void 0),s(this,"position",void 0),s(this,"modelMatrix",void 0),s(this,"distanceScales",void 0),s(this,"scale",void 0),s(this,"center",void 0),s(this,"cameraPosition",void 0),s(this,"projectionMatrix",void 0),s(this,"viewMatrix",void 0),s(this,"viewMatrixUncentered",void 0),s(this,"viewMatrixInverse",void 0),s(this,"viewProjectionMatrix",void 0),s(this,"pixelProjectionMatrix",void 0),s(this,"pixelUnprojectionMatrix",void 0),s(this,"resolution",void 0),s(this,"_frustumPlanes",{}),this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.padding=t.padding,this.distanceScales=t.distanceScales||zi,this.focalDistance=t.focalDistance||1,this.position=t.position||Ni,this.modelMatrix=t.modelMatrix||null;const{longitude:e,latitude:n}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(e),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Oi.WEB_MERCATOR:Oi.WEB_MERCATOR_AUTO_OFFSET:Oi.IDENTITY}equals(t){return t instanceof Di&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&en(t.projectionMatrix,this.projectionMatrix)&&en(t.viewMatrix,this.viewMatrix))}project(t){let{topLeft:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Pi(this.projectPosition(t),this.pixelProjectionMatrix),[i,r]=n,o=e?r:this.height-r;return 2===t.length?[i,o]:[i,o,n[2]]}unproject(t){let{topLeft:e=!0,targetZ:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[i,r,o]=t,s=e?r:this.height-r,a=n&&n*this.distanceScales.unitsPerMeter[2],l=Ai([i,s,o],this.pixelUnprojectionMatrix,a),[c,u,d]=this.unprojectPosition(l);return Number.isFinite(o)?[c,u,d]:Number.isFinite(n)?[c,u,n]:[c,u]}projectPosition(t){const[e,n]=this.projectFlat(t);return[e,n,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){const[e,n]=this.unprojectFlat(t);return[e,n,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){if(this.isGeospatial){const e=yi(t);return e[1]=Je(e[1],-318,830),e}return t}unprojectFlat(t){return this.isGeospatial?vi(t):t}getBounds(){const t={targetZ:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0},e=this.unproject([0,0],t),n=this.unproject([this.width,0],t),i=this.unproject([0,this.height],t),r=this.unproject([this.width,this.height],t);return[Math.min(e[0],n[0],i[0],r[0]),Math.min(e[1],n[1],i[1],r[1]),Math.max(e[0],n[0],i[0],r[0]),Math.max(e[1],n[1],i[1],r[1])]}getDistanceScales(t){return t?wi({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel(t){let{x:e,y:n,width:i=1,height:r=1}=t;return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,{left:An((t=this.viewProjectionMatrix)[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:An(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:An(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:An(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:An(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:An(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}),this._frustumPlanes;var t}panByPosition(t,e){return null}_initProps(t){const e=t.longitude,n=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=bi({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||wi({latitude:n,longitude:e}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:r,modelMatrix:o}=t;let s=Ni;if(r&&(s=o?new ti(o).transformAsVector(r,[]):r),this.isGeospatial){const t=this.projectPosition([e,n,0]);this.center=new Tn(s).scale(this.distanceScales.unitsPerMeter).add(t)}else this.center=this.projectPosition(s)}_initMatrices(t){const{viewMatrix:e=Bi,projectionMatrix:n=null,orthographic:i=!1,fovyRadians:r,fovy:o=75,near:s=.1,far:a=1e3,padding:l=null,focalDistance:c=1}=t;this.viewMatrixUncentered=e,this.viewMatrix=(new ti).multiplyRight(e).translate(new Tn(this.center).negate()),this.projectionMatrix=n||function(t){let{width:e,height:n,orthographic:i,fovyRadians:r,focalDistance:o,padding:s,near:a,far:l}=t;const c=e/n,u=i?(new ti).orthographic({fovy:r,aspect:c,focalDistance:o,near:a,far:l}):(new ti).perspective({fovy:r,aspect:c,near:a,far:l});if(s){const{left:t=0,right:i=0,top:r=0,bottom:o=0}=s,a=Je((t+e-i)/2,0,e)-e/2,l=Je((r+n-o)/2,0,n)-n/2;u[8]-=2*a/e,u[9]+=2*l/n}return u}({width:this.width,height:this.height,orthographic:i,fovyRadians:r||o*Fi,focalDistance:c,padding:l,near:s,far:a});const u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var d;Ln(u,u,this.projectionMatrix),Ln(u,u,this.viewMatrix),this.viewProjectionMatrix=u,this.viewMatrixInverse=On([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=[(d=this.viewMatrixInverse)[12],d[13],d[14]];const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Fn(h,h,[this.width/2,-this.height/2,1]),Rn(h,h,[1,-1,0]),Ln(f,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=f,this.pixelUnprojectionMatrix=On([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||W.warn("Pixel project matrix not invertible")()}}s(Di,"displayName","Viewport");const ji="vs",Ui="fs";function Vi(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const Wi={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function Hi(t){let e=Gi(t);return"object"===e?t?"type"in t?Object.assign({},t,Wi[t.type]):"value"in t?(e=Gi(t.value),Object.assign({type:e},t,Wi[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},Wi[e])}function Gi(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}class qi{constructor(t){let{name:e,vs:n,fs:i,dependencies:r=[],uniforms:o,getUniforms:s,deprecations:a=[],defines:l={},inject:c={},vertexShader:u,fragmentShader:d}=t;Vi("string"===typeof e),this.name=e,this.vs=n||u,this.fs=i||d,this.getModuleUniforms=s,this.dependencies=r,this.deprecations=this._parseDeprecationDefinitions(a),this.defines=l,this.injections=function(t){const e={vs:{},fs:{}};for(const n in t){let i=t[n];"string"===typeof i&&(i={order:0,injection:i}),e[n.slice(0,2)][n]=i}return e}(c),o&&(this.uniforms=function(t){const e={};for(const n in t){const i=Hi(t[n]);e[n]=i}return e}(o))}getModuleSource(t){let e;switch(t){case"vs":e=this.vs||"";break;case"fs":e=this.fs||"";break;default:Vi(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(e,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(t,e){return this.getModuleUniforms?this.getModuleUniforms(t,e):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,e){this.deprecations.forEach((n=>{n.regex.test(t)&&(n.deprecated?e.deprecated(n.old,n.new)():e.removed(n.old,n.new)())}))}_parseDeprecationDefinitions(t){return t.forEach((t=>{if("function"===t.type)t.regex=new RegExp("\\b".concat(t.old,"\\("));else t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))})),t}_defaultGetUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e={},n=this.uniforms;for(const i in n){const r=n[i];i in t&&!r.private?(r.validate&&Vi(r.validate(t[i],r),"".concat(this.name,": invalid ").concat(i)),e[i]=t[i]):e[i]=r.value}return e}}function Yi(t){return Xi(Zi(t))}function Xi(t){const e={},n={};return Ki({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort(((t,e)=>n[e]-n[t])).map((t=>e[t]))}function Ki(t){let{modules:e,level:n,moduleMap:i,moduleDepth:r}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const o of e)i[o.name]=o,(void 0===r[o.name]||r[o.name]<n)&&(r[o.name]=n);for(const o of e)o.dependencies&&Ki({modules:o.dependencies,level:n+1,moduleMap:i,moduleDepth:r})}function Zi(t,e){return t.map((t=>(t instanceof qi||(Vi("string"!==typeof t,"Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),Vi(t.name,"shader module has no name"),(t=new qi(t)).dependencies=Zi(t.dependencies)),t)))}const $i=7936,Qi=7937,Ji=7938,tr=35724,er={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},nr={};Object.keys(er).forEach((t=>{nr[t]=t}));const ir={};function rr(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=er[e];if(Vi(i,e),!function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e="undefined"!==typeof window&&window.navigator||{},n=t.userAgent||e.userAgent||"",i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r}(n))return!0;if(e in ir)return ir[e];const r=i[0],o=n.behavior||"enable",s="#extension GL_".concat(r," : ").concat(o,"\nvoid main(void) {}"),a=t.createShader(35633);t.shaderSource(a,s),t.compileShader(a);const l=t.getShaderParameter(a,35713);return t.deleteShader(a),ir[e]=l,l}function or(t,e){const n=er[e];Vi(n,e);const i=function(t){return"undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}(t)&&n[1]||n[0],r="string"===typeof i?Boolean(t.getExtension(i)):i;return Vi(!1===r||!0===r),r}function sr(t,e){return(e=Array.isArray(e)?e:[e]).every((e=>or(t,e)))}function ar(t){const e=function(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||$i),i=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||Qi);return{gpuVendor:function(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(n,i),vendor:n,renderer:i,version:t.getParameter(Ji),shadingLanguageVersion:t.getParameter(tr)}}(t);switch(e.gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}const lr={[ji]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",[Ui]:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},cr="__LUMA_INJECT_DECLARATIONS__",ur=/void\s+main\s*\([^)]*\)\s*\{\n?/,dr=/}\n?[^{}]*$/,hr=[];function fr(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e===ji;for(const o in n){const e=n[o];e.sort(((t,e)=>t.order-e.order)),hr.length=e.length;for(let t=0,n=e.length;t<n;++t)hr[t]=e[t].injection;const i="".concat(hr.join("\n"),"\n");switch(o){case"vs:#decl":r&&(t=t.replace(cr,i));break;case"vs:#main-start":r&&(t=t.replace(ur,(t=>t+i)));break;case"vs:#main-end":r&&(t=t.replace(dr,(t=>i+t)));break;case"fs:#decl":r||(t=t.replace(cr,i));break;case"fs:#main-start":r||(t=t.replace(ur,(t=>t+i)));break;case"fs:#main-end":r||(t=t.replace(dr,(t=>i+t)));break;default:t=t.replace(o,(t=>t+i))}}return t=t.replace(cr,""),i&&(t=t.replace(/\}\s*$/,(t=>t+lr[e]))),t}function pr(t){const e={};return Vi(Array.isArray(t)&&t.length>1),t.forEach((t=>{for(const n in t)e[n]=e[n]?"".concat(e[n],"\n").concat(t[n]):t[n]})),e}function gr(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const mr=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],yr=[...mr,[gr("attribute"),"in $1"],[gr("varying"),"out $1"]],vr=[...mr,[gr("varying"),"in $1"]],br=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],_r=[...br,[gr("in"),"attribute $1"],[gr("out"),"varying $1"]],wr=[...br,[gr("in"),"varying $1"]],xr="gl_FragColor",Sr=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Er=/void\s+main\s*\([^)]*\)\s*\{\n?/;function Tr(t,e,n){switch(e){case 300:return n?Pr(t,yr):function(t){t=Pr(t,vr);const e=t.match(Sr);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(xr,"\\b"),"g"),n)}else{const e="fragmentColor";t=t.replace(Er,(t=>"out vec4 ".concat(e,";\n").concat(t))).replace(new RegExp("\\b".concat(xr,"\\b"),"g"),e)}return t}(t);case 100:return n?Pr(t,_r):function(t){t=Pr(t,wr);const e=t.match(Sr);if(e){const n=e[1];t=t.replace(Sr,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),xr)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}function Pr(t,e){for(const[n,i]of e)t=t.replace(n,i);return t}const Ar="\n\n".concat(cr,"\n\n"),Cr={[ji]:"vertex",[Ui]:"fragment"},Ir="precision highp float;\n\n";function Mr(t,e){let{id:n,source:i,type:r,modules:o,defines:s={},hookFunctions:a=[],inject:l={},transpileToGLSL100:c=!1,prologue:u=!0,log:d}=e;Vi("string"===typeof i,"shader source must be a string");const h=r===ji,f=i.split("\n");let p=100,g="",m=i;0===f[0].indexOf("#version ")?(p=300,g=f[0],m=f.slice(1).join("\n")):g="#version ".concat(p);const y={};o.forEach((t=>{Object.assign(y,t.getDefines())})),Object.assign(y,s);let v=u?"".concat(g,"\n").concat(function(t){let{id:e,source:n,type:i}=t;const r=e&&"string"===typeof e&&-1===n.indexOf("SHADER_NAME");return r?"\n#define SHADER_NAME ".concat(e,"_").concat(Cr[i],"\n\n"):""}({id:n,source:i,type:r}),"\n").concat(function(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(Cr[e].toUpperCase(),"\n")}({type:r}),"\n").concat(ar(t),"\n").concat(function(t,e,n){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return sr(t,nr.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),sr(t,nr.GLSL_DERIVATIVES)&&rr(t,nr.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),sr(t,nr.GLSL_FRAG_DATA)&&rr(t,nr.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),sr(t,nr.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(t),"\n").concat(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(const i in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;const r=t[i];(r||Number.isFinite(r))&&(n+="#define ".concat(i.toUpperCase()," ").concat(t[i],"\n"))}0===e&&(n+="\n");return n}(y),"\n").concat(h?"":Ir,"\n"):"".concat(g,"\n");const b=function(t){const e={vs:{},fs:{}};return t.forEach((t=>{let n;"string"!==typeof t?(n=t,t=n.hook):n={},t=t.trim();const[i,r]=t.split(":"),o=t.replace(/\(.+/,"");e[i][o]=Object.assign(n,{signature:r})})),e}(a),_={},w={},x={};for(const S in l){const t="string"===typeof l[S]?{injection:l[S],order:0}:l[S],e=S.match(/^(v|f)s:(#)?([\w-]+)$/);if(e){const n=e[2],i=e[3];n?"decl"===i?w[S]=[t]:x[S]=[t]:_[S]=[t]}else x[S]=[t]}for(const S of o){d&&S.checkDeprecations(m,d);v+=S.getModuleSource(r,p);const t=S.injections[r];for(const e in t){const n=e.match(/^(v|f)s:#([\w-]+)$/);if(n){const i="decl"===n[2]?w:x;i[e]=i[e]||[],i[e].push(t[e])}else _[e]=_[e]||[],_[e].push(t[e])}}return v+=Ar,v=fr(v,r,w),v+=function(t,e){let n="";for(const i in t){const r=t[i];if(n+="void ".concat(r.signature," {\n"),r.header&&(n+="  ".concat(r.header)),e[i]){const t=e[i];t.sort(((t,e)=>t.order-e.order));for(const e of t)n+="  ".concat(e.injection,"\n")}r.footer&&(n+="  ".concat(r.footer)),n+="}\n"}return n}(b[r],_),v+=m,v=fr(v,r,x),v=Tr(v,c?100:p,h),v}function kr(t){return function(e){const n={};for(const i of t){const t=i.getUniforms(e,n);Object.assign(n,t)}return n}}const Or=new D({id:"luma.gl"});function Lr(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const Rr="Invalid WebGLRenderingContext",Fr="Requires WebGL2";function Br(t){return"undefined"!==typeof WebGLRenderingContext&&t instanceof WebGLRenderingContext||("undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&Number.isFinite(t._version)))}function Nr(t){return"undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}function zr(t){return Lr(Br(t),Rr),t}function Dr(t){return Lr(Nr(t),Fr),t}const jr={};function Ur(t,e){var n;jr[t]=!0,void 0!==e&&(n=e,globalThis.console&&globalThis.console.error&&globalThis.console.error(n))}const Vr=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const e=new t.VertexAttrib(n);this.attribs[i]=e}this.maxAttrib=0};(Vr.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Wr=function(t){const e=this;this.gl=t,function(t){const e=t.getError;t.getError=function(){let n;do{n=e.apply(t),0!==n&&(jr[n]=!0)}while(0!==n);for(n in jr)if(jr[n])return delete jr[n],parseInt(n,10);return 0}}(t);const n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(t){return t===e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject===e.defaultVertexArrayObject?null:e.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(t){const i=e.currentVertexArrayObject;i.maxAttrib=Math.max(i.maxAttrib,t);return i.attribs[t].enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(t){const i=e.currentVertexArrayObject;i.maxAttrib=Math.max(i.maxAttrib,t);return i.attribs[t].enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(t,i){switch(t){case 34962:e.currentArrayBuffer=i;break;case 34963:e.currentVertexArrayObject.elementArrayBuffer=i}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(t,i){const r=e.currentVertexArrayObject.attribs[t];switch(i){case 34975:return r.buffer;case 34338:return r.enabled;case 34339:return r.size;case 34340:return r.stride;case 34341:return r.type;case 34922:return r.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(t,i,r,o,s,a){const l=e.currentVertexArrayObject;l.maxAttrib=Math.max(l.maxAttrib,t);const c=l.attribs[t];return c.buffer=e.currentArrayBuffer,c.size=i,c.type=r,c.normalized=o,c.stride=s,c.offset=a,c.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",(()=>{var t;t="OESVertexArrayObject emulation library context restored",globalThis.console&&globalThis.console.log&&globalThis.console.log(t),e.reset_()}),!0),this.reset_()};Wr.prototype.VERTEX_ARRAY_BINDING_OES=34229,Wr.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let e=0;e<this.vertexArrayObjects.length;++e)this.vertexArrayObjects.isAlive=!1;const t=this.gl;this.maxVertexAttribs=t.getParameter(34921),this.defaultVertexArrayObject=new Vr(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},Wr.prototype.createVertexArrayOES=function(){const t=new Vr(this);return this.vertexArrayObjects.push(t),t},Wr.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)},Wr.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof Vr&&t.hasBeenBound&&t.ext===this)},Wr.prototype.bindVertexArrayOES=function(t){const e=this.gl;if(t&&!t.isAlive)return void Ur(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const n=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const r=this.currentVertexArrayObject;if(i===r)return;i&&r.elementArrayBuffer===i.elementArrayBuffer||n.bindBuffer.call(e,34963,r.elementArrayBuffer);let o=this.currentArrayBuffer;const s=Math.max(i?i.maxAttrib:0,r.maxAttrib);for(let a=0;a<=s;a++){const t=r.attribs[a],s=i?i.attribs[a]:null;if(i&&t.enabled===s.enabled||(t.enabled?n.enableVertexAttribArray.call(e,a):n.disableVertexAttribArray.call(e,a)),t.enabled){let r=!1;i&&t.buffer===s.buffer||(o!==t.buffer&&(n.bindBuffer.call(e,34962,t.buffer),o=t.buffer),r=!0),(r||t.cached!==s.cached)&&n.vertexAttribPointer.call(e,a,t.size,t.type,t.normalized,t.stride,t.offset)}}this.currentArrayBuffer!==o&&n.bindBuffer.call(e,34962,this.currentArrayBuffer)};const Hr="OES_element_index",Gr="WEBGL_draw_buffers",qr="WEBGL_debug_renderer_info",Yr=t=>Nr(t)?void 0:0,Xr={3074:t=>Nr(t)?void 0:36064,35723:t=>Nr(t)?void 0:4352,35977:Yr,32937:Yr,36795:(t,e)=>{const n=Nr(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},37445:(t,e)=>{const n=t.getExtension(qr);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(t,e)=>{const n=t.getExtension(qr);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(t,e)=>{const n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:Yr,35071:Yr,37447:Yr,36063:(t,e)=>{if(!Nr(t)){const n=t.getExtension(Gr);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:Yr,35374:Yr,35377:Yr,34852:t=>{if(!Nr(t)){const e=t.getExtension(Gr);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(Hr)?2147483647:65535,33001:t=>t.getExtension(Hr)?16777216:65535,33e3:t=>16777216,37157:Yr,35373:Yr,35657:Yr,36183:Yr,37137:Yr,34045:Yr,35978:Yr,35979:Yr,35968:Yr,35376:Yr,35375:Yr,35659:Yr,37154:Yr,35371:Yr,35658:Yr,35076:Yr,35077:Yr,35380:Yr};const Kr="ANGLE_instanced_arrays";const Zr={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{Lr(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[Kr]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Lr(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Lr(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{Lr(!1)},deleteQuery:()=>{Lr(!1)},beginQuery:()=>{Lr(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},$r={readBuffer:(t,e,n)=>{Nr(t)&&e(n)},getVertexAttrib:(t,e,n,i)=>{const{webgl2:r,ext:o}=function(t,e){return{webgl2:Nr(t),ext:t.getExtension(e)}}(t,Kr);let s;switch(i){case 35069:s=!!r&&void 0;break;case 35070:s=r||o?void 0:0}return void 0!==s?s:e(n,i)},getProgramParameter:(t,e,n,i)=>{if(!Nr(t))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,i)},getInternalformatParameter:(t,e,n,i,r)=>Nr(t)||32937!==r?t.getInternalformatParameter(n,i,r):new Int32Array([0]),getTexParameter(t,e,n,i){if(34046===i){const{extensions:e}=t.luma,n=e.EXT_texture_filter_anisotropic;i=n&&n.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,i)},getParameter:function(t,e,n){const i=Xr[n],r="function"===typeof i?i(t,e,n):i;return void 0!==r?r:e(n)},hint:(t,e,n,i)=>e(n,i)};function Qr(t,e){let{extension:n,target:i,target2:r}=e;const o=Zr[n];Lr(o);const{meta:s={}}=o,{suffix:a=""}=s,l=t.getExtension(n);for(const c of Object.keys(o)){const e="".concat(c).concat(a);let n=null;"meta"===c||"function"===typeof t[c]||(l&&"function"===typeof l[e]?n=function(){return l[e](...arguments)}:"function"===typeof o[c]&&(n=o[c].bind(i))),n&&(i[c]=n,r[c]=n)}}globalThis.polyfillContext=function(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(!function(t){if("function"===typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const t=e.call(this)||[];return t.indexOf("OES_vertex_array_object")<0&&t.push("OES_vertex_array_object"),t};const n=t.getExtension;t.getExtension=function(e){return n.call(this,e)||("OES_vertex_array_object"!==e?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Wr(this)),this.__OESVertexArrayObject))}}(t),function(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}(t),function(t,e){for(const n of Object.getOwnPropertyNames(e))"overrides"!==n&&Qr(t,{extension:n,target:t.luma,target2:t})}(t,Zr),function(t,e){let{target:n,target2:i}=e;Object.keys($r).forEach((e=>{if("function"===typeof $r[e]){const r=t[e]?t[e].bind(t):()=>{},o=$r[e].bind(null,t,r);n[e]=o,i[e]=o}}))}(t,{target:e,target2:t}),e.polyfilled=!0),t};const Jr={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},to=(t,e,n)=>e?t.enable(n):t.disable(n),eo=(t,e,n)=>t.hint(n,e),no=(t,e,n)=>t.pixelStorei(n,e);function io(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const ro={3042:to,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:to,2885:(t,e)=>t.cullFace(e),2929:to,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:to,35723:eo,36006:(t,e)=>{const n=Nr(t)?36009:36160;return t.bindFramebuffer(n,e)},2886:(t,e)=>t.frontFace(e),33170:eo,2849:(t,e)=>t.lineWidth(e),32823:to,32824:"polygonOffset",10752:"polygonOffset",35977:to,32938:"sampleCoverage",32939:"sampleCoverage",3089:to,3088:(t,e)=>t.scissor(...e),2960:to,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:no,3317:no,37440:no,37441:no,37443:no,3330:no,3332:no,3331:no,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:no,32878:no,3316:no,3315:no,32877:no,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=io(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=io(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=io(e)?e:[e,e];const[n,i]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,i)},stencilFunc:(t,e)=>{e=io(e)&&3===e.length?[...e,...e]:e;const[n,i,r,o,s,a]=e;t.stencilFuncSeparate(1028,n,i,r),t.stencilFuncSeparate(1029,o,s,a)},stencilOp:(t,e)=>{e=io(e)&&3===e.length?[...e,...e]:e;const[n,i,r,o,s,a]=e;t.stencilOpSeparate(1028,n,i,r),t.stencilOpSeparate(1029,o,s,a)},viewport:(t,e)=>t.viewport(...e)};function oo(t,e,n){return void 0!==e[t]?e[t]:n[t]}const so={blendEquation:(t,e,n)=>t.blendEquationSeparate(oo(32777,e,n),oo(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(oo(32969,e,n),oo(32968,e,n),oo(32971,e,n),oo(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(oo(32824,e,n),oo(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(oo(32938,e,n),oo(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,oo(2962,e,n),oo(2967,e,n),oo(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,oo(34816,e,n),oo(36003,e,n),oo(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,oo(2964,e,n),oo(2965,e,n),oo(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,oo(34817,e,n),oo(34818,e,n),oo(34819,e,n))},ao={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,i,r)=>t({32773:new Float32Array([e,n,i,r])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,i,r)=>t({32969:e,32968:n,32971:i,32970:r}),clearColor:(t,e,n,i,r)=>t({3106:new Float32Array([e,n,i,r])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,i,r)=>t({3107:[e,n,i,r]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,i,r)=>t({3088:new Int32Array([e,n,i,r])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,i)=>t({2962:e,2967:n,2963:i,34816:e,36003:n,36004:i}),stencilFuncSeparate:(t,e,n,i,r)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(t,e,n,i)=>t({2964:e,2965:n,2966:i,34817:e,34818:n,34819:i}),stencilOpSeparate:(t,e,n,i,r)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(t,e,n,i,r)=>t({2978:[e,n,i,r]})},lo=(t,e)=>t.isEnabled(e),co={3042:lo,2884:lo,2929:lo,3024:lo,32823:lo,32926:lo,32928:lo,3089:lo,2960:lo,35977:lo};function uo(t){for(const e in t)return!1;return!0}function ho(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),i=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&i&&t.length===e.length){for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}return!1}function fo(t,e){const n=t[e].bind(t);t[e]=function(){const e=arguments.length<=0?void 0:arguments[0];return e in t.state.cache&&t.state.enable?t.state.cache[e]:n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function po(t,e,n){const i=t[e].bind(t);t[e]=function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];const{valueChanged:s,oldValue:a}=n(t.state._updateCache,...r);return s&&i(...r),a},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class go{constructor(t){let{copyState:e=!1,log:n=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=e?function(t,e){if("number"===typeof(e=e||Jr)){const n=e,i=co[n];return i?i(t,n):t.getParameter(n)}const n=Array.isArray(e)?e:Object.keys(e),i={};for(const r of n){const e=co[r];i[r]=e?e(t,Number(r)):t.getParameter(Number(r))}return i}(t):Object.assign({},Jr),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Lr(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];vo(this.gl,t),this.stateStack.pop()}_updateCache(t){let e,n=!1;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const r in t){Lr(void 0!==r);const o=t[r],s=this.cache[r];ho(o,s)||(n=!0,e=s,i&&!(r in i)&&(i[r]=s),this.cache[r]=o)}return{valueChanged:n,oldValue:e}}}function mo(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:i}=e;if(Lr(void 0!==i),!t.state){const{polyfillContext:e}=globalThis;e&&e(t),t.state=new go(t,{copyState:i}),function(t){const e=t.useProgram.bind(t);t.useProgram=function(n){t.state.program!==n&&(e(n),t.state.program=n)}}(t);for(const n in ao){po(t,n,ao[n])}fo(t,"getParameter"),fo(t,"isEnabled")}return t.state.enable=n,t}function yo(t){Lr(t.state),t.state.pop()}function vo(t,e){if(Lr(Br(t),"setParameters requires a WebGL context"),uo(e))return;const n={};for(const r in e){const i=Number(r),o=ro[r];o&&("string"===typeof o?n[o]=!0:o(t,e[r],i))}const i=t.state&&t.state.cache;if(i)for(const r in n){(0,so[r])(t,e,i)}}function bo(t,e,n){if(uo(e))return n(t);const{nocatch:i=!0}=e;let r;if(function(t){t.state||mo(t,{copyState:!1}),t.state.push()}(t),vo(t,e),i)r=n(t),yo(t);else try{r=n(t)}finally{yo(t)}return r}function _o(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,i="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return i?t.drawingBufferWidth/i:1}return 1}function wo(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(t,e,n,i,r){const o=xo(t[0],e,n);let s=So(t[1],e,i,r),a=xo(t[0]+1,e,n);const l=a===n-1?a:a-1;let c;a=So(t[1]+1,e,i,r),r?(a=0===a?a:a+1,c=s,s=a):c=a===i-1?a:a-1;return{x:o,y:s,width:Math.max(l-o+1,1),height:Math.max(c-s+1,1)}}(e,_o(t),t.drawingBufferWidth,t.drawingBufferHeight,n)}function xo(t,e,n){return Math.min(Math.round(t*e),n-1)}function So(t,e,n,i){return i?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const Eo=S(),To=Eo&&"undefined"!==typeof document,Po={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function Ao(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Lr(Eo,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),t=Object.assign({},Po,t);const{width:e,height:n}=t;function i(e){if(t.throwOnError)throw new Error(e);return console.error(e),null}let r;t.onError=i;const{canvas:o}=t,s=function(t){let e,{canvas:n,width:i=800,height:r=600,onError:o}=t;if("string"===typeof n){To&&"complete"===document.readyState||o("createGLContext called on canvas '".concat(n,"' before page was loaded")),e=document.getElementById(n)}else n?e=n:(e=document.createElement("canvas"),e.id="lumagl-canvas",e.style.width=Number.isFinite(i)?"".concat(i,"px"):"100%",e.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",document.body.insertBefore(e,document.body.firstChild));return e}({canvas:o,width:e,height:n,onError:i});return r=function(t,e){const{onError:n}=e;let i=null;const r=t=>i=t.statusMessage||i;t.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:o=!0,webgl2:s=!0}=e;let a=null;s&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e));o&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e));if(t.removeEventListener("webglcontextcreationerror",r,!1),!a)return n("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"));e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1);e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1);return a}(s,t),r?(r=Co(r,t),function(t){const e=Nr(t)?"WebGL2":"WebGL1",n=function(t){const e=t.getParameter(7936),n=t.getParameter(7937),i=t.getExtension("WEBGL_debug_renderer_info"),r=i&&t.getParameter(i.UNMASKED_VENDOR_WEBGL||7936),o=i&&t.getParameter(i.UNMASKED_RENDERER_WEBGL||7937);return{vendor:r||e,renderer:o||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),i=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",r=t.debug?" debug":"";Or.info(1,"".concat(e).concat(r," context ").concat(i))()}(r),r):null}function Co(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||function(t){if("undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext)return 2;return 1}(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},Po,e);const{manageState:n,debug:i}=e;return n&&mo(t,{copyState:!1,log:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Or.log(1,...e)()}}),Eo&&i&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),Or.level=Math.max(Or.level,1)):Or.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function Io(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){return void function(t,e,n){let i="width"in n?n.width:t.canvas.clientWidth,r="height"in n?n.height:t.canvas.clientHeight;i&&r||(Or.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=t.canvas.width||1,r=t.canvas.height||1);t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const o=t.luma.canvasSizeInfo;if(o.clientWidth!==i||o.clientHeight!==r||o.devicePixelRatio!==e){let n=e;const o=Math.floor(i*n),s=Math.floor(r*n);t.canvas.width=o,t.canvas.height=s,t.drawingBufferWidth===o&&t.drawingBufferHeight===s||(Or.warn("Device pixel ratio clamped")(),n=Math.min(t.drawingBufferWidth/i,t.drawingBufferHeight/r),t.canvas.width=Math.floor(i*n),t.canvas.height=Math.floor(r*n)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(t,function(t){const e="undefined"===typeof window?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}(e.useDevicePixels),e)}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}const Mo="8.5.21";const ko=new class{constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new Q({id:t})),this.stats.get(t)}};if(globalThis.luma&&globalThis.luma.VERSION!==Mo)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Mo));globalThis.luma||(S()&&Or.log(1,"luma.gl ".concat(Mo," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:Mo,version:Mo,log:Or,stats:ko,globals:{modules:{},nodeIO:{}}});globalThis.luma;function Oo(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function Lo(t,e){if("string"!==typeof e)return e;const n=Number(e);if(!isNaN(n))return n;const i=t[e=e.replace(/^.*\./,"")];return Oo(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function Ro(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const Fo={};function Bo(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";Fo[t]=Fo[t]||1;const e=Fo[t]++;return"".concat(t,"-").concat(e)}function No(t){return Oo("number"===typeof t,"Input must be a number"),t&&0===(t&t-1)}function zo(t){let e=!0;for(const n in t){e=!1;break}return e}function Do(t,e,n,i){const r="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(t);i.forEach((t=>{o.methodName||(o[t]=()=>{throw Or.removed("Calling removed method ".concat(e,".").concat(t,": "),r)(),new Error(t)})}))}const jo="Resource subclass must define virtual methods";class Uo{get[Symbol.toStringTag](){return"Resource"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};zr(t);const{id:n,userData:i={}}=e;this.gl=t,this.gl2=t,this.id=n||Bo(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=e.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,e&&t&&e.filter(Boolean).forEach((t=>t.delete())),this}bind(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!==typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}unbind(){this.bind(null)}getParameter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Oo(t=Lo(this.gl,t));const n=(this.constructor.PARAMETERS||{})[t];if(n){const t=Nr(this.gl);if(!((!("webgl2"in n)||t)&&(!("extension"in n)||this.gl.getExtension(n.extension)))){const e=n.webgl1,i="webgl2"in n?n.webgl2:n.webgl1;return t?i:e}}return this._getParameter(t,e)}getParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:e,keys:n}=t,i=this.constructor.PARAMETERS||{},r=Nr(this.gl),o={},s=e||Object.keys(i);for(const a of s){const e=i[a];if(e&&(!("webgl2"in e)||r)&&(!("extension"in e)||this.gl.getExtension(e.extension))){const i=n?Ro(this.gl,a):a;o[i]=this.getParameter(a,t),n&&"GLenum"===e.type&&(o[i]=Ro(this.gl,o[i]))}}return o}setParameter(t,e){Oo(t=Lo(this.gl,t));const n=(this.constructor.PARAMETERS||{})[t];if(n){const t=Nr(this.gl);if(!((!("webgl2"in n)||t)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(e=Lo(e))}return this._setParameter(t,e),this}setParameters(t){for(const e in t)this.setParameter(e,t[e]);return this}stubRemovedMethods(t,e,n){return Do(this,t,e,n)}initialize(t){}_createHandle(){throw new Error(jo)}_deleteHandle(){throw new Error(jo)}_bindHandle(t){throw new Error(jo)}_getOptsFromHandle(){throw new Error(jo)}_getParameter(t,e){throw new Error(jo)}_setParameter(t,e){throw new Error(jo)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const t=this[Symbol.toStringTag],e=ko.get("Resource Counts");e.get("Resources Created").incrementCount(),e.get("".concat(t,"s Created")).incrementCount(),e.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this[Symbol.toStringTag];ko.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(t,e),this._trackAllocatedMemoryForContext(t,e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=t}_trackAllocatedMemoryForContext(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const i=ko.get("Memory Usage".concat(n));i.get("GPU Memory").addCount(t),i.get("".concat(e," Memory")).addCount(t)}_trackDeallocatedMemory(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(t),this._trackDeallocatedMemoryForContext(t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=ko.get("Memory Usage".concat(e));n.get("GPU Memory").subtractCount(this.byteLength),n.get("".concat(t," Memory")).subtractCount(this.byteLength)}}const Vo="Failed to deduce GL constant from typed array";function Wo(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Vo)}}function Ho(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Go(t){let{data:e,width:n,height:i}=t;const r=Math.round(n/2),o=Math.round(i/2),s=new Uint8Array(r*o*4);for(let a=0;a<o;a++)for(let t=0;t<r;t++)for(let i=0;i<4;i++)s[4*(a*r+t)+i]=e[4*(2*a*n+2*t)+i];return{data:s,width:r,height:o}}function qo(t,e,n){const{removedProps:i={},deprecatedProps:r={},replacedProps:o={}}=n;for(const a in i)if(a in e){const e=i[a]?"".concat(t,".").concat(i[a]):"N/A";Or.removed("".concat(t,".").concat(a),e)()}for(const a in r)if(a in e){const e=r[a];Or.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(e))()}let s=null;for(const a in o)if(a in e){const n=o[a];Or.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(n))(),s=s||Object.assign({},e),s[n]=e[a],delete s[a]}return s||e}const Yo={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Xo={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Ko{static getBytesPerElement(t){return Ho(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){Oo(t.size);return Ho(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new Ko(...[Yo,...e])}constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((t=>this._assign(t))),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Ko.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Ko.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=qo("Accessor",t,Xo),void 0!==t.type&&(this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&("boolean"===typeof t.index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),this}}const Zo={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},$o={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Zo},Qo={removedProps:Zo};class Jo extends Uo{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=e.target||(this.gl.webgl2?36662:34962),this.initialize(e),Object.seal(this)}getElementCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/Ko.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/Ko.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=qo("Buffer",t,$o),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return"accessor"in(t=qo("Buffer",t,Qo))&&this.setAccessor(t.accessor),this}setAccessor(t){return delete(t=Object.assign({},t)).buffer,this.accessor=new Ko(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:e,offset:n=0,srcOffset:i=0}=t,r=t.byteLength||t.length;Oo(e);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==i||void 0!==r?(Dr(this.gl),this.gl.bufferSubData(this.target,n,e,i,r)):this.gl.bufferSubData(o,n,e),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(e),this}copyData(t){let{sourceBuffer:e,readOffset:n=0,writeOffset:i=0,size:r}=t;const{gl:o}=this;return Dr(o),o.bindBuffer(36662,e.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,n,i,r),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:e=0,dstOffset:n=0,length:i=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Dr(this.gl);const r=Ho(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(e),s=n;let a,l;t?(l=t.length,a=l-s):(a=Math.min(o,i||o),l=s+a);const c=Math.min(o,a);return i=i||c,Oo(i<=c),t=t||new r(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,e,t,n,i),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index,offset:n=0,size:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?void 0!==i?this.gl.bindBufferRange(t,e,this.handle,n,i):(Oo(0===n),this.gl.bindBufferBase(t,e,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?this.gl.bindBufferBase(t,e,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength+e;Oo(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.usage),this.gl.bufferSubData(i,e,t),this.gl.bindBuffer(i,null),this.debugData=t.slice(0,10),this.bytesUsed=n,this._trackAllocatedMemory(n);const r=Wo(t);return Oo(r),this.setAccessor(new Ko(this.accessor,{type:r})),this}_setByteLength(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Oo(t>=0),this._trackDeallocatedMemory();let n=t;0===t&&(n=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,e),this.gl.bindBuffer(i,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const e=t/Ho(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-e}_inferType(t){this.accessor.type||this.setAccessor(new Ko(this.accessor,{type:Wo(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}get type(){return Or.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Or.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return Or.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return Or.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Ko(this.accessor,t),this}}const ts={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},es={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},ns={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};const is=[9729,9728],rs=globalThis.WebGLBuffer||function(){};class os extends Uo{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:n,linearFiltering:i}=e;let r=!0;return n&&(r=r&&function(t,e){const n=ts[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const i=Nr(t)&&n.gl2||n.gl1;return"string"===typeof i?t.getExtension(i):i}(t,n),r=r&&(!i||function(t,e){const n=ts[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}(t,n))),r}constructor(t,e){const{id:n=Bo("texture"),handle:i,target:r}=e;super(t,{id:n,handle:i}),this.target=r,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data;if(e instanceof Promise)return e.then((e=>this.initialize(Object.assign({},t,{pixels:e,data:e})))),this;const n="undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement;if(n&&e.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,e.addEventListener("loadeddata",(()=>this.initialize(t))),this;const{pixels:i=null,format:r=6408,border:o=0,recreate:s=!1,parameters:a={},pixelStore:l={},textureUnit:c}=t;e||(e=i);let{width:u,height:d,dataFormat:h,type:f,compressed:p=!1,mipmaps:g=!0}=t;const{depth:m=0}=t;return({width:u,height:d,compressed:p,dataFormat:h,type:f}=this._deduceParameters({format:r,type:f,dataFormat:h,compressed:p,data:e,width:u,height:d})),this.width=u,this.height=d,this.depth=m,this.format=r,this.type=f,this.dataFormat=h,this.border=o,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),g&&this._isNPOT()&&(Or.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),g=!1,this._updateForNPOT(a)),this.mipmaps=g,this.setImageData({data:e,width:u,height:d,depth:m,format:r,type:f,dataFormat:h,border:o,mipmaps:g,parameters:l,compressed:p}),g&&this.generateMipmap(),this.setParameters(a),s&&(this.data=e),n&&(this._video={video:e,parameters:a,lastTime:e.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?e.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:e,lastTime:n}=this._video;if(n===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:e}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:e,width:n,mipmaps:i=!1}=t;return n!==this.width||e!==this.height?this.initialize({width:n,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(Or.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),bo(this.gl,t,(()=>{this.gl.generateMipmap(this.target)})),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:e=this.target,pixels:n=null,level:i=0,format:r=this.format,border:o=this.border,offset:s=0,parameters:a={}}=t;let{data:l=null,type:c=this.type,width:u=this.width,height:d=this.height,dataFormat:h=this.dataFormat,compressed:f=!1}=t;l||(l=n),({type:c,dataFormat:h,compressed:f,width:u,height:d}=this._deduceParameters({format:r,type:c,dataFormat:h,compressed:f,data:l,width:u,height:d}));const{gl:p}=this;p.bindTexture(this.target,this.handle);let g,m=null;({data:l,dataType:m}=this._getDataType({data:l,compressed:f}));let y=0;if(bo(this.gl,a,(()=>{switch(m){case"null":p.texImage2D(e,i,r,u,d,o,h,c,l);break;case"typed-array":p.texImage2D(e,i,r,u,d,o,h,c,l,s);break;case"buffer":g=Dr(p),g.bindBuffer(35052,l.handle||l),g.texImage2D(e,i,r,u,d,o,h,c,s),g.bindBuffer(35052,null);break;case"browser-object":Nr(p)?p.texImage2D(e,i,r,u,d,o,h,c,l):p.texImage2D(e,i,r,h,c,l);break;case"compressed":for(const[t,n]of l.entries())p.compressedTexImage2D(e,t,n.format,n.width,n.height,o,n.data),y+=n.levelSize;break;default:Oo(!1,"Unknown image data type")}})),"compressed"===m)this._trackAllocatedMemory(y,"Texture");else if(l&&l.byteLength)this._trackAllocatedMemory(l.byteLength,"Texture");else{const t=es[this.dataFormat]||4,e=ns[this.type]||1;this._trackAllocatedMemory(this.width*this.height*t*e,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:e=this.target,pixels:n=null,data:i=null,x:r=0,y:o=0,width:s=this.width,height:a=this.height,level:l=0,format:c=this.format,type:u=this.type,dataFormat:d=this.dataFormat,compressed:h=!1,offset:f=0,border:p=this.border,parameters:g={}}=t;if(({type:u,dataFormat:d,compressed:h,width:s,height:a}=this._deduceParameters({format:c,type:u,dataFormat:d,compressed:h,data:i,width:s,height:a})),Oo(0===this.depth,"texSubImage not supported for 3D textures"),i||(i=n),i&&i.data){const t=i;i=t.data,s=t.shape[0],a=t.shape[1]}i instanceof Jo&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),bo(this.gl,g,(()=>{if(h)this.gl.compressedTexSubImage2D(e,l,r,o,s,a,c,i);else if(null===i)this.gl.texSubImage2D(e,l,r,o,s,a,d,u,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(e,l,r,o,s,a,d,u,i,f);else if(i instanceof rs){const t=Dr(this.gl);t.bindBuffer(35052,i),t.texSubImage2D(e,l,r,o,s,a,d,u,f),t.bindBuffer(35052,null)}else if(Nr(this.gl)){Dr(this.gl).texSubImage2D(e,l,r,o,s,a,d,u,i)}else this.gl.texSubImage2D(e,l,r,o,d,u,i)})),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Or.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}_getDataType(t){let{data:e,compressed:n=!1}=t;return n?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof Jo?{data:e.handle,dataType:"buffer"}:e instanceof rs?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(t){const{format:e,data:n}=t;let{width:i,height:r,dataFormat:o,type:s,compressed:a}=t;const l=ts[e];return o=o||l&&l.dataFormat,s=s||l&&l.types[0],a=a||l&&l.compressed,({width:i,height:r}=this._deduceImageSize(n,i,r)),{dataFormat:o,type:s,compressed:a,width:i,height:r,format:e,data:n}}_deduceImageSize(t,e,n){let i;return i="undefined"!==typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:n}:{width:e>=0?e:1,height:n>=0?n:1},Oo(i,"Could not deduced texture size"),Oo(void 0===e||i.width===e,"Deduced texture width does not match supplied width"),Oo(void 0===n||i.height===n,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}_setParameter(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:Oo(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!Nr(this.gl)&&(!(!this.width||!this.height)&&(!No(this.width)||!No(this.height)))}_updateForNPOT(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,e){if(this._isNPOT())switch(t){case 10241:-1===is.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071)}return e}}let ss="";class as extends os{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,e){return os.isSupported(t,e)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,i;zr(t),(e instanceof Promise||"string"===typeof e)&&(e={data:e}),"string"===typeof e.data&&(e=Object.assign({},e,{data:(n=e.data,Oo("string"===typeof n),n=ss+n,new Promise(((t,e)=>{try{const r=new Image;r.onload=()=>t(r),r.onerror=()=>e(new Error("Could not load image ".concat(n,"."))),r.crossOrigin=i&&i.crossOrigin||"anonymous",r.src=n}catch(r){e(r)}})))})),super(t,Object.assign({},e,{target:3553})),this.initialize(e),Object.seal(this)}}const ls="EXT_color_buffer_float",cs={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:ls,bpp:2},33327:{gl2:ls,bpp:4},34842:{gl2:ls,bpp:8},33326:{gl2:ls,bpp:4},33328:{gl2:ls,bpp:8},34836:{gl2:ls,bpp:16},35898:{gl2:ls,bpp:4}};class us extends Uo{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!e||function(t,e,n){const i=n[e];if(!i)return!1;const r=Nr(t)&&i.gl2||i.gl1;return"string"===typeof r?t.getExtension(r):r}(t,e,cs)}static getSamplesForFormat(t,e){let{format:n}=e;return t.getInternalformatParameter(36161,n,32937)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.initialize(e),Object.seal(this)}initialize(t){let{format:e,width:n=1,height:i=1,samples:r=0}=t;return Oo(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==r&&Nr(this.gl)?this.gl.renderbufferStorageMultisample(36161,r,e,n,i):this.gl.renderbufferStorage(36161,e,n,i),this.format=e,this.width=n,this.height=i,this.samples=r,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*cs[this.format].bpp),this}resize(t){let{width:e,height:n}=t;return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){this.gl.bindRenderbuffer(36161,this.handle);return this.gl.getRenderbufferParameter(36161,t)}}const ds=6144,hs="clear: bad arguments";function fs(t){let{framebuffer:e=null,color:n=null,depth:i=null,stencil:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o={};e&&(o.framebuffer=e);let s=0;n&&(s|=16384,!0!==n&&(o.clearColor=n)),i&&(s|=256,!0!==i&&(o.clearDepth=i)),r&&(s|=1024,!0!==i&&(o.clearStencil=i)),Oo(0!==s,hs),bo(t,o,(()=>{t.clear(s)}))}const ps=[34069,34070,34071,34072,34073,34074];class gs extends os{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};zr(t),super(t,Object.assign({},e,{target:34067})),this.initialize(e),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:e=!0,parameters:n={}}=t;return this.opts=t,this.setCubeMapImageData(t).then((()=>{this.loaded=!0,e&&this.generateMipmap(t),this.setParameters(n)})),this}subImage(t){let{face:e,data:n,x:i=0,y:r=0,mipmapLevel:o=0}=t;return this._subImage({target:e,data:n,x:i,y:r,mipmapLevel:o})}async setCubeMapImageData(t){let{width:e,height:n,pixels:i,data:r,border:o=0,format:s=6408,type:a=5121}=t;const{gl:l}=this,c=i||r,u=await Promise.all(ps.map((t=>{const e=c[t];return Promise.all(Array.isArray(e)?e:[e])})));this.bind(),ps.forEach(((t,i)=>{u[i].length>1&&!1!==this.opts.mipmaps&&Or.warn("".concat(this.id," has mipmap and multiple LODs."))(),u[i].forEach(((i,r)=>{e&&n?l.texImage2D(t,r,s,e,n,o,s,a,i):l.texImage2D(t,r,s,s,a,i)}))})),this.unbind()}setImageDataForFace(t){const{face:e,width:n,height:i,pixels:r,data:o,border:s=0,format:a=6408,type:l=5121}=t,{gl:c}=this,u=r||o;return this.bind(),u instanceof Promise?u.then((n=>this.setImageDataForFace(Object.assign({},t,{face:e,data:n,pixels:n})))):this.width||this.height?c.texImage2D(e,0,a,n,i,s,a,l,u):c.texImage2D(e,0,a,a,l,u),this}}gs.FACES=ps;class ms extends os{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return Nr(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Dr(t),e=Object.assign({depth:1},e,{target:32879,unpackFlipY:!1}),super(t,e),this.initialize(e),Object.seal(this)}setImageData(t){let{level:e=0,dataFormat:n=6408,width:i,height:r,depth:o=1,border:s=0,format:a,type:l=5121,offset:c=0,data:u,parameters:d={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),bo(this.gl,d,(()=>{ArrayBuffer.isView(u)&&this.gl.texImage3D(this.target,e,n,i,r,o,s,a,l,u),u instanceof Jo&&(this.gl.bindBuffer(35052,u.handle),this.gl.texImage3D(this.target,e,n,i,r,o,s,a,l,c))})),u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const t=es[this.dataFormat]||4,e=ns[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*t*e,"Texture")}return this.loaded=!0,this}}function ys(t,e){const{gl:n,width:i,height:r,id:o}=t;return new Cs(n,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:i,height:r,attachments:{36064:t}}))}function vs(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:l,sourceType:c}=e;const{framebuffer:u,deleteFramebuffer:d}=_s(t);Oo(u);const{gl:h,handle:f,attachments:p}=u;a=a||u.width,l=l||u.height,36064===o&&null===f&&(o=1028),Oo(p[o]),c=c||p[o].type,s=function(t,e,n,i,r){if(t)return t;const o=Ho(e=e||5121,{clamped:!1}),s=function(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Oo(!1),0}}(n);return new o(i*r*s)}(s,c,r,a,l),c=c||Wo(s);const g=h.bindFramebuffer(36160,f);return h.readPixels(n,i,a,l,r,c,s),h.bindFramebuffer(36160,g||null),d&&u.delete(),s}function bs(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=vs(t,{sourceAttachment:e}),{width:r,height:o}=t;for(;o>n;)({data:i,width:r,height:o}=Go({data:i,width:r,height:o}));!function(t){let{data:e,width:n,height:i,bytesPerPixel:r=4,temp:o}=t;const s=n*r;o=o||new Uint8Array(s);for(let a=0;a<i/2;++a){const t=a*s,n=(i-a-1)*s;o.set(e.subarray(t,t+s)),e.copyWithin(t,n,n+s),e.set(o,n)}}({data:i,width:r,height:o});const s=document.createElement("canvas");s.width=r,s.height=o;const a=s.getContext("2d"),l=a.createImageData(r,o);return l.data.set(i),a.putImageData(l,0,0),s.toDataURL()}function _s(t){return t instanceof Cs?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:ys(t),deleteFramebuffer:!0}}const ws="TIMER_QUERY",xs="ELEMENT_INDEX_UINT32";const Ss={["WEBGL2"]:[!1,!0],["VERTEX_ARRAY_OBJECT"]:["OES_vertex_array_object",!0],[ws]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],["INSTANCED_RENDERING"]:["ANGLE_instanced_arrays",!0],["MULTIPLE_RENDER_TARGETS"]:["WEBGL_draw_buffers",!0],[xs]:["OES_element_index_uint",!0],["BLEND_EQUATION_MINMAX"]:["EXT_blend_minmax",!0],["FLOAT_BLEND"]:["EXT_float_blend"],["COLOR_ENCODING_SRGB"]:["EXT_sRGB",!0],["TEXTURE_DEPTH"]:["WEBGL_depth_texture",!0],["TEXTURE_FLOAT"]:["OES_texture_float",!0],["TEXTURE_HALF_FLOAT"]:["OES_texture_half_float",!0],["TEXTURE_FILTER_LINEAR_FLOAT"]:["OES_texture_float_linear"],["TEXTURE_FILTER_LINEAR_HALF_FLOAT"]:["OES_texture_half_float_linear"],["TEXTURE_FILTER_ANISOTROPIC"]:["EXT_texture_filter_anisotropic"],["COLOR_ATTACHMENT_RGBA32F"]:[function(t){const e=new as(t,{format:6408,type:5126,dataFormat:6408}),n=new Cs(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=n.getStatus();return e.delete(),n.delete(),36053===i},"EXT_color_buffer_float"],["COLOR_ATTACHMENT_FLOAT"]:[!1,"EXT_color_buffer_float"],["COLOR_ATTACHMENT_HALF_FLOAT"]:["EXT_color_buffer_half_float"],["GLSL_FRAG_DATA"]:["WEBGL_draw_buffers",!0],["GLSL_FRAG_DEPTH"]:["EXT_frag_depth",!0],["GLSL_DERIVATIVES"]:["OES_standard_derivatives",!0],["GLSL_TEXTURE_LOD"]:["EXT_shader_texture_lod",!0]},Es=2;function Ts(t,e){return(e=Array.isArray(e)?e:[e]).every((e=>Ps(t,e)))}function Ps(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function(t,e){const n=Ss[e];let i;Oo(n,e);const r=Nr(t)&&n[1]||n[0];if("function"===typeof r)i=r(t);else if(Array.isArray(r)){i=!0;for(const e of r)i=i&&Boolean(t.getExtension(e))}else"string"===typeof r?i=Boolean(t.getExtension(r)):"boolean"===typeof r?i=r:Oo(!1);return i}(t,e)),t.luma.caps[e]||Or.log(Es,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}const As="Multiple render targets not supported";class Cs extends Uo{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:n,colorBufferHalfFloat:i}=e;let r=!0;return n&&(r=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),i&&(r=r&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),r}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new Cs(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=Dr(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=Dr(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(e),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:e=1,height:n=1,attachments:i=null,color:r=!0,depth:o=!0,stencil:s=!1,check:a=!0,readBuffer:l,drawBuffers:c}=t;if(Oo(e>=0&&n>=0,"Width and height need to be integers"),this.width=e,this.height=n,i)for(const u in i){const t=i[u];(Array.isArray(t)?t[0]:t).resize({width:e,height:n})}else i=this._createDefaultAttachments(r,o,s,e,n);this.update({clearAttachments:!0,attachments:i,readBuffer:l,drawBuffers:c}),i&&a&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:e={},readBuffer:n,drawBuffers:i,clearAttachments:r=!1,resizeAttachments:o=!0}=t;this.attach(e,{clearAttachments:r,resizeAttachments:o});const{gl:s}=this,a=s.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),i&&this._setDrawBuffers(i),s.bindFramebuffer(36160,a||null),this}resize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:e,height:n}=t;if(null===this.handle)return Oo(void 0===e&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===e&&(e=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),e!==this.width&&n!==this.height&&Or.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(e,"x").concat(n))();for(const i in this.attachments)this.attachments[i].resize({width:e,height:n});return this.width=e,this.height=n,this}attach(t){let{clearAttachments:e=!1,resizeAttachments:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i={};e&&Object.keys(this.attachments).forEach((t=>{i[t]=null})),Object.assign(i,t);const r=this.gl.bindFramebuffer(36160,this.handle);for(const o in i){Oo(void 0!==o,"Misspelled framebuffer binding point?");const t=Number(o),e=i[t];let r=e;if(r)if(r instanceof us)this._attachRenderbuffer({attachment:t,renderbuffer:r});else if(Array.isArray(e)){const[n,i=0,o=0]=e;r=n,this._attachTexture({attachment:t,texture:n,layer:i,level:o})}else this._attachTexture({attachment:t,texture:r,layer:0,level:0});else this._unattach(t);n&&r&&r.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,r||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter((t=>!this.attachments[t])).forEach((t=>{delete this.attachments[t]}))}checkStatus(){const{gl:t}=this,e=this.getStatus();if(36053!==e)throw new Error(function(t){return(Cs.STATUS||{})[t]||"Framebuffer error ".concat(t)}(e));return this}getStatus(){const{gl:t}=this,e=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,e||null),n}clear(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:e,depth:n,stencil:i,drawBuffers:r=[]}=t,o=this.gl.bindFramebuffer(36160,this.handle);return(e||n||i)&&fs(this.gl,{color:e,depth:n,stencil:i}),r.forEach(((t,e)=>{!function(t){let{framebuffer:e=null,buffer:n=ds,drawBuffer:i=0,value:r=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Dr(t),bo(t,{framebuffer:e},(()=>{switch(n){case ds:switch(r.constructor){case Int32Array:t.clearBufferiv(n,i,r);break;case Uint32Array:t.clearBufferuiv(n,i,r);break;case Float32Array:default:t.clearBufferfv(n,i,r)}break;case 6145:t.clearBufferfv(6145,0,[r]);break;case 6146:t.clearBufferiv(6146,0,[r]);break;case 34041:const[e,o]=r;t.clearBufferfi(34041,0,e,o);break;default:Oo(!1,hs)}}))}(this.gl,{drawBuffer:e,value:t})})),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return Or.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Or.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Or.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Or.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Or.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Or.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:e=[],x:n=0,y:i=0,width:r,height:o}=t;const s=Dr(this.gl),a=s.bindFramebuffer(36008,this.handle);return 0===n&&0===i&&void 0===r&&void 0===o?s.invalidateFramebuffer(36008,e):s.invalidateFramebuffer(36008,e,n,i,r,o),s.bindFramebuffer(36008,a),this}getAttachmentParameter(t,e,n){let i=this._getAttachmentParameterFallback(e);return null===i&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),n&&i>1e3&&(i=Ro(this.gl,i)),i}getAttachmentParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const r of n){i[e?Ro(this.gl,r):r]=this.getAttachmentParameter(t,r,e)}return i}getParameters(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=Object.keys(this.attachments),n={};for(const i of e){const e=Number(i);n[t?Ro(this.gl,e):e]=this.getAttachmentParameters(e,t)}return n}show(){return"undefined"!==typeof window&&window.open(bs(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t>Or.level||"undefined"===typeof window)return this;e=e||"Framebuffer ".concat(this.id);const n=bs(this,{targetMaxHeight:100});return Or.image({logLevel:t,message:e,image:n},e)(),this}bind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,e,n,i,r){let o=null;return t&&(o=o||{},o[36064]=new as(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:r,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),e&&n?(o=o||{},o[33306]=new us(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(o[33306])):e?(o=o||{},o[36096]=new us(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:r}),this.ownResources.push(o[36096])):n&&Oo(!1),o}_unattach(t){const e=this.attachments[t];e&&(e instanceof us?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:e=36064,renderbuffer:n}=t;const{gl:i}=this;i.framebufferRenderbuffer(36160,e,36161,n.handle),this.attachments[e]=n}_attachTexture(t){let{attachment:e=36064,texture:n,layer:i,level:r}=t;const{gl:o}=this;switch(o.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:Dr(o).framebufferTextureLayer(36160,e,n.target,r,i);break;case 34067:const t=function(t){return t<34069?t+34069:t}(i);o.framebufferTexture2D(36160,e,t,n.handle,r);break;case 3553:o.framebufferTexture2D(36160,e,3553,n.handle,r);break;default:Oo(!1,"Illegal texture type")}o.bindTexture(n.target,null),this.attachments[e]=n}_setReadBuffer(t){const e=Nr(n=this.gl)?n:null;var n;e?e.readBuffer(t):Oo(36064===t||1029===t,As),this.readBuffer=t}_setDrawBuffers(t){const{gl:e}=this,n=Dr(e);if(n)n.drawBuffers(t);else{const n=e.getExtension("WEBGL_draw_buffers");n?n.drawBuffersWEBGL(t):Oo(1===t.length&&(36064===t[0]||1029===t[0]),As)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const e=function(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in Ss)void 0===t.luma.caps[e]&&(t.luma.caps[e]=Ps(t,e));return t.luma.caps}(this.gl);switch(t){case 36052:return e.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.WEBGL2?null:8;case 33297:return e.WEBGL2?null:5125;case 33296:return e.WEBGL2||e.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}Cs.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const Is={5126:Ws.bind(null,"uniform1fv",Fs,1,Hs),35664:Ws.bind(null,"uniform2fv",Fs,2,Hs),35665:Ws.bind(null,"uniform3fv",Fs,3,Hs),35666:Ws.bind(null,"uniform4fv",Fs,4,Hs),5124:Ws.bind(null,"uniform1iv",Bs,1,Hs),35667:Ws.bind(null,"uniform2iv",Bs,2,Hs),35668:Ws.bind(null,"uniform3iv",Bs,3,Hs),35669:Ws.bind(null,"uniform4iv",Bs,4,Hs),35670:Ws.bind(null,"uniform1iv",Bs,1,Hs),35671:Ws.bind(null,"uniform2iv",Bs,2,Hs),35672:Ws.bind(null,"uniform3iv",Bs,3,Hs),35673:Ws.bind(null,"uniform4iv",Bs,4,Hs),35674:Ws.bind(null,"uniformMatrix2fv",Fs,4,Gs),35675:Ws.bind(null,"uniformMatrix3fv",Fs,9,Gs),35676:Ws.bind(null,"uniformMatrix4fv",Fs,16,Gs),35678:Vs,35680:Vs,5125:Ws.bind(null,"uniform1uiv",Ns,1,Hs),36294:Ws.bind(null,"uniform2uiv",Ns,2,Hs),36295:Ws.bind(null,"uniform3uiv",Ns,3,Hs),36296:Ws.bind(null,"uniform4uiv",Ns,4,Hs),35685:Ws.bind(null,"uniformMatrix2x3fv",Fs,6,Gs),35686:Ws.bind(null,"uniformMatrix2x4fv",Fs,8,Gs),35687:Ws.bind(null,"uniformMatrix3x2fv",Fs,6,Gs),35688:Ws.bind(null,"uniformMatrix3x4fv",Fs,12,Gs),35689:Ws.bind(null,"uniformMatrix4x2fv",Fs,8,Gs),35690:Ws.bind(null,"uniformMatrix4x3fv",Fs,12,Gs),35678:Vs,35680:Vs,35679:Vs,35682:Vs,36289:Vs,36292:Vs,36293:Vs,36298:Vs,36299:Vs,36300:Vs,36303:Vs,36306:Vs,36307:Vs,36308:Vs,36311:Vs},Ms={},ks={},Os={},Ls=[0];function Rs(t,e,n,i){1===e&&"boolean"===typeof t&&(t=t?1:0),Number.isFinite(t)&&(Ls[0]=t,t=Ls);const r=t.length;if(r%e&&Or.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let o=i[r];o||(o=new n(r),i[r]=o);for(let s=0;s<r;s++)o[s]=t[s];return o}function Fs(t,e){return Rs(t,e,Float32Array,Ms)}function Bs(t,e){return Rs(t,e,Int32Array,ks)}function Ns(t,e){return Rs(t,e,Uint32Array,Os)}function zs(t,e,n){const i=Is[n.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(n.type));return i().bind(null,t,e)}function Ds(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const e=t.match(/([^[]*)(\[[0-9]+\])?/);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function js(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!isFinite(t)||(!0===t||!1===t||(t instanceof os||(t instanceof us||t instanceof Cs&&Boolean(t.texture))))}function Us(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const i=t[e];for(let t=0,e=n.length;t<e;++t)i[t]=n[t]}else t[e]=n.slice();else t[e]=n}function Vs(){let t=null;return(e,n,i)=>{const r=t!==i;return r&&(e.uniform1i(n,i),t=i),r}}function Ws(t,e,n,i){let r=null,o=null;return(s,a,l)=>{const c=e(l,n),u=c.length;let d=!1;if(null===r)r=new Float32Array(u),o=u,d=!0;else{Oo(o===u,"Uniform length cannot change.");for(let t=0;t<u;++t)if(c[t]!==r[t]){d=!0;break}}return d&&(i(s,t,a,c),r.set(c)),d}}function Hs(t,e,n,i){t[e](n,i)}function Gs(t,e,n,i){t[e](n,!1,i)}function qs(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const n=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return n?n[1]:e}const Ys=35632,Xs=35633;function Ks(t,e,n,i){const r=t.split(/\r?\n/),o={},s={},a=i||qs(e)||"(unnamed)",l="".concat(function(t){switch(t){case Ys:return"fragment";case Xs:return"vertex";default:return"unknown type"}}(n)," shader ").concat(a);for(let u=0;u<r.length;u++){const e=r[u];if(e.length<=1)continue;const n=e.split(":"),i=n[0],a=parseInt(n[2],10);if(isNaN(a))throw new Error("GLSL compilation error in ".concat(l,": ").concat(t));"WARNING"!==i?o[a]=e:s[a]=e}const c=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const i=t.split(/\r?\n/),r=String(i.length+e-1).length;return i.map(((t,i)=>{const o=String(i+e),s=o.length;return $s(o,r-s)+n+t}))}(e);return{shaderName:l,errors:Zs(o,c),warnings:Zs(s,c)}}function Zs(t,e){let n="";for(let i=0;i<e.length;i++){const r=e[i];if((t[i+3]||t[i+2]||t[i+1])&&(n+="".concat(r,"\n"),t[i+1])){const e=t[i+1],r=e.split(":",3),o=r[0],s=parseInt(r[1],10)||0,a=e.substring(r.join(":").length+1).trim();n+=$s("^^^ ".concat(o,": ").concat(a,"\n\n"),s)}}return n}function $s(t,e){let n="";for(let i=0;i<e;++i)n+=" ";return"".concat(n).concat(t)}class Qs extends Uo{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Oo(!1),"unknown"}}constructor(t,e){zr(t),Oo("string"===typeof e.source,"Shader: GLSL source code must be a JavaScript string");super(t,{id:qs(e.source,null)||e.id||Bo("unnamed ".concat(Qs.getTypeName(e.shaderType)))}),this.shaderType=e.shaderType,this.source=e.source,this.initialize(e)}initialize(t){let{source:e}=t;const n=qs(e,null);n&&(this.id=Bo(n)),this._compile(e)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(Qs.getTypeName(this.shaderType),":").concat(this.id)}getName(){return qs(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;t.startsWith("#version ")||(t="#version 100\n".concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);if(!this.getParameter(35713)){const t=this.gl.getShaderInfoLog(this.handle),{shaderName:e,errors:n,warnings:i}=Ks(t,this.source,this.shaderType,this.id);throw Or.error("GLSL compilation errors in ".concat(e,"\n").concat(n))(),Or.warn("GLSL compilation warnings in ".concat(e,"\n").concat(i))(),new Error("GLSL compilation errors in ".concat(e))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class Js extends Qs{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,e){"string"===typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class ta extends Qs{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,e){"string"===typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const ea=5120,na=5121,ia=5122,ra=5123,oa=0,sa=1,aa=2,la=3,ca=4,ua=5,da=6,ha=5126,fa=5124,pa=5125,ga={[ha]:[ha,1,"float"],35664:[ha,2,"vec2"],35665:[ha,3,"vec3"],35666:[ha,4,"vec4"],[fa]:[fa,1,"int"],35667:[fa,2,"ivec2"],35668:[fa,3,"ivec3"],35669:[fa,4,"ivec4"],[pa]:[pa,1,"uint"],36294:[pa,2,"uvec2"],36295:[pa,3,"uvec3"],36296:[pa,4,"uvec4"],35670:[ha,1,"bool"],35671:[ha,2,"bvec2"],35672:[ha,3,"bvec3"],35673:[ha,4,"bvec4"],35674:[ha,8,"mat2"],35685:[ha,8,"mat2x3"],35686:[ha,8,"mat2x4"],35675:[ha,12,"mat3"],35687:[ha,12,"mat3x2"],35688:[ha,12,"mat3x4"],35676:[ha,16,"mat4"],35689:[ha,16,"mat4x2"],35690:[ha,16,"mat4x3"]};function ma(t){switch(t){case oa:return oa;case sa:case la:case aa:return sa;case ca:case ua:case da:return ca;default:return Oo(!1),0}}function ya(t){const e=ga[t];if(!e)return null;const[n,i]=e;return{type:n,components:i}}function va(t,e){switch(t){case ea:case na:case ia:case ra:t=ha}for(const n in ga){const[i,r,o]=ga[n];if(i===t&&r===e)return{glType:n,name:o}}return null}class ba{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const e=this.getAttributeInfo(t);return e?e.location:-1}getAttributeAccessor(t){const e=this.getAttributeInfo(t);return e?e.accessor:null}getVaryingInfo(t){const e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const e=this.getVaryingInfo();return e?e.location:-1}getVaryingAccessor(t){const e=this.getVaryingInfo();return e?e.accessor:null}_readAttributesFromProgram(t){const{gl:e}=t,n=e.getProgramParameter(t.handle,35721);for(let i=0;i<n;i++){const{name:n,type:r,size:o}=e.getActiveAttrib(t.handle,i),s=e.getAttribLocation(t.handle,n);s>=0&&this._addAttribute(s,n,r,o)}this.attributeInfos.sort(((t,e)=>t.location-e.location))}_readVaryingsFromProgram(t){const{gl:e}=t;if(!Nr(e))return;const n=e.getProgramParameter(t.handle,35971);for(let i=0;i<n;i++){const{name:n,type:r,size:o}=e.getTransformFeedbackVarying(t.handle,i);this._addVarying(i,n,r,o)}this.varyingInfos.sort(((t,e)=>t.location-e.location))}_addAttribute(t,e,n,i){const{type:r,components:o}=ya(n),s={type:r,size:i*o};this._inferProperties(t,e,s);const a={location:t,name:e,accessor:new Ko(s)};this.attributeInfos.push(a),this.attributeInfosByLocation[t]=a,this.attributeInfosByName[a.name]=a}_inferProperties(t,e,n){/instance/i.test(e)&&(n.divisor=1)}_addVarying(t,e,n,i){const{type:r,components:o}=ya(n),s={location:t,name:e,accessor:new Ko({type:r,size:i*o})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}const _a=35981,wa=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class xa extends Uo{get[Symbol.toStringTag](){return"Program"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Program","v6.0",wa),this._isCached=!1,this.initialize(e),Object.seal(this),this._setId(e.id)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:e,vs:n,fs:i,varyings:r,bufferMode:o=_a}=t;return this.hash=e||"",this.vs="string"===typeof n?new Js(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs="string"===typeof i?new ta(this.gl,{id:"".concat(t.id,"-fs"),source:i}):i,Oo(this.vs instanceof Js),Oo(this.fs instanceof ta),this.uniforms={},this._textureUniforms={},r&&r.length>0&&(Dr(this.gl),this.varyings=r,this.gl2.transformFeedbackVaryings(this.handle,r,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new ba(this),this.setProps(t)}delete(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:e,drawMode:n=4,vertexCount:i,offset:r=0,start:o,end:s,isIndexed:a=!1,indexType:l=5123,instanceCount:c=0,isInstanced:u=c>0,vertexArray:d=null,transformFeedback:h,framebuffer:f,parameters:p={},uniforms:g,samplers:m}=t;if((g||m)&&(Or.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(g||{})),Or.priority>=e){const t=f?f.id:"default",r="mode=".concat(Ro(this.gl,n)," verts=").concat(i," ")+"instances=".concat(c," indexType=").concat(Ro(this.gl,l)," ")+"isInstanced=".concat(u," isIndexed=").concat(a," ")+"Framebuffer=".concat(t);Or.log(e,r)()}return Oo(d),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===i||u&&0===c)&&(d.bindForDraw(i,c,(()=>{if(void 0!==f&&(p=Object.assign({},p,{framebuffer:f})),h){const t=ma(n);h.begin(t)}this._bindTextures(),bo(this.gl,p,(()=>{a&&u?this.gl2.drawElementsInstanced(n,i,l,r,c):a&&Nr(this.gl)&&!isNaN(o)&&!isNaN(s)?this.gl2.drawRangeElements(n,o,s,i,l,r):a?this.gl.drawElements(n,i,l,r):u?this.gl2.drawArraysInstanced(n,r,i,c):this.gl.drawArrays(n,r,i)})),h&&h.end()})),!0)}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Or.priority>=2&&function(t,e,n){for(const i in t){const r=t[i];if((!n||Boolean(n[i]))&&!js(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),r),new Error("".concat(e," Bad uniform ").concat(i))}}(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const e in t){const n=t[e],i=this._uniformSetters[e];if(i){let t=n,r=!1;if(t instanceof Cs&&(t=t.texture),t instanceof os)if(r=this.uniforms[e]!==n,r){void 0===i.textureIndex&&(i.textureIndex=this._textureIndexCounter++);const n=t,{textureIndex:r}=i;n.bind(r),t=r,this._textureUniforms[e]=n}else t=i.textureIndex;else this._textureUniforms[e]&&delete this._textureUniforms[e];(i(t)||r)&&Us(this.uniforms,e,n)}}return this}_areTexturesRenderable(){let t=!0;for(const e in this._textureUniforms){const n=this._textureUniforms[e];n.update(),t=t&&n.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const e=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(e)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const e=this.gl.getAttachedShaders(t),n={};for(const i of e){switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new Js({handle:i});break;case 35632:n.fs=new ta({handle:i})}}return n}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const t=this._getName();this.id=Bo(t)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),Or.time(4,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),Or.timeEnd(4,"linkProgram for ".concat(this._getName()))(),t.debug||Or.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));t.validateProgram(this.handle);if(!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let e=0;e<this._uniformCount;e++){const n=this.gl.getActiveUniform(this.handle,e),{name:i}=Ds(n.name);let r=t.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=zs(t,r,n),n.size>1)for(let e=0;e<n.size;e++)r=t.getUniformLocation(this.handle,"".concat(i,"[").concat(e,"]")),this._uniformSetters["".concat(i,"[").concat(e,"]")]=zs(t,r,n)}this._textureIndexCounter=0}getActiveUniforms(t,e){return this.gl2.getActiveUniforms(this.handle,t,e)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,e){return this.gl2.getActiveUniformBlockParameter(this.handle,t,e)}uniformBlockBinding(t,e){this.gl2.uniformBlockBinding(this.handle,t,e)}}class Sa{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new Sa(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find((e=>e.name===t.name))||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){const e="string"===typeof t?t:t.name;this._defaultModules=this._defaultModules.filter((t=>t.name!==e)),this.stateHash++}addShaderHook(t,e){e&&(t=Object.assign(e,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:e="",fs:n="",defines:i={},inject:r={},varyings:o=[],bufferMode:s=35981,transpileToGLSL100:a=!1}=t,l=this._getModuleList(t.modules),c=this._getHash(e),u=this._getHash(n),d=l.map((t=>this._getHash(t.name))).sort(),h=o.map((t=>this._getHash(t))),f=Object.keys(i).sort(),p=Object.keys(r).sort(),g=[],m=[];for(const v of f)g.push(this._getHash(v)),g.push(this._getHash(i[v]));for(const v of p)m.push(this._getHash(v)),m.push(this._getHash(r[v]));const y="".concat(c,"/").concat(u,"D").concat(g.join("/"),"M").concat(d.join("/"),"I").concat(m.join("/"),"V").concat(h.join("/"),"H").concat(this.stateHash,"B").concat(s).concat(a?"T":"");if(!this._programCache[y]){const t=function(t,e){const{vs:n,fs:i}=e,r=Yi(e.modules||[]);return{gl:t,vs:Mr(t,Object.assign({},e,{source:n,type:ji,modules:r})),fs:Mr(t,Object.assign({},e,{source:i,type:Ui,modules:r})),getUniforms:kr(r)}}(this.gl,{vs:e,fs:n,modules:l,inject:r,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:a});this._programCache[y]=new xa(this.gl,{hash:y,vs:t.vs,fs:t.fs,varyings:o,bufferMode:s}),this._getUniforms[y]=t.getUniforms||(t=>{}),this._useCounts[y]=0}return this._useCounts[y]++,this._programCache[y]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){const e=t.hash;this._useCounts[e]--,0===this._useCounts[e]&&(this._programCache[e].delete(),delete this._programCache[e],delete this._getUniforms[e],delete this._useCounts[e])}_getHash(t){return void 0===this._hashes[t]&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=new Array(this._defaultModules.length+t.length),n={};let i=0;for(let r=0,o=this._defaultModules.length;r<o;++r){const t=this._defaultModules[r],o=t.name;e[i++]=t,n[o]=!0}for(let r=0,o=t.length;r<o;++r){const o=t[r],s=o.name;n[s]||(e[i++]=o,n[s]=!0)}return e.length=i,e}}const Ea={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},Ta="#define SMOOTH_EDGE_RADIUS 0.5",Pa={name:"geometry",vs:"\n".concat(Ta,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(Ta,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},Aa=Object.keys(ki).map((t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(ki[t],";"))).join(""),Ca=Object.keys(Oi).map((t=>"const int PROJECTION_MODE_".concat(t," = ").concat(Oi[t],";"))).join(""),Ia=Object.keys(Li).map((t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(Li[t],";"))).join(""),Ma="".concat(Aa,"\n").concat(Ca,"\n").concat(Ia,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n");function ka(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}return!1}function Oa(t){let e,n={};return i=>{for(const r in i)if(!ka(i[r],n[r])){e=t(i),n=i;break}return e}}const La=[0,0,0,0],Ra=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Fa=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Ba=[0,0,0],Na=[0,0,0],za=Oa((function(t){let{viewport:e,devicePixelRatio:n,coordinateSystem:i,coordinateOrigin:r}=t;const{projectionCenter:o,viewProjectionMatrix:s,originCommon:a,cameraPosCommon:l,shaderCoordinateOrigin:c,geospatialOrigin:u}=function(t,e,n){const{viewMatrixUncentered:i,projectionMatrix:r}=t;let{viewMatrix:o,viewProjectionMatrix:s}=t,a=La,l=La,c=t.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:d,offsetMode:h}=Da(t,e,n);h&&(l=t.projectPosition(u||d),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=Yn([],l,s),o=i||o,s=Ln([],r,o),s=Ln([],s,Ra));return{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:d,geospatialOrigin:u}}(e,i,r),d=e.getDistanceScales(),h=[e.width*n,e.height*n],f=Yn([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,p={project_uCoordinateSystem:i,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:a.slice(0,3),project_uCenter:o,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:h,project_uDevicePixelRatio:n,project_uFocalDistance:f,project_uCommonUnitsPerMeter:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:Ba,project_uScale:e.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:Fa,project_uCameraPosition:l};if(u){const t=e.getDistanceScales(u);switch(i){case ki.METER_OFFSETS:p.project_uCommonUnitsPerWorldUnit=t.unitsPerMeter,p.project_uCommonUnitsPerWorldUnit2=t.unitsPerMeter2;break;case ki.LNGLAT:case ki.LNGLAT_OFFSETS:e._pseudoMeters||(p.project_uCommonUnitsPerMeter=t.unitsPerMeter),p.project_uCommonUnitsPerWorldUnit=t.unitsPerDegree,p.project_uCommonUnitsPerWorldUnit2=t.unitsPerDegree2;break;case ki.CARTESIAN:p.project_uCommonUnitsPerWorldUnit=[1,1,t.unitsPerMeter[2]],p.project_uCommonUnitsPerWorldUnit2=[0,0,t.unitsPerMeter2[2]]}}return p}));function Da(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Na;n.length<3&&(n=[n[0],n[1],0]);let i,r=n,o=!0;switch(i=e===ki.LNGLAT_OFFSETS||e===ki.METER_OFFSETS?n:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Oi.WEB_MERCATOR:e!==ki.LNGLAT&&e!==ki.CARTESIAN||(i=[0,0,0],o=!1);break;case Oi.WEB_MERCATOR_AUTO_OFFSET:e===ki.LNGLAT?r=i:e===ki.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case Oi.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case Oi.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:o}}const ja={};const Ua={name:"project",dependencies:[Ea,Pa],vs:Ma,getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ja;return"viewport"in t?function(t){let{viewport:e,devicePixelRatio:n=1,modelMatrix:i=null,coordinateSystem:r=ki.DEFAULT,coordinateOrigin:o=Na,autoWrapLongitude:s=!1}=t;r===ki.DEFAULT&&(r=e.isGeospatial?ki.LNGLAT:ki.CARTESIAN);const a=za({viewport:e,devicePixelRatio:n,coordinateSystem:r,coordinateOrigin:o});return a.project_uWrapLongitude=s,a.project_uModelMatrix=i||Fa,a}(t):{}}},Va=[Ua],Wa=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Ha(t){const e=Sa.getDefaultProgramManager(t);for(const n of Va)e.addDefaultModule(n);for(const n of Wa)e.addShaderHook(n);return e}class Ga{constructor(t){let{deck:e,stats:n,viewport:i,timeline:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,"layers",void 0),s(this,"context",void 0),s(this,"resourceManager",void 0),s(this,"_lastRenderedLayers",[]),s(this,"_needsRedraw",!1),s(this,"_needsUpdate",!1),s(this,"_nextLayers",null),s(this,"_debug",!1),s(this,"activateViewport",(t=>{q("layerManager.activateViewport",this,t),t&&(this.context.viewport=t)})),this.layers=[],this.resourceManager=new Xe({gl:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:t,deck:e,programManager:t&&Ha(t),stats:n||new Q({id:"deck.gl"}),viewport:i||new Di({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:r||new c,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const i=n.getNeedsRedraw(t);e=e||i}return e}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers(){let{layerIds:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t?this.layers.filter((e=>t.find((t=>0===e.id.indexOf(t))))):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,e){q("layerManager.setLayers",this,e,t),this._lastRenderedLayers=t;const n=Y(t,Boolean);for(const i of n)i.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}_handleError(t,e,n){n.raiseError(e,"".concat(t," of ").concat(n))}_updateLayers(t,e){const n={};for(const o of t)n[o.id]?W.warn("Multiple old layers with same id ".concat(o.id))():n[o.id]=o;const i=[];this._updateSublayersRecursively(e,n,i),this._finalizeOldLayers(n);let r=!1;for(const o of i)if(o.hasUniformTransition()){r="Uniform transition in ".concat(o);break}this._needsUpdate=r,this.layers=i}_updateSublayersRecursively(t,e,n){for(const r of t){r.context=this.context;const t=e[r.id];null===t&&W.warn("Multiple new layers with same id ".concat(r.id))(),e[r.id]=null;let o=null;try{this._debug&&t!==r&&r.validateProps(),t?(this._transferLayerState(t,r),this._updateLayer(r)):this._initializeLayer(r),n.push(r),o=r.isComposite?r.getSubLayers():null}catch(i){this._handleError("matching",i,r)}o&&this._updateSublayersRecursively(o,e,n)}}_finalizeOldLayers(t){for(const e in t){const n=t[e];n&&this._finalizeLayer(n)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=h}catch(e){this._handleError("initialization",e,t)}}_transferLayerState(t,e){e._transferState(t),e.lifecycle=d,e!==t&&(t.lifecycle=f)}_updateLayer(t){try{t._update()}catch(e){this._handleError("update",e,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=p;try{t._finalize(),t.lifecycle=g}catch(e){this._handleError("finalization",e,t)}}}function qa(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!qa(t[i],e[i],n-1))return!1;return!0}if(Array.isArray(e))return!1;if("object"===typeof t&&"object"===typeof e){const i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(const o of i){if(!e.hasOwnProperty(o))return!1;if(!qa(t[o],e[o],n-1))return!1}return!0}return!1}class Ya{constructor(t){s(this,"width",void 0),s(this,"height",void 0),s(this,"views",void 0),s(this,"viewState",void 0),s(this,"controllers",void 0),s(this,"timeline",void 0),s(this,"_viewports",void 0),s(this,"_viewportMap",void 0),s(this,"_isUpdating",void 0),s(this,"_needsRedraw",void 0),s(this,"_needsUpdate",void 0),s(this,"_eventManager",void 0),s(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const e=this.controllers[t];e&&e.finalize()}this.controllers={}}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const e=this.controllers[t];e&&e.updateTransition()}}getViewports(t){return t?this._viewports.filter((e=>e.containsPixel(t))):this._viewports}getViews(){const t={};return this.views.forEach((e=>{t[e.id]=e})),t}getView(t){return this.views.find((e=>e.id===t))}getViewState(t){const e="string"===typeof t?this.getView(t):t,n=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(n):n}getViewport(t){return this._viewportMap[t]}unproject(t,e){const n=this.getViewports(),i={x:t[0],y:t[1]};for(let r=n.length-1;r>=0;--r){const o=n[r];if(o.containsPixel(i)){const n=t.slice();return n[0]-=o.x,n[1]-=o.y,o.unproject(n,e)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,e){t===this.width&&e===this.height||(this.width=t,this.height=e,this.setNeedsUpdate("Size changed"))}_setViews(t){t=Y(t,Boolean);this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){if(t){!qa(t,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=t}else W.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,e){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...e,viewId:t})}_createController(t,e){return new(0,e.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:e=>{var n;return null===(n=this.getView(t.id))||void 0===n?void 0:n.makeViewport({viewState:e,width:this.width,height:this.height})}})}_updateController(t,e,n,i){const r=t.controller;if(r&&n){const o={...e,...r,id:t.id,x:n.x,y:n.y,width:n.width,height:n.height};return i&&i.constructor===r.type||(i=this._createController(t,o)),i&&i.setProps(o),i}return null}_rebuildViewports(){const{views:t}=this,e=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let i=t.length;i--;){const r=t[i],o=this.getViewState(r),s=r.makeViewport({viewState:o,width:this.width,height:this.height});let a=e[r.id];const l=Boolean(r.controller);l&&!a&&(n=!0),!n&&l||!a||(a.finalize(),a=null),this.controllers[r.id]=this._updateController(r,o,s,a),s&&this._viewports.unshift(s)}for(const i in e){const t=e[i];t&&!this.controllers[i]&&t.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach((t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)}))}_diffViews(t,e){return t.length!==e.length||t.some(((n,i)=>!t[i].equals(e[i])))}}const Xa=/([0-9]+\.?[0-9]*)(%|px)/;function Ka(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=Xa.exec(t);if(e&&e.length>=3){const t="%"===e[2],n=parseFloat(e[1]);return{position:t?n/100:n,relative:t}}default:throw new Error("Could not parse position string ".concat(t))}}function Za(t,e){return t.relative?Math.round(t.position*e):t.position}function $a(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class Qa{constructor(t){s(this,"id",void 0),s(this,"viewportInstance",void 0),s(this,"_x",void 0),s(this,"_y",void 0),s(this,"_width",void 0),s(this,"_height",void 0),s(this,"_padding",void 0),s(this,"props",void 0);const{id:e,x:n=0,y:i=0,width:r="100%",height:o="100%",padding:a=null,viewportInstance:l}=t||{};$a(!l||l instanceof Di),this.viewportInstance=l,this.id=e||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=Ka(n),this._y=Ka(i),this._width=Ka(r),this._height=Ka(o),this._padding=a&&{left:Ka(a.left||0),right:Ka(a.right||0),top:Ka(a.top||0),bottom:Ka(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t||(this.viewportInstance?!!t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance):this.ViewportType===t.ViewportType&&qa(this.props,t.props,2))}makeViewport(t){let{width:e,height:n,viewState:i}=t;if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:n});return r.height&&r.width?new this.ViewportType({...i,...this.props,...r}):null}getViewStateId(){const{viewState:t}=this.props;return"string"===typeof t?t:(null===t||void 0===t?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&"object"===typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const e={...t};for(const t in this.props.viewState)"id"!==t&&(e[t]=this.props.viewState[t]);return e}return t}getDimensions(t){let{width:e,height:n}=t;const i={x:Za(this._x,e),y:Za(this._y,n),width:Za(this._width,e),height:Za(this._height,n)};return this._padding&&(i.padding={left:Za(this._padding.left,e),top:Za(this._padding.top,n),right:Za(this._padding.right,e),bottom:Za(this._padding.bottom,n)}),i}get controller(){const t=this.props.controller;return t?!0===t?{type:this.ControllerType}:"function"===typeof t?{type:t}:{type:this.ControllerType,...t}:null}}class Ja extends Di{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{latitude:e=0,longitude:n=0,zoom:i=0,pitch:r=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:l=1.01,nearZ:c,farZ:u,orthographic:d=!1,projectionMatrix:h,repeat:f=!1,worldOffset:p=0,position:g,padding:m,legacyMeterSizes:y=!1}=t;let{width:v,height:b,altitude:_=1.5}=t;const w=Math.pow(2,i);let x;v=v||1,b=b||1;let S=null;if(h)_=h[5]/2,x=Ei(_);else{let n;if(t.fovy?(x=t.fovy,_=Ti(x)):x=Ei(_),m){const{top:t=0,bottom:e=0}=m;n=[0,Je((t+b-e)/2,0,b)-b/2]}S=Si({width:v,height:b,scale:w,center:g&&[0,0,g[2]*_i(e)],offset:n,pitch:r,fovy:x,nearZMultiplier:a,farZMultiplier:l}),Number.isFinite(c)&&(S.near=c),Number.isFinite(u)&&(S.far=u)}let E=function(t){const{height:e,pitch:n,bearing:i,altitude:r,scale:o,center:s}=t,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Rn(a,a,[0,0,-r]),Bn(a,a,-n*di),Nn(a,a,i*di);const l=o/e;var c,u;return Fn(a,a,[l,l,l]),s&&Rn(a,a,((c=[])[0]=-(u=s)[0],c[1]=-u[1],c[2]=-u[2],c)),a}({height:b,pitch:r,bearing:o,scale:w,altitude:_});if(p){E=(new ti).translate([512*p,0,0]).multiplyLeft(E)}super({...t,width:v,height:b,viewMatrix:E,longitude:n,latitude:e,zoom:i,...S,fovy:x,focalDistance:_}),s(this,"longitude",void 0),s(this,"latitude",void 0),s(this,"pitch",void 0),s(this,"bearing",void 0),s(this,"altitude",void 0),s(this,"fovy",void 0),s(this,"orthographic",void 0),s(this,"_subViewports",void 0),s(this,"_pseudoMeters",void 0),this.latitude=e,this.longitude=n,this.zoom=i,this.pitch=r,this.bearing=o,this.altitude=_,this.fovy=x,this.orthographic=d,this._subViewports=f?[]:null,this._pseudoMeters=y,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),e=Math.floor((t[0]+180)/360),n=Math.ceil((t[2]-180)/360);for(let i=e;i<=n;i++){const t=i?new Ja({...this,worldOffset:i}):this;this._subViewports.push(t)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[e,n]=this.projectFlat(t);return[e,n,(t[2]||0)*_i(t[1])]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[e,n]=this.unprojectFlat(t);return[e,n,(t[2]||0)/_i(n)]}addMetersToLngLat(t,e){return xi(t,e)}panByPosition(t,e){const n=Ai(e,this.pixelUnprojectionMatrix),i=Un([],this.projectFlat(t),Vn([],n)),r=Un([],this.center,i),[o,s]=this.unprojectFlat(r);return{longitude:o,latitude:s}}getBounds(){const t=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{width:n,height:i,unproject:r}=t,o={targetZ:e},s=r([0,i],o),a=r([n,i],o);let l,c;return(t.fovy?.5*t.fovy*Ii:Math.atan(.5/t.altitude))>(90-t.pitch)*Ii-.01?(l=Mi(t,0,e),c=Mi(t,n,e)):(l=r([0,0],o),c=r([n,0],o)),[s,a,c,l]}(this,(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0);return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}fitBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{width:n,height:i}=this,{longitude:r,latitude:o,zoom:s}=Ci({width:n,height:i,bounds:t,...e});return new Ja({width:n,height:i,longitude:r,latitude:o,zoom:s})}}s(Ja,"displayName","WebMercatorViewport");class tl{constructor(t){s(this,"_inProgress",void 0),s(this,"_handle",void 0),s(this,"_timeline",void 0),s(this,"time",void 0),s(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var e,n;this.cancel(),this.settings=t,this._inProgress=!0,null===(e=(n=this.settings).onStart)||void 0===e||e.call(n,this)}end(){var t,e;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(t=(e=this.settings).onEnd)||void 0===t||t.call(e,this))}cancel(){var t,e;this._inProgress&&(null===(t=(e=this.settings).onInterrupt)||void 0===t||t.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var t,e;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:t,settings:e}=this;this._handle=t.addChannel({delay:t.getTime(),duration:e.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(t=(e=this.settings).onUpdate)||void 0===t||t.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const el=()=>{},nl=2,il=3,rl=t=>t,ol=1;class sl{constructor(t){s(this,"getControllerState",void 0),s(this,"props",void 0),s(this,"propsInTransition",void 0),s(this,"transition",void 0),s(this,"onViewStateChange",void 0),s(this,"onStateChange",void 0),s(this,"_onTransitionUpdate",(t=>{const{time:e,settings:{interpolator:n,startProps:i,endProps:r,duration:o,easing:s}}=t,a=s(e/o),l=n.interpolateProps(i,r,a);this.propsInTransition=this.getControllerState({...this.props,...l}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})})),this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new tl(t.timeline),this.onViewStateChange=t.onViewStateChange||el,this.onStateChange=t.onStateChange||el}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let e=!1;const n=this.props;if(this.props=t,!n||this._shouldIgnoreViewportChange(n,t))return!1;if(this._isTransitionEnabled(t)){let i=n;if(this.transition.inProgress){const{interruption:t,endProps:e}=this.transition.settings;i={...n,...t===nl?e:this.propsInTransition||n}}this._triggerTransition(i,t),e=!0}else this.transition.cancel();return e}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:e,transitionInterpolator:n}=t;return(e>0||"auto"===e)&&Boolean(n)}_isUpdateDueToCurrentTransition(t){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition)}_shouldIgnoreViewportChange(t,e){return this.transition.inProgress?this.transition.settings.interruption===il||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}_triggerTransition(t,e){const n=this.getControllerState(t),i=this.getControllerState(e).shortestPathFrom(n),r=e.transitionInterpolator,o=r.getDuration?r.getDuration(t,e):e.transitionDuration;if(0===o)return;const s=r.initializeProps(t,i);this.propsInTransition={};const a={duration:o,easing:e.transitionEasing||rl,interpolator:r,interruption:e.transitionInterruption||ol,startProps:s.start,endProps:s.end,onStart:e.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(e.onTransitionInterrupt),onEnd:this._onTransitionEnd(e.onTransitionEnd)};this.transition.start(a),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return e=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),null===t||void 0===t||t(e)}}}class al{constructor(t){s(this,"_propsToCompare",void 0),s(this,"_propsToExtract",void 0),s(this,"_requiredProps",void 0);const{compare:e,extract:n,required:i}=t;this._propsToCompare=e,this._propsToExtract=n||e,this._requiredProps=i}arePropsEqual(t,e){for(const n of this._propsToCompare)if(!(n in t)||!(n in e)||!en(t[n],e[n]))return!1;return!0}initializeProps(t,e){const n={},i={};for(const r of this._propsToExtract)(r in t||r in e)&&(n[r]=t[r],i[r]=e[r]);return this._checkRequiredProps(n),this._checkRequiredProps(i),{start:n,end:i}}getDuration(t,e){return e.transitionDuration}_checkRequiredProps(t){this._requiredProps&&this._requiredProps.forEach((e=>{const n=t[e];$a(Number.isFinite(n)||Array.isArray(n),"".concat(e," is required for transition"))}))}}const ll=["longitude","latitude","zoom","bearing","pitch"],cl=["longitude","latitude","zoom"];class ul extends al{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=Array.isArray(t)?t:t.transitionProps,n=Array.isArray(t)?{}:t;n.transitionProps=Array.isArray(e)?{compare:e,required:e}:e||{compare:ll,required:cl},super(n.transitionProps),s(this,"opts",void 0),this.opts=n}initializeProps(t,e){const n=super.initializeProps(t,e),{makeViewport:i,around:r}=this.opts;if(i&&r){const o=i(t),s=i(e),a=o.unproject(r);n.start.around=r,Object.assign(n.end,{around:s.project(a),aroundPosition:a,width:e.width,height:e.height})}return n}interpolateProps(t,e,n){const i={};for(const r of this._propsToExtract)i[r]=tn(t[r]||0,e[r]||0,n);if(e.aroundPosition&&this.opts.makeViewport){const r=this.opts.makeViewport({...e,...i});Object.assign(i,r.panByPosition(e.aroundPosition,tn(t.around,e.around,n)))}return i}}const dl={transitionDuration:0},hl=t=>1-(1-t)*(1-t),fl=["wheel"],pl=["panstart","panmove","panend"],gl=["pinchstart","pinchmove","pinchend"],ml=["tripanstart","tripanmove","tripanend"],yl=["doubletap"],vl=["keydown"],bl={};class _l{constructor(t){s(this,"props",void 0),s(this,"state",{}),s(this,"transitionManager",void 0),s(this,"eventManager",void 0),s(this,"onViewStateChange",void 0),s(this,"onStateChange",void 0),s(this,"makeViewport",void 0),s(this,"_controllerState",void 0),s(this,"_events",{}),s(this,"_interactionState",{isDragging:!1}),s(this,"_customEvents",[]),s(this,"_eventStartBlocked",null),s(this,"_panMove",!1),s(this,"invertPan",!1),s(this,"dragMode","rotate"),s(this,"inertia",0),s(this,"scrollZoom",!0),s(this,"dragPan",!0),s(this,"dragRotate",!0),s(this,"doubleClickZoom",!0),s(this,"touchZoom",!0),s(this,"touchRotate",!1),s(this,"keyboard",!0),this.transitionManager=new sl({...t,getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const e in this._events){var t;if(this._events[e])null===(t=this.eventManager)||void 0===t||t.off(e,this.handleEvent)}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const e=this._eventStartBlocked;switch(t.type){case"panstart":return!e&&this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return!e&&this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return!e&&this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:e,y:n}=this.props,{offsetCenter:i}=t;return[i.x-e,i.y-n]}isPointInBounds(t,e){const{width:n,height:i}=this.props;if(e&&e.handled)return!1;const r=t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=i;return r&&e&&e.stopPropagation(),r}isFunctionKeyPressed(t){const{srcEvent:e}=t;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const e=setTimeout((()=>{this._eventStartBlocked===e&&(this._eventStartBlocked=null)}),t);this._eventStartBlocked=e}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:e}=t;this.inertia=Number.isFinite(e)?e:!0===e?300:0;const{scrollZoom:n=!0,dragPan:i=!0,dragRotate:r=!0,doubleClickZoom:o=!0,touchZoom:s=!0,touchRotate:a=!1,keyboard:l=!0}=t,c=Boolean(this.onViewStateChange);this.toggleEvents(fl,c&&n),this.toggleEvents(pl,c),this.toggleEvents(gl,c&&(s||a)),this.toggleEvents(ml,c&&a),this.toggleEvents(yl,c&&o),this.toggleEvents(vl,c&&l),this.scrollZoom=n,this.dragPan=i,this.dragRotate=r,this.doubleClickZoom=o,this.touchZoom=s,this.touchRotate=a,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,e){this.eventManager&&t.forEach((t=>{this._events[t]!==e&&(this._events[t]=e,e?this.eventManager.on(t,this.handleEvent):this.eventManager.off(t,this.handleEvent))}))}updateViewport(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i={...t.getViewportProps(),...e},r=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(n),r){const t=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:t})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let n=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(n=!n);const i=this.controllerState[n?"panStart":"rotateStart"]({pos:e});return this._panMove=n,this.updateViewport(i,dl,{isDragging:!0}),!0}_onPan(t){return!!this.isDragging()&&(this._panMove?this._onPanMove(t):this._onPanRotate(t))}_onPanEnd(t){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t))}_onPanMove(t){if(!this.dragPan)return!1;const e=this.getCenter(t),n=this.controllerState.pan({pos:e});return this.updateViewport(n,dl,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:e}=this;if(this.dragPan&&e&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],r=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(r,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:hl},{isDragging:!1,isPanning:!0})}else{const t=this.controllerState.panEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const e=this.getCenter(t),n=this.controllerState.rotate({pos:e});return this.updateViewport(n,dl,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:e}=this;if(this.dragRotate&&e&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],r=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(r,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:hl},{isDragging:!1,isRotating:!0})}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;t.srcEvent.preventDefault();const{speed:n=.01,smooth:i=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:r}=t;let o=2/(1+Math.exp(-Math.abs(r*n)));r<0&&0!==o&&(o=1/o);const s=this.controllerState.zoom({pos:e,scale:o});return this.updateViewport(s,{...this._getTransitionProps({around:e}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.controllerState.rotateStart({pos:e});return this.updateViewport(n,dl,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;const e=this.getCenter(t);e[0]-=t.deltaX;const n=this.controllerState.rotate({pos:e});return this.updateViewport(n,dl,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:e}=this;if(this.touchRotate&&e&&t.velocityY){const n=this.getCenter(t),i=[n[0],n[1]+=t.velocityY*e/2],r=this.controllerState.rotate({pos:i});this.updateViewport(r,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:hl},{isDragging:!1,isRotating:!0}),this.blockEvents(e)}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return bl._startPinchRotation=t.rotation,bl._lastPinchEvent=t,this.updateViewport(n,dl,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;let e=this.controllerState;if(this.touchZoom){const{scale:n}=t,i=this.getCenter(t);e=e.zoom({pos:i,scale:n})}if(this.touchRotate){const{rotation:n}=t;e=e.rotate({deltaAngleX:bl._startPinchRotation-n})}return this.updateViewport(e,dl,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),bl._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:e}=this,{_lastPinchEvent:n}=bl;if(this.touchZoom&&e&&n&&t.scale!==n.scale){const i=this.getCenter(t);let r=this.controllerState.rotateEnd();const o=Math.log2(t.scale),s=(o-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),a=Math.pow(2,o+s*e/2);r=r.zoom({pos:i,scale:a}).zoomEnd(),this.updateViewport(r,{...this._getTransitionProps({around:i}),transitionDuration:e,transitionEasing:hl},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(e)}else{const t=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return bl._startPinchRotation=null,bl._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.isFunctionKeyPressed(t),i=this.controllerState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps({around:e}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const e=this.isFunctionKeyPressed(t),{zoomSpeed:n,moveSpeed:i,rotateSpeedX:r,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:s}=this;let a;const l={};switch(t.srcEvent.code){case"Minus":a=e?s.zoomOut(n).zoomOut(n):s.zoomOut(n),l.isZooming=!0;break;case"Equal":a=e?s.zoomIn(n).zoomIn(n):s.zoomIn(n),l.isZooming=!0;break;case"ArrowLeft":e?(a=s.rotateLeft(r),l.isRotating=!0):(a=s.moveLeft(i),l.isPanning=!0);break;case"ArrowRight":e?(a=s.rotateRight(r),l.isRotating=!0):(a=s.moveRight(i),l.isPanning=!0);break;case"ArrowUp":e?(a=s.rotateUp(o),l.isRotating=!0):(a=s.moveUp(i),l.isPanning=!0);break;case"ArrowDown":e?(a=s.rotateDown(o),l.isRotating=!0):(a=s.moveDown(i),l.isPanning=!0);break;default:return!1}return this.updateViewport(a,this._getTransitionProps(),l),!0}_getTransitionProps(t){const{transition:e}=this;return e&&e.transitionInterpolator?t?{...e,transitionInterpolator:new ul({...t,...e.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:e:dl}}class wl{constructor(t,e){s(this,"_viewportProps",void 0),s(this,"_state",void 0),this._viewportProps=this.applyConstraints(t),this._state=e}getViewportProps(){return this._viewportProps}getState(){return this._state}}class xl extends wl{constructor(t){const{width:e,height:n,latitude:i,longitude:r,zoom:o,bearing:a=0,pitch:l=0,altitude:c=1.5,position:u=[0,0,0],maxZoom:d=20,minZoom:h=0,maxPitch:f=60,minPitch:p=0,startPanLngLat:g,startZoomLngLat:m,startRotatePos:y,startBearing:v,startPitch:b,startZoom:_,normalize:w=!0}=t;$a(Number.isFinite(r)),$a(Number.isFinite(i)),$a(Number.isFinite(o)),super({width:e,height:n,latitude:i,longitude:r,zoom:o,bearing:a,pitch:l,altitude:c,maxZoom:d,minZoom:h,maxPitch:f,minPitch:p,normalize:w,position:u},{startPanLngLat:g,startZoomLngLat:m,startRotatePos:y,startBearing:v,startPitch:b,startZoom:_}),s(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart(t){let{pos:e}=t;return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan(t){let{pos:e,startPos:n}=t;const i=this.getState().startPanLngLat||this._unproject(n);if(!i)return this;const r=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(r)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart(t){let{pos:e}=t;return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate(t){let{pos:e,deltaAngleX:n=0,deltaAngleY:i=0}=t;const{startRotatePos:r,startBearing:o,startPitch:s}=this.getState();if(!r||void 0===o||void 0===s)return this;let a;return a=e?this._getNewRotation(e,r,s,o):{bearing:o+n,pitch:s+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart(t){let{pos:e}=t;return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom(t){let{pos:e,startPos:n,scale:i}=t,{startZoom:r,startZoomLngLat:o}=this.getState();if(o||(r=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const{maxZoom:s,minZoom:a}=this.getViewportProps();let l=r+Math.log2(i);l=Je(l,a,s);const c=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...c.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(t)}zoomOut(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(1/t)}moveLeft(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([t,0])}moveRight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([-t,0])}moveUp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,t])}moveDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,-t])}rotateLeft(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const e=t.getViewportProps(),n={...this.getViewportProps()},{bearing:i,longitude:r}=n;return Math.abs(i-e.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(r-e.longitude)>180&&(n.longitude=r<0?r+360:r-360),n}applyConstraints(t){const{maxZoom:e,minZoom:n,zoom:i}=t;t.zoom=Je(i,n,e);const{maxPitch:r,minPitch:o,pitch:s}=t;t.pitch=Je(s,o,r);const{normalize:a=!0}=t;return a&&Object.assign(t,function(t){const{width:e,height:n,pitch:i=0}=t;let{longitude:r,latitude:o,zoom:s,bearing:a=0}=t;(r<-180||r>180)&&(r=oi(r+180,360)-180),(a<-180||a>180)&&(a=oi(a+180,360)-180);const l=ai(n/512);if(s<=l)s=l,o=0;else{const t=n/2/Math.pow(2,s),e=vi([0,t])[1];if(o<e)o=e;else{const e=vi([0,512-t])[1];o>e&&(o=e)}}return{width:e,height:n,longitude:r,latitude:o,zoom:s,pitch:i,bearing:a}}(t)),t}_zoomFromCenter(t){const{width:e,height:n}=this.getViewportProps();return this.zoom({pos:[e/2,n/2],scale:t})}_panFromCenter(t){const{width:e,height:n}=this.getViewportProps();return this.pan({startPos:[e/2,n/2],pos:[e/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_getNewRotation(t,e,n,i){const r=t[0]-e[0],o=t[1]-e[1],s=t[1],a=e[1],{width:l,height:c}=this.getViewportProps(),u=r/l;let d=0;o>0?Math.abs(c-a)>5&&(d=o/(a-c)*1.2):o<0&&a>5&&(d=1-s/a),d=Je(d,-1,1);const{minPitch:h,maxPitch:f}=this.getViewportProps();let p=n;return d>0?p=n+d*(f-n):d<0&&(p=n-d*(h-n)),{pitch:p,bearing:i+180*u}}}class Sl extends _l{constructor(){super(...arguments),s(this,"ControllerState",xl),s(this,"transition",{transitionDuration:300,transitionInterpolator:new ul({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),s(this,"dragMode","pan")}setProps(t){t.position=t.position||[0,0,0];const e=this.props;super.setProps(t);(!e||e.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class El extends Qa{get ViewportType(){return Ja}get ControllerType(){return Sl}}s(El,"displayName","MapView");const Tl=[255,255,255],Pl=1;let Al=0;class Cl{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,"id",void 0),s(this,"color",void 0),s(this,"intensity",void 0),s(this,"type","ambient");const{color:e=Tl}=t,{intensity:n=Pl}=t;this.id=t.id||"ambient-".concat(Al++),this.color=e,this.intensity=n}}const Il=[255,255,255],Ml=1,kl=[0,0,-1];let Ol=0;class Ll{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,"id",void 0),s(this,"color",void 0),s(this,"intensity",void 0),s(this,"type","directional"),s(this,"direction",void 0),s(this,"shadow",void 0);const{color:e=Il}=t,{intensity:n=Ml}=t,{direction:i=kl}=t,{_shadow:r=!1}=t;this.id=t.id||"directional-".concat(Ol++),this.color=e,this.intensity=n,this.type="directional",this.direction=new Tn(i).normalize().toArray(),this.shadow=r}getProjectedLight(t){return this}}class Rl{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:"pass"};s(this,"id",void 0),s(this,"gl",void 0),s(this,"props",void 0);const{id:n}=e;this.id=n,this.gl=t,this.props={...e}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}class Fl extends Rl{constructor(){super(...arguments),s(this,"_lastRenderIndex",-1)}render(t){return vo(this.gl,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){const{target:e,moduleParameters:n,viewports:i,views:r,onViewportActive:o,clearStack:s=!0,clearCanvas:a=!0}=t;t.pass=t.pass||"unknown";const l=this.gl;a&&function(t,e){const n=e?e.width:t.drawingBufferWidth,i=e?e.height:t.drawingBufferHeight;vo(t,{viewport:[0,0,n,i]}),t.clear(16640)}(l,e),s&&(this._lastRenderIndex=-1);const c=[];for(const u of i){const i=r&&r[u.id];null===o||void 0===o||o(u);const s=this._getDrawLayerParams(u,t),a=u.subViewports||[u];for(const r of a){const o=this._drawLayersInViewport(l,{target:e,moduleParameters:n,viewport:r,view:i,pass:t.pass,layers:t.layers},s);c.push(o)}}return c}_getDrawLayerParams(t,e){let{layers:n,pass:i,isPicking:r=!1,layerFilter:o,cullRect:s,effects:a,moduleParameters:l}=e,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const u=[],d=Bl(this._lastRenderIndex+1),h={layer:n[0],viewport:t,isPicking:r,renderPass:i,cullRect:s},f={};for(let p=0;p<n.length;p++){const e=n[p],r=this._shouldDrawLayer(e,h,o,f),s={shouldDrawLayer:r};r&&!c&&(s.layerRenderIndex=d(e,r),s.moduleParameters=this._getModuleParameters(e,a,i,l),s.layerParameters=this.getLayerParameters(e,p,t)),u[p]=s}return u}_drawLayersInViewport(t,e,n){let{layers:i,moduleParameters:r,pass:o,target:s,viewport:a,view:l}=e;const c=function(t,e){let{moduleParameters:n,target:i,viewport:r}=e;const o=i&&"default-framebuffer"!==i.id,s=n&&n.devicePixelRatio||_o(t),a=o?i.height:t.drawingBufferHeight,l=r;return[l.x*s,a-(l.y+l.height)*s,l.width*s,l.height*s]}(t,{moduleParameters:r,target:s,viewport:a});if(l&&l.props.clear){const e=!0===l.props.clear?{color:!0,depth:!0}:l.props.clear;bo(t,{scissorTest:!0,scissor:c},(()=>fs(t,e)))}const u={totalCount:i.length,visibleCount:0,compositeCount:0,pickableCount:0};vo(t,{viewport:c});for(let h=0;h<i.length;h++){const t=i[h],{shouldDrawLayer:e,layerRenderIndex:r,moduleParameters:s,layerParameters:l}=n[h];if(e&&t.props.pickable&&u.pickableCount++,t.isComposite)u.compositeCount++;else if(e){u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,r),s.viewport=a;try{t._drawLayer({moduleParameters:s,uniforms:{layerIndex:r},parameters:l})}catch(d){t.raiseError(d,"drawing ".concat(t," to ").concat(o))}}}return u}shouldDrawLayer(t){return!0}getModuleParameters(t,e){return null}getLayerParameters(t,e,n){return t.props.parameters}_shouldDrawLayer(t,e,n,i){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;e.layer=t;let r=t.parent;for(;r;){if(!r.props.visible||!r.filterSubLayer(e))return!1;e.layer=r,r=r.parent}if(n){const t=e.layer.id;if(t in i||(i[t]=n(e)),!i[t])return!1}return t.activateViewport(e.viewport),!0}_getModuleParameters(t,e,n,i){var r;const o=Object.assign(Object.create((null===(r=t.internalState)||void 0===r?void 0:r.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:_o(this.gl)});if(e)for(const a of e){var s;Object.assign(o,null===(s=a.getModuleParameters)||void 0===s?void 0:s.call(a,t))}return Object.assign(o,this.getModuleParameters(t,e),i)}}function Bl(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={},i=(r,o)=>{const s=r.props._offset,a=r.id,l=r.parent&&r.parent.id;let c;if(l&&!(l in e)&&i(r.parent,!1),l in n){const t=n[l]=n[l]||Bl(e[l],e);c=t(r,o),n[a]=t}else Number.isFinite(s)?(c=s+(e[l]||0),n[a]=null):c=t;return o&&c>=t&&(t=c+1),e[a]=c,c};return i}class Nl extends Fl{constructor(t,e){super(t,e),s(this,"shadowMap",void 0),s(this,"depthBuffer",void 0),s(this,"fbo",void 0),this.shadowMap=new as(t,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new us(t,{format:33189,width:1,height:1}),this.fbo=new Cs(t,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(t){const e=this.fbo;bo(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(()=>{const n=t.viewports[0],i=_o(this.gl),r=n.width*i,o=n.height*i;r===e.width&&o===e.height||e.resize({width:r,height:o}),super.render({...t,target:e,pass:"shadow"})}))}shouldDrawLayer(t){return!1!==t.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const zl=Oa((function(t){let{viewport:e,center:n}=t;return new ti(e.viewProjectionMatrix).invert().transform(n)})),Dl=Oa((function(t){let{viewport:e,shadowMatrices:n}=t;const i=[],r=e.pixelUnprojectionMatrix,o=e.isGeospatial?void 0:1,s=[[0,0,o],[e.width,0,o],[0,e.height,o],[e.width,e.height,o],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map((t=>function(t,e){const[n,i,r]=t,o=Ai([n,i,r],e);if(Number.isFinite(r))return o;return[o[0],o[1],0]}(t,r)));for(const a of n){const t=a.clone().translate(new Tn(e.center).negate()),n=s.map((e=>t.transform(e))),r=(new ti).ortho({left:Math.min(...n.map((t=>t[0]))),right:Math.max(...n.map((t=>t[0]))),bottom:Math.min(...n.map((t=>t[1]))),top:Math.max(...n.map((t=>t[1]))),near:Math.min(...n.map((t=>-t[2]))),far:Math.max(...n.map((t=>-t[2])))});i.push(r.multiplyRight(a))}return i})),jl=[0,0,0,1],Ul=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];const Vl={name:"shadow",dependencies:[Ua],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?function(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||jl,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},r=zl({viewport:t.viewport,center:e.project_uCenter}),o=[],s=Dl({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const n=s[a],i=n.clone().translate(new Tn(t.viewport.center).negate());e.project_uCoordinateSystem===ki.LNGLAT&&e.project_uProjectionMode===Oi.WEB_MERCATOR?(s[a]=i,o[a]=r):(s[a]=n.clone().multiplyRight(Ul),o[a]=i.transform(r))}for(let a=0;a<s.length;a++)i["shadow_uViewProjectionMatrices[".concat(a,"]")]=s[a],i["shadow_uProjectCenters[".concat(a,"]")]=o[a],t.shadowMaps&&t.shadowMaps.length>0?i["shadow_uShadowMap".concat(a)]=t.shadowMaps[a]:i["shadow_uShadowMap".concat(a)]=t.dummyShadowMap;return i}(t,e):{}}},Wl={color:[255,255,255],intensity:1},Hl=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Gl=[0,0,0,200/255];class ql{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,"id","lighting-effect"),s(this,"props",void 0),s(this,"shadowColor",Gl),s(this,"shadow",void 0),s(this,"ambientLight",void 0),s(this,"directionalLights",void 0),s(this,"pointLights",void 0),s(this,"shadowPasses",[]),s(this,"shadowMaps",[]),s(this,"dummyShadowMap",null),s(this,"programManager",void 0),s(this,"shadowMatrices",void 0),this.setProps(t)}setProps(t){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const e in t){const n=t[e];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some((t=>t.shadow)),this.props=t}preRender(t,e){let{layers:n,layerFilter:i,viewports:r,onViewportActive:o,views:s}=e;if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(t),this.programManager||(this.programManager=Sa.getDefaultProgramManager(t),Vl&&this.programManager.addDefaultModule(Vl)),this.dummyShadowMap||(this.dummyShadowMap=new as(t,{width:1,height:1}));for(let t=0;t<this.shadowPasses.length;t++){this.shadowPasses[t].render({layers:n,layerFilter:i,viewports:r,onViewportActive:o,views:s,moduleParameters:{shadowLightId:t,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}getModuleParameters(t){const e=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return e.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((e=>e.getProjectedLight({layer:t}))),pointLights:this.pointLights.map((e=>e.getProjectedLight({layer:t})))},e}cleanup(){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(Vl),this.programManager=null)}_calculateMatrices(){const t=[];for(const e of this.directionalLights){const n=(new ti).lookAt({eye:new Tn(e.direction).negate()});t.push(n)}return t}_createShadowPasses(t){for(let e=0;e<this.directionalLights.length;e++){const n=new Nl(t);this.shadowPasses[e]=n,this.shadowMaps[e]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:e,directionalLights:n}=this;t||0!==e.length||0!==n.length||(this.ambientLight=new Cl(Wl),this.directionalLights.push(new Ll(Hl[0]),new Ll(Hl[1])))}}const Yl=new ql;class Xl{constructor(){s(this,"effects",void 0),s(this,"_resolvedEffects",[]),s(this,"_defaultEffects",[]),s(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(t){const e=this._defaultEffects;if(!e.find((e=>e.id===t.id))){const n=e.findIndex((e=>function(t,e){var n,i;return(null!==(n=t.order)&&void 0!==n?n:1/0)-(null!==(i=e.order)&&void 0!==i?i:1/0)}(e,t)>0));n<0?e.push(t):e.splice(n,0,t),this._setEffects(this.effects)}}setProps(t){"effects"in t&&(qa(t.effects,this.effects,1)||this._setEffects(t.effects))}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}getEffects(){return this._resolvedEffects}_setEffects(t){const e={};for(const i of this.effects)e[i.id]=i;const n=[];for(const i of t){const t=e[i.id];t&&t!==i?t.setProps?(t.setProps(i.props),n.push(t)):(t.cleanup(),n.push(i)):n.push(i),delete e[i.id]}for(const i in e)e[i].cleanup();this.effects=n,this._resolvedEffects=n.concat(this._defaultEffects),t.some((t=>t instanceof ql))||this._resolvedEffects.push(Yl),this._needsRedraw="effects changed"}finalize(){for(const t of this._resolvedEffects)t.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class Kl extends Fl{shouldDrawLayer(t){const{operation:e}=t.props;return e.includes("draw")||e.includes("terrain")}}const Zl={blendFunc:[1,0,32771,0],blendEquation:32774};class $l extends Fl{constructor(){super(...arguments),s(this,"pickZ",void 0),s(this,"_colorEncoderState",null)}render(t){return"pickingFBO"in t?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer(t){let{layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:l,width:c,height:u},cullRect:d,effects:h,pass:f="picking",pickZ:p,moduleParameters:g}=t;const m=this.gl;this.pickZ=p;const y=this._resetColorEncoder(p),v=bo(m,{scissorTest:!0,scissor:[a,l,c,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...Zl,blend:!p},(()=>super.render({target:s,layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:o,cullRect:d,effects:null===h||void 0===h?void 0:h.filter((t=>t.useInPicking)),pass:f,isPicking:!0,moduleParameters:g})));this._colorEncoderState=null;return{decodePickingColor:y&&Ql.bind(null,y),stats:v}}shouldDrawLayer(t){const{pickable:e,operation:n}=t.props;return e&&n.includes("draw")||n.includes("terrain")||n.includes("mask")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,e,n){const i={...t.props.parameters},{pickable:r,operation:o}=t.props;return this._colorEncoderState?r&&o.includes("draw")&&(Object.assign(i,Zl),i.blend=!0,i.blendColor=function(t,e,n){const{byLayer:i,byAlpha:r}=t;let o,s=i.get(e);s?(s.viewports.push(n),o=s.a):(o=i.size+1,o<=255?(s={a:o,layer:e,viewports:[n]},i.set(e,s),r[o]=s):(W.warn("Too many pickable layers, only picking the first 255")(),o=0));return[0,0,0,o/255]}(this._colorEncoderState,t,n)):i.blend=!1,o.includes("terrain")&&(i.blend=!1),i}_resetColorEncoder(t){return this._colorEncoderState=t?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function Ql(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}class Jl{constructor(t){s(this,"gl",void 0),s(this,"layerFilter",void 0),s(this,"drawPickingColors",void 0),s(this,"drawLayersPass",void 0),s(this,"pickLayersPass",void 0),s(this,"renderCount",void 0),s(this,"_needsRedraw",void 0),s(this,"renderBuffers",void 0),s(this,"lastPostProcessEffect",void 0),this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Kl(t),this.pickLayersPass=new $l(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){if(!t.viewports.length)return;const e=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,n={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...t,target:t.target||Cs.getDefaultFramebuffer(this.gl)};n.effects&&this._preRender(n.effects,n);const i=this.lastPostProcessEffect?this.renderBuffers[0]:n.target,r=e.render({...n,target:i});n.effects&&this._postRender(n.effects,n),this.renderCount++,q("deckRenderer.renderLayers",this,r,t)}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}finalize(){const{renderBuffers:t}=this;for(const e of t)e.delete();t.length=0}_preRender(t,e){this.lastPostProcessEffect=null,e.preRenderStats=e.preRenderStats||{};for(const n of t)e.preRenderStats[n.id]=n.preRender(this.gl,e),n.postRender&&(this.lastPostProcessEffect=n.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:t}=this;0===t.length&&t.push(new Cs(this.gl),new Cs(this.gl));for(const e of t)e.resize()}_postRender(t,e){const{renderBuffers:n}=this,i={...e,inputBuffer:n[0],swapBuffer:n[1],target:null};for(const r of t)if(r.postRender){if(r.id===this.lastPostProcessEffect){i.target=e.target,r.postRender(this.gl,i);break}const t=r.postRender(this.gl,i);i.inputBuffer=t,i.swapBuffer=t===n[0]?n[1]:n[0]}}}const tc={pickedColor:null,pickedObjectIndex:-1};function ec(t){let{pickedColors:e,decodePickingColor:n,deviceX:i,deviceY:r,deviceRadius:o,deviceRect:s}=t;const{x:a,y:l,width:c,height:u}=s;let d=o*o,h=-1,f=0;for(let p=0;p<u;p++){const t=p+l-r,n=t*t;if(n>d)f+=4*c;else for(let r=0;r<c;r++){if(e[f+3]-1>=0){const t=r+a-i,e=t*t+n;e<=d&&(d=e,h=f)}f+=4}}if(h>=0){const t=e.slice(h,h+4),i=n(t);if(i){const e=Math.floor(h/4/c),n=h/4-e*c;return{...i,pickedColor:t,pickedX:a+n,pickedY:l+e}}W.error("Picked non-existent layer. Is picking buffer corrupt?")()}return tc}function nc(t){let e,{pickInfo:n,viewports:i,pixelRatio:r,x:o,y:s,z:a}=t,l=i[0];if(i.length>1&&(l=function(t,e){for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.containsPixel(e))return i}return t[0]}((null===n||void 0===n?void 0:n.pickedViewports)||i,{x:o,y:s})),l){const t=[o-l.x,s-l.y];void 0!==a&&(t[2]=a),e=l.unproject(t)}return{color:null,layer:null,viewport:l,index:-1,picked:!1,x:o,y:s,pixel:[o,s],coordinate:e,devicePixel:n&&"pickedX"in n?[n.pickedX,n.pickedY]:void 0,pixelRatio:r}}function ic(t){const{pickInfo:e,lastPickedInfo:n,mode:i,layers:r}=t,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=e,l=s?[s]:[];if("hover"===i){const t=n.index,e=n.layerId,i=s?s.props.id:null;if(i!==e||a!==t){if(i!==e){const t=r.find((t=>t.props.id===e));t&&l.unshift(t)}n.layerId=i,n.index=a,n.info=null}}const c=nc(t),u=new Map;return u.set(null,c),l.forEach((t=>{let e={...c};t===s&&(e.color=o,e.index=a,e.picked=!0),e=rc({layer:t,info:e,mode:i});const r=e.layer;t===s&&"hover"===i&&(n.info=e),u.set(r.id,e),"hover"===i&&r.updateAutoHighlight(e)})),u}function rc(t){let{layer:e,info:n,mode:i}=t;for(;e&&n;){const t=n.layer||null;n.sourceLayer=t,n.layer=e,n=e.getPickingInfo({info:n,mode:i,sourceLayer:t}),e=e.parent}return n}class oc{constructor(t){s(this,"gl",void 0),s(this,"pickingFBO",void 0),s(this,"depthFBO",void 0),s(this,"pickLayersPass",void 0),s(this,"layerFilter",void 0),s(this,"lastPickedInfo",void 0),s(this,"_pickable",!0),this.gl=t,this.pickLayersPass=new $l(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject(t){let{x:e,y:n,layers:i,viewports:r}=t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info;const s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,l=s?i.find((t=>t.id===s)):null,c=a&&r.find((t=>t.id===a))||r[0],u=c&&c.unproject([e-c.x,n-c.y]),d={x:e,y:n,viewport:c,coordinate:u,layer:l};return{...o,...d}}_resizeBuffer(){var t,e;const{gl:n}=this;if(!this.pickingFBO&&(this.pickingFBO=new Cs(n),Cs.isSupported(n,{colorBufferFloat:!0}))){const t=new Cs(n);t.attach({36064:new as(n,{format:Nr(n)?34836:6408,type:5126})}),this.depthFBO=t}null===(t=this.pickingFBO)||void 0===t||t.resize({width:n.canvas.width,height:n.canvas.height}),null===(e=this.depthFBO)||void 0===e||e.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(t){if(!1===this._pickable)return null;const e=t.filter((t=>this.pickLayersPass.shouldDrawLayer(t)&&!t.isComposite));return e.length?e:null}_pickClosestObject(t){let{layers:e,views:n,viewports:i,x:r,y:o,radius:s=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:u,effects:d}=t;const h=this._getPickable(e),f=_o(this.gl);if(!h)return{result:[],emptyInfo:nc({viewports:i,x:r,y:o,pixelRatio:f})};this._resizeBuffer();const p=wo(this.gl,[r,o],!0),g=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],m=Math.round(s*f),{width:y,height:v}=this.pickingFBO,b=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceWidth:y,deviceHeight:v}),_={x:r-s,y:o-s,width:2*s+1,height:2*s+1};let w;const x=[],S=new Set;for(let E=0;E<a;E++){let t,e;if(b){t=ec({...this._drawAndSample({layers:h,views:n,viewports:i,onViewportActive:u,deviceRect:b,cullRect:_,effects:d,pass:"picking:".concat(l)}),deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceRect:b})}else t={pickedColor:null,pickedObjectIndex:-1};if(t.pickedLayer&&c&&this.depthFBO){const{pickedColors:r}=this._drawAndSample({layers:[t.pickedLayer],views:n,viewports:i,onViewportActive:u,deviceRect:{x:t.pickedX,y:t.pickedY,width:1,height:1},cullRect:_,effects:d,pass:"picking:".concat(l,":z")},!0);r[3]&&(e=r[0])}t.pickedLayer&&E+1<a&&(S.add(t.pickedLayer),t.pickedLayer.disablePickingIndex(t.pickedObjectIndex)),w=ic({pickInfo:t,lastPickedInfo:this.lastPickedInfo,mode:l,layers:h,viewports:i,x:r,y:o,z:e,pixelRatio:f});for(const n of w.values())n.layer&&x.push(n);if(!t.pickedColor)break}for(const E of S)E.restorePickingColors();return{result:x,emptyInfo:w.get(null)}}_pickVisibleObjects(t){let{layers:e,views:n,viewports:i,x:r,y:o,width:s=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:u,effects:d}=t;const h=this._getPickable(e);if(!h)return[];this._resizeBuffer();const f=_o(this.gl),p=wo(this.gl,[r,o],!0),g=p.x,m=p.y+p.height,y=wo(this.gl,[r+s,o+a],!0),v=y.x+y.width,b=y.y,_={x:g,y:b,width:v-g,height:m-b},w=function(t){let{pickedColors:e,decodePickingColor:n}=t;const i=new Map;if(e)for(let r=0;r<e.length;r+=4)if(e[r+3]-1>=0){const t=e.slice(r,r+4),o=t.join(",");if(!i.has(o)){const e=n(t);e?i.set(o,{...e,color:t}):W.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(i.values())}(this._drawAndSample({layers:h,views:n,viewports:i,onViewportActive:u,deviceRect:_,cullRect:{x:r,y:o,width:s,height:a},effects:d,pass:"picking:".concat(l)})),x=new Map,S=Number.isFinite(c);for(let T=0;T<w.length;T++){var E;if(S&&c&&x.size>=c)break;const t=w[T];let e={color:t.pickedColor,layer:null,index:t.pickedObjectIndex,picked:!0,x:r,y:o,pixelRatio:f};e=rc({layer:t.pickedLayer,info:e,mode:l});const n=null!==(E=e.object)&&void 0!==E?E:"".concat(e.layer.id,"[").concat(e.index,"]");x.has(n)||x.set(n,e)}return Array.from(x.values())}_drawAndSample(t){let{layers:e,views:n,viewports:i,onViewportActive:r,deviceRect:o,cullRect:s,effects:a,pass:l}=t,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const u=c?this.depthFBO:this.pickingFBO,d={layers:e,layerFilter:this.layerFilter,views:n,viewports:i,onViewportActive:r,pickingFBO:u,deviceRect:o,cullRect:s,effects:a,pass:l,pickZ:c,preRenderStats:{}};for(const v of a)v.useInPicking&&(d.preRenderStats[v.id]=v.preRender(this.gl,d));const{decodePickingColor:h}=this.pickLayersPass.render(d),{x:f,y:p,width:g,height:m}=o,y=new(c?Float32Array:Uint8Array)(g*m*4);return vs(u,{sourceX:f,sourceY:p,sourceWidth:g,sourceHeight:m,target:y}),{pickedColors:y,decodePickingColor:h}}_getPickingRect(t){let{deviceX:e,deviceY:n,deviceRadius:i,deviceWidth:r,deviceHeight:o}=t;const s=Math.max(0,e-i),a=Math.max(0,n-i),l=Math.min(r,e+i+1)-s,c=Math.min(o,n+i+1)-a;return l<=0||c<=0?null:{x:s,y:a,width:l,height:c}}}const sc={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class ac{constructor(t){s(this,"el",null),s(this,"isVisible",!1);const e=t.parentElement;e&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,sc),e.appendChild(this.el))}setTooltip(t,e,n){const i=this.el;if(i){if("string"===typeof t)i.innerText=t;else{if(!t)return this.isVisible=!1,void(i.style.display="none");t.text&&(i.innerText=t.text),t.html&&(i.innerHTML=t.html),t.className&&(i.className=t.className)}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(e,"px, ").concat(n,"px)"),t&&"object"===typeof t&&"style"in t&&Object.assign(i.style,t.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}const{_parseImageNode:lc}=globalThis,cc="undefined"!==typeof Image,uc="undefined"!==typeof ImageBitmap,dc=Boolean(lc),hc=!!Gt||dc;function fc(t){const e=gc(t);if(!e)throw new Error("Not an image");return e}function pc(t){switch(fc(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function gc(t){return"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!==typeof Image&&t instanceof Image?"image":t&&"object"===typeof t&&t.data&&t.width&&t.height?"data":null}const mc=/^data:image\/svg\+xml/,yc=/\.svg((\?|#).*)?$/;function vc(t){return t&&(mc.test(t)||yc.test(t))}function bc(t,e){if(vc(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function _c(t,e,n){const i=function(t,e){if(vc(e)){let e=(new TextDecoder).decode(t);try{"function"===typeof unescape&&"function"===typeof encodeURIComponent&&(e=unescape(encodeURIComponent(e)))}catch(n){throw new Error(n.message)}return"data:image/svg+xml;base64,".concat(btoa(e))}return bc(t,e)}(t,n),r=self.URL||self.webkitURL,o="string"!==typeof i&&r.createObjectURL(i);try{return await async function(t,e){const n=new Image;if(n.src=t,e.image&&e.image.decode&&n.decode)return await n.decode(),n;return await new Promise(((e,i)=>{try{n.onload=()=>e(n),n.onerror=e=>i(new Error("Could not load image ".concat(t,": ").concat(e)))}catch(r){i(r)}}))}(o||i,e)}finally{o&&r.revokeObjectURL(o)}}const wc={};let xc=!0;async function Sc(t,e,n){let i;if(vc(n)){i=await _c(t,e,n)}else i=bc(t,n);const r=e&&e.imagebitmap;return await async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t){for(const e in t||wc)return!1;return!0}(e)&&xc||(e=null);if(e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),xc=!1}return await createImageBitmap(t)}(i,r)}function Ec(t){return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=(r=e,[...r].map((t=>t.charCodeAt(0))));var r;for(let o=0;o<i.length;++o)if(i[o]!==t[o+n])return!1;return!0}(t,"ftyp",4)?0===(96&t[8])?null:function(t){switch((e=t,n=8,i=12,String.fromCharCode(...e.slice(n,i))).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}var e,n,i}(t):null}const Tc=!1,Pc=!0;function Ac(t){const e=Cc(t);return function(t){const e=Cc(t),n=e.byteLength>=24&&2303741511===e.getUint32(0,Tc);if(!n)return null;return{mimeType:"image/png",width:e.getUint32(16,Tc),height:e.getUint32(20,Tc)}}(e)||function(t){const e=Cc(t),n=e.byteLength>=3&&65496===e.getUint16(0,Tc)&&255===e.getUint8(2);if(!n)return null;const{tableMarkers:i,sofMarkers:r}=function(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);const e=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:e}}();let o=2;for(;o+9<e.byteLength;){const t=e.getUint16(o,Tc);if(r.has(t))return{mimeType:"image/jpeg",height:e.getUint16(o+5,Tc),width:e.getUint16(o+7,Tc)};if(!i.has(t))return null;o+=2,o+=e.getUint16(o,Tc)}return null}(e)||function(t){const e=Cc(t),n=e.byteLength>=10&&1195984440===e.getUint32(0,Tc);if(!n)return null;return{mimeType:"image/gif",width:e.getUint16(6,Pc),height:e.getUint16(8,Pc)}}(e)||function(t){const e=Cc(t),n=e.byteLength>=14&&16973===e.getUint16(0,Tc)&&e.getUint32(2,Pc)===e.byteLength;if(!n)return null;return{mimeType:"image/bmp",width:e.getUint32(18,Pc),height:e.getUint32(22,Pc)}}(e)||function(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=Ec(e);if(!n)return null;return{mimeType:n.mimeType,width:0,height:0}}(e)}function Cc(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}const Ic={id:"image",module:"images",name:"Images",version:"3.4.14",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:async function(t,e,n){const i=((e=e||{}).image||{}).type||"auto",{url:r}=n||{};let o;switch(function(t){switch(t){case"auto":case"data":return function(){if(uc)return"imagebitmap";if(cc)return"image";if(hc)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(t){switch(t){case"auto":return uc||cc||hc;case"imagebitmap":return uc;case"image":return cc;case"data":return hc;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(i)){case"imagebitmap":o=await Sc(t,e,r);break;case"image":o=await _c(t,e,r);break;case"data":o=await async function(t,e){const{mimeType:n}=Ac(t)||{},i=globalThis._parseImageNode;return ct(i),await i(t,n)}(t);break;default:ct(!1)}return"data"===i&&(o=pc(o)),o},tests:[t=>Boolean(Ac(new DataView(t)))],options:{image:{type:"auto",decode:!0}}};const Mc={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(t){const e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse};const kc=function(){const t="8.9.33",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(W.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:W,_registerLoggers:G},function(t){const e=Fe();t=Array.isArray(t)?t:[t];for(const n of t){const t=dt(n);e.find((e=>t===e))||e.unshift(t)}}([Mc,[Ic,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}(),Oc=globalThis;function Lc(t){if(!t&&!S())return"Node";if(x(t))return"Electron";const e="undefined"!==typeof navigator?navigator:{},n=t||e.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r?"IE":Oc.chrome?"Chrome":Oc.safari?"Safari":Oc.mozInnerScreenX?"Firefox":"Unknown"}class Rc extends Uo{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=Nr(t),i=Ts(t,ws);let r=n||i;for(const o of e)switch(o){case"queries":r=r&&n;break;case"timers":r=r&&i;break;default:Oo(!1)}return r}constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(t?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(t){return this._queryPending||(this.target=t,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,34919);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let e=0;return this._pollingPromise=new Promise(((n,i)=>{const r=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):e++>t?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(r)};requestAnimationFrame(r)})),this._pollingPromise}_createHandle(){return Rc.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const Fc=S()&&"undefined"!==typeof document;let Bc=0;class Nc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:e=(t=>Ao(t)),onAddHTML:n=null,onInitialize:i=(()=>{}),onRender:r=(()=>{}),onFinalize:o=(()=>{}),onError:s,gl:a=null,glOptions:l={},debug:c=!1,createFramebuffer:u=!1,autoResizeViewport:d=!0,autoResizeDrawingBuffer:h=!0,stats:f=ko.get("animation-loop-".concat(Bc++))}=t;let{useDevicePixels:p=!0}=t;"useDevicePixelRatio"in t&&(Or.deprecated("useDevicePixelRatio","useDevicePixels")(),p=t.useDevicePixelRatio),this.props={onCreateContext:e,onAddHTML:n,onInitialize:i,onRender:r,onFinalize:o,onError:s,gl:a,glOptions:l,debug:c,createFramebuffer:u},this.gl=a,this.needsRedraw=null,this.timeline=null,this.stats=f,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:d,autoResizeDrawingBuffer:h,useDevicePixels:p}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return Oo("string"===typeof t),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const e=this._getPageLoadPromise().then((()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=Rc.isSupported(this.gl,["timers"])?new Rc(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps)))).then((t=>{this._running&&(this._addCallbackData(t||{}),!1!==t&&this._startLoop())}));return this.props.onError&&e.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((t=>{this._resolveNextFrame=t}))),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=document.getElementById(t);return n?Number(n.value):e}setViewParameters(){return Or.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const t=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=Fc?new Promise(((t,e)=>{Fc&&"complete"===document.readyState?t(document):window.addEventListener("load",(()=>{t(document)}))})):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):(e=t,"undefined"!==typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e));var e}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):(e=t,"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60));var e}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:t,height:e,aspect:n}=this._getSizeAndAspect();t===this.animationProps.width&&e===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=e,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){"object"===typeof t&&null!==t&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&"undefined"!==typeof OffscreenCanvas&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?Co(this.props.gl,t):this.onCreateContext(t),!Br(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");vo(this.gl,Jr),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(e);const n=this.props.onAddHTML(e);n&&(e.innerHTML=n)}}_getSizeAndAspect(){const t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight;let n=1;const{canvas:i}=this.gl;return i&&i.clientHeight?n=i.clientWidth/i.clientHeight:t>0&&e>0&&(n=t/e),{width:t,height:e,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&Io(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new Cs(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}var zc=n(97);const Dc={mousedown:1,mousemove:2,mouseup:4};!function(t){const e=t.prototype.handler;t.prototype.handler=function(t){const n=this.store;t.button>0&&"pointerdown"===t.type&&(function(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(n,(e=>e.pointerId===t.pointerId))||n.push(t)),e.call(this,t)}}(zc.PointerEventInput),zc.MouseInput.prototype.handler=function(t){let e=Dc[t.type];1&e&&t.button>=0&&(this.pressed=!0),2&e&&0===t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))};const jc=zc.Manager,Uc=zc;class Vc{constructor(t,e,n){this.element=t,this.callback=e,this.options={enable:!0,...n}}}const Wc=Uc?[[Uc.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Uc.Rotate,{enable:!1}],[Uc.Pinch,{enable:!1}],[Uc.Swipe,{enable:!1}],[Uc.Pan,{threshold:0,enable:!1}],[Uc.Press,{enable:!1}],[Uc.Tap,{event:"doubletap",taps:2,enable:!1}],[Uc.Tap,{event:"anytap",enable:!1}],[Uc.Tap,{enable:!1}]]:null,Hc={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Gc={doubletap:["tap"]},qc={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Yc={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Xc={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},Kc={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Zc="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",$c="undefined"!==typeof window?window:n.g;"undefined"!==typeof n.g?n.g:window,"undefined"!==typeof document&&document;let Qc=!1;try{const t={get passive(){return Qc=!0,!0}};$c.addEventListener("test",null,t),$c.removeEventListener("test",null)}catch(CL){Qc=!1}const Jc=-1!==Zc.indexOf("firefox"),{WHEEL_EVENTS:tu}=Yc,eu="wheel",nu=4.000244140625;class iu extends Vc{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{if(!this.options.enable)return;let e=t.deltaY;$c.WheelEvent&&(Jc&&t.deltaMode===$c.WheelEvent.DOM_DELTA_PIXEL&&(e/=$c.devicePixelRatio),t.deltaMode===$c.WheelEvent.DOM_DELTA_LINE&&(e*=40)),0!==e&&e%nu===0&&(e=Math.floor(e/nu)),t.shiftKey&&e&&(e*=.25),this.callback({type:eu,center:{x:t.clientX,y:t.clientY},delta:-e,srcEvent:t,pointerType:"mouse",target:t.target})},this.events=(this.options.events||[]).concat(tu),this.events.forEach((e=>t.addEventListener(e,this.handleEvent,!!Qc&&{passive:!1})))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===eu&&(this.options.enable=e)}}const{MOUSE_EVENTS:ru}=Yc,ou="pointermove",su="pointerover",au="pointerout",lu="pointerenter",cu="pointerleave";class uu extends Vc{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{this.handleOverEvent(t),this.handleOutEvent(t),this.handleEnterEvent(t),this.handleLeaveEvent(t),this.handleMoveEvent(t)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(ru),this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===ou&&(this.enableMoveEvent=e),t===su&&(this.enableOverEvent=e),t===au&&(this.enableOutEvent=e),t===lu&&(this.enableEnterEvent=e),t===cu&&(this.enableLeaveEvent=e)}handleOverEvent(t){this.enableOverEvent&&"mouseover"===t.type&&this._emit(su,t)}handleOutEvent(t){this.enableOutEvent&&"mouseout"===t.type&&this._emit(au,t)}handleEnterEvent(t){this.enableEnterEvent&&"mouseenter"===t.type&&this._emit(lu,t)}handleLeaveEvent(t){this.enableLeaveEvent&&"mouseleave"===t.type&&this._emit(cu,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.which&&(this.pressed=!1),this.pressed||this._emit(ou,t);break;case"mouseup":this.pressed=!1}}_emit(t,e){this.callback({type:t,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const{KEY_EVENTS:du}=Yc,hu="keydown",fu="keyup";class pu extends Vc{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{const e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:hu,srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:fu,srcEvent:t,key:t.key,target:t.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(du),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===hu&&(this.enableDownEvent=e),t===fu&&(this.enableUpEvent=e)}}const gu="contextmenu";class mu extends Vc{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{this.options.enable&&this.callback({type:gu,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,e){t===gu&&(this.options.enable=e)}}const yu={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function vu(t){const e=yu[t.srcEvent.type];if(!e)return null;const{buttons:n,button:i,which:r}=t.srcEvent;let o=!1,s=!1,a=!1;return 4===e||2===e&&!Number.isFinite(n)?(o=1===r,s=2===r,a=3===r):2===e?(o=Boolean(1&n),s=Boolean(4&n),a=Boolean(2&n)):1===e&&(o=0===i,s=1===i,a=2===i),{leftButton:o,middleButton:s,rightButton:a}}function bu(t,e){const n=t.center;if(!n)return null;const i=e.getBoundingClientRect(),r=i.width/e.offsetWidth||1,o=i.height/e.offsetHeight||1;return{center:n,offsetCenter:{x:(n.x-i.left-e.clientLeft)/r,y:(n.y-i.top-e.clientTop)/o}}}const _u={srcElement:"root",priority:0};class wu{constructor(t){this.handleEvent=t=>{if(this.isEmpty())return;const e=this._normalizeEvent(t);let n=t.srcEvent.target;for(;n&&n!==e.rootElement;){if(this._emit(e,n),e.handled)return;n=n.parentNode}this._emit(e,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{handlers:o,handlersByElement:s}=this;let a=_u;"string"===typeof n||n&&n.addEventListener?a={..._u,srcElement:n}:n&&(a={..._u,...n});let l=s.get(a.srcElement);l||(l=[],s.set(a.srcElement,l));const c={type:t,handler:e,srcElement:a.srcElement,priority:a.priority};i&&(c.once=!0),r&&(c.passive=!0),o.push(c),this._active=this._active||!c.passive;let u=l.length-1;for(;u>=0&&!(l[u].priority>=c.priority);)u--;l.splice(u+1,0,c)}remove(t,e){const{handlers:n,handlersByElement:i}=this;for(let r=n.length-1;r>=0;r--){const o=n[r];if(o.type===t&&o.handler===e){n.splice(r,1);const t=i.get(o.srcElement);t.splice(t.indexOf(o),1),0===t.length&&i.delete(o.srcElement)}}this._active=n.some((t=>!t.passive))}_emit(t,e){const n=this.handlersByElement.get(e);if(n){let e=!1;const i=()=>{t.handled=!0},r=()=>{t.handled=!0,e=!0},o=[];for(let s=0;s<n.length;s++){const{type:a,handler:l,once:c}=n[s];if(l({...t,type:a,stopPropagation:i,stopImmediatePropagation:r}),c&&o.push(n[s]),e)break}for(let t=0;t<o.length;t++){const{type:e,handler:n}=o[t];this.remove(e,n)}}}_normalizeEvent(t){const e=this.eventManager.getElement();return{...t,...vu(t),...bu(t,e),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:e}}}const xu={events:null,recognizers:null,recognizerOptions:{},Manager:jc,touchAction:"none",tabIndex:0};class Su{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;this._onBasicInput=t=>{const{srcEvent:e}=t,n=qc[e.type];n&&this.manager.emit(n,t)},this._onOtherEvent=t=>{this.manager.emit(t.type,t)},this.options={...xu,...e},this.events=new Map,this.setElement(t);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:e}=this,n=e.Manager;this.manager=new n(t,{touchAction:e.touchAction,recognizers:e.recognizers||Wc}).on("hammer.input",this._onBasicInput),e.recognizers||Object.keys(Hc).forEach((t=>{const e=this.manager.get(t);e&&Hc[t].forEach((t=>{e.recognizeWith(t)}))}));for(const i in e.recognizerOptions){const t=this.manager.get(i);if(t){const n=e.recognizerOptions[i];delete n.enable,t.set(n)}}this.wheelInput=new iu(t,this._onOtherEvent,{enable:!1}),this.moveInput=new uu(t,this._onOtherEvent,{enable:!1}),this.keyInput=new pu(t,this._onOtherEvent,{enable:!1,tabIndex:e.tabIndex}),this.contextmenuInput=new mu(t,this._onOtherEvent,{enable:!1});for(const[i,r]of this.events)r.isEmpty()||(this._toggleRecognizer(r.recognizerName,!0),this.manager.on(i,r.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,e,n){this._addEventHandler(t,e,n,!1)}once(t,e,n){this._addEventHandler(t,e,n,!0)}watch(t,e,n){this._addEventHandler(t,e,n,!1,!0)}off(t,e){this._removeEventHandler(t,e)}_toggleRecognizer(t,e){const{manager:n}=this;if(!n)return;const i=n.get(t);if(i&&i.options.enable!==e){i.set({enable:e});const r=Gc[t];r&&!this.options.recognizers&&r.forEach((r=>{const o=n.get(r);e?(o.requireFailure(t),i.dropRequireFailure(r)):o.dropRequireFailure(t)}))}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}_addEventHandler(t,e,n,i,r){if("string"!==typeof t){n=e;for(const e in t)this._addEventHandler(e,t[e],n,i,r);return}const{manager:o,events:s}=this,a=Kc[t]||t;let l=s.get(a);l||(l=new wu(this),s.set(a,l),l.recognizerName=Xc[a]||a,o&&o.on(a,l.handleEvent)),l.add(t,e,n,i,r),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(t,e){if("string"!==typeof t){for(const e in t)this._removeEventHandler(e,t[e]);return}const{events:n}=this,i=Kc[t]||t,r=n.get(i);if(r&&(r.remove(t,e),r.isEmpty())){const{recognizerName:t}=r;let e=!1;for(const i of n.values())if(i.recognizerName===t&&!i.isEmpty()){e=!0;break}e||this._toggleRecognizer(t,!1)}}}function Eu(){}const Tu={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Eu,onResize:Eu,onViewStateChange:Eu,onInteractionStateChange:Eu,onBeforeRender:Eu,onAfterRender:Eu,onLoad:Eu,onError:t=>W.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:t=>{let{isDragging:e}=t;return e?"grabbing":"grab"},getTooltip:null,debug:!1,drawPickingColors:!1};class Pu{constructor(t){s(this,"props",void 0),s(this,"width",0),s(this,"height",0),s(this,"userData",{}),s(this,"canvas",null),s(this,"viewManager",null),s(this,"layerManager",null),s(this,"effectManager",null),s(this,"deckRenderer",null),s(this,"deckPicker",null),s(this,"eventManager",null),s(this,"tooltip",null),s(this,"metrics",void 0),s(this,"animationLoop",void 0),s(this,"stats",void 0),s(this,"viewState",void 0),s(this,"cursorState",void 0),s(this,"_needsRedraw",void 0),s(this,"_pickRequest",void 0),s(this,"_lastPointerDownInfo",null),s(this,"_metricsCounter",void 0),s(this,"_onPointerMove",(t=>{const{_pickRequest:e}=this;if("pointerleave"===t.type)e.x=-1,e.y=-1,e.radius=0;else{if(t.leftButton||t.rightButton)return;{const n=t.offsetCenter;if(!n)return;e.x=n.x,e.y=n.y,e.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:e.x,y:e.y}),e.event=t})),s(this,"_onEvent",(t=>{const e=Ri[t.type],n=t.offsetCenter;if(!e||!n||!this.layerManager)return;const i=this.layerManager.getLayers(),r=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:i,viewports:this.getViewports(n)},this._lastPointerDownInfo),{layer:o}=r,s=o&&(o[e.handler]||o.props[e.handler]),a=this.props[e.handler];let l=!1;s&&(l=s.call(o,r,t)),!l&&a&&a(r,t)})),s(this,"_onPointerDown",(t=>{const e=t.offsetCenter,n=this._pick("pickObject","pickObject Time",{x:e.x,y:e.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=n.result[0]||n.emptyInfo})),this.props={...Tu,...t},t=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},t.viewState&&t.initialViewState&&W.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===Lc()&&W.warn("IE 11 is not supported")(),this.viewState=t.initialViewState,t.gl||"undefined"!==typeof document&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new Q({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&Ke.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,e,n,i,r,o,s,a,l;(null===(t=this.animationLoop)||void 0===t||t.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(e=this.layerManager)||void 0===e||e.finalize(),this.layerManager=null,null===(n=this.viewManager)||void 0===n||n.finalize(),this.viewManager=null,null===(i=this.effectManager)||void 0===i||i.finalize(),this.effectManager=null,null===(r=this.deckRenderer)||void 0===r||r.finalize(),this.deckRenderer=null,null===(o=this.deckPicker)||void 0===o||o.finalize(),this.deckPicker=null,null===(s=this.eventManager)||void 0===s||s.destroy(),this.eventManager=null,null===(a=this.tooltip)||void 0===a||a.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas)||(null===(l=this.canvas.parentElement)||void 0===l||l.removeChild(this.canvas),this.canvas=null)}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&W.removed("onLayerHover","onHover")(),"onLayerClick"in t&&W.removed("onLayerClick","onClick")(),t.initialViewState&&!qa(this.props.initialViewState,t.initialViewState,3)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const e=Object.create(this.props);Object.assign(e,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(e),this.layerManager&&(this.viewManager.setProps(e),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(e),this.effectManager.setProps(e),this.deckRenderer.setProps(e),this.deckPicker.setProps(e)),this.stats.get("setProps Time").timeEnd()}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(t),i=this.layerManager.needsRedraw(t),r=this.effectManager.needsRedraw(t),o=this.deckRenderer.needsRedraw(t);return e=e||n||i||r||o,e}redraw(t){if(!this.layerManager)return;let e=this.needsRedraw({clearRedrawFlags:!0});e=t||e,e&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(e):this._drawLayers(e))}get isInitialized(){return null!==this.viewManager}getViews(){return $a(this.viewManager),this.viewManager.views}getViewports(t){return $a(this.viewManager),this.viewManager.getViewports(t)}getCanvas(){return this.canvas}pickObject(t){const e=this._pick("pickObject","pickObject Time",t).result;return e.length?e[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:e})}_removeResources(t){for(const e of t)this.layerManager.resourceManager.remove(e)}_addDefaultEffect(t){this.effectManager.addDefaultEffect(t)}_pick(t,e,n){$a(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(e).timeStart();const r=this.deckPicker[t]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return i.get(e).timeEnd(),r}_createCanvas(t){let e=t.canvas;if("string"===typeof e&&(e=document.getElementById(e),$a(e)),!e){e=document.createElement("canvas"),e.id=t.id||"deckgl-overlay";(t.parent||document.body).appendChild(e)}return Object.assign(e.style,t.style),e}_setCanvasSize(t){if(!this.canvas)return;const{width:e,height:n}=t;if(e||0===e){const t=Number.isFinite(e)?"".concat(e,"px"):e;this.canvas.style.width=t}if(n||0===n){var i;const e=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=(null===(i=t.style)||void 0===i?void 0:i.position)||"absolute",this.canvas.style.height=e}}_updateCanvasSize(){var t,e;const{canvas:n}=this;if(!n)return;const i=null!==(t=n.clientWidth)&&void 0!==t?t:n.width,r=null!==(e=n.clientHeight)&&void 0!==e?e:n.height;var o,s;i===this.width&&r===this.height||(this.width=i,this.height=r,null===(o=this.viewManager)||void 0===o||o.setProps({width:i,height:r}),null===(s=this.layerManager)||void 0===s||s.activateViewport(this.getViewports()[0]),this.props.onResize({width:i,height:r}))}_createAnimationLoop(t){const{width:e,height:n,gl:i,glOptions:r,debug:o,onError:s,onBeforeRender:a,onAfterRender:l,useDevicePixels:c}=t;return new Nc({width:e,height:n,useDevicePixels:c,autoResizeDrawingBuffer:!i,autoResizeViewport:!1,gl:i,onCreateContext:t=>Ao({...r,...t,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:t=>this._setGLContext(t.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:a,onAfterRender:l,onError:s})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let t=this.props.views||[new El({id:"default-view"})];return t=Array.isArray(t)?t:[t],t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:t}=this;if(t.event){const{result:n,emptyInfo:i}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=n.length>0;let r=i,o=!1;for(const s of n){var e;r=s,o=(null===(e=s.layer)||void 0===e?void 0:e.onHover(s,t.event))||o}if(!o&&this.props.onHover&&this.props.onHover(r,t.event),this.props.getTooltip&&this.tooltip){const t=this.props.getTooltip(r);this.tooltip.setTooltip(t,r.x,r.y)}t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(t){if(this.layerManager)return;this.canvas||(this.canvas=t.canvas,Co(t,{enable:!0,copyState:!0})),this.tooltip=new ac(this.canvas),vo(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);const e=new c;e.play(),this.animationLoop.attachTimeline(e),this.eventManager=new Su(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in Ri)this.eventManager.on(i,this._onEvent);this.viewManager=new Ya({timeline:e,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new Ga(t,{deck:this,stats:this.stats,viewport:n,timeline:e}),this.effectManager=new Xl,this.deckRenderer=new Jl(t),this.deckPicker=new oc(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,e){const{gl:n}=this.layerManager.context;vo(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...e}),this.props.onAfterRender({gl:n})}_onRenderFrame(t){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),W.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const e=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:e},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const e=this.animationLoop.stats;t.get("GPU Time").addTime(e.get("GPU Time").lastTiming),t.get("CPU Time").addTime(e.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:e}=this;t.fps=e.get("frameRate").getHz(),t.setPropsTime=e.get("setProps Time").time,t.updateAttributesTime=e.get("Update Attributes").time,t.framesRedrawn=e.get("Redraw Count").count,t.pickTime=e.get("pickObject Time").time+e.get("pickMultipleObjects Time").time+e.get("pickObjects Time").time,t.pickCount=e.get("Pick Count").count,t.gpuTime=e.get("GPU Time").time,t.cpuTime=e.get("CPU Time").time,t.gpuTimePerFrame=e.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=e.get("CPU Time").getAverageTime();const n=ko.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}s(Pu,"defaultProps",Tu),s(Pu,"VERSION",kc);const Au="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;function Cu(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}class Iu{constructor(t,e){s(this,"opts",void 0),s(this,"source",void 0),this.opts=e,this.source=t}get value(){return this.source.value}getValue(){const t=this.source.getBuffer(),e=this.getAccessor();if(t)return[t,e];const{value:n}=this.source,{size:i}=e;let r=n;if(n&&n.length!==i){r=new Float32Array(i);const t=e.elementOffset||0;for(let e=0;e<i;++e)r[e]=n[t+e]}return r}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function Mu(t){return t.stride||t.size*t.bytesPerElement}function ku(t,e){e.offset&&W.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=Mu(t),i=(void 0!==e.vertexOffset?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return{...e,offset:i,stride:n}}class Ou{constructor(t,e,n){s(this,"gl",void 0),s(this,"id",void 0),s(this,"size",void 0),s(this,"settings",void 0),s(this,"value",void 0),s(this,"doublePrecision",void 0),s(this,"_buffer",void 0),s(this,"state",void 0),this.gl=t,this.id=e.id||"",this.size=e.size||1;const i=e.logicalType||e.type,r=5130===i;let o,{defaultValue:a}=e;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0),o=r?5126:!i&&e.isIndexed?t&&function(t,e){return Ts(t,e)}(t,xs)?5125:5123:i||5126;let l=function(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(i||o||5126);this.doublePrecision=r,r&&!1===e.fp64&&(l=Float32Array),this.value=null,this.settings={...e,defaultType:l,defaultValue:a,logicalType:i,type:o,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:t,type:e}=this.settings;this._buffer=new Jo(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:e}})}return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*Mu(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Ke.release(this.state.allocatedValue)}getShaderAttributes(t,e){if(this.doublePrecision){const n={},i=this.value instanceof Float64Array,r=function(t,e){const n=ku(t,e);return{high:n,low:{...n,offset:n.offset+4*t.size}}}(this.getAccessor(),e||{});return n[t]=new Iu(this,r.high),n["".concat(t,"64Low")]=i?new Iu(this,r.low):new Float32Array(this.size),n}if(e){const n=ku(this.getAccessor(),e);return{[t]:new Iu(this,n)}}return{[t]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const e=Array.from(this.value);t=[e,e]}else{const{value:e,numInstances:n,size:i}=this,r=n*i;if(e&&r&&e.length>=r){const n=new Array(i).fill(1/0),o=new Array(i).fill(-1/0);for(let t=0;t<r;)for(let r=0;r<i;r++){const i=e[t++];i<n[r]&&(n[r]=i),i>o[r]&&(o[r]=i)}t=[n,o]}}return this.state.bounds=t,t}setData(t){const{state:e}=this;let n;n=ArrayBuffer.isView(t)?{value:t}:t instanceof Jo?{buffer:t}:t;const i={...this.settings,...n};if(e.bufferAccessor=i,e.bounds=null,n.constant){let t=n.value;t=this._normalizeValue(t,[],0),this.settings.normalized&&(t=this.normalizeConstant(t));if(!(!e.constant||!this._areValuesEqual(t,this.value)))return!1;e.externalBuffer=null,e.constant=!0,this.value=t}else if(n.buffer){const t=n.buffer;e.externalBuffer=t,e.constant=!1,this.value=n.value||null;const r=n.value instanceof Float64Array;i.type=n.type||t.accessor.type,i.bytesPerElement=t.accessor.BYTES_PER_ELEMENT*(r?2:1),i.stride=Mu(i)}else if(n.value){this._checkExternalBuffer(n);let t=n.value;e.externalBuffer=null,e.constant=!1,this.value=t,i.bytesPerElement=t.BYTES_PER_ELEMENT,i.stride=Mu(i);const{buffer:r,byteOffset:o}=this;this.doublePrecision&&t instanceof Float64Array&&(t=In(t,i));const s=t.byteLength+o+2*i.stride;r.byteLength<s&&r.reallocate(s),r.setAccessor(null),r.subData({data:t,offset:o}),i.type=n.type||r.accessor.type}return!0}updateSubBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state.bounds=null;const e=this.value,{startOffset:n=0,endOffset:i}=t;this.buffer.subData({data:this.doublePrecision&&e instanceof Float64Array?In(e,{size:this.size,startIndex:n,endIndex:i}):e.subarray(n,i),offset:n*e.BYTES_PER_ELEMENT+this.byteOffset})}allocate(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{state:n}=this,i=n.allocatedValue,r=Ke.allocate(i,t+1,{size:this.size,type:this.settings.defaultType,copy:e});this.value=r;const{buffer:o,byteOffset:s}=this;return o.byteLength<r.byteLength+s&&(o.reallocate(r.byteLength+s),e&&i&&o.subData({data:i instanceof Float64Array?In(i,this):i,offset:s})),n.allocatedValue=r,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(t){const{value:e}=t;if(!ArrayBuffer.isView(e))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=e.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(e.constructor.name));e instanceof n||!this.settings.normalized||"normalized"in t||W.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(t){switch(this.settings.type){case 5120:return new Float32Array(t).map((t=>(t+128)/255*2-1));case 5122:return new Float32Array(t).map((t=>(t+32768)/65535*2-1));case 5121:return new Float32Array(t).map((t=>t/255));case 5123:return new Float32Array(t).map((t=>t/65535));default:return t}}_normalizeValue(t,e,n){const{defaultValue:i,size:r}=this.settings;if(Number.isFinite(t))return e[n]=t,e;if(!t){let t=r;for(;--t>=0;)e[n+t]=i[t];return e}switch(r){case 4:e[n+3]=Number.isFinite(t[3])?t[3]:i[3];case 3:e[n+2]=Number.isFinite(t[2])?t[2]:i[2];case 2:e[n+1]=Number.isFinite(t[1])?t[1]:i[1];case 1:e[n+0]=Number.isFinite(t[0])?t[0]:i[0];break;default:let o=r;for(;--o>=0;)e[n+o]=Number.isFinite(t[o])?t[o]:i[o]}return e}_areValuesEqual(t,e){if(!t||!e)return!1;const{size:n}=this;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}}const Lu=[],Ru=[];function Fu(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,i=Lu;const r={index:-1,data:t,target:[]};return t?"function"===typeof t[Symbol.iterator]?i=t:t.length>0&&(Ru.length=t.length,i=Ru):i=Lu,(e>0||Number.isFinite(n))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,n),r.index=e-1),{iterable:i,objectInfo:r}}function Bu(t){return t&&t[Symbol.asyncIterator]}function Nu(t,e){const{size:n,stride:i,offset:r,startIndices:o,nested:s}=e,a=t.BYTES_PER_ELEMENT,l=i?i/a:n,c=r?r/a:0,u=Math.floor((t.length-c)/l);return(e,i)=>{let{index:r,target:a}=i;if(!o){const e=r*l+c;for(let i=0;i<n;i++)a[i]=t[e+i];return a}const d=o[r],h=o[r+1]||u;let f;if(s){f=new Array(h-d);for(let e=d;e<h;e++){const i=e*l+c;a=new Array(n);for(let e=0;e<n;e++)a[e]=t[i+e];f[e-d]=a}}else if(l===n)f=t.subarray(d*n+c,h*n+c);else{f=new t.constructor((h-d)*n);let e=0;for(let i=d;i<h;i++){const r=i*l+c;for(let i=0;i<n;i++)f[e++]=t[r+i]}}return f}}const zu=[],Du=[[0,1/0]];function ju(t){const{source:e,target:n,start:i=0,size:r,getData:o}=t,s=t.end||n.length,a=e.length,l=s-i;if(a>l)return void n.set(e.subarray(0,l),i);if(n.set(e,i),!o)return;let c=a;for(;c<l;){const t=o(c,e);for(let e=0;e<r;e++)n[i+c]=t[e]||0,c++}}const Uu={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function Vu(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...Uu[n],...e,...t,type:n}}function Wu(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function Hu(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function Gu(t){t.push(t.shift())}function qu(t,e){const{doublePrecision:n,settings:i,value:r,size:o}=t,s=n&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*o)*s}function Yu(t){let{buffer:e,numInstances:n,attribute:i,fromLength:r,fromStartIndices:o,getData:s=(t=>t)}=t;const a=i.doublePrecision&&i.value instanceof Float64Array?2:1,l=i.size*a,c=i.byteOffset,u=i.startIndices,d=o&&u,h=qu(i,n),f=i.isConstant;if(!d&&r>=h)return;const p=f?i.value:i.getBuffer().getData({srcByteOffset:c});if(i.settings.normalized&&!f){const t=s;s=(e,n)=>i.normalizeConstant(t(e,n))}const g=f?(t,e)=>s(p,e):(t,e)=>s(p.subarray(t,t+l),e),m=e.getData({length:r}),y=new Float32Array(h);!function(t){let{source:e,target:n,size:i,getData:r,sourceStartIndices:o,targetStartIndices:s}=t;if(!Array.isArray(s))return ju({source:e,target:n,size:i,getData:r}),n;let a=0,l=0;const c=r&&((t,e)=>r(t+l,e)),u=Math.min(o.length,s.length);for(let d=1;d<u;d++){const t=o[d]*i,r=s[d]*i;ju({source:e.subarray(a,t),target:n,start:l,end:r,size:i,getData:c}),a=t,l=r}l<n.length&&ju({source:[],target:n,start:l,size:i,getData:c})}({source:m,target:y,sourceStartIndices:o,targetStartIndices:u,size:l,getData:g}),e.byteLength<y.byteLength+c&&e.reallocate(y.byteLength+c),e.subData({data:y,offset:c})}class Xu extends Ou{constructor(t,e){super(t,e,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:Du}),s(this,"constant",!1),this.settings.update=e.update||(e.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw(){let{clearChangedFlags:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this.state.needsRedraw;return this.state.needsRedraw=e&&!t,e}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat("function"!==typeof t&&t||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:e}=this.settings,n=this.settings.transition;return Vu(Array.isArray(e)?t[e.find((e=>t[e]))]:t[e],n)}setNeedsUpdate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,e=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),e){const{startRow:t=0,endRow:n=1/0}=e;this.state.updateRanges=function(t,e){if(t===Du)return t;if(e[0]<0&&(e[0]=0),e[0]>=e[1])return t;const n=[],i=t.length;let r=0;for(let o=0;o<i;o++){const i=t[o];i[1]<e[0]?(n.push(i),r=o+1):i[0]>e[1]?n.push(i):e=[Math.min(i[0],e[0]),Math.max(i[1],e[1])]}return n.splice(r,0,e),n}(this.state.updateRanges,[t,n])}else this.state.updateRanges=Du}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=zu}setNeedsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:e,settings:n}=this;return!n.noAlloc&&(!!n.update&&(super.allocate(t,e.updateRanges!==Du),!0))}updateBuffer(t){let{numInstances:e,data:n,props:i,context:r}=t;if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this;let l=!0;if(s){for(const[t,a]of o)s.call(r,this,{data:n,startRow:t,endRow:a,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[t,n]of o){const i=Number.isFinite(t)?this.getVertexOffset(t):0,r=Number.isFinite(n)?this.getVertexOffset(n):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:i,endOffset:r})}else;this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(t){if(void 0===t||"function"===typeof t)return!1;return this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0}setExternalBuffer(t){const{state:e}=this;return t?(this.clearNeedsUpdate(),e.lastExternalBuffer===t||(e.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(e.lastExternalBuffer=null,!1)}setBinaryValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{state:n,settings:i}=this;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;n.binaryValue=t,this.setNeedsRedraw();if(i.transform||e!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const r=t;$a(ArrayBuffer.isView(r.value),"invalid ".concat(i.accessor));const o=Boolean(r.size)&&r.size!==this.size;return n.binaryAccessor=Nu(r.value,{size:r.size||this.size,stride:r.stride,offset:r.offset,startIndices:e,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:e}=this;return(e?t<e.length?e[t]:this.numInstances:t)*this.size}getShaderAttributes(){const t=this.settings.shaderAttributes||{[this.id]:null},e={};for(const n in t)Object.assign(e,super.getShaderAttributes(n,t[n]));return e}_autoUpdater(t,e){let{data:n,startRow:i,endRow:r,props:o,numInstances:s}=e;if(t.constant)return;const{settings:a,state:l,value:c,size:u,startIndices:d}=t,{accessor:h,transform:f}=a,p=l.binaryAccessor||("function"===typeof h?h:o[h]);$a("function"===typeof p,'accessor "'.concat(h,'" is not a function'));let g=t.getVertexOffset(i);const{iterable:m,objectInfo:y}=Fu(n,i,r);for(const v of m){y.index++;let e=p(v,y);if(f&&(e=f.call(this,e)),d){const n=(y.index<d.length-1?d[y.index+1]:s)-d[y.index];if(e&&Array.isArray(e[0])){let n=g;for(const i of e)t._normalizeValue(i,c,n),n+=u}else e&&e.length>u?c.set(e,g):(t._normalizeValue(e,y.target,0),K({target:c,source:y.target,start:g,count:n}));g+=n*u}else t._normalizeValue(e,c,g),g+=u}}_validateAttributeUpdaters(){const{settings:t}=this;if(!(t.noAlloc||"function"===typeof t.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:t}=this,e=Math.min(4,this.size);if(t&&t.length>=e){let n=!0;switch(e){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}const Ku="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",Zu="#version 300 es\n".concat(Ku);function $u(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[i,r,o]=n;if(!e.includes(i)||!r||!o)return null;return{qualifier:i,type:r,name:o.split(";")[0]}}function Qu(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:n,inputType:i,output:r}=t;if(!n)return 300===e?Zu:e>300?"#version ".concat(e,"\n").concat(Ku):"void main() {gl_FragColor = vec4(0);}";const o=function(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Vi(!1),null}}(n,i);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(i," ").concat(n,";\nout vec4 ").concat(r,";\nvoid main() {\n  ").concat(r," = ").concat(o,";\n}"):"varying ".concat(i," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}class Ju extends Uo{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return Nr(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Dr(t),super(t,e),this.initialize(e),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,zo(this.buffers)||this.bind((()=>this._unbindBuffers())),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((()=>{for(const e in t)this.setBuffer(e,t[e])})),this}setBuffer(t,e){const n=this._getVaryingIndex(t),{buffer:i,byteSize:r,byteOffset:o}=this._getBufferParams(e);return n<0?(this.unused[t]=i,Or.warn("".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[n]=e,this.bindOnUse||this._bindBuffer(n,i,o,r),this)}begin(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let e,n,i;return t instanceof Jo===!1?(i=t.buffer,n=t.byteSize,e=t.byteOffset):i=t,void 0===e&&void 0===n||(e=e||0,n=n||i.byteLength-e),{buffer:i,byteOffset:e,byteSize:n}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const e=Number(t);return Number.isFinite(e)?e:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:e,byteSize:n,byteOffset:i}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,e,i,n)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const r=e&&e.handle;return r&&void 0!==i?this.gl.bindBufferRange(35982,t,r,n,i):this.gl.bindBufferBase(35982,t,r),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}class td{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}setupResources(t){for(const e of this.bindings)this._setupTransformFeedback(e,t)}updateModelProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:e}=this;return e.length>0&&(t=Object.assign({},t,{varyings:e})),t}getDrawOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:i}=e;return{attributes:Object.assign({},n,t.attributes),transformFeedback:i}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){const{feedbackBuffers:e}=this.bindings[this.currentIndex],n=t?e[t]:null;return n?n instanceof Jo?n:n.buffer:null}getData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:e}=t,n=this.getBuffer(e);return n?n.getData():null}delete(){for(const t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Oo(Nr(this.gl))}_getFeedbackBuffers(t){const{sourceBuffers:e={}}=t,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const t=this.feedbackMap[i];i in e&&(n[t]=i)}Object.assign(n,t.feedbackBuffers);for(const i in n){const t=n[i];if("string"===typeof t){const r=e[t],{byteLength:o,usage:s,accessor:a}=r;n[i]=this._createNewBuffer(i,{byteLength:o,usage:s,accessor:a})}}return n}_setupBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);const n=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:e,feedbackBuffers:n})}_setupTransformFeedback(t,e){let{model:n}=e;const{program:i}=n;t.transformFeedback=new Ju(this.gl,{program:i,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:e}=this._swapBuffers(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceBuffers:t,feedbackBuffers:e})}}_updateBinding(t,e){return t?(Object.assign(t.sourceBuffers,e.sourceBuffers),Object.assign(t.feedbackBuffers,e.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},e.sourceBuffers),feedbackBuffers:Object.assign({},e.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;const e=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(const i in this.feedbackMap){const r=this.feedbackMap[i];e[i]=t.feedbackBuffers[r],n[r]=t.sourceBuffers[i],Oo(n[r]instanceof Jo)}return{sourceBuffers:e,feedbackBuffers:n}}_createNewBuffer(t,e){const n=new Jo(this.gl,e);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}function ed(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){const t=parseInt(n[1],10);Number.isFinite(t)&&(e=t)}return e}const nd={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},id="transform_uSampler_",rd="transform_uSize_",od="transform_position";function sd(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:i,targetTexture:r}=t;let o=Object.keys(n).length,s=null;const a={};let l=e,c={};if(o>0||i){const t=l.split("\n"),e=t.slice();if(t.forEach(((t,r,l)=>{if(o>0){const i=function(t,e){const n={},i=function(t){return $u(t,["attribute","in"])}(t);if(!i)return null;const{type:r,name:o}=i;if(o&&e[o]){const e="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:i,sizeName:s,uniformDeclerations:a}=function(t){const e="".concat(id).concat(t),n="".concat(rd).concat(t),i="  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:i}}(o),l=function(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Vi(!1),null}}(r),c="  ".concat(r," ").concat(o," = transform_getInput(").concat(i,", ").concat(s,").").concat(l,";\n");n[i]=o;return{updatedLine:e,inject:{"vs:#decl":a,"vs:#main-start":c},samplerTextureMap:n}}return null}(t,n);if(i){const{updatedLine:t,inject:n}=i;e[r]=t,c=pr([c,n]),Object.assign(a,i.samplerTextureMap),o--}}i&&!s&&(s=function(t,e){const n=$u(t,["varying","out"]);if(!n)return null;return n.name===e?n.type:null}(t,i))})),i){Oo(r);const t="".concat(rd).concat(i),e="uniform vec2 ".concat(t,";\n"),n="     vec2 ".concat(od," = transform_getPos(").concat(t,");\n     gl_Position = vec4(").concat(od,", 0, 1.);\n");c=pr([c,{"vs:#decl":e,"vs:#main-start":n}])}l=e.join("\n")}return{vs:l,targetTextureType:s,inject:c,samplerTextureMap:a}}const ad={10241:9728,10240:9728,10242:33071,10243:33071};class ld{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this._processVertexShader(t);return Object.assign({},t,e)}getDrawOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e,sourceTextures:n,framebuffer:i,targetTexture:r}=this.bindings[this.currentIndex],o=Object.assign({},e,t.attributes),s=Object.assign({},t.uniforms),a=Object.assign({},t.parameters);let l=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const e in this.samplerTextureMap){const t=this.samplerTextureMap[e];s[e]=n[t]}this._setSourceTextureParameters();const t=function(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:i}=t;const r={};let o,s;n&&(({width:o,height:s}=i),r["".concat(rd).concat(n)]=[o,s]);for(const a in e)({width:o,height:s}=e[a]),r["".concat(rd).concat(a)]=[o,s];return r}({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r});Object.assign(s,t)}return this.hasTargetTexture&&(l=!1,a.viewport=[0,0,i.width,i.height]),{attributes:o,framebuffer:i,uniforms:s,discard:l,parameters:a}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){const{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:e}=this.bindings[this.currentIndex],n=vs(e);if(!t)return n;const i=n.constructor,r=function(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Vi(!1),null}}(this.targetTextureType),o=new i(n.length*r/4);let s=0;for(let a=0;a<n.length;a+=4)for(let t=0;t<r;t++)o[s++]=n[a+t];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:e,_swapTexture:n}=t;this._swapTexture=n,this.targetTextureVarying=e,this.hasTargetTexture=e,this._setupTextures(t)}_createTargetTexture(t){const{sourceTextures:e,textureOrReference:n}=t;if(n instanceof as)return n;const i=e[n];return i?(this._targetRefTexName=n,this._createNewTexture(i)):null}_setupTextures(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e,_sourceTextures:n={},_targetTexture:i}=t,r=this._createTargetTexture({sourceTextures:n,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:e,sourceTextures:n,targetTexture:r}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if("number"!==typeof t||this.elementCount>=t)return;const e=new Float32Array(t);e.forEach(((t,e,n)=>{n[e]=e})),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new Jo(this.gl,{data:e,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){const{sourceTextures:t,targetTexture:e}=this._swapTextures(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceTextures:t,targetTexture:e})}}_updateBinding(t,e){const{sourceBuffers:n,sourceTextures:i,targetTexture:r}=e;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,i),Object.assign(t.sourceBuffers,n),r){t.targetTexture=r;const{width:e,height:n}=r,{framebuffer:i}=t;i?(i.update({attachments:{36064:r},resizeAttachments:!1}),i.resize({width:e,height:n})):t.framebuffer=new Cs(this.gl,{id:"transform-framebuffer",width:e,height:n,attachments:{36064:r}})}return t}_setSourceTextureParameters(){const t=this.currentIndex,{sourceTextures:e}=this.bindings[t];for(const n in e)e[n].setParameters(ad)}_swapTextures(t){if(!this._swapTexture)return null;const e=Object.assign({},t.sourceTextures);e[this._swapTexture]=t.targetTexture;return{sourceTextures:e,targetTexture:t.sourceTextures[this._swapTexture]}}_createNewTexture(t){const e=function(t,e){Oo(t instanceof as||t instanceof gs||t instanceof ms);const n=t.constructor,{gl:i,width:r,height:o,format:s,type:a,dataFormat:l,border:c,mipmaps:u}=t;return new n(i,Object.assign({width:r,height:o,format:s,type:a,dataFormat:l,border:c,mipmaps:u},e))}(t,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=e,e}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:e,targetTexture:n}=this.bindings[this.currentIndex],{vs:i,uniforms:r,targetTextureType:o,inject:s,samplerTextureMap:a}=sd({vs:t.vs,sourceTextureMap:e,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),l=pr([t.inject||{},s]);this.targetTextureType=o,this.samplerTextureMap=a;return{vs:i,fs:t._fs||Qu({version:ed(i),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[nd].concat(t.modules||[]):t.modules,uniforms:r,inject:l}}}let cd=null;function ud(t,e){var n;return new t((n=t.BYTES_PER_ELEMENT*e,(!cd||cd.byteLength<n)&&(cd=new ArrayBuffer(n)),cd),0,e)}class dd extends Uo{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||(Nr(t)||"Chrome"===Lc())}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new dd(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return dd.MAX_ATTRIBUTES=dd.MAX_ATTRIBUTES||t.getParameter(34921),dd.MAX_ATTRIBUTES}static setConstant(t,e,n){switch(n.constructor){case Float32Array:dd._setConstantFloatArray(t,e,n);break;case Int32Array:dd._setConstantIntArray(t,e,n);break;case Uint32Array:dd._setConstantUintArray(t,e,n);break;default:Oo(!1)}}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.id||e.program&&e.program.id;super(t,Object.assign({},e,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=e.isDefaultArray||!1,this.gl2=t,this.initialize(e),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return dd.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Oo(!t||34963===t.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind((()=>{this.gl.bindBuffer(34963,t?t.handle:null)})),this}setBuffer(t,e,n){if(34963===e.target)return this.setElementBuffer(e,n);const{size:i,type:r,stride:o,offset:s,normalized:a,integer:l,divisor:c}=n,{gl:u,gl2:d}=this;return t=Number(t),this.bind((()=>{u.bindBuffer(34962,e.handle),l?(Oo(Nr(u)),d.vertexAttribIPointer(t,i,r,o,s)):u.vertexAttribPointer(t,i,r,a,o,s),u.enableVertexAttribArray(t),d.vertexAttribDivisor(t,c||0)})),this}enable(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!e&&0===t&&!dd.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind((()=>e?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t)))),this}getConstantBuffer(t,e){const n=this._normalizeConstantArrayValue(e),i=n.byteLength*t,r=n.length*t;let o=!this.buffer;if(this.buffer=this.buffer||new Jo(this.gl,i),o=o||this.buffer.reallocate(i),o=o||!this._compareConstantArrayValues(n,this.bufferValue),o){const t=ud(e.constructor,r);!function(t){let{target:e,source:n,start:i=0,count:r=1}=t;const o=n.length,s=r*o;let a=0;for(let l=i;a<o;a++)e[l++]=n[a];for(;a<s;)a<s-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+s-a),a=s)}({target:t,source:n,start:0,count:r}),this.buffer.subData(t),this.bufferValue=e}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}static _setConstantFloatArray(t,e,n){switch(n.length){case 1:t.vertexAttrib1fv(e,n);break;case 2:t.vertexAttrib2fv(e,n);break;case 3:t.vertexAttrib3fv(e,n);break;case 4:t.vertexAttrib4fv(e,n);break;default:Oo(!1)}}static _setConstantIntArray(t,e,n){switch(Oo(Nr(t)),n.length){case 1:t.vertexAttribI1iv(e,n);break;case 2:t.vertexAttribI2iv(e,n);break;case 3:t.vertexAttribI3iv(e,n);break;case 4:t.vertexAttribI4iv(e,n);break;default:Oo(!1)}}static _setConstantUintArray(t,e,n){switch(Oo(Nr(t)),n.length){case 1:t.vertexAttribI1uiv(e,n);break;case 2:t.vertexAttribI2uiv(e,n);break;case 3:t.vertexAttribI3uiv(e,n);break;case 4:t.vertexAttribI4uiv(e,n);break;default:Oo(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,e){let{location:n}=e;return Oo(Number.isFinite(n)),this.bind((()=>34373===t?this.gl.getVertexAttribOffset(n,t):this.gl.getVertexAttrib(n,t)))}}const hd=/^(.+)__LOCATION_([0-9]+)$/,fd=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class pd{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.id||e.program&&e.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new dd(t),Do(this,"VertexArray","v6.0",fd),this.initialize(e),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind((()=>{for(const e in t){const n=t[e];this._setAttribute(e,n)}this.gl.bindBuffer(34962,null)})),this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this}setBuffer(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===e.target)return this.setElementBuffer(e,n);const{location:i,accessor:r}=this._resolveLocationAndAccessor(t,e,e.accessor,n);return i>=0&&(this.values[i]=e,this.accessors[i]=r,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,e,r)),this}setConstant(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:i,accessor:r}=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},n));return i>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e),this.values[i]=e,this.accessors[i]=r,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Jo(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof Jo&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))})),this}bindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const e=this.values[t];e instanceof Jo&&this.setBuffer(t,e)}})),this}bindForDraw(t,e,n){let i;return this.vertexArrayObject.bind((()=>{this._setConstantAttributes(t,e),i=n()})),i}_resolveLocationAndAccessor(t,e,n,i){const r={location:-1,accessor:null},{location:o,name:s}=this._getAttributeIndex(t);if(!Number.isFinite(o)||o<0)return this.unused[t]=e,Or.once(3,(()=>"unused value ".concat(t," in ").concat(this.id)))(),r;const a=this._getAttributeInfo(s||o);if(!a)return r;const l=this.accessors[o]||{},c=Ko.resolve(a.accessor,l,n,i),{size:u,type:d}=c;return Oo(Number.isFinite(u)&&Number.isFinite(d)),{location:o,accessor:c}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const e=Number(t);if(Number.isFinite(e))return{location:e};const n=hd.exec(t),i=n?n[1]:t,r=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+r,name:i}:{location:-1}}_setAttribute(t,e){if(e instanceof Jo)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof Jo){const n=e[0],i=e[1];this.setBuffer(t,n,i)}else if(ArrayBuffer.isView(e)||Array.isArray(e)){const n=e;this.setConstant(t,n)}else{if(!(e.buffer instanceof Jo))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");{const n=e;this.setBuffer(t,n.buffer,n)}}}_setConstantAttributes(t,e){const n=Math.max(0|t,0|e);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,n);for(let r=1;r<this.vertexArrayObject.MAX_ATTRIBUTES;r++)i=this.values[r],ArrayBuffer.isView(i)&&this._setConstantAttribute(r,i)}_setConstantAttributeZero(t,e){if(dd.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,t);const n=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(t,e){dd.setConstant(this.gl,t,e)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,e){const n=this.values[e],i=this.accessors[e];if(!n)return;const{divisor:r}=i,o=r>0;if(t.isInstanced=t.isInstanced||o,n instanceof Jo){const e=n;if(o){const n=e.getVertexCount(i);t.instanceCount=Math.min(t.instanceCount,n)}else{const n=e.getVertexCount(i);t.vertexCount=Math.min(t.vertexCount,n)}}}setElements(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Or.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,e)}}function gd(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:n=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return function(t,e){const{maxElts:n=16,size:i=1}=e;let r="[";for(let s=0;s<t.length&&s<n;++s)s>0&&(r+=",".concat(s%i===0?" ":"")),r+=gd(t[s],e);const o=t.length>n?"...":"]";return"".concat(r).concat(o)}(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return n?"0":"0.";if(n)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function md(t,e,n,i){const{gl:r}=t;if(!e)return{[i]:"null","Format ":"N/A"};let o,s,a,l="NOT PROVIDED",c=1,u=0,d=0;if(n&&(l=n.type,c=n.size,l=String(l).replace("Array",""),o=-1!==l.indexOf("nt")),e instanceof Jo){const t=e,{data:h,changed:f}=t.getDebugData();let p;if(s=f?"*":"",a=h,d=t.byteLength,u=d/h.BYTES_PER_ELEMENT/c,n){const t=n.divisor>0;p="".concat(t?"I ":"P "," ").concat(u," (x").concat(c,"=").concat(d," bytes ").concat(Ro(r,l),")")}else o=!0,p="".concat(d," bytes");return{[i]:"".concat(s).concat(gd(a,{size:c,isInteger:o})),"Format ":p}}return a=e,c=e.length,l=String(e.constructor.name).replace("Array",""),o=-1!==l.indexOf("nt"),{[i]:"".concat(gd(a,{size:c,isInteger:o})," (constant)"),"Format ":"".concat(c,"x").concat(l," (constant)")}}function yd(t,e){const{type:n,size:i}=e,r=va(n,i);return r?"".concat(t," (").concat(r.name,")"):t}function vd(t){let{header:e="Uniforms",program:n,uniforms:i,undefinedOnly:r=!1}=t;Oo(n);const o=".*Matrix",s=n._uniformSetters,a={},l=Object.keys(s).sort();let c=0;for(const h of l)h.match(".*_.*")||h.match(o)||bd({table:a,header:e,uniforms:i,uniformName:h,undefinedOnly:r})&&c++;for(const h of l)h.match(o)&&bd({table:a,header:e,uniforms:i,uniformName:h,undefinedOnly:r})&&c++;for(const h of l)a[h]||bd({table:a,header:e,uniforms:i,uniformName:h,undefinedOnly:r})&&c++;let u=0;const d={};if(!r)for(const h in i){const t=i[h];a[h]||(u++,d[h]={Type:"NOT USED: ".concat(t),[e]:gd(t)})}return{table:a,count:c,unusedTable:d,unusedCount:u}}function bd(t){let{table:e,header:n,uniforms:i,uniformName:r,undefinedOnly:o}=t;const s=i[r],a=function(t){return void 0!==t&&null!==t}(s);return(!o||!a)&&(e[r]={[n]:a?gd(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},!0)}function _d(t){const{type:e,size:n}=t.accessor,i=va(e,n);return i?"".concat(i.name," ").concat(t.name):t.name}const wd={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function xd(t,e){const{attributeMap:n=wd}=e||{};return n&&n[t]||t}function Sd(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}Oo(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const Ed=()=>{},Td={};class Pd{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:n=Bo("model")}=e;Oo(Br(t)),this.id=n,this.gl=t,this.id=e.id||Bo("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(e)}initialize(t){this.props={},this.programManager=t.programManager||Sa.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:e=null,vs:n,fs:i,modules:r,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c}=t;this.programProps={program:e,vs:n,fs:i,modules:r,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=void 0!==t.drawMode?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},Oo(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(t){this._setModelProps(t)}delete(){for(const t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){const{program:e,vs:n,fs:i,modules:r,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c}=t;this.programProps={program:e,vs:n,fs:i,modules:r,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return Oo(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return Oo(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(t,e,n){const i={};let r=e.indices;for(const o in e.attributes){const s=e.attributes[o],a=xd(o,n);if("indices"===o)r=s;else if(s.constant)i[a]=s.value;else{const e=s.value,n={...s};delete n.value,i[a]=[new Jo(t,e),n],Sd(o,n)}}if(r){const e=r.value||r;Oo(e instanceof Uint16Array||e instanceof Uint32Array,'attribute array for "indices" must be of integer type');const n={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new Jo(t,{data:e,target:34963}),n]}return i}(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(zo(t))return this;const e={};for(const n in t){const i=t[n];e[n]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(e),this}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();const e=this.programManager.getUniforms(this.program);return e?e(t):{}}updateModuleSettings(t){const e=this.getModuleUniforms(t||{});return this.setUniforms(e)}clear(t){return fs(this.program.gl,t),this}draw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:e=null,framebuffer:n,uniforms:i={},attributes:r={},transformFeedback:o=this.transformFeedback,parameters:s={},vertexArray:a=this.vertexArray}=t;let l;this.setAttributes(r),this.updateModuleSettings(e),this.setUniforms(i),Or.priority>=2&&(l=this._logDrawCallStart(2));const c=this.vertexArray.getDrawParams(),{isIndexed:u=c.isIndexed,indexType:d=c.indexType,indexOffset:h=c.indexOffset,vertexArrayInstanced:f=c.isInstanced}=this.props;f&&!this.isInstanced&&Or.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:p,instanceCount:g}=this,{onBeforeRender:m=Ed,onAfterRender:y=Ed}=this.props;m(),this.program.setUniforms(this.uniforms);const v=this.program.draw(Object.assign(Td,t,{logPriority:l,uniforms:null,framebuffer:n,parameters:s,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:a,transformFeedback:o,isIndexed:u,indexType:d,isInstanced:p,instanceCount:g,offset:u?h:0}));return y(),Or.priority>=2&&this._logDrawCallEnd(l,a,n),v}transform(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:e=!0,feedbackBuffers:n,unbindModels:i=[]}=t;let{parameters:r}=t;n&&this._setFeedbackBuffers(n),e&&(r=Object.assign({},r,{35977:e})),i.forEach((t=>t.vertexArray.unbindBuffers()));try{this.draw(Object.assign({},t,{parameters:r}))}finally{i.forEach((t=>t.vertexArray.bindBuffers()))}return this}render(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Or.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:e,fs:n,modules:i,inject:r,defines:o,varyings:s,bufferMode:a,transpileToGLSL100:l}=this.programProps;t=this.programManager.get({vs:e,fs:n,modules:i,inject:r,defines:o,varyings:s,bufferMode:a,transpileToGLSL100:l}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Oo(t instanceof xa,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new pd(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const t in this.geometryBuffers){const e=this.geometryBuffers[t][0]||this.geometryBuffers[t];e instanceof Jo&&e.delete()}}_setAnimationProps(t){this.animated&&Oo(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(zo(t))return this;const{gl:e}=this.program;return this.transformFeedback=this.transformFeedback||new Ju(e,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){const e=t>3?0:1e4;if(!(Date.now()-this.lastLogTime<e))return this.lastLogTime=Date.now(),Or.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:Or.level<=2})(),t}_logDrawCallEnd(t,e,n,i){if(void 0===t)return;const r=function(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=md(e,e.elements,null,n));const r=e.values;for(const o in r){const t=e._getAttributeInfo(o);if(t){let s="".concat(o,": ").concat(t.name);const a=e.accessors[t.location];a&&(s="".concat(o,": ").concat(yd(t.name,a))),i[s]=md(e,r[o],a,n)}}return i}({vertexArray:e,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:s,unusedCount:a}=vd({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:l,count:c}=vd({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});c>0&&Or.log("MISSING UNIFORMS",Object.keys(l))(),a>0&&Or.log("UNUSED UNIFORMS",Object.keys(s))();const u=function(t){const e={},n="Accessors for ".concat(t.id);for(const i of t.attributeInfos)if(i){const t=_d(i);e["in ".concat(t)]={[n]:JSON.stringify(i.accessor)}}for(const i of t.varyingInfos)if(i){const t=_d(i);e["out ".concat(t)]={[n]:JSON.stringify(i.accessor)}}return e}(this.vertexArray.configuration);Or.table(t,r)(),Or.table(t,o)(),Or.table(t+1,u)(),i&&i.log({logLevel:2,message:"Rendered to ".concat(i.id)}),Or.groupEnd(2)()}}class Ad{static isSupported(t){return Nr(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(e),Object.seal(this)}delete(){const{model:t,bufferTransform:e,textureTransform:n}=this;t&&t.delete(),e&&e.delete(),n&&n.delete()}run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:e=!0}=t,n=this._updateDrawOptions(t);e&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let t=!1;const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e)t=t||n.swap();Oo(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e){const e=n.getData(t);if(e)return e}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e)n.update(t)}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:e}=this;this._buildResourceTransforms(e,t),t=this._updateModelProps(t),this.model=new Pd(e,Object.assign({},t,{fs:t.fs||Qu({version:ed(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let e=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)e=i.updateModelProps(e);return e}_buildResourceTransforms(t,e){(function(t){if(!zo(t.feedbackBuffers)||!zo(t.feedbackMap)||t.varyings&&t.varyings.length>0)return!0;return!1})(e)&&(this.bufferTransform=new td(t,e)),function(t){if(!zo(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)return!0;return!1}(e)&&(this.textureTransform=new ld(t,e)),Oo(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let e=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)e=Object.assign(e,i.getDrawOptions(e));return e}}const Cd="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n";const Id={interpolation:class{constructor(t){let{gl:e,attribute:n,timeline:i}=t;s(this,"gl",void 0),s(this,"type","interpolation"),s(this,"attributeInTransition",void 0),s(this,"settings",void 0),s(this,"attribute",void 0),s(this,"transition",void 0),s(this,"currentStartIndices",void 0),s(this,"currentLength",void 0),s(this,"transform",void 0),s(this,"buffers",void 0),this.gl=e,this.transition=new tl(i),this.attribute=n,this.attributeInTransition=new Xu(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=function(t,e){const n=Hu(e.size);return new Ad(t,{vs:Cd,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(e,n);const r={byteLength:0,usage:35050};this.buffers=[new Jo(e,r),new Jo(e,r)]}get inProgress(){return this.transition.inProgress}start(t,e){if(t.duration<=0)return void this.transition.cancel();this.settings=t;const{gl:n,buffers:i,attribute:r}=this;Gu(i);const o={numInstances:e,attribute:r,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of i)Yu({buffer:s,...o});this.currentStartIndices=r.startIndices,this.currentLength=qu(r,e),this.attributeInTransition.setData({buffer:i[1],value:r.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/r.size),sourceBuffers:{aFrom:i[0],aTo:Wu(0,r)},feedbackBuffers:{vCurrent:i[1]}})}update(){const t=this.transition.update();if(t){const{duration:t,easing:e}=this.settings,{time:n}=this.transition;let i=n/t;e&&(i=e(i)),this.transform.run({uniforms:{time:i}})}return t}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0}},spring:class{constructor(t){let{gl:e,attribute:n,timeline:i}=t;s(this,"gl",void 0),s(this,"type","spring"),s(this,"attributeInTransition",void 0),s(this,"settings",void 0),s(this,"attribute",void 0),s(this,"transition",void 0),s(this,"currentStartIndices",void 0),s(this,"currentLength",void 0),s(this,"texture",void 0),s(this,"framebuffer",void 0),s(this,"transform",void 0),s(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new tl(i),this.attribute=n,this.attributeInTransition=new Xu(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=function(t){return new as(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function(t,e){return new Cs(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function(t,e,n){const i=Hu(e.size);return new Ad(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,n,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new Jo(e,r),new Jo(e,r),new Jo(e,r)]}get inProgress(){return this.transition.inProgress}start(t,e){const{gl:n,buffers:i,attribute:r}=this,o={numInstances:e,attribute:r,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of i)Yu({buffer:s,...o});this.settings=t,this.currentStartIndices=r.startIndices,this.currentLength=qu(r,e),this.attributeInTransition.setData({buffer:i[1],value:r.value}),this.transition.start({...t,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/r.size),sourceBuffers:{aTo:Wu(0,r)}})}update(){const{buffers:t,transform:e,framebuffer:n,transition:i}=this;if(!i.update())return!1;const r=this.settings;e.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),e.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:r.stiffness,damping:r.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),Gu(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value});return vs(n)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class Md{constructor(t,e){let{id:n,timeline:i}=e;s(this,"id",void 0),s(this,"isSupported",void 0),s(this,"gl",void 0),s(this,"timeline",void 0),s(this,"transitions",void 0),s(this,"needsRedraw",void 0),s(this,"numInstances",void 0),this.id=n,this.gl=t,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=Ad.isSupported(t)}finalize(){for(const t in this.transitions)this._removeTransition(t)}update(t){let{attributes:e,transitions:n,numInstances:i}=t;this.numInstances=i||1;for(const r in e){const t=e[r],i=t.getTransitionSetting(n);i&&this._updateAttribute(r,t,i)}for(const r in this.transitions){const t=e[r];t&&t.getTransitionSetting(n)||this._removeTransition(r)}}hasAttribute(t){const e=this.transitions[t];return e&&e.inProgress}getAttributes(){const t={};for(const e in this.transitions){const n=this.transitions[e];n.inProgress&&(t[e]=n.attributeInTransition)}return t}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const e in this.transitions){this.transitions[e].update()&&(this.needsRedraw=!0)}const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,e,n){const i=this.transitions[t];let r=!i||i.type!==n.type;if(r){if(!this.isSupported)return void W.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();i&&this._removeTransition(t);const o=Id[n.type];o?this.transitions[t]=new o({attribute:e,timeline:this.timeline,gl:this.gl}):(W.error("unsupported transition type '".concat(n.type,"'"))(),r=!1)}(r||e.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}const kd="attributeManager.invalidate";class Od{constructor(t){let{id:e="attribute-manager",stats:n,timeline:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,"id",void 0),s(this,"gl",void 0),s(this,"attributes",void 0),s(this,"updateTriggers",void 0),s(this,"needsRedraw",void 0),s(this,"userData",void 0),s(this,"stats",void 0),s(this,"attributeTransitionManager",void 0),s(this,"mergeBoundsMemoized",Oa(Mn)),this.id=e,this.gl=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new Md(t,{id:"".concat(e,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,e&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{instanced:1})}remove(t){for(const e of t)void 0!==this.attributes[e]&&(this.attributes[e].delete(),delete this.attributes[e])}invalidate(t,e){const n=this._invalidateTrigger(t,e);q(kd,this,t,n)}invalidateAll(t){for(const e in this.attributes)this.attributes[e].setNeedsUpdate(e,t);q(kd,this,"all")}update(t){let{data:e,numInstances:n,startIndices:i=null,transitions:r,props:o={},buffers:s={},context:a={}}=t,l=!1;q("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const t=this.attributes[c],r=t.settings.accessor;t.startIndices=i,t.numInstances=n,o[c]&&W.removed("props.".concat(c),"data.attributes.".concat(c))(),t.setExternalBuffer(s[c])||t.setBinaryValue("string"===typeof r?s[r]:void 0,e.startIndices)||"string"===typeof r&&!s[r]&&t.setConstantValue(o[r])||t.needsUpdate()&&(l=!0,this._updateAttribute({attribute:t,numInstances:n,data:e,props:o,context:a})),this.needsRedraw=this.needsRedraw||t.needsRedraw()}l&&q("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:r})}updateTransition(){const{attributeTransitionManager:t}=this,e=t.run();return this.needsRedraw=this.needsRedraw||e,e}getAttributes(){return this.attributes}getBounds(t){const e=t.map((t=>{var e;return null===(e=this.attributes[t])||void 0===e?void 0:e.getBounds()}));return this.mergeBoundsMemoized(e)}getChangedAttributes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1};const{attributes:e,attributeTransitionManager:n}=this,i={...n.getAttributes()};for(const r in e){const o=e[r];o.needsRedraw(t)&&!n.hasAttribute(r)&&(i[r]=o)}return i}getShaderAttributes(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t||(t=this.getAttributes());const n={};for(const i in t)e[i]||Object.assign(n,t[i].getShaderAttributes());return n}_add(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const n in t){const i=t[n];this.attributes[n]=this._createAttribute(n,i,e)}this._mapUpdateTriggersToAttributes()}_createAttribute(t,e,n){const i={...e,id:t,size:(e.isIndexed?1:e.size)||1,divisor:n.instanced?1:e.divisor||0};return new Xu(this.gl,i)}_mapUpdateTriggersToAttributes(){const t={};for(const e in this.attributes){this.attributes[e].getUpdateTriggers().forEach((n=>{t[n]||(t[n]=[]),t[n].push(e)}))}this.updateTriggers=t}_invalidateTrigger(t,e){const{attributes:n,updateTriggers:i}=this,r=i[t];return r&&r.forEach((t=>{const i=n[t];i&&i.setNeedsUpdate(i.id,e)})),r}_updateAttribute(t){const{attribute:e,numInstances:n}=t;if(q("attribute.updateStart",e),e.constant)return void e.setConstantValue(e.value);e.allocate(n)&&q("attribute.allocate",e,n);e.updateBuffer(t)&&(this.needsRedraw=!0,q("attribute.updateEnd",e,n))}}const Ld=1e-5;function Rd(t,e,n,i,r){const o=e-t;return(n-e)*r+-o*i+o+e}function Fd(t,e){if(Array.isArray(t)){let n=0;for(let i=0;i<t.length;i++){const r=t[i]-e[i];n+=r*r}return Math.sqrt(n)}return Math.abs(t-e)}const Bd={interpolation:class extends tl{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:e,toValue:n,duration:i,easing:r}}=this,o=r(t/i);this._value=tn(e,n,o)}},spring:class extends tl{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:e,damping:n,stiffness:i}=this.settings,{_prevValue:r=t,_currValue:o=t}=this;let s=function(t,e,n,i,r){if(Array.isArray(n)){const o=[];for(let s=0;s<n.length;s++)o[s]=Rd(t[s],e[s],n[s],i,r);return o}return Rd(t,e,n,i,r)}(r,o,e,n,i);const a=Fd(s,e),l=Fd(s,o);a<Ld&&l<Ld&&(s=e,this.end()),this._prevValue=o,this._currValue=s}}};class Nd{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,e,n,i){const{transitions:r}=this;if(r.has(t)){const n=r.get(t),{value:i=n.settings.fromValue}=n;e=i,this.remove(t)}if(!(i=Vu(i)))return;const o=Bd[i.type];if(!o)return void W.error("unsupported transition type '".concat(i.type,"'"))();const s=new o(this.timeline);s.start({...i,fromValue:e,toValue:n}),r.set(t,s)}remove(t){const{transitions:e}=this;e.has(t)&&(e.get(t).cancel(),e.delete(t))}update(){const t={};for(const[e,n]of this.transitions)n.update(),t[e]=n.value,n.inProgress||this.remove(e);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}function zd(t,e){const n=jd({newProps:t,oldProps:e,propTypes:t[y],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function(t,e){if(null===e)return"oldProps is null, initial diff";let n=!1;const{dataComparator:i,_dataDiff:r}=t;i?i(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied");n&&r&&(n=r(t.data,e.data)||n);return n}(t,e);let r=!1;return i||(r=function(t,e){if(null===e)return{all:!0};if("all"in t.updateTriggers){if(Wd(t,e,"all"))return{all:!0}}const n={};let i=!1;for(const r in t.updateTriggers)if("all"!==r){Wd(t,e,r)&&(n[r]=!0,i=!0)}return!!i&&n}(t,e)),{dataChanged:i,propsChanged:n,updateTriggersChanged:r,extensionsChanged:Vd(t,e),transitionsChanged:Dd(t,e)}}function Dd(t,e){if(!t.transitions)return!1;const n={},i=t[y];let r=!1;for(const o in t.transitions){const s=i[o],a=s&&s.type;("number"===a||"color"===a||"array"===a)&&Ud(t[o],e[o],s)&&(n[o]=!0,r=!0)}return!!r&&n}function jd(t){let{newProps:e,oldProps:n,ignoreProps:i={},propTypes:r={},triggerName:o="props"}=t;if(n===e)return!1;if("object"!==typeof e||null===e)return"".concat(o," changed shallowly");if("object"!==typeof n||null===n)return"".concat(o," changed shallowly");for(const s of Object.keys(e))if(!(s in i)){if(!(s in n))return"".concat(o,".").concat(s," added");const t=Ud(e[s],n[s],r[s]);if(t)return"".concat(o,".").concat(s," ").concat(t)}for(const s of Object.keys(n))if(!(s in i)){if(!(s in e))return"".concat(o,".").concat(s," dropped");if(!Object.hasOwnProperty.call(e,s)){const t=Ud(e[s],n[s],r[s]);if(t)return"".concat(o,".").concat(s," ").concat(t)}}return!1}function Ud(t,e,n){let i=n&&n.equal;return i&&!i(t,e,n)?"changed deeply":i||(i=t&&e&&t.equals,!i||i.call(t,e))?i||e===t?null:"changed shallowly":"changed deeply"}function Vd(t,e){if(null===e)return!0;const n=e.extensions,{extensions:i}=t;if(i===n)return!1;if(!n||!i)return!0;if(i.length!==n.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(n[r]))return!0;return!1}function Wd(t,e,n){let i=t.updateTriggers[n];i=void 0===i||null===i?{}:i;let r=e.updateTriggers[n];r=void 0===r||null===r?{}:r;return jd({oldProps:r,newProps:i,triggerName:n})}function Hd(t){if(null===(e=t)||"object"!==typeof e)throw new Error("count(): argument not an object");var e;if("function"===typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function(t){return null!==t&&"object"===typeof t&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}function Gd(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some((t=>"project64"===t.name)))){const t=n.modules.findIndex((t=>"project32"===t.name));t>=0&&n.modules.splice(t,1)}if("inject"in e)if(t.inject){const i={...t.inject};for(const t in e.inject)i[t]=(i[t]||"")+e.inject[t];n.inject=i}else n.inject=e.inject;return n}const qd=[0,0,0];function Yd(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=e.projectPosition(t);if(n&&e instanceof Ja){const[n,r,o=0]=t,s=e.getDistanceScales([n,r]);i[2]=o*s.unitsPerMeter[2]}return i}function Xd(t,e){let{viewport:n,modelMatrix:i,coordinateSystem:r,coordinateOrigin:o,offsetMode:s}=e,[a,l,c=0]=t;switch(i&&([a,l,c]=Yn([],[a,l,c,1],i)),r){case ki.LNGLAT:return Yd([a,l,c],n,s);case ki.LNGLAT_OFFSETS:return Yd([a+o[0],l+o[1],c+(o[2]||0)],n,s);case ki.METER_OFFSETS:return Yd(xi(o,[a,l,c]),n,s);case ki.CARTESIAN:default:return n.isGeospatial?[a+o[0],l+o[1],c+o[2]]:n.projectPosition([a,l,c])}}function Kd(t,e){const{viewport:n,coordinateSystem:i,coordinateOrigin:r,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=function(t){const{viewport:e,modelMatrix:n,coordinateOrigin:i}=t;let{coordinateSystem:r,fromCoordinateSystem:o,fromCoordinateOrigin:s}=t;return r===ki.DEFAULT&&(r=e.isGeospatial?ki.LNGLAT:ki.CARTESIAN),void 0===o&&(o=r),void 0===s&&(s=i),{viewport:e,coordinateSystem:r,coordinateOrigin:i,modelMatrix:n,fromCoordinateSystem:o,fromCoordinateOrigin:s}}(e),{autoOffset:l=!0}=e,{geospatialOrigin:c=qd,shaderCoordinateOrigin:u=qd,offsetMode:d=!1}=l?Da(n,i,r):{},h=Xd(t,{viewport:n,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:d});if(d){const t=n.projectPosition(c||u);vn(h,h,t)}return h}const Zd={10241:9987,10240:9729,10242:33071,10243:33071},$d={};const Qd={boolean:{validate:(t,e)=>!0,equal:(t,e,n)=>Boolean(t)===Boolean(e)},number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},color:{validate:(t,e)=>e.optional&&!t||eh(t)&&(3===t.length||4===t.length),equal:(t,e,n)=>qa(t,e,1)},accessor:{validate(t,e){const n=nh(t);return"function"===n||n===nh(e.value)},equal:(t,e,n)=>"function"===typeof e||qa(t,e,1)},array:{validate:(t,e)=>e.optional&&!t||eh(t),equal(t,e,n){const{compare:i}=n,r=Number.isInteger(i)?i:i?1:0;return i?qa(t,e,r):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:i}=n,r=Number.isInteger(i)?i:i?1:0;return i?qa(t,e,r):t===e}},function:{validate:(t,e)=>e.optional&&!t||"function"===typeof t,equal:(t,e,n)=>!n.compare&&!1!==n.ignore||t===e},data:{transform:(t,e,n)=>{const{dataTransform:i}=n.props;return i&&t?i(t):t}},image:{transform:(t,e,n)=>{const i=n.context;return i&&i.gl?function(t,e,n,i){if(n instanceof as)return n;n.constructor&&"Object"!==n.constructor.name&&(n={data:n});let r=null;n.compressed&&(r={10241:n.data.length>1?9985:9729});const o=new as(e,{...n,parameters:{...Zd,...r,...i}});return $d[o.id]=t,o}(n.id,i.gl,t,{...e.parameters,...n.props.textureParameters}):null},release:(t,e,n)=>{var i,r;i=n.id,(r=t)&&r instanceof as&&$d[r.id]===i&&(r.delete(),delete $d[r.id])}}};function Jd(t,e){switch(nh(e)){case"object":return th(t,e);case"array":return th(t,{type:"array",value:e,compare:!1});case"boolean":return th(t,{type:"boolean",value:e});case"number":return th(t,{type:"number",value:e});case"function":return th(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function th(t,e){return"type"in e?{name:t,...Qd[e.type],...e}:"value"in e?{name:t,type:nh(e.value),...e}:{name:t,type:"object",value:e}}function eh(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function nh(t){return eh(t)?"array":null===t?"null":typeof t}const ih="_mergedDefaultProps";function rh(t,e){let n=ih;if(e)for(const r of e){const t=r.constructor;t&&(n+=":".concat(t.extensionName||t.name))}const i=ah(t,n);return i||(t[n]=function(t,e){const n=t.prototype;if(!n)return null;const i=Object.getPrototypeOf(t),r=rh(i),o=ah(t,"defaultProps")||{},s=function(t){const e={},n={},i={};for(const[r,o]of Object.entries(t)){const t=null===o||void 0===o?void 0:o.deprecatedFor;if(t)i[r]=Array.isArray(t)?t:[t];else{const t=Jd(r,o);e[r]=t,n[r]=t.value}}return{propTypes:e,defaultProps:n,deprecatedProps:i}}(o),a=Object.assign(Object.create(null),r,s.defaultProps),l=Object.assign(Object.create(null),null===r||void 0===r?void 0:r[y],s.propTypes),c=Object.assign(Object.create(null),null===r||void 0===r?void 0:r[v],s.deprecatedProps);for(const u of e){const t=rh(u.constructor);t&&(Object.assign(a,t),Object.assign(l,t[y]),Object.assign(c,t[v]))}(function(t,e){const n=function(t){const e=t.componentName;e||W.warn("".concat(t.name,".componentName not specified"))();return e||t.name}(e);Object.defineProperties(t,{id:{writable:!0,value:n}})})(a,t),function(t,e){const n={},i={};for(const r in e){const t=e[r],{name:o,value:s}=t;t.async&&(n[o]=s,i[o]=oh(o))}t[b]=n,t[_]={},Object.defineProperties(t,i)}(a,l),function(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(t){const i="".concat(this.id,": ").concat(n);for(const r of e[n])sh(this,r)||(this[r]=t);W.deprecated(i,e[n].join("/"))()}})}(a,c),a[y]=l,a[v]=c,0!==e.length||sh(t,"_propTypes")||(t._propTypes=l);return a}(t,e||[]))}function oh(t){return{enumerable:!0,set(e){"string"===typeof e||e instanceof Promise||Bu(e)?this[_][t]=e:this[w][t]=e},get(){if(this[w]){if(t in this[w]){return this[w][t]||this[b][t]}if(t in this[_]){const e=this[m]&&this[m].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[b][t]}}return this[b][t]}}}function sh(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ah(t,e){return sh(t,e)&&t[e]}let lh=0;class ch{constructor(){s(this,"id",void 0),s(this,"props",void 0),s(this,"count",void 0);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.props=function(t,e){let n;for(let o=e.length-1;o>=0;o--){const t=e[o];"extensions"in t&&(n=t.extensions)}const i=rh(t.constructor,n),r=Object.create(i);r[m]=t,r[_]={},r[w]={};for(let o=0;o<e.length;++o){const t=e[o];for(const e in t)r[e]=t[e]}return Object.freeze(r),r}(this,e),this.id=this.props.id,this.count=lh++}clone(t){const{props:e}=this,n={};for(const i in e[b])i in e[w]?n[i]=e[w][i]:i in e[_]&&(n[i]=e[_][i]);return new this.constructor({...e,...n,...t})}}s(ch,"componentName","Component"),s(ch,"defaultProps",{});const uh=Object.freeze({});class dh{constructor(t){s(this,"component",void 0),s(this,"onAsyncPropUpdated",void 0),s(this,"asyncProps",void 0),s(this,"oldProps",void 0),s(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const e=this.asyncProps[t];e&&e.type&&e.type.release&&e.type.release(e.resolvedValue,e.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||uh}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const e=this.asyncProps[t];return e&&e.resolvedValue}isAsyncPropLoading(t){if(t){const e=this.asyncProps[t];return Boolean(e&&e.pendingLoadCount>0&&e.pendingLoadCount!==e.resolvedLoadCount)}for(const e in this.asyncProps)if(this.isAsyncPropLoading(e))return!0;return!1}reloadAsyncProp(t,e){this._watchPromise(t,Promise.resolve(e))}setAsyncProps(t){this.component=t[m]||this.component;const e=t[w]||{},n=t[_]||t,i=t[b]||{};for(const r in e){const t=e[r];this._createAsyncPropData(r,i[r]),this._updateAsyncProp(r,t),e[r]=this.getAsyncProp(r)}for(const r in n){const t=n[r];this._createAsyncPropData(r,i[r]),this._updateAsyncProp(r,t)}}_fetch(t,e){return null}_onResolve(t,e){}_onError(t,e){}_updateAsyncProp(t,e){this._didAsyncInputValueChange(t,e)&&("string"===typeof e&&(e=this._fetch(t,e)),e instanceof Promise?this._watchPromise(t,e):Bu(e)?this._resolveAsyncIterable(t,e):this._setPropValue(t,e))}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,e){const n=this.asyncProps[t];return e!==n.resolvedValue&&e!==n.lastValue&&(n.lastValue=e,!0)}_setPropValue(t,e){this._freezeAsyncOldProps();const n=this.asyncProps[t];n&&(e=this._postProcessValue(n,e),n.resolvedValue=e,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(t,e,n){const i=this.asyncProps[t];i&&n>=i.resolvedLoadCount&&void 0!==e&&(this._freezeAsyncOldProps(),i.resolvedValue=e,i.resolvedLoadCount=n,this.onAsyncPropUpdated(t,e))}_watchPromise(t,e){const n=this.asyncProps[t];if(n){n.pendingLoadCount++;const i=n.pendingLoadCount;e.then((e=>{this.component&&(e=this._postProcessValue(n,e),this._setAsyncPropValue(t,e,i),this._onResolve(t,e))})).catch((e=>{this._onError(t,e)}))}}async _resolveAsyncIterable(t,e){if("data"!==t)return void this._setPropValue(t,e);const n=this.asyncProps[t];if(!n)return;n.pendingLoadCount++;const i=n.pendingLoadCount;let r=[],o=0;for await(const s of e){if(!this.component)return;const{dataTransform:e}=this.component.props;r=e?e(s,r):r.concat(s),Object.defineProperty(r,"__diff",{enumerable:!1,value:[{startRow:o,endRow:r.length}]}),o=r.length,this._setAsyncPropValue(t,r,i)}this._onResolve(t,r)}_postProcessValue(t,e){const n=t.type;return n&&this.component&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(e,n,this.component):e}_createAsyncPropData(t,e){if(!this.asyncProps[t]){const n=this.component&&this.component.props[y];this.asyncProps[t]={type:n&&n[t],lastValue:null,resolvedValue:e,pendingLoadCount:0,resolvedLoadCount:0}}}}class hh extends dh{constructor(t){let{attributeManager:e,layer:n}=t;super(n),s(this,"attributeManager",void 0),s(this,"needsRedraw",void 0),s(this,"needsUpdate",void 0),s(this,"subLayers",void 0),s(this,"usesPickingColorCache",void 0),s(this,"hasPickingBuffer",void 0),s(this,"changeFlags",void 0),s(this,"viewport",void 0),s(this,"uniformTransitions",void 0),s(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(t,e){const n=this.layer,i=null===n||void 0===n?void 0:n.props.fetch;return i?i(e,{propName:t,layer:n}):super._fetch(t,e)}_onResolve(t,e){const n=this.layer;if(n){const i=n.props.onDataLoad;"data"===t&&i&&i(e,{propName:t,layer:n})}}_onError(t,e){const n=this.layer;n&&n.raiseError(e,"loading ".concat(t," of ").concat(this.layer))}}const fh=2**24-1,ph=Object.freeze([]),gh=Oa((t=>{let{oldViewport:e,viewport:n}=t;return e.equals(n)}));let mh=new Uint8ClampedArray(0);const yh={data:{type:"data",value:ph,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,e)=>{let{propName:n,layer:i,loaders:r,loadOptions:o,signal:s}=e;const{resourceManager:a}=i.context;var l;(o=o||i.getLoadOptions(),r=r||i.props.loaders,s)&&(o={...o,fetch:{...null===(l=o)||void 0===l?void 0:l.fetch,signal:s}});let c=a.contains(t);return c||o||(a.add({resourceId:t,data:qe(t,r),persistent:!1}),c=!0),c?a.subscribe({resourceId:t,onChange:t=>{var e;return null===(e=i.internalState)||void 0===e?void 0:e.reloadAsyncProp(n,t)},consumerId:i.id,requestId:n}):qe(t,r,o)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:ki.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:t=>{let{layerIndex:e}=t;return[0,100*-e]}},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class vh extends ch{constructor(){super(...arguments),s(this,"internalState",null),s(this,"lifecycle",u),s(this,"context",void 0),s(this,"state",void 0),s(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){const t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}project(t){$a(this.internalState);const e=this.internalState.viewport||this.context.viewport,n=Xd(t,{viewport:e,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,r,o]=Pi(n,e.pixelProjectionMatrix);return 2===t.length?[i,r]:[i,r,o]}unproject(t){$a(this.internalState);return(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,e){$a(this.internalState);return Kd(t,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...e})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(t){for(const e of this.getModels())e.updateModuleSettings(t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===ki.DEFAULT||t===ki.LNGLAT||t===ki.CARTESIAN}onHover(t,e){return this.props.onHover&&this.props.onHover(t,e)||!1}onClick(t,e){return this.props.onClick&&this.props.onClick(t,e)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[0]=t+1&255,e[1]=t+1>>8&255,e[2]=t+1>>8>>8&255,e}decodePickingColor(t){$a(t instanceof Uint8Array);const[e,n,i]=t;return e+256*n+65536*i-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:Hd(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;return null===(t=this.getAttributeManager())||void 0===t?void 0:t.getBounds(["positions","instancePositions"])}getShaders(t){for(const e of this.props.extensions)t=Gd(t,e.getShaders.call(this,e));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const e=this.getAttributeManager(),{dataChanged:n}=t.changeFlags;if(n&&e)if(Array.isArray(n))for(const i of n)e.invalidateAll(i);else e.invalidateAll();if(e){const{props:n}=t,i=this.internalState.hasPickingBuffer,r=Number.isInteger(n.highlightedObjectIndex)||n.pickable||n.extensions.some((t=>t.getNeedsPickingBuffer.call(this,t)));if(i!==r){this.internalState.hasPickingBuffer=r;const{pickingColors:t,instancePickingColors:n}=e.attributes,i=t||n;i&&(r&&i.constant&&(i.constant=!1,e.invalidate(i.id)),i.value||r||(i.constant=!0,i.value=[0,0,0]))}}}finalizeState(t){for(const n of this.getModels())n.delete();const e=this.getAttributeManager();e&&e.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const e of this.getModels())e.draw(t)}getPickingInfo(t){let{info:e,mode:n,sourceLayer:i}=t;const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(t,e){var n,i,r,o;(e&&(t=new Error("".concat(e,": ").concat(t.message),{cause:t})),null!==(n=(i=this.props).onError)&&void 0!==n&&n.call(i,t))||(null===(r=this.context)||void 0===r||null===(o=r.onError)||void 0===o||o.call(r,t,this))}getNeedsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(t)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var t;return(null===(t=this.internalState)||void 0===t?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;const e=this.internalState.viewport;this.internalState.viewport=t,e&&gh({oldViewport:e,viewport:t})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";const e=this.getAttributeManager();e&&("all"===t?e.invalidateAll():e.invalidate(t))}updateAttributes(t){for(const e of this.getModels())this._setModelAttributes(e,t)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const e=this.props,n=this.getNumInstances(),i=this.getStartIndices();t.update({data:e.data,numInstances:n,startIndices:i,props:e,transitions:e.transitions,buffers:e.data.attributes,context:this});const r=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(r)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const e=t.update(),n=Object.create(this.props);for(const t in e)Object.defineProperty(n,t,{value:e[t]});return n}return this.props}calculateInstancePickingColors(t,e){let{numInstances:n}=e;if(t.constant)return;const i=Math.floor(mh.length/3);if(this.internalState.usesPickingColorCache=!0,i<n){n>fh&&W.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),mh=Ke.allocate(mh,n,{size:3,copy:!0,maxCount:Math.max(n,fh)});const t=Math.floor(mh.length/3),e=[];for(let n=i;n<t;n++)this.encodePickingColor(n,e),mh[3*n+0]=e[0],mh[3*n+1]=e[1],mh[3*n+2]=e[2]}t.value=mh.subarray(0,3*n)}_setModelAttributes(t,e){const n=this.getAttributeManager(),i=t.userData.excludeAttributes||{},r=n.getShaderAttributes(e,i);t.setAttributes(r)}disablePickingIndex(t){const e=this.props.data;if(!("attributes"in e))return void this._disablePickingIndex(t);const{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,r=n||i,o=r&&e.attributes&&e.attributes[r.id];if(o&&o.value){const n=o.value,i=this.encodePickingColor(t);for(let t=0;t<e.length;t++){const e=r.getVertexOffset(t);n[e]===i[0]&&n[e+1]===i[1]&&n[e+2]===i[2]&&this._disablePickingIndex(t)}}else this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,i=e||n;if(!i)return;const r=i.getVertexOffset(t),o=i.getVertexOffset(t+1);i.buffer.subData({data:new Uint8Array(o-r),offset:r})}restorePickingColors(){const{pickingColors:t,instancePickingColors:e}=this.getAttributeManager().attributes,n=t||e;n&&(this.internalState.usesPickingColorCache&&n.value.buffer!==mh.buffer&&(n.value=mh.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){$a(!this.internalState),$a(Number.isFinite(this.props.coordinateSystem)),q("layer.initialize",this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new hh({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(W.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.uniformTransitions=new Nd(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const e of this.props.extensions)e.initializeState.call(this,this.context,e);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){q("layer.matched",this,this===t);const{state:e,internalState:n}=t;this!==t&&(this.internalState=n,this.state=e,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if(q("layer.update",this,t),!t)return;const e=this.props,n=this.context,i=this.internalState,r=n.viewport,o=this._updateUniformTransition();i.propsInTransition=o,n.viewport=i.viewport||r,this.props=o;try{const t=this._getUpdateParams(),e=this.getModels();if(n.gl)this.updateState(t);else try{this.updateState(t)}catch(s){}for(const n of this.props.extensions)n.updateState.call(this,t,n);const i=this.getModels()[0]!==e[0];this._postUpdate(t,i)}finally{n.viewport=r,this.props=e,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){q("layer.finalize",this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,this.context,t)}_drawLayer(t){let{moduleParameters:e=null,uniforms:n={},parameters:i={}}=t;this._updateAttributeTransition();const r=this.props,o=this.context;this.props=this.internalState.propsInTransition||r;const s=this.props.opacity;n.opacity=Math.pow(s,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:t}=this.props,r=t&&t(n)||[0,0];vo(o.gl,{polygonOffset:r}),bo(o.gl,i,(()=>{const t={moduleParameters:e,uniforms:n,parameters:i,context:o};for(const e of this.props.extensions)e.draw.call(this,t,e);this.draw(t)}))}finally{this.props=r}}getChangeFlags(){var t;return null===(t=this.internalState)||void 0===t?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:e}=this.internalState;for(const i in t)if(t[i]){let n=!1;if("dataChanged"===i){const r=t[i],o=e[i];r&&Array.isArray(o)&&(e.dataChanged=Array.isArray(r)?o.concat(r):r,n=!0)}e[i]||(e[i]=t[i],n=!0),n&&q("layer.changeFlag",this,i,t)}const n=Boolean(e.dataChanged||e.updateTriggersChanged||e.propsChanged||e.extensionsChanged);e.propsOrDataChanged=n,e.somethingChanged=n||e.viewportChanged||e.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,e){const n=zd(t,e);if(n.updateTriggersChanged)for(const r in n.updateTriggersChanged)n.updateTriggersChanged[r]&&this.invalidateAttribute(r);if(n.transitionsChanged)for(const r in n.transitionsChanged){var i;this.internalState.uniformTransitions.add(r,e[r],t[r],null===(i=t.transitions)||void 0===i?void 0:i[r])}return this.setChangeFlags(n)}validateProps(){!function(t){const e=t[y];for(const n in e){const i=e[n],{validate:r}=i;if(r&&!r(t[n],i))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const e={pickingSelectedColor:t.picked?t.color:null},{highlightColor:n}=this.props;t.picked&&"function"===typeof n&&(e.pickingHighlightColor=n(t)),this.setModuleParameters(e),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new Od(t.gl,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,e){const{props:n,oldProps:i}=t;this.setNeedsRedraw(),this._updateAttributes();const{model:r}=this.state;null===r||void 0===r||r.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:s,highlightColor:a}=n;if(e||i.autoHighlight!==o||i.highlightedObjectIndex!==s||i.highlightColor!==a){const t={};o||(t.pickingSelectedColor=null),Array.isArray(a)&&(t.pickingHighlightColor=a),(e||s!==i.highlightedObjectIndex)&&(t.pickingSelectedColor=Number.isFinite(s)&&s>=0?this.encodePickingColor(s):null),this.setModuleParameters(t)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let e=!1;e=e||this.internalState.needsRedraw&&this.id;const n=this.getAttributeManager(),i=!!n&&n.getNeedsRedraw(t);if(e=e||i,e)for(const r of this.props.extensions)r.onNeedsRedraw.call(this,r);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags,e}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}s(vh,"defaultProps",yh),s(vh,"layerName","Layer");const bh={position:"absolute",zIndex:-1};function _h(e,n){if("function"===typeof e)return e(n);if(Array.isArray(e))return e.map((t=>_h(t,n)));if(wh(e)){if(function(t){var e;return null===(e=t.props)||void 0===e?void 0:e.mapStyle}(e))return n.style=bh,(0,t.cloneElement)(e,n);if(function(t){const e=t.type;return e&&e.deckGLViewProps}(e))return(0,t.cloneElement)(e,n)}return e}function wh(t){return t&&"object"===typeof t&&"type"in t||!1}function xh(e){if("function"===typeof e)return(0,t.createElement)(Qa,{},e);if(Array.isArray(e))return e.map(xh);if(wh(e)){if(e.type===t.Fragment)return xh(e.props.children);if(Cu(e.type,Qa))return e}return e}const Sh={mixBlendMode:null};function Eh(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}const Th=(0,t.forwardRef)(((e,n)=>{const[i,r]=(0,t.useState)(0),o=(0,t.useRef)({control:null,version:i,forceUpdate:()=>r((t=>t+1))}).current,s=(0,t.useRef)(null),a=(0,t.useRef)(null),l=(0,t.useMemo)((()=>function(e){let{children:n,layers:i=[],views:r=null}=e;const o=[],s=[],a={};return t.Children.forEach(xh(n),(t=>{if(wh(t)){const e=t.type;if(Cu(e,vh)){const n=function(t,e){const n={},i=t.defaultProps||{};for(const r in e)i[r]!==e[r]&&(n[r]=e[r]);return new t(n)}(e,t.props);s.push(n)}else o.push(t);if(Cu(e,Qa)&&e!==Qa&&t.props.id){const n=new e(t.props);a[n.id]=n}}else t&&o.push(t)})),Object.keys(a).length>0&&(Array.isArray(r)?r.forEach((t=>{a[t.id]=t})):r&&(a[r.id]=r),r=Object.values(a)),i=s.length>0?[...s,...i]:i,{layers:i,children:o,views:r}}(e)),[e.layers,e.views,e.children]);let c=!0;const u=t=>{var n;return c&&e.viewState?(o.viewStateUpdateRequested=t,null):(o.viewStateUpdateRequested=null,null===(n=e.onViewStateChange)||void 0===n?void 0:n.call(e,t))},d=t=>{var n;c?o.interactionStateUpdateRequested=t:(o.interactionStateUpdateRequested=null,null===(n=e.onInteractionStateChange)||void 0===n||n.call(e,t))},h=(0,t.useMemo)((()=>{const t={...e,style:null,width:"100%",height:"100%",parent:s.current,canvas:a.current,layers:l.layers,views:l.views,onViewStateChange:u,onInteractionStateChange:d};return delete t._customRender,o.deck&&o.deck.setProps(t),t}),[e]);(0,t.useEffect)((()=>{const t=e.Deck||Pu;return o.deck=function(t,e,n){const i=new e({...n,_customRender:e=>{t.redrawReason=e;const n=i.getViewports();t.lastRenderedViewports!==n?t.forceUpdate():Eh(t)}});return i}(o,t,{...h,parent:s.current,canvas:a.current}),()=>{var t;return null===(t=o.deck)||void 0===t?void 0:t.finalize()}}),[]),Au((()=>{Eh(o);const{viewStateUpdateRequested:t,interactionStateUpdateRequested:e}=o;t&&u(t),e&&d(e)})),(0,t.useImperativeHandle)(n,(()=>function(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}(o)),[]);const f=o.deck&&o.deck.isInitialized?o.deck.getViewports():void 0,{ContextProvider:p,width:g,height:m,id:y,style:v}=e,{containerStyle:b,canvasStyle:_}=(0,t.useMemo)((()=>function(t){let{width:e,height:n,style:i}=t;const r={position:"absolute",zIndex:0,left:0,top:0,width:e,height:n},o={left:0,top:0};if(i)for(const s in i)s in Sh?o[s]=i[s]:r[s]=i[s];return{containerStyle:r,canvasStyle:o}}({width:g,height:m,style:v})),[g,m,v]);if(!o.viewStateUpdateRequested&&o.lastRenderedViewports===f||o.version!==i){o.lastRenderedViewports=f,o.version=i;const e=function(e){let{children:n,deck:i,ContextProvider:r}=e;const{viewManager:o}=i||{};if(!o||!o.views.length)return[];const s={},a=o.views[0].id;for(const t of n){let e=a,n=t;wh(t)&&Cu(t.type,Qa)&&(e=t.props.id||a,n=t.props.children);const i=o.getViewport(e),r=o.getViewState(e);if(i){r.padding=i.padding;const{x:t,y:o,width:a,height:l}=i;n=_h(n,{x:t,y:o,width:a,height:l,viewport:i,viewState:r}),s[e]||(s[e]={viewport:i,children:[]}),s[e].children.push(n)}}return Object.keys(s).map((e=>{const{viewport:n,children:o}=s[e],{x:a,y:l,width:c,height:u}=n,d={position:"absolute",left:a,top:l,width:c,height:u},h="view-".concat(e),f=(0,t.createElement)("div",{key:h,id:h,style:d},...o);if(r){const o={viewport:n,container:i.canvas.offsetParent,eventManager:i.eventManager,onViewStateChange:t=>{t.viewId=e,i._onViewStateChange(t)}};return(0,t.createElement)(r,{key:h,value:o},f)}return f}))}({children:l.children,deck:o.deck,ContextProvider:p}),n=(0,t.createElement)("canvas",{key:"canvas",id:y||"deckgl-overlay",ref:a,style:_});o.control=(0,t.createElement)("div",{id:"".concat(y||"deckgl","-wrapper"),ref:s,style:b},[n,e])}return c=!1,o.control}));Th.defaultProps=Pu.defaultProps;const Ph=Th,Ah={name:"project32",dependencies:[Ua],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},Ch={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1};const Ih={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ch;const e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,(t=>t/255));Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return void 0!==t.pickingActive&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}},Mh={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},...Ih},kh={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Oh{static get DRAW_MODE(){return kh}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e=Bo("geometry"),drawMode:n=kh.TRIANGLES,attributes:i={},indices:r=null,vertexCount:o=null}=t;this.id=e,this.drawMode=0|n,this.attributes={},this.userData={},this._setAttributes(i,r),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,e){e&&(this.indices=ArrayBuffer.isView(e)?{value:e,size:1}:e);for(const n in t){let e=t[n];e=ArrayBuffer.isView(e)?{value:e}:e,Oo(ArrayBuffer.isView(e.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),"POSITION"!==n&&"positions"!==n||e.size||(e.size=3),"indices"===n?(Oo(!this.indices),this.indices=e):this.attributes[n]=e}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,e){if(e)return e.value.length;let n=1/0;for(const i in t){const e=t[i],{value:r,size:o,constant:s}=e;!s&&r&&o>=1&&(n=Math.min(n,r.length/o))}return Oo(Number.isFinite(n)),n}}const Lh=new Uint16Array([0,2,1,0,3,2]),Rh=new Float32Array([0,1,0,0,1,0,1,1]);function Fh(t,e){if(!e)return function(t){const e=new Float64Array(12);for(let n=0;n<t.length;n++)e[3*n+0]=t[n][0],e[3*n+1]=t[n][1],e[3*n+2]=t[n][2]||0;return{vertexCount:6,positions:e,indices:Lh,texCoords:Rh}}(t);const n=Math.max(Math.abs(t[0][0]-t[3][0]),Math.abs(t[1][0]-t[2][0])),i=Math.max(Math.abs(t[1][1]-t[0][1]),Math.abs(t[2][1]-t[3][1])),r=Math.ceil(n/e)+1,o=Math.ceil(i/e)+1,s=(r-1)*(o-1)*6,a=new Uint32Array(s),l=new Float32Array(r*o*2),c=new Float64Array(r*o*3);let u=0,d=0;for(let h=0;h<r;h++){const e=h/(r-1);for(let n=0;n<o;n++){const i=n/(o-1),r=Bh(t,e,i);c[3*u+0]=r[0],c[3*u+1]=r[1],c[3*u+2]=r[2]||0,l[2*u+0]=e,l[2*u+1]=1-i,h>0&&n>0&&(a[d++]=u-o,a[d++]=u-o-1,a[d++]=u-1,a[d++]=u-o,a[d++]=u-1,a[d++]=u),u++}}return{vertexCount:s,positions:c,indices:a,texCoords:l}}function Bh(t,e,n){return tn(tn(t[0],t[1],n),tn(t[3],t[2],n),e)}const Nh="\n#define SHADER_NAME bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D bitmapTexture;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float desaturate;\nuniform vec4 transparentColor;\nuniform vec3 tintColor;\nuniform float opacity;\n\nuniform float coordinateConversion;\nuniform vec4 bounds;\n\n/* projection utils */\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / PI / 2.0;\n\n// from degrees to Web Mercator\nvec2 lnglat_to_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\n// from Web Mercator to degrees\nvec2 mercator_to_lnglat(vec2 xy) {\n  xy /= WORLD_SCALE;\n  return degrees(vec2(\n    xy.x - PI,\n    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5\n  ));\n}\n/* End projection utils */\n\n// apply desaturation\nvec3 color_desaturate(vec3 color) {\n  float luminance = (color.r + color.g + color.b) * 0.333333333;\n  return mix(color, vec3(luminance), desaturate);\n}\n\n// apply tint\nvec3 color_tint(vec3 color) {\n  return color * tintColor;\n}\n\n// blend with background color\nvec4 apply_opacity(vec3 color, float alpha) {\n  if (transparentColor.a == 0.0) {\n    return vec4(color, alpha);\n  }\n  float blendedAlpha = alpha + transparentColor.a * (1.0 - alpha);\n  float highLightRatio = alpha / blendedAlpha;\n  vec3 blendedRGB = mix(transparentColor.rgb, color, highLightRatio);\n  return vec4(blendedRGB, blendedAlpha);\n}\n\nvec2 getUV(vec2 pos) {\n  return vec2(\n    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),\n    (pos.y - bounds[3]) / (bounds[1] - bounds[3])\n  );\n}\n\n".concat("\nvec3 packUVsIntoRGB(vec2 uv) {\n  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction\n  vec2 uv8bit = floor(uv * 256.);\n\n  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits\n  // Scale and clamp to 0-1 range\n  vec2 uvFraction = fract(uv * 256.);\n  vec2 uvFraction4bit = floor(uvFraction * 16.);\n\n  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates\n  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;\n\n  return vec3(uv8bit, fractions) / 255.;\n}\n","\n\nvoid main(void) {\n  vec2 uv = vTexCoord;\n  if (coordinateConversion < -0.5) {\n    vec2 lnglat = mercator_to_lnglat(vTexPos);\n    uv = getUV(lnglat);\n  } else if (coordinateConversion > 0.5) {\n    vec2 commonPos = lnglat_to_mercator(vTexPos);\n    uv = getUV(commonPos);\n  }\n  vec4 bitmapColor = texture2D(bitmapTexture, uv);\n\n  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);\n\n  geometry.uv = uv;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n\n  if (picking_uActive && !picking_uAttribute) {\n    // Since instance information is not used, we can use picking color for pixel index\n    gl_FragColor.rgb = packUVsIntoRGB(uv);\n  }\n}\n"),zh={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:ki.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]},textureParameters:{type:"object",ignore:!0}};class Dh extends vh{constructor(){super(...arguments),s(this,"state",void 0)}getShaders(){return super.getShaders({vs:"\n#define SHADER_NAME bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float coordinateConversion;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  if (coordinateConversion < -0.5) {\n    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;\n  } else if (coordinateConversion > 0.5) {\n    vTexPos = geometry.worldPosition.xy;\n  }\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n",fs:Nh,modules:[Ah,Mh]})}initializeState(){const t=this.getAttributeManager();t.remove(["instancePickingColors"]);const e=!0;t.add({indices:{size:1,isIndexed:!0,update:t=>t.value=this.state.mesh.indices,noAlloc:e},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:t=>t.value=this.state.mesh.positions,noAlloc:e},texCoords:{size:2,update:t=>t.value=this.state.mesh.texCoords,noAlloc:e}})}updateState(t){let{props:e,oldProps:n,changeFlags:i}=t;const r=this.getAttributeManager();if(i.extensionsChanged){var o;const{gl:t}=this.context;null===(o=this.state.model)||void 0===o||o.delete(),this.state.model=this._getModel(t),r.invalidateAll()}if(e.bounds!==n.bounds){const t=this.state.mesh,e=this._createMesh();this.state.model.setVertexCount(e.vertexCount);for(const n in e)t&&t[n]!==e[n]&&r.invalidate(n);this.setState({mesh:e,...this._getCoordinateUniforms()})}else e._imageCoordinateSystem!==n._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(t){const{image:e}=this.props,n=t.info;if(!n.color||!e)return n.bitmap=null,n;const{width:i,height:r}=e;n.index=0;const o=function(t){const[e,n,i]=t;return[(e+(15&i)/16)/256,(n+(240&i)/256)/256]}(n.color),s=[Math.floor(o[0]*i),Math.floor(o[1]*r)];return n.bitmap={size:{width:i,height:r},uv:o,pixel:s},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(t){super._updateAutoHighlight({...t,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:t}=this.props;let e=t;return jh(t)&&(e=[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]]]),Fh(e,this.context.viewport.resolution)}_getModel(t){return t?new Pd(t,{...this.getShaders(),id:this.props.id,geometry:new Oh({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(t){const{uniforms:e,moduleParameters:n}=t,{model:i,coordinateConversion:r,bounds:o,disablePicking:s}=this.state,{image:a,desaturate:l,transparentColor:c,tintColor:u}=this.props;n.pickingActive&&s||a&&i&&i.setUniforms(e).setUniforms({bitmapTexture:a,desaturate:l,transparentColor:c.map((t=>t/255)),tintColor:u.slice(0,3).map((t=>t/255)),coordinateConversion:r,bounds:o}).draw()}_getCoordinateUniforms(){const{LNGLAT:t,CARTESIAN:e,DEFAULT:n}=ki;let{_imageCoordinateSystem:i}=this.props;if(i!==n){const{bounds:n}=this.props;if(!jh(n))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const r=this.context.viewport.resolution?t:e;if(i=i===t?t:e,i===t&&r===e)return{coordinateConversion:-1,bounds:n};if(i===e&&r===t){const t=yi([n[0],n[1]]),e=yi([n[2],n[3]]);return{coordinateConversion:1,bounds:[t[0],t[1],e[0],e[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}function jh(t){return Number.isFinite(t[0])}s(Dh,"layerName","BitmapLayer"),s(Dh,"defaultProps",zh);class Uh extends vh{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every((t=>t.isLoaded))}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo(t){let{info:e}=t;const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id?(e.object=n.__source.object,e.index=n.__source.index,e):e}filterSubLayer(t){return!0}shouldRenderSubLayer(t,e){return e&&e.length}getSubLayerClass(t,e){const{_subLayerProps:n}=this.props;return n&&n[t]&&n[t].type||e}getSubLayerRow(t,e,n){return t.__source={parent:this,object:e,index:n},t}getSubLayerAccessor(t){if("function"===typeof t){const e={index:-1,data:this.props.data,target:[]};return(n,i)=>n&&n.__source?(e.index=n.__source.index,t(n.__source.object,e)):t(n,i)}return t}getSubLayerProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e;const{opacity:n,pickable:i,visible:r,parameters:o,getPolygonOffset:s,highlightedObjectIndex:a,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:d,wrapLongitude:h,positionFormat:f,modelMatrix:p,extensions:g,fetch:m,operation:v,_subLayerProps:b}=this.props,_={id:"",updateTriggers:{},opacity:n,pickable:i,visible:r,parameters:o,getPolygonOffset:s,highlightedObjectIndex:a,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:d,wrapLongitude:h,positionFormat:f,modelMatrix:p,extensions:g,fetch:m,operation:v},w=b&&t.id&&b[t.id],x=w&&w.updateTriggers,S=t.id||"sublayer";if(w){const e=this.props[y],n=t.type?t.type._propTypes:{};for(const t in w){const i=n[t]||e[t];i&&"accessor"===i.type&&(w[t]=this.getSubLayerAccessor(w[t]))}}Object.assign(_,t,w),_.id="".concat(this.props.id,"-").concat(S),_.updateTriggers={all:null===(e=this.props.updateTriggers)||void 0===e?void 0:e.all,...t.updateTriggers,...x};for(const y of g){const t=y.getSubLayerProps.call(this,y);t&&Object.assign(_,t,{updateTriggers:Object.assign(_.updateTriggers,t.updateTriggers)})}return _}_updateAutoHighlight(t){for(const e of this.getSubLayers())e.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,e){let n=this.internalState.subLayers;const i=!n||this.needsUpdate();if(i){n=Y(this.renderLayers(),Boolean),this.internalState.subLayers=n}q("compositeLayer.renderLayers",this,i,n);for(const r of n)r.parent=this}}function Vh(t){let{data:e,getIndex:n,dataRange:i,replace:r}=t;const{startRow:o=0,endRow:s=1/0}=i,a=e.length;let l=a,c=a;for(let h=0;h<a;h++){const t=n(e[h]);if(l>h&&t>=o&&(l=h),t>=s){c=h;break}}let u=l;const d=c-l!==r.length?e.slice(c):void 0;for(let h=0;h<r.length;h++)e[u++]=r[h];if(d){for(let t=0;t<d.length;t++)e[u++]=d[t];e.length=u}return{startRow:l,endRow:l+r.length}}s(Uh,"layerName","CompositeLayer");const Wh=()=>{},Hh={10241:9987,10240:9729,10242:33071,10243:33071};function Gh(t,e,n,i){const r=Math.min(n/e.width,i/e.height),o=Math.floor(e.width*r),s=Math.floor(e.height*r);return 1===r?{data:e,width:o,height:s}:(t.canvas.height=s,t.canvas.width=o,t.clearRect(0,0,o,s),t.drawImage(e,0,0,e.width,e.height,0,0,o,s),{data:t.canvas,width:o,height:s})}function qh(t){return t&&(t.id||t.url)}function Yh(t,e,n,i){const r=t.width,o=t.height,s=new as(t.gl,{width:e,height:n,parameters:i});return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:o=0,targetInternalFormat:s=6408}=n;let{targetX:a,targetY:l,targetZ:c,width:u,height:d}=n;const{framebuffer:h,deleteFramebuffer:f}=_s(t);Oo(h);const{gl:p,handle:g}=h,m="undefined"!==typeof a||"undefined"!==typeof l||"undefined"!==typeof c;a=a||0,l=l||0,c=c||0;const y=p.bindFramebuffer(36160,g);Oo(e);let v=null;if(e instanceof os&&(v=e,u=Number.isFinite(u)?u:v.width,d=Number.isFinite(d)?d:v.height,v.bind(0),e=v.target),m)switch(e){case 3553:case 34067:p.copyTexSubImage2D(e,o,a,l,i,r,u,d);break;case 35866:case 32879:Dr(p).copyTexSubImage3D(e,o,a,l,c,i,r,u,d)}else p.copyTexImage2D(e,o,s,i,r,u,d,0);v&&v.unbind(),p.bindFramebuffer(36160,y||null),f&&h.delete()}(t,s,{targetY:0,width:r,height:o}),t.delete(),s}function Xh(t,e,n){for(let i=0;i<e.length;i++){const{icon:r,xOffset:o}=e[i];t[qh(r)]={...r,x:o,y:n}}}class Kh{constructor(t,e){let{onUpdate:n=Wh,onError:i=Wh}=e;s(this,"gl",void 0),s(this,"onUpdate",void 0),s(this,"onError",void 0),s(this,"_loadOptions",null),s(this,"_texture",null),s(this,"_externalTexture",null),s(this,"_mapping",{}),s(this,"_textureParameters",null),s(this,"_pendingCount",0),s(this,"_autoPacking",!1),s(this,"_xOffset",0),s(this,"_yOffset",0),s(this,"_rowHeight",0),s(this,"_buffer",4),s(this,"_canvasWidth",1024),s(this,"_canvasHeight",0),s(this,"_canvas",null),this.gl=t,this.onUpdate=n,this.onError=i}finalize(){var t;null===(t=this._texture)||void 0===t||t.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){const e=this._autoPacking?qh(t):t;return this._mapping[e]||{}}setProps(t){let{loadOptions:e,autoPacking:n,iconAtlas:i,iconMapping:r,textureParameters:o}=t;var s;(e&&(this._loadOptions=e),void 0!==n&&(this._autoPacking=n),r&&(this._mapping=r),i)&&(null===(s=this._texture)||void 0===s||s.delete(),this._texture=null,this._externalTexture=i);o&&(this._textureParameters=o)}get isLoaded(){return 0===this._pendingCount}packIcons(t,e){if(!this._autoPacking||"undefined"===typeof document)return;const n=Object.values(function(t,e,n){if(!t||!e)return null;n=n||{};const i={},{iterable:r,objectInfo:o}=Fu(t);for(const s of r){o.index++;const t=e(s,o),r=qh(t);if(!t)throw new Error("Icon is missing.");if(!t.url)throw new Error("Icon url is missing.");i[r]||n[r]&&t.url===n[r].url||(i[r]={...t,source:s,sourceIndex:o.index})}return i}(t,e,this._mapping)||{});if(n.length>0){const{mapping:t,xOffset:e,yOffset:i,rowHeight:r,canvasHeight:o}=function(t){let{icons:e,buffer:n,mapping:i={},xOffset:r=0,yOffset:o=0,rowHeight:s=0,canvasWidth:a}=t,l=[];for(let u=0;u<e.length;u++){const t=e[u];if(!i[qh(t)]){const{height:e,width:c}=t;r+c+n>a&&(Xh(i,l,o),r=0,o=s+o+n,s=0,l=[]),l.push({icon:t,xOffset:r}),r=r+c+n,s=Math.max(s,e)}}return l.length>0&&Xh(i,l,o),{mapping:i,rowHeight:s,xOffset:r,yOffset:o,canvasWidth:a,canvasHeight:(c=s+o+n,Math.pow(2,Math.ceil(Math.log2(c))))};var c}({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=r,this._mapping=t,this._xOffset=e,this._yOffset=i,this._canvasHeight=o,this._texture||(this._texture=new as(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||Hh})),this._texture.height!==this._canvasHeight&&(this._texture=Yh(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||Hh)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(t){const e=this._canvas.getContext("2d",{willReadFrequently:!0});for(const n of t)this._pendingCount++,qe(n.url,this._loadOptions).then((t=>{const i=qh(n),r=this._mapping[i],{x:o,y:s,width:a,height:l}=r,{data:c,width:u,height:d}=Gh(e,t,a,l);this._texture.setSubImageData({data:c,x:o+(a-u)/2,y:s+(l-d)/2,width:u,height:d}),r.width=u,r.height=d,this._texture.generateMipmap(),this.onUpdate()})).catch((t=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:t})})).finally((()=>{this._pendingCount--}))}}const Zh=[0,0,0,255],$h={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:Zh},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class Qh extends vh{constructor(){super(...arguments),s(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Ah,Mh]})}initializeState(){this.state={iconManager:new Kh(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})};this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:Zh},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);const{props:e,oldProps:n,changeFlags:i}=t,r=this.getAttributeManager(),{iconAtlas:o,iconMapping:s,data:a,getIcon:l,textureParameters:c}=e,{iconManager:u}=this.state,d=o||this.internalState.isAsyncPropLoading("iconAtlas");if(u.setProps({loadOptions:e.loadOptions,autoPacking:!d,iconAtlas:o,iconMapping:d?s:null,textureParameters:c}),d?n.iconMapping!==e.iconMapping&&r.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&u.packIcons(a,l),i.extensionsChanged){var h;const{gl:t}=this.context;null===(h=this.state.model)||void 0===h||h.delete(),this.state.model=this._getModel(t),r.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw(t){let{uniforms:e}=t;const{sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,sizeUnits:o,billboard:s,alphaCutoff:a}=this.props,{iconManager:l}=this.state,c=l.getTexture();c&&this.state.model.setUniforms(e).setUniforms({iconsTexture:c,iconsTextureDim:[c.width,c.height],sizeUnits:Li[o],sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,billboard:s,alphaCutoff:a}).draw()}_getModel(t){return new Pd(t,{...this.getShaders(),id:this.props.id,geometry:new Oh({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){var e;const n=null===(e=this.getCurrentLayer())||void 0===e?void 0:e.props.onIconError;n?n(t):W.error(t.error.message)()}getInstanceOffset(t){const{width:e,height:n,anchorX:i=e/2,anchorY:r=n/2}=this.state.iconManager.getIconMapping(t);return[e/2-i,n/2-r]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const{x:e,y:n,width:i,height:r}=this.state.iconManager.getIconMapping(t);return[e,n,i,r]}}s(Qh,"defaultProps",$h),s(Qh,"layerName","IconLayer");const Jh=[0,0,0,255],tf={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:Jh},getLineColor:{type:"accessor",value:Jh},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class ef extends vh{getShaders(){return super.getShaders({vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\nuniform bool antialiasing;\nuniform bool billboard;\nuniform int radiusUnits;\nuniform int lineWidthUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;\n  unitPosition = edgePadding * positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  if (billboard) {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = edgePadding * positions * outerRadiusPixels;\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\nuniform bool antialiasing;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = antialiasing ? \n    smoothedge(distToCenter, outerRadiusPixels) : \n    step(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = antialiasing ? \n      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :\n      step(innerUnitRadius * outerRadiusPixels, distToCenter);\n\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (!filled) {\n    discard;\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Ah,Mh]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var e;const{gl:t}=this.context;null===(e=this.state.model)||void 0===e||e.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw(t){let{uniforms:e}=t;const{radiusUnits:n,radiusScale:i,radiusMinPixels:r,radiusMaxPixels:o,stroked:s,filled:a,billboard:l,antialiasing:c,lineWidthUnits:u,lineWidthScale:d,lineWidthMinPixels:h,lineWidthMaxPixels:f}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:s?1:0,filled:a,billboard:l,antialiasing:c,radiusUnits:Li[n],radiusScale:i,radiusMinPixels:r,radiusMaxPixels:o,lineWidthUnits:Li[u],lineWidthScale:d,lineWidthMinPixels:h,lineWidthMaxPixels:f}).draw()}_getModel(t){return new Pd(t,{...this.getShaders(),id:this.props.id,geometry:new Oh({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}}}),isInstanced:!0})}}s(ef,"defaultProps",tf),s(ef,"layerName","ScatterplotLayer");const nf=.75,rf=[];class of extends Qh{constructor(){super(...arguments),s(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float sdfBuffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState();this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(t,e)=>{let{index:n,target:i}=e;return this.encodePickingColor(n,i)}}})}updateState(t){super.updateState(t);const{props:e,oldProps:n}=t;let{outlineColor:i}=e;i!==n.outlineColor&&(i=i.map((t=>t/255)),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!e.sdf&&e.outlineWidth&&W.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){const{sdf:e,smoothing:n,outlineWidth:i}=this.props,{outlineColor:r}=this.state,o=i?Math.max(n,nf*(1-i)):-1;if(t.uniforms={...t.uniforms,sdfBuffer:nf,outlineBuffer:o,gamma:n,sdf:Boolean(e),outlineColor:r},super.draw(t),e&&i){const{iconManager:t}=this.state;t.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:nf}})}}getInstanceOffset(t){return t?Array.from(t).flatMap((t=>super.getInstanceOffset(t))):rf}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap((t=>super.getInstanceIconFrame(t))):rf}}s(of,"defaultProps",{getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),s(of,"layerName","MultiIconLayer");const sf=1e20;class af{constructor(){let{fontSize:t=24,buffer:e=3,radius:n=8,cutoff:i=.25,fontFamily:r="sans-serif",fontWeight:o="normal",fontStyle:s="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=e,this.cutoff=i,this.radius=n;const a=this.size=t+4*e,l=this._createCanvas(a),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font="".concat(s," ").concat(o," ").concat(t,"px ").concat(r),c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:i,actualBoundingBoxLeft:r,actualBoundingBoxRight:o}=this.ctx.measureText(t),s=Math.ceil(n),a=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-r))),l=Math.min(this.size-this.buffer,s+Math.ceil(i)),c=a+2*this.buffer,u=l+2*this.buffer,d=Math.max(c*u,0),h=new Uint8ClampedArray(d),f={data:h,width:c,height:u,glyphWidth:a,glyphHeight:l,glyphTop:s,glyphLeft:0,glyphAdvance:e};if(0===a||0===l)return f;const{ctx:p,buffer:g,gridInner:m,gridOuter:y}=this;p.clearRect(g,g,a,l),p.fillText(t,g,g+s);const v=p.getImageData(g,g,a,l);y.fill(sf,0,d),m.fill(0,0,d);for(let b=0;b<l;b++)for(let t=0;t<a;t++){const e=v.data[4*(b*a+t)+3]/255;if(0===e)continue;const n=(b+g)*c+t+g;if(1===e)y[n]=0,m[n]=sf;else{const t=.5-e;y[n]=t>0?t*t:0,m[n]=t<0?t*t:0}}lf(y,0,0,c,u,c,this.f,this.v,this.z),lf(m,g,g,a,l,c,this.f,this.v,this.z);for(let b=0;b<d;b++){const t=Math.sqrt(y[b])-Math.sqrt(m[b]);h[b]=Math.round(255-255*(t/this.radius+this.cutoff))}return f}}function lf(t,e,n,i,r,o,s,a,l){for(let c=e;c<e+i;c++)cf(t,n*o+c,o,r,s,a,l);for(let c=n;c<n+r;c++)cf(t,c*o+e,1,i,s,a,l)}function cf(t,e,n,i,r,o,s){o[0]=0,s[0]=-sf,s[1]=sf,r[0]=t[e];for(let a=1,l=0,c=0;a<i;a++){r[a]=t[e+a*n];const i=a*a;do{const t=o[l];c=(r[a]-r[t]+i-t*t)/(a-t)/2}while(c<=s[l]&&--l>-1);l++,o[l]=a,s[l]=c,s[l+1]=sf}for(let a=0,l=0;a<i;a++){for(;s[l+1]<a;)l++;const i=o[l],c=a-i;t[e+a*n]=r[i]+c*c}}const uf=32,df=[];function hf(t,e,n,i){let r=0;for(let s=e;s<n;s++){var o;r+=(null===(o=i[t[s]])||void 0===o?void 0:o.layoutWidth)||0}return r}function ff(t,e,n,i,r,o){let s=e,a=0;for(let l=e;l<n;l++){const e=hf(t,l,l+1,r);a+e>i&&(s<l&&o.push(l),s=l,a=0),a+=e}return a}function pf(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;void 0===o&&(o=t.length);const s=[];return"break-all"===e?ff(t,r,o,n,i,s):function(t,e,n,i,r,o){let s=e,a=e,l=e,c=0;for(let u=e;u<n;u++)if(" "===t[u]?l=u+1:" "!==t[u+1]&&u+1!==n||(l=u+1),l>a){let e=hf(t,a,l,r);c+e>i&&(s<a&&(o.push(a),s=a,c=0),e>i&&(e=ff(t,a,l,i,r,o),s=o[o.length-1])),a=l,c+=e}}(t,r,o,n,i,s),s}function gf(t,e,n,i,r,o){let s=0,a=0;for(let l=e;l<n;l++){const e=t[l],n=i[e];n?(a||(a=n.layoutHeight),r[l]=s+n.layoutWidth/2,s+=n.layoutWidth):(W.warn("Missing character: ".concat(e," (").concat(e.codePointAt(0),")"))(),r[l]=s,s+=uf)}o[0]=s,o[1]=a}class mf{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;s(this,"limit",void 0),s(this,"_cache",{}),s(this,"_order",[]),this.limit=t}get(t){const e=this._cache[t];return e&&(this._deleteOrder(t),this._appendOrder(t)),e}set(t,e){this._cache[t]?(this.delete(t),this._cache[t]=e,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=e,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){const e=this._order.indexOf(t);e>=0&&this._order.splice(e,1)}_appendOrder(t){this._order.push(t)}}const yf={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let vf=new mf(3);function bf(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function _f(t,e,n,i){t.font="".concat(i," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}class wf{constructor(){s(this,"props",{...yf}),s(this,"_key",void 0),s(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:t,buffer:e}=this.props;return(1.2*t+2*e)/t}setProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.props,t),this._key=this._getKey();const e=function(t,e){let n;n="string"===typeof e?new Set(Array.from(e)):new Set(e);const i=vf.get(t);if(!i)return n;for(const r in i.mapping)n.has(r)&&n.delete(r);return n}(this._key,this.props.characterSet),n=vf.get(this._key);if(n&&0===e.size)return void(this._atlas!==n&&(this._atlas=n));const i=this._generateFontAtlas(e,n);this._atlas=i,vf.set(this._key,i)}_generateFontAtlas(t,e){const{fontFamily:n,fontWeight:i,fontSize:r,buffer:o,sdf:s,radius:a,cutoff:l}=this.props;let c=e&&e.data;c||(c=document.createElement("canvas"),c.width=1024);const u=c.getContext("2d",{willReadFrequently:!0});_f(u,n,r,i);const{mapping:d,canvasHeight:h,xOffset:f,yOffset:p}=function(t){let{characterSet:e,getFontWidth:n,fontHeight:i,buffer:r,maxCanvasWidth:o,mapping:s={},xOffset:a=0,yOffset:l=0}=t,c=0,u=a;const d=i+2*r;for(const f of e)if(!s[f]){const t=n(f);u+t+2*r>o&&(u=0,c++),s[f]={x:u+r,y:l+c*d+r,width:t,height:d,layoutWidth:t,layoutHeight:i},u+=t+2*r}return{mapping:s,xOffset:u,yOffset:l+c*d,canvasHeight:(h=l+(c+1)*d,Math.pow(2,Math.ceil(Math.log2(h))))};var h}({getFontWidth:t=>u.measureText(t).width,fontHeight:1.2*r,buffer:o,characterSet:t,maxCanvasWidth:1024,...e&&{mapping:e.mapping,xOffset:e.xOffset,yOffset:e.yOffset}});if(c.height!==h){const t=u.getImageData(0,0,c.width,c.height);c.height=h,u.putImageData(t,0,0)}if(_f(u,n,r,i),s){const e=new af({fontSize:r,buffer:o,radius:a,cutoff:l,fontFamily:n,fontWeight:"".concat(i)});for(const n of t){const{data:t,width:i,height:o,glyphTop:s}=e.draw(n);d[n].width=i,d[n].layoutOffsetY=.9*r-s;const a=u.createImageData(i,o);bf(t,a),u.putImageData(a,d[n].x,d[n].y)}}else for(const g of t)u.fillText(g,d[g].x,d[g].y+o+.9*r);return{xOffset:f,yOffset:p,mapping:d,data:c,width:c.width,height:c.height}}_getKey(){const{fontFamily:t,fontWeight:e,fontSize:n,buffer:i,sdf:r,radius:o,cutoff:s}=this.props;return r?"".concat(t," ").concat(e," ").concat(n," ").concat(i," ").concat(o," ").concat(s):"".concat(t," ").concat(e," ").concat(n," ").concat(i)}}const xf={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class Sf extends vh{constructor(){super(...arguments),s(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Ah,Mh]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);const{changeFlags:e}=t;if(e.extensionsChanged){var n;const{gl:t}=this.context;null===(n=this.state.model)||void 0===n||n.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw(t){let{uniforms:e}=t;const{billboard:n,sizeScale:i,sizeUnits:r,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:Boolean(a),padding:l,sizeUnits:Li[r],sizeScale:i,sizeMinPixels:o,sizeMaxPixels:s}).draw()}_getModel(t){return new Pd(t,{...this.getShaders(),id:this.props.id,geometry:new Oh({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}s(Sf,"defaultProps",xf),s(Sf,"layerName","TextBackgroundLayer");const Ef={start:1,middle:0,end:-1},Tf={top:1,center:0,bottom:-1},Pf=[0,0,0,255],Af={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:Pf},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:yf.characterSet},fontFamily:yf.fontFamily,fontWeight:yf.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:Pf},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:Pf},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class Cf extends Uh{constructor(){super(...arguments),s(this,"state",void 0),s(this,"getBoundingRect",((t,e)=>{let{size:[n,i]}=this.transformParagraph(t,e);const{fontSize:r}=this.state.fontAtlasManager.props;n/=r,i/=r;const{getTextAnchor:o,getAlignmentBaseline:s}=this.props;return[(Ef["function"===typeof o?o(t,e):o]-1)*n/2,(Tf["function"===typeof s?s(t,e):s]-1)*i/2,n,i]})),s(this,"getIconOffsets",((t,e)=>{const{getTextAnchor:n,getAlignmentBaseline:i}=this.props,{x:r,y:o,rowWidth:s,size:[a,l]}=this.transformParagraph(t,e),c=Ef["function"===typeof n?n(t,e):n],u=Tf["function"===typeof i?i(t,e):i],d=r.length,h=new Array(2*d);let f=0;for(let p=0;p<d;p++){const t=(1-c)*(a-s[p])/2;h[f++]=(c-1)*a/2+t+r[p],h[f++]=(u-1)*l/2+o[p]}return h}))}initializeState(){this.state={styleVersion:0,fontAtlasManager:new wf},this.props.maxWidth>0&&W.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(t){const{props:e,oldProps:n,changeFlags:i}=t;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText();(this._updateFontAtlas()||e.lineHeight!==n.lineHeight||e.wordBreak!==n.wordBreak||e.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo(t){let{info:e}=t;return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:t,fontFamily:e,fontWeight:n}=this.props,{fontAtlasManager:i,characterSet:r}=this.state,o={...t,characterSet:r,fontFamily:e,fontWeight:n};if(!i.mapping)return i.setProps(o),!0;for(const s in o)if(o[s]!==i.props[s])return i.setProps(o),!0;return!1}_updateText(){var t;const{data:e,characterSet:n}=this.props,i=null===(t=e.attributes)||void 0===t?void 0:t.getText;let r,{getText:o}=this.props,s=e.startIndices;const a="auto"===n&&new Set;if(i&&s){const{texts:t,characterCount:n}=function(t){let{value:e,length:n,stride:i,offset:r,startIndices:o,characterSet:s}=t;const a=e.BYTES_PER_ELEMENT,l=i?i/a:1,c=r?r/a:0,u=o[n]||Math.ceil((e.length-c)/l),d=s&&new Set,h=new Array(n);let f=e;if(l>1||c>0){f=new(0,e.constructor)(u);for(let t=0;t<u;t++)f[t]=e[t*l+c]}for(let p=0;p<n;p++){const t=o[p],e=o[p+1]||u,n=f.subarray(t,e);h[p]=String.fromCodePoint.apply(null,n),d&&n.forEach(d.add,d)}if(d)for(const p of d)s.add(String.fromCodePoint(p));return{texts:h,characterCount:u}}({...ArrayBuffer.isView(i)?{value:i}:i,length:e.length,startIndices:s,characterSet:a});r=n,o=(e,n)=>{let{index:i}=n;return t[i]}}else{const{iterable:t,objectInfo:n}=Fu(e);s=[0],r=0;for(const e of t){n.index++;const t=Array.from(o(e,n)||"");a&&t.forEach(a.add,a),r+=t.length,s.push(r)}}this.setState({getText:o,startIndices:s,numInstances:r,characterSet:a||n})}transformParagraph(t,e){const{fontAtlasManager:n}=this.state,i=n.mapping,r=this.state.getText,{wordBreak:o,lineHeight:s,maxWidth:a}=this.props;return function(t,e,n,i,r){const o=Array.from(t),s=o.length,a=new Array(s),l=new Array(s),c=new Array(s),u=("break-word"===n||"break-all"===n)&&isFinite(i)&&i>0,d=[0,0],h=[0,0];let f=0,p=0,g=0;for(let y=0;y<=s;y++){const t=o[y];if("\n"!==t&&y!==s||(g=y),g>p){const t=u?pf(o,n,i,r,p,g):df;for(let n=0;n<=t.length;n++){const i=0===n?p:t[n-1],s=n<t.length?t[n]:g;gf(o,i,s,r,a,h);for(let t=i;t<s;t++){var m;const e=(null===(m=r[o[t]])||void 0===m?void 0:m.layoutOffsetY)||0;l[t]=f+h[1]/2+e,c[t]=h[0]}f+=h[1]*e,d[0]=Math.max(d[0],h[0])}p=g}"\n"===t&&(a[p]=0,l[p]=0,c[p]=0,p++)}return d[1]=f,{x:a,y:l,rowWidth:c,size:d}}(r(t,e)||"",s,o,a*n.props.fontSize,i)}renderLayers(){const{startIndices:t,numInstances:e,getText:n,fontAtlasManager:{scale:i,texture:r,mapping:o},styleVersion:s}=this.state,{data:a,_dataDiff:l,getPosition:c,getColor:u,getSize:d,getAngle:h,getPixelOffset:f,getBackgroundColor:p,getBorderColor:g,getBorderWidth:m,backgroundPadding:y,background:v,billboard:b,fontSettings:_,outlineWidth:w,outlineColor:x,sizeScale:S,sizeUnits:E,sizeMinPixels:T,sizeMaxPixels:P,transitions:A,updateTriggers:C}=this.props,I=this.getSubLayerClass("characters",of),M=this.getSubLayerClass("background",Sf);return[v&&new M({getFillColor:p,getLineColor:g,getLineWidth:m,padding:y,getPosition:c,getSize:d,getAngle:h,getPixelOffset:f,billboard:b,sizeScale:S,sizeUnits:E,sizeMinPixels:T,sizeMaxPixels:P,transitions:A&&{getPosition:A.getPosition,getAngle:A.getAngle,getSize:A.getSize,getFillColor:A.getBackgroundColor,getLineColor:A.getBorderColor,getLineWidth:A.getBorderWidth,getPixelOffset:A.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:C.getPosition,getAngle:C.getAngle,getSize:C.getSize,getFillColor:C.getBackgroundColor,getLineColor:C.getBorderColor,getLineWidth:C.getBorderWidth,getPixelOffset:C.getPixelOffset,getBoundingRect:{getText:C.getText,getTextAnchor:C.getTextAnchor,getAlignmentBaseline:C.getAlignmentBaseline,styleVersion:s}}}),{data:a.attributes&&a.attributes.background?{length:a.length,attributes:a.attributes.background}:a,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new I({sdf:_.sdf,smoothing:Number.isFinite(_.smoothing)?_.smoothing:yf.smoothing,outlineWidth:w/(_.radius||yf.radius),outlineColor:x,iconAtlas:r,iconMapping:o,getPosition:c,getColor:u,getSize:d,getAngle:h,getPixelOffset:f,billboard:b,sizeScale:S*i,sizeUnits:E,sizeMinPixels:T*i,sizeMaxPixels:P*i,transitions:A&&{getPosition:A.getPosition,getAngle:A.getAngle,getColor:A.getColor,getSize:A.getSize,getPixelOffset:A.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:C.getText,getPosition:C.getPosition,getAngle:C.getAngle,getColor:C.getColor,getSize:C.getSize,getPixelOffset:C.getPixelOffset,getIconOffsets:{getTextAnchor:C.getTextAnchor,getAlignmentBaseline:C.getAlignmentBaseline,styleVersion:s}}}),{data:a,_dataDiff:l,startIndices:t,numInstances:e,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(t){!function(t){W.assert(Number.isFinite(t)&&t>=3,"Invalid cache limit"),vf=new mf(t)}(t)}}s(Cf,"defaultProps",Af),s(Cf,"layerName","TextLayer");class If{constructor(t){s(this,"opts",void 0),s(this,"typedArrayManager",void 0),s(this,"indexStarts",[0]),s(this,"vertexStarts",[0]),s(this,"vertexCount",0),s(this,"instanceCount",0),s(this,"attributes",void 0),s(this,"_attributeDefs",void 0),s(this,"data",void 0),s(this,"getGeometry",void 0),s(this,"geometryBuffer",void 0),s(this,"buffers",void 0),s(this,"positionSize",void 0),s(this,"normalize",void 0);const{attributes:e={}}=t;this.typedArrayManager=Ke,this.attributes={},this._attributeDefs=e,this.opts=t,this.updateGeometry(t)}updateGeometry(t){Object.assign(this.opts,t);const{data:e,buffers:n={},getGeometry:i,geometryBuffer:r,positionFormat:o,dataChanged:s,normalize:a=!0}=this.opts;if(this.data=e,this.getGeometry=i,this.positionSize=r&&r.size||("XY"===o?2:3),this.buffers=n,this.normalize=a,r&&($a(e.startIndices),this.getGeometry=this.getGeometryFromBuffer(r),a||(n.positions=r)),this.geometryBuffer=n.positions,Array.isArray(s))for(const l of s)this._rebuildGeometry(l);else this._rebuildGeometry()}updatePartialGeometry(t){let{startRow:e,endRow:n}=t;this._rebuildGeometry({startRow:e,endRow:n})}getGeometryFromBuffer(t){const e=t.value||t;return ArrayBuffer.isView(e)?Nu(e,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices}):null}_allocate(t,e){const{attributes:n,buffers:i,_attributeDefs:r,typedArrayManager:o}=this;for(const s in r)if(s in i)o.release(n[s]),n[s]=null;else{const i=r[s];i.copy=e,n[s]=o.allocate(n[s],t,i)}}_forEachGeometry(t,e,n){const{data:i,getGeometry:r}=this,{iterable:o,objectInfo:s}=Fu(i,e,n);for(const a of o){s.index++;t(r?r(a,s):null,s.index)}}_rebuildGeometry(t){if(!this.data)return;let{indexStarts:e,vertexStarts:n,instanceCount:i}=this;const{data:r,geometryBuffer:o}=this,{startRow:s=0,endRow:a=1/0}=t||{},l={};if(t||(e=[0],n=[0]),this.normalize||!o)this._forEachGeometry(((t,e)=>{const i=t&&this.normalizeGeometry(t);l[e]=i,n[e+1]=n[e]+(i?this.getGeometrySize(i):0)}),s,a),i=n[n.length-1];else if(n=r.startIndices,i=n[r.length]||0,ArrayBuffer.isView(o))i=i||o.length/this.positionSize;else if(o instanceof Jo){const t=o.accessor.stride||4*this.positionSize;i=i||o.byteLength/t}else if(o.buffer){const t=o.stride||4*this.positionSize;i=i||o.buffer.byteLength/t}else if(o.value){const t=o.value,e=o.stride/t.BYTES_PER_ELEMENT||this.positionSize;i=i||t.length/e}this._allocate(i,Boolean(t)),this.indexStarts=e,this.vertexStarts=n,this.instanceCount=i;const c={};this._forEachGeometry(((t,r)=>{const o=l[r]||t;c.vertexStart=n[r],c.indexStart=e[r];const s=r<n.length-1?n[r+1]:i;c.geometrySize=s-n[r],c.geometryIndex=r,this.updateGeometryAttributes(o,c)}),s,a),this.vertexCount=e[e.length-1]}}const Mf=1,kf=-1;function Of(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Math.sign(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{start:n=0,end:i=t.length}=e,r=e.size||2;let o=0;for(let s=n,a=i-r;s<i;s+=r)o+=(t[s]-t[a])*(t[s+1]+t[a+1]),a=s;return o/2}(t,e))}(t,n);return i!==e&&(function(t,e){const{start:n=0,end:i=t.length,size:r=2}=e,o=(i-n)/r,s=Math.floor(o/2);for(let a=0;a<s;++a){const e=n+a*r,i=n+(o-1-a)*r;for(let n=0;n<r;++n){const r=t[e+n];t[e+n]=t[i+n],t[i+n]=r}}}(t,n),!0)}function Lf(t,e,n,i){let r,o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(8&n)r=(i[3]-t[1])/(e[1]-t[1]),o=3;else if(4&n)r=(i[1]-t[1])/(e[1]-t[1]),o=1;else if(2&n)r=(i[2]-t[0])/(e[0]-t[0]),o=2;else{if(!(1&n))return null;r=(i[0]-t[0])/(e[0]-t[0]),o=0}for(let a=0;a<t.length;a++)s[a]=(1&o)===a?i[o]:r*(e[a]-t[a])+t[a];return s}function Rf(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Ff(t,e){const n=e.length,i=t.length;if(i>0){let r=!0;for(let o=0;o<n;o++)if(t[i-n+o]!==e[o]){r=!1;break}if(r)return!1}for(let r=0;r<n;r++)t[i+r]=e[r];return!0}function Bf(t,e){const n=e.length;for(let i=0;i<n;i++)t[i]=e[i]}function Nf(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];const o=i+e*n;for(let s=0;s<n;s++)r[s]=t[o+s];return r}function zf(t,e){const{size:n=2,broken:i=!1,gridResolution:r=10,gridOffset:o=[0,0],startIndex:s=0,endIndex:a=t.length}=e||{},l=(a-s)/n;let c=[];const u=[c],d=Nf(t,0,n,s);let h,f;const p=Hf(d,r,o,[]),g=[];Ff(c,d);for(let m=1;m<l;m++){for(h=Nf(t,m,n,s,h),f=Rf(h,p);f;){Lf(d,h,f,p,g);const t=Rf(g,p);t&&(Lf(d,g,t,p,g),f=t),Ff(c,g),Bf(d,g),Gf(p,r,f),i&&c.length>n&&(c=[],u.push(c),Ff(c,d)),f=Rf(h,p)}Ff(c,h),Bf(d,h)}return i?u:u[0]}const Df=0,jf=1;function Uf(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}function Vf(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;if(!t.length)return[];const{size:i=2,gridResolution:r=10,gridOffset:o=[0,0],edgeTypes:s=!1}=n||{},a=[],l=[{pos:t,types:s?new Array(t.length/i).fill(jf):null,holes:e||[]}],c=[[],[]];let u=[];for(;l.length;){const{pos:t,types:e,holes:n}=l.shift();qf(t,i,n[0]||t.length,c),u=Hf(c[0],r,o,u);const d=Rf(c[1],u);if(d){let r=Wf(t,e,i,0,n[0]||t.length,u,d);const o={pos:r[0].pos,types:r[0].types,holes:[]},a={pos:r[1].pos,types:r[1].types,holes:[]};l.push(o,a);for(let l=0;l<n.length;l++)r=Wf(t,e,i,n[l],n[l+1]||t.length,u,d),r[0]&&(o.holes.push(o.pos.length),o.pos=Uf(o.pos,r[0].pos),s&&(o.types=Uf(o.types,r[0].types))),r[1]&&(a.holes.push(a.pos.length),a.pos=Uf(a.pos,r[1].pos),s&&(a.types=Uf(a.types,r[1].types)))}else{const i={positions:t};s&&(i.edgeTypes=e),n.length&&(i.holeIndices=n),a.push(i)}}return a}function Wf(t,e,n,i,r,o,s){const a=(r-i)/n,l=[],c=[],u=[],d=[],h=[];let f,p,g;const m=Nf(t,a-1,n,i);let y=Math.sign(8&s?m[1]-o[3]:m[0]-o[2]),v=e&&e[a-1],b=0,_=0;for(let w=0;w<a;w++)f=Nf(t,w,n,i,f),p=Math.sign(8&s?f[1]-o[3]:f[0]-o[2]),g=e&&e[i/n+w],p&&y&&y!==p&&(Lf(m,f,s,o,h),Ff(l,h)&&u.push(v),Ff(c,h)&&d.push(v)),p<=0?(Ff(l,f)&&u.push(g),b-=p):u.length&&(u[u.length-1]=Df),p>=0?(Ff(c,f)&&d.push(g),_+=p):d.length&&(d[d.length-1]=Df),Bf(m,f),y=p,v=g;return[b?{pos:l,types:e&&u}:null,_?{pos:c,types:e&&d}:null]}function Hf(t,e,n,i){const r=Math.floor((t[0]-n[0])/e)*e+n[0],o=Math.floor((t[1]-n[1])/e)*e+n[1];return i[0]=r,i[1]=o,i[2]=r+e,i[3]=o+e,i}function Gf(t,e,n){8&n?(t[1]+=e,t[3]+=e):4&n?(t[1]-=e,t[3]-=e):2&n?(t[0]+=e,t[2]+=e):1&n&&(t[0]-=e,t[2]-=e)}function qf(t,e,n,i){let r=1/0,o=-1/0,s=1/0,a=-1/0;for(let l=0;l<n;l+=e){const e=t[l],n=t[l+1];r=e<r?e:r,o=e>o?e:o,s=n<s?n:s,a=n>a?n:a}return i[0][0]=r,i[0][1]=s,i[1][0]=o,i[1][1]=a,i}const Yf=85.051129;function Xf(t,e,n,i){let r=-1,o=-1;for(let s=n+1;s<i;s+=e){const e=Math.abs(t[s]);e>r&&(r=e,o=s-1)}return o}function Kf(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Yf;const o=t[n],s=t[i-e];if(Math.abs(o-s)>180){const i=Nf(t,0,e,n);i[0]+=360*Math.round((s-o)/360),Ff(t,i),i[1]=Math.sign(i[1])*r,Ff(t,i),i[0]=o,Ff(t,i)}}function Zf(t,e,n,i){let r,o=t[0];for(let s=n;s<i;s+=e){r=t[s];const e=r-o;(e>180||e<-180)&&(r-=360*Math.round(e/360)),t[s]=o=r}}function $f(t,e){let n;const i=t.length/e;for(let o=0;o<i&&(n=t[o*e],(n+180)%360===0);o++);const r=360*-Math.round(n/360);if(0!==r)for(let o=0;o<i;o++)t[o*e]+=r}function Qf(t,e,n,i){let r;if(Array.isArray(t[0])){const n=t.length*e;r=new Array(n);for(let i=0;i<t.length;i++)for(let n=0;n<e;n++)r[i*e+n]=t[i][n]||0}else r=t;return n?zf(r,{size:e,gridResolution:n}):i?function(t,e){const{size:n=2,startIndex:i=0,endIndex:r=t.length,normalize:o=!0}=e||{},s=t.slice(i,r);Zf(s,n,0,r-i);const a=zf(s,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const l of a)$f(l,n);return a}(r,{size:e}):r}class Jf extends If{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(t){return this.attributes[t]}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):null}normalizeGeometry(t){return this.normalize?Qf(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}getGeometrySize(t){if(tp(t)){let e=0;for(const n of t)e+=this.getGeometrySize(n);return e}const e=this.getPathLength(t);return e<2?0:this.isClosed(t)?e<3?0:e+2:e}updateGeometryAttributes(t,e){if(0!==e.geometrySize)if(t&&tp(t))for(const n of t){const t=this.getGeometrySize(n);e.geometrySize=t,this.updateGeometryAttributes(n,e),e.vertexStart+=t}else this._updateSegmentTypes(t,e),this._updatePositions(t,e)}_updateSegmentTypes(t,e){const n=this.attributes.segmentTypes,i=!!t&&this.isClosed(t),{vertexStart:r,geometrySize:o}=e;n.fill(0,r,r+o),i?(n[r]=4,n[r+o-2]=4):(n[r]+=1,n[r+o-2]+=2),n[r+o-1]=4}_updatePositions(t,e){const{positions:n}=this.attributes;if(!n||!t)return;const{vertexStart:i,geometrySize:r}=e,o=new Array(3);for(let s=i,a=0;a<r;s++,a++)this.getPointOnPath(t,a,o),n[3*s]=o[0],n[3*s+1]=o[1],n[3*s+2]=o[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const{positionSize:i}=this;e*i>=t.length&&(e+=1-t.length/i);const r=e*i;return n[0]=t[r],n[1]=t[r+1],n[2]=3===i&&t[r+2]||0,n}isClosed(t){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:e}=this,n=t.length-e;return t[0]===t[n]&&t[1]===t[n+1]&&(2===e||t[2]===t[n+2])}}function tp(t){return Array.isArray(t[0])}const ep=[0,0,0,255],np={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:ep},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},ip={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class rp extends vh{constructor(){super(...arguments),s(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float capType;\nuniform float miterLimit;\nuniform bool billboard;\nuniform int widthUnits;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 getLineJoinOffset(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  vec2 width\n) {\n  bool isEnd = positions.x > 0.0;\n  float sideOfPath = positions.y;\n  float isJoint = float(sideOfPath == 0.0);\n\n  vec3 deltaA3 = (currPoint - prevPoint);\n  vec3 deltaB3 = (nextPoint - currPoint);\n\n  mat3 rotationMatrix;\n  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\n  if (needsRotation) {\n    deltaA3 = deltaA3 * rotationMatrix;\n    deltaB3 = deltaB3 * rotationMatrix;\n  }\n  vec2 deltaA = deltaA3.xy / width;\n  vec2 deltaB = deltaB3.xy / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = dirA + dirB;\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 dir = isEnd ? dirA : dirB;\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\n  float cornerPosition = sideOfPath * turnDirection;\n\n  float miterSize = 1.0 / max(sinHalfA, EPSILON);\n  miterSize = mix(\n    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\n    miterSize,\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n    * (sideOfPath + isJoint * turnDirection);\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  if (isCap) {\n    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);\n    vJointType = capType;\n  } else {\n    vJointType = jointType;\n  }\n  vPathLength = L;\n  vCornerOffset = offsetVec;\n  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);\n  vMiterLength = isCap ? isJoint : vMiterLength;\n\n  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\n  vPathPosition = vec2(\n    dot(offsetFromStartOfPath, perp),\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(offsetVec * width * isValid, 0.0);\n\n  if (needsRotation) {\n    offset = rotationMatrix * offset;\n  }\n  return offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.pickingColor = instancePickingColors;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  geometry.worldPosition = currPosition;\n  vec2 widthPixels = vec2(clamp(\n    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels) / 2.0);\n  vec3 width;\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    width = vec3(widthPixels, 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 offset = getLineJoinOffset(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w,\n      project_pixel_size_to_clipspace(width.xy)\n    );\n\n    DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);\n    gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    width = vec3(project_pixel_size(widthPixels), 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);\n    geometry.position = vec4(currPosition + offset, 1.0);\n    gl_Position = project_common_position_to_clipspace(geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n\n  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\n    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\n      discard;\n    }\n    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {\n      discard;\n    }\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Ah,Mh]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:ip,accessor:"getPath",update:this.calculatePositions,noAlloc:true,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:true},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:ip,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:ip,defaultValue:ep},instancePickingColors:{size:3,type:5121,accessor:(t,e)=>{let{index:n,target:i}=e;return this.encodePickingColor(t&&t.__source?t.__source.index:n,i)}}}),this.setState({pathTesselator:new Jf({fp64:this.use64bitPositions()})})}updateState(t){super.updateState(t);const{props:e,changeFlags:n}=t,i=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:t}=this.state,r=e.data.attributes||{};t.updateGeometry({data:e.data,geometryBuffer:r.getPath,buffers:r,normalize:!e._pathType,loop:"loop"===e._pathType,getGeometry:e.getPath,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:t.instanceCount,startIndices:t.vertexStarts}),n.dataChanged||i.invalidateAll()}if(n.extensionsChanged){var r;const{gl:t}=this.context;null===(r=this.state.model)||void 0===r||r.delete(),this.state.model=this._getModel(t),i.invalidateAll()}}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n}=e,{data:i}=this.props;return i[0]&&i[0].__source&&(e.object=i.find((t=>t.__source.index===n))),e}disablePickingIndex(t){const{data:e}=this.props;if(e[0]&&e[0].__source)for(let n=0;n<e.length;n++)e[n].__source.index===t&&this._disablePickingIndex(n);else super.disablePickingIndex(t)}draw(t){let{uniforms:e}=t;const{jointRounded:n,capRounded:i,billboard:r,miterLimit:o,widthUnits:s,widthScale:a,widthMinPixels:l,widthMaxPixels:c}=this.props;this.state.model.setUniforms(e).setUniforms({jointType:Number(n),capType:Number(i),billboard:r,widthUnits:Li[s],widthScale:a,miterLimit:o,widthMinPixels:l,widthMaxPixels:c}).draw()}_getModel(t){return new Pd(t,{...this.getShaders(),id:this.props.id,geometry:new Oh({drawMode:4,attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateSegmentTypes(t){const{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("segmentTypes")}}s(rp,"defaultProps",np),s(rp,"layerName","PathLayer");const op="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",sp={lightSources:{}};function ap(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map((t=>t*e/255))}const lp={name:"lights",vs:op,fs:op,getUniforms:function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sp;if("lightSources"in e){const{ambientLight:t,pointLights:n,directionalLights:i}=e.lightSources||{};return t||n&&n.length>0||i&&i.length>0?Object.assign({},function(t){let{ambientLight:e,pointLights:n=[],directionalLights:i=[]}=t;const r={};return r["lighting_uAmbientLight.color"]=e?ap(e):[0,0,0],n.forEach(((t,e)=>{r["lighting_uPointLight[".concat(e,"].color")]=ap(t),r["lighting_uPointLight[".concat(e,"].position")]=t.position,r["lighting_uPointLight[".concat(e,"].attenuation")]=t.attenuation||[1,0,0]})),r.lighting_uPointLightCount=n.length,i.forEach(((t,e)=>{r["lighting_uDirectionalLight[".concat(e,"].color")]=ap(t),r["lighting_uDirectionalLight[".concat(e,"].direction")]=t.direction})),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:t,pointLights:n,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const n={pointLights:[],directionalLights:[]};for(const t of e.lights||[])switch(t.type){case"ambient":n.ambientLight=t;break;case"directional":n.directionalLights.push(t);break;case"point":n.pointLights.push(t)}return t({lightSources:n})}return{}},defines:{MAX_LIGHTS:3}},cp="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",up={};function dp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:up;if(!("material"in t))return{};const{material:e}=t;return e?function(t){const{ambient:e=.35,diffuse:n=.6,shininess:i=32,specularColor:r=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:i,lighting_uSpecularColor:r.map((t=>t/255))}}(e):{lighting_uEnabled:!1}}const hp={name:"gouraud-lighting",dependencies:[lp],vs:cp,defines:{LIGHTING_VERTEX:1},getUniforms:dp};var fp=n(89),pp=n.n(fp);const gp=Mf,mp=kf,yp={isClosed:!0};function vp(t){return"positions"in t?t.positions:t}function bp(t){return"holeIndices"in t?t.holeIndices:null}function _p(t,e,n,i,r){let o=e;const s=n.length;for(let a=0;a<s;a++)for(let e=0;e<i;e++)t[o++]=n[a][e]||0;if(!function(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}(n))for(let a=0;a<i;a++)t[o++]=n[0][a]||0;return yp.start=e,yp.end=o,yp.size=i,Of(t,r,yp),o}function wp(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;o=o||n.length;const a=o-r;if(a<=0)return e;let l=e;for(let c=0;c<a;c++)t[l++]=n[r+c];if(!function(t,e,n,i){for(let r=0;r<e;r++)if(t[n+r]!==t[i-e+r])return!1;return!0}(n,i,r,o))for(let c=0;c<i;c++)t[l++]=n[r+c];return yp.start=e,yp.end=l,yp.size=i,Of(t,s,yp),l}function xp(t,e){!function(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}(t);const n=[],i=[];if("positions"in t){const{positions:r,holeIndices:o}=t;if(o){let t=0;for(let s=0;s<=o.length;s++)t=wp(n,t,r,e,o[s-1],o[s],0===s?gp:mp),i.push(t);return i.pop(),{positions:n,holeIndices:i}}t=r}if(!function(t){return Array.isArray(t[0])}(t))return wp(n,0,t,e,0,n.length,gp),n;if(!function(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}(t)){let r=0;for(const[o,s]of t.entries())r=_p(n,r,s,e,0===o?gp:mp),i.push(r);return i.pop(),{positions:n,holeIndices:i}}return _p(n,0,t,e,gp),n}function Sp(t,e,n){const i=t.length/3;let r=0;for(let o=0;o<i;o++){const s=(o+1)%i;r+=t[3*o+e]*t[3*s+n],r-=t[3*s+e]*t[3*o+n]}return Math.abs(r/2)}function Ep(t,e,n,i){const r=t.length/3;for(let o=0;o<r;o++){const r=3*o,s=t[r+0],a=t[r+1],l=t[r+2];t[r+e]=s,t[r+n]=a,t[r+i]=l}}class Tp extends If{constructor(t){const{fp64:e,IndexType:n=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:e?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:n,size:1}}})}get(t){const{attributes:e}=this;return"indices"===t?e.indices&&e.indices.subarray(0,this.vertexCount):e[t]}updateGeometry(t){super.updateGeometry(t);const e=this.buffers.indices;if(e)this.vertexCount=(e.value||e).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(t){if(this.normalize){const e=xp(t,this.positionSize);return this.opts.resolution?Vf(vp(e),bp(e),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;const{size:i=2,normalize:r=!0,edgeTypes:o=!1}=n||{};e=e||[];const s=[],a=[];let l=0,c=0;for(let d=0;d<=e.length;d++){const r=e[d]||t.length,o=c,u=Xf(t,i,l,r);for(let e=u;e<r;e++)s[c++]=t[e];for(let e=l;e<u;e++)s[c++]=t[e];Zf(s,i,o,c),Kf(s,i,o,c,null===n||void 0===n?void 0:n.maxLatitude),l=r,a[d]=c}a.pop();const u=Vf(s,a,{size:i,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(r)for(const d of u)$f(d.positions,i);return u}(vp(e),bp(e),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):e}return t}getGeometrySize(t){if(Pp(t)){let e=0;for(const n of t)e+=this.getGeometrySize(n);return e}return vp(t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):null}updateGeometryAttributes(t,e){if(t&&Pp(t))for(const n of t){const t=this.getGeometrySize(n);e.geometrySize=t,this.updateGeometryAttributes(n,e),e.vertexStart+=t,e.indexStart=this.indexStarts[e.geometryIndex+1]}else this._updateIndices(t,e),this._updatePositions(t,e),this._updateVertexValid(t,e)}_updateIndices(t,e){let{geometryIndex:n,vertexStart:i,indexStart:r}=e;const{attributes:o,indexStarts:s,typedArrayManager:a}=this;let l=o.indices;if(!l||!t)return;let c=r;const u=function(t,e,n,i){let r=bp(t);r&&(r=r.map((t=>t/e)));let o=vp(t);const s=i&&3===e;if(n){const t=o.length;o=o.slice();const i=[];for(let r=0;r<t;r+=e){i[0]=o[r],i[1]=o[r+1],s&&(i[2]=o[r+2]);const t=n(i);o[r]=t[0],o[r+1]=t[1],s&&(o[r+2]=t[2])}}if(s){const t=Sp(o,0,1),e=Sp(o,0,2),i=Sp(o,1,2);if(!t&&!e&&!i)return[];t>e&&t>i||(e>i?(n||(o=o.slice()),Ep(o,0,2,1)):(n||(o=o.slice()),Ep(o,2,0,1)))}return pp()(o,r,e)}(t,this.positionSize,this.opts.preproject,this.opts.full3d);l=a.allocate(l,r+u.length,{copy:!0});for(let d=0;d<u.length;d++)l[c++]=u[d]+i;s[n+1]=r+u.length,o.indices=l}_updatePositions(t,e){let{vertexStart:n,geometrySize:i}=e;const{attributes:{positions:r},positionSize:o}=this;if(!r||!t)return;const s=vp(t);for(let a=n,l=0;l<i;a++,l++){const t=s[l*o],e=s[l*o+1],n=o>2?s[l*o+2]:0;r[3*a]=t,r[3*a+1]=e,r[3*a+2]=n}}_updateVertexValid(t,e){let{vertexStart:n,geometrySize:i}=e;const{positionSize:r}=this,o=this.attributes.vertexValid,s=t&&bp(t);if(t&&t.edgeTypes?o.set(t.edgeTypes,n):o.fill(1,n,n+i),s)for(let a=0;a<s.length;a++)o[n+s[a]/r-1]=0;o[n+i-1]=0}}function Pp(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const Ap="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec3 positions64Low;\n  vec3 nextPositions64Low;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n#ifdef IS_SIDE_VERTEX\n  if(vertexValid < 0.5){\n    gl_Position = vec4(0.);\n    return;\n  }\n#endif\n\n  vec3 pos;\n  vec3 pos64Low;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n  geometry.pickingColor = props.pickingColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);\n#else\n  pos = props.positions;\n  pos64Low = props.positions64Low;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n  }\n  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\n\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n  #ifdef IS_SIDE_VERTEX\n    normal = vec3(\n      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),\n      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),\n      0.0);\n    normal = project_offset_normal(normal);\n  #else\n    normal = project_normal(vec3(0.0, 0.0, 1.0));\n  #endif\n    geometry.normal = normal;\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",Cp="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(Ap,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64Low = positions64Low;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n"),Ip="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec3 nextPositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 nextPositions64Low;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(Ap,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  #if RING_WINDING_ORDER_CW == 1\n    props.positions = instancePositions;\n    props.positions64Low = instancePositions64Low;\n    props.nextPositions = nextPositions;\n    props.nextPositions64Low = nextPositions64Low;\n  #else\n    props.positions = nextPositions;\n    props.positions64Low = nextPositions64Low;\n    props.nextPositions = instancePositions;\n    props.nextPositions64Low = instancePositions64Low;\n  #endif\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n\n  calculatePosition(props);\n}\n"),Mp=[0,0,0,255],kp={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:Mp},getLineColor:{type:"accessor",value:Mp},material:!0},Op={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class Lp extends vh{constructor(){super(...arguments),s(this,"state",void 0)}getShaders(t){return super.getShaders({vs:"top"===t?Cp:Ip,fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",defines:{RING_WINDING_ORDER_CW:this.props._normalize||"CCW"!==this.props._windingOrder?1:0},modules:[Ah,hp,Mh]})}get wrapLongitude(){return!1}initializeState(){const{gl:t,viewport:e}=this.context;let{coordinateSystem:n}=this.props;const{_full3d:i}=this.props;let r;e.isGeospatial&&n===ki.DEFAULT&&(n=ki.LNGLAT),n===ki.LNGLAT&&(r=i?e.projectPosition.bind(e):e.projectFlat.bind(e)),this.setState({numInstances:0,polygonTesselator:new Tp({preproject:r,fp64:this.use64bitPositions(),IndexType:!t||Ts(t,xs)?Uint32Array:Uint16Array})});const o=this.getAttributeManager(),s=!0;o.remove(["instancePickingColors"]),o.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:s},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:Op,accessor:"getPolygon",update:this.calculatePositions,noAlloc:s,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:s},elevations:{size:1,transition:Op,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Op,accessor:"getFillColor",defaultValue:Mp,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Op,accessor:"getLineColor",defaultValue:Mp,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(t,e)=>{let{index:n,target:i}=e;return this.encodePickingColor(t&&t.__source?t.__source.index:n,i)},shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n}=e,{data:i}=this.props;return i[0]&&i[0].__source&&(e.object=i.find((t=>t.__source.index===n))),e}disablePickingIndex(t){const{data:e}=this.props;if(e[0]&&e[0].__source)for(let n=0;n<e.length;n++)e[n].__source.index===t&&this._disablePickingIndex(n);else super.disablePickingIndex(t)}draw(t){let{uniforms:e}=t;const{extruded:n,filled:i,wireframe:r,elevationScale:o}=this.props,{topModel:s,sideModel:a,polygonTesselator:l}=this.state,c={...e,extruded:Boolean(n),elevationScale:o};a&&(a.setInstanceCount(l.instanceCount-1),a.setUniforms(c),r&&(a.setDrawMode(3),a.setUniforms({isWireframe:!0}).draw()),i&&(a.setDrawMode(6),a.setUniforms({isWireframe:!1}).draw())),s&&(s.setVertexCount(l.vertexCount),s.setUniforms(c).draw())}updateState(t){super.updateState(t),this.updateGeometry(t);const{props:e,oldProps:n,changeFlags:i}=t,r=this.getAttributeManager();var o;(i.extensionsChanged||e.filled!==n.filled||e.extruded!==n.extruded)&&(null===(o=this.state.models)||void 0===o||o.forEach((t=>t.delete())),this.setState(this._getModels(this.context.gl)),r.invalidateAll())}updateGeometry(t){let{props:e,oldProps:n,changeFlags:i}=t;if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPolygon)){const{polygonTesselator:t}=this.state,n=e.data.attributes||{};t.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:n.getPolygon,buffers:n,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:i.dataChanged,full3d:e._full3d}),this.setState({numInstances:t.instanceCount,startIndices:t.vertexStarts}),i.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(t){const{id:e,filled:n,extruded:i}=this.props;let r,o;if(n){const n=this.getShaders("top");n.defines.NON_INSTANCED_MODEL=1,r=new Pd(t,{...n,id:"".concat(e,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(o=new Pd(t,{...this.getShaders("side"),id:"".concat(e,"-side"),geometry:new Oh({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),o.userData.excludeAttributes={indices:!0}),{models:[o,r].filter(Boolean),topModel:r,sideModel:o}}calculateIndices(t){const{polygonTesselator:e}=this.state;t.startIndices=e.indexStarts,t.value=e.get("indices")}calculatePositions(t){const{polygonTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}s(Lp,"defaultProps",kp),s(Lp,"layerName","SolidPolygonLayer");const Rp={circle:{type:ef,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:Qh,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:Cf,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},Fp={type:rp,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},Bp={type:Lp,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Np(t){let{type:e,props:n}=t;const i={};for(const r in n)i[r]=e.defaultProps[n[r]];return i}function zp(t,e){const{transitions:n,updateTriggers:i}=t.props,r={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const o in e){const s=e[o];let a=t.props[o];o.startsWith("get")&&(a=t.getSubLayerAccessor(a),r.updateTriggers[s]=i[o],n&&(r.transitions[s]=n[o])),r[s]=a}return r}function Dp(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:r=0,endRow:o=t.length}=n;for(let s=r;s<o;s++){const n=t[s],{geometry:r}=n;if(r)if("GeometryCollection"===r.type){W.assert(Array.isArray(r.geometries),"GeoJSON does not have geometries array");const{geometries:t}=r;for(let r=0;r<t.length;r++){jp(t[r],i,e,n,s)}}else jp(r,i,e,n,s)}return i}function jp(t,e,n,i,r){const{type:o,coordinates:s}=t,{pointFeatures:a,lineFeatures:l,polygonFeatures:c,polygonOutlineFeatures:u}=e;if(function(t,e){let n=Up[t];W.assert(n,"Unknown GeoJSON type ".concat(t));for(;e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}(o,s))switch(o){case"Point":a.push(n({geometry:t},i,r));break;case"MultiPoint":s.forEach((t=>{a.push(n({geometry:{type:"Point",coordinates:t}},i,r))}));break;case"LineString":l.push(n({geometry:t},i,r));break;case"MultiLineString":s.forEach((t=>{l.push(n({geometry:{type:"LineString",coordinates:t}},i,r))}));break;case"Polygon":c.push(n({geometry:t},i,r)),s.forEach((t=>{u.push(n({geometry:{type:"LineString",coordinates:t}},i,r))}));break;case"MultiPolygon":s.forEach((t=>{c.push(n({geometry:{type:"Polygon",coordinates:t}},i,r)),t.forEach((t=>{u.push(n({geometry:{type:"LineString",coordinates:t}},i,r))}))}))}else W.warn("".concat(o," coordinates are malformed"))()}const Up={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function Vp(t){return t.geometry.coordinates}function Wp(t,e){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{points:i,lines:r,polygons:o}=t,s=function(t,e){const n={points:null,lines:null,polygons:null};for(const i in n){const r=t[i].globalFeatureIds.value;n[i]=new Uint8ClampedArray(3*r.length);const o=[];for(let t=0;t<r.length;t++)e(r[t],o),n[i][3*t+0]=o[0],n[i][3*t+1]=o[1],n[i][3*t+2]=o[2]}return n}(t,e);return n.points.data={length:i.positions.value.length/i.positions.size,attributes:{...i.attributes,getPosition:i.positions,instancePickingColors:{size:3,value:s.points}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines.data={length:r.pathIndices.value.length-1,startIndices:r.pathIndices.value,attributes:{...r.attributes,getPath:r.positions,instancePickingColors:{size:3,value:s.lines}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines._pathType="open",n.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygons._normalize=!1,o.triangles&&(n.polygons.data.attributes.indices=o.triangles.value),n.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygonsOutline._pathType="open",n}const Hp=["points","linestrings","polygons"],Gp={...Np(Rp.circle),...Np(Rp.icon),...Np(Rp.text),...Np(Fp),...Np(Bp),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class qp extends Uh{initializeState(){this.state={layerProps:{},features:{}}}updateState(t){let{props:e,changeFlags:n}=t;if(!n.dataChanged)return;const{data:i}=this.props,r=i&&"points"in i&&"polygons"in i&&"lines"in i;this.setState({binary:r}),r?this._updateStateBinary({props:e,changeFlags:n}):this._updateStateJSON({props:e,changeFlags:n})}_updateStateBinary(t){let{props:e,changeFlags:n}=t;const i=Wp(e.data,this.encodePickingColor);this.setState({layerProps:i})}_updateStateJSON(t){let{props:e,changeFlags:n}=t;const i=function(t){if(Array.isArray(t))return t;switch(W.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return W.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}(e.data),r=this.getSubLayerRow.bind(this);let o={};const s={};if(Array.isArray(n.dataChanged)){const t=this.state.features;for(const e in t)o[e]=t[e].slice(),s[e]=[];for(const e of n.dataChanged){const n=Dp(i,r,e);for(const i in t)s[i].push(Vh({data:o[i],getIndex:t=>t.__source.index,dataRange:e,replace:n[i]}))}}else o=Dp(i,r);const a=function(t,e){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{pointFeatures:i,lineFeatures:r,polygonFeatures:o,polygonOutlineFeatures:s}=t;return n.points.data=i,n.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),n.points.getPosition=Vp,n.lines.data=r,n.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),n.lines.getPath=Vp,n.polygons.data=o,n.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),n.polygons.getPolygon=Vp,n.polygonsOutline.data=s,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),n.polygonsOutline.getPath=Vp,n}(o,s);this.setState({features:o,featuresDiff:s,layerProps:a})}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n,sourceLayer:i}=e;return e.featureType=Hp.find((t=>i.id.startsWith("".concat(this.id,"-").concat(t,"-")))),n>=0&&i.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(e.index=this.props.data.points.globalFeatureIds.value[n]),e}_updateAutoHighlight(t){const e="".concat(this.id,"-points-"),n="points"===t.featureType;for(const i of this.getSubLayers())i.id.startsWith(e)===n&&i.updateAutoHighlight(t)}_renderPolygonLayer(){const{extruded:t,wireframe:e}=this.props,{layerProps:n}=this.state,i="polygons-fill",r=this.shouldRenderSubLayer(i,n.polygons.data)&&this.getSubLayerClass(i,Bp.type);if(r){const o=zp(this,Bp.props),s=t&&e;return s||delete o.getLineColor,o.updateTriggers.lineColors=s,new r(o,this.getSubLayerProps({id:i,updateTriggers:o.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:t,stroked:e}=this.props,{layerProps:n}=this.state,i="polygons-stroke",r="linestrings",o=!t&&e&&this.shouldRenderSubLayer(i,n.polygonsOutline.data)&&this.getSubLayerClass(i,Fp.type),s=this.shouldRenderSubLayer(r,n.lines.data)&&this.getSubLayerClass(r,Fp.type);if(o||s){const t=zp(this,Fp.props);return[o&&new o(t,this.getSubLayerProps({id:i,updateTriggers:t.updateTriggers}),n.polygonsOutline),s&&new s(t,this.getSubLayerProps({id:r,updateTriggers:t.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:t}=this.props,{layerProps:e,binary:n}=this.state;let{highlightedObjectIndex:i}=this.props;!n&&Number.isFinite(i)&&(i=e.points.data.findIndex((t=>t.__source.index===i)));const r=new Set(t.split("+")),o=[];for(const s of r){const t="points-".concat(s),r=Rp[s],a=r&&this.shouldRenderSubLayer(t,e.points.data)&&this.getSubLayerClass(t,r.type);if(a){const l=zp(this,r.props);let c=e.points;if("text"===s&&n){const{instancePickingColors:t,...e}=c.data.attributes;c={...c,data:{...c.data,attributes:e}}}o.push(new a(l,this.getSubLayerProps({id:t,updateTriggers:l.updateTriggers,highlightedObjectIndex:i}),c))}}return o}renderLayers(){const{extruded:t}=this.props,e=this._renderPolygonLayer();return[!t&&e,this._renderLineLayers(),this._renderPointLayers(),t&&e]}getSubLayerAccessor(t){const{binary:e}=this.state;return e&&"function"===typeof t?(e,n)=>{const{data:i,index:r}=n,o=function(t,e){if(!t)return null;const n="startIndices"in t?t.startIndices[e]:e,i=t.featureIds.value[n];return-1!==n?function(t,e,n){const i={properties:{...t.properties[e]}};for(const r in t.numericProps)i.properties[r]=t.numericProps[r].value[n];return i}(t,i,n):null}(i,r);return t(o,n)}:super.getSubLayerAccessor(t)}}function Yp(){let t;if("undefined"!==typeof window&&window.performance)t=window.performance.now();else if("undefined"!==typeof process&&process.hrtime){const e=process.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}s(qp,"layerName","GeoJsonLayer"),s(qp,"defaultProps",Gp);class Xp{constructor(t,e){this.name=void 0,this.type=void 0,this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=t,this.type=e,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Yp(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Yp()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Kp{constructor(t){this.id=void 0,this.stats={},this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(const t of Object.values(this.stats))t.reset();return this}forEach(t){for(const e of Object.values(this.stats))t(e)}getTable(){const t={};return this.forEach((e=>{t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>this._getOrCreate(t)))}_getOrCreate(t){const{name:e,type:n}=t;let i=this.stats[e];return i||(i=t instanceof Xp?t:new Xp(e,n),this.stats[e]=i),i}}const Zp={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class $p{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,"props",void 0),s(this,"stats",void 0),s(this,"activeRequestCount",0),s(this,"requestQueue",[]),s(this,"requestMap",new Map),s(this,"deferredUpdate",null),this.props={...Zp,...t},this.stats=new Kp({id:this.props.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever")}scheduleRequest(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>0;if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(t))return this.requestMap.get(t);const n={handle:t,priority:0,getPriority:e},i=new Promise((t=>(n.resolve=t,n)));return this.requestQueue.push(n),this.requestMap.set(t,i),this._issueNewRequests(),i}_issueRequest(t){const{handle:e,resolve:n}=t;let i=!1;const r=()=>{i||(i=!0,this.requestMap.delete(e),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:r}):Promise.resolve({done:r})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout((()=>this._issueNewRequestsAsync()),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==t){this._updateAllRequests();for(let e=0;e<t;++e){const t=this.requestQueue.shift();t&&this._issueRequest(t)}}}_updateAllRequests(){const t=this.requestQueue;for(let e=0;e<t.length;++e){const n=t[e];this._updateRequest(n)||(t.splice(e,1),this.requestMap.delete(n.handle),e--)}t.sort(((t,e)=>t.priority-e.priority))}_updateRequest(t){return t.priority=t.getPriority(t.handle),!(t.priority<0)||(t.resolve(null),!1)}}class Qp{constructor(t){s(this,"index",void 0),s(this,"isVisible",void 0),s(this,"isSelected",void 0),s(this,"parent",void 0),s(this,"children",void 0),s(this,"content",void 0),s(this,"state",void 0),s(this,"layers",void 0),s(this,"id",void 0),s(this,"zoom",void 0),s(this,"userData",void 0),s(this,"boundingBox",void 0),s(this,"_abortController",void 0),s(this,"_loader",void 0),s(this,"_loaderId",void 0),s(this,"_isLoaded",void 0),s(this,"_isCancelled",void 0),s(this,"_needsReload",void 0),s(this,"_bbox",void 0),this.index=t,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get bbox(){return this._bbox}set bbox(t){this._bbox||(this._bbox=t,this.boundingBox="west"in t?[[t.west,t.south],[t.east,t.north]]:[[t.left,t.top],[t.right,t.bottom]])}get data(){return this.isLoading&&this._loader?this._loader.then((()=>this.data)):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return Boolean(this._loader)&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const t=this.content?this.content.byteLength:0;return Number.isFinite(t)||console.error("byteLength not defined in tile data"),t}async _loadData(t){let{getData:e,requestScheduler:n,onLoad:i,onError:r}=t;const{index:o,id:s,bbox:a,userData:l,zoom:c}=this,u=this._loaderId;this._abortController=new AbortController;const{signal:d}=this._abortController,h=await n.scheduleRequest(this,(t=>t.isSelected?1:-1));if(!h)return void(this._isCancelled=!0);if(this._isCancelled)return void h.done();let f,p=null;try{p=await e({index:o,id:s,bbox:a,userData:l,zoom:c,signal:d})}catch(CL){f=CL||!0}finally{h.done()}u===this._loaderId&&(this._loader=void 0,this.content=p,!this._isCancelled||p?(this._isLoaded=!0,this._isCancelled=!1,f?r(f,this):i(this)):this._isLoaded=!1)}loadData(t){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(t),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var t;this.isLoaded||(this._isCancelled=!0,null===(t=this._abortController)||void 0===t||t.abort())}}const Jp=Math.PI/180,tg=180/Math.PI,eg=6370972,ng=256;function ig(){const t=4018225162502676e-20,e=Math.PI/180*ng;return{unitsPerMeter:[t,t,t],unitsPerMeter2:[0,0,0],metersPerUnit:[24886.609375,24886.609375,24886.609375],unitsPerDegree:[e,e,t],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/e,1/e,24886.609375]}}class rg extends Di{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{latitude:e=0,longitude:n=0,zoom:i=0,nearZMultiplier:r=.1,farZMultiplier:o=2,resolution:a=10}=t;let{height:l,altitude:c=1.5}=t;l=l||1,c=Math.max(.75,c);const u=(new ti).lookAt({eye:[0,-c,0],up:[0,0,1]}),d=Math.pow(2,i);u.rotateX(e*Jp),u.rotateZ(-n*Jp),u.scale(d/l);const h=Math.atan(.5/c),f=512*d/l;super({...t,height:l,viewMatrix:u,longitude:n,latitude:e,zoom:i,distanceScales:ig(),fovyRadians:2*h,focalDistance:c,near:r,far:Math.min(2,1/f+1)*c*o}),s(this,"longitude",void 0),s(this,"latitude",void 0),s(this,"resolution",void 0),this.latitude=e,this.longitude=n,this.resolution=a}get projectionMode(){return Oi.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(){const t={targetZ:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0},e=this.unproject([0,this.height/2],t),n=this.unproject([this.width/2,0],t),i=this.unproject([this.width,this.height/2],t),r=this.unproject([this.width/2,this.height],t);return i[0]<this.longitude&&(i[0]+=360),e[0]>this.longitude&&(e[0]-=360),[Math.min(e[0],i[0],n[0],r[0]),Math.min(e[1],i[1],n[1],r[1]),Math.max(e[0],i[0],n[0],r[0]),Math.max(e[1],i[1],n[1],r[1])]}unproject(t){let{topLeft:e=!0,targetZ:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[i,r,o]=t,s=e?r:this.height-r,{pixelUnprojectionMatrix:a}=this;let l;if(Number.isFinite(o))l=og(a,[i,s,o,1]);else{const t=og(a,[i,s,-1,1]),e=og(a,[i,s,1,1]),r=((n||0)/eg+1)*ng,o=_n(vn([],t,e)),c=_n(t),u=_n(e),d=4*((4*c*u-(o-c-u)**2)/16)/o;l=function(t,e,n,i){var r=e[0],o=e[1],s=e[2];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=s+i*(n[2]-s),t}([],t,e,(Math.sqrt(c-d)-Math.sqrt(Math.max(0,r*r-d)))/Math.sqrt(o))}const[c,u,d]=this.unprojectPosition(l);return Number.isFinite(o)?[c,u,d]:Number.isFinite(n)?[c,u,n]:[c,u]}projectPosition(t){const[e,n,i=0]=t,r=e*Jp,o=n*Jp,s=Math.cos(o),a=(i/eg+1)*ng;return[Math.sin(r)*s*a,-Math.cos(r)*s*a,Math.sin(o)*a]}unprojectPosition(t){const[e,n,i]=t,r=bn(t),o=Math.asin(i/r);return[Math.atan2(e,-n)*tg,o*tg,(r/ng-1)*eg]}projectFlat(t){return t}unprojectFlat(t){return t}panByPosition(t,e){const n=this.unproject(e);return{longitude:t[0]-n[0]+this.longitude,latitude:t[1]-n[1]+this.latitude}}}function og(t,e){const n=Yn([],e,t);return Hn(n,n,1/n[3]),n}const sg=-1,ag=0,lg=1,cg=new Tn,ug=new Tn;class dg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=arguments.length>2?arguments[2]:void 0;s(this,"center",void 0),s(this,"halfDiagonal",void 0),s(this,"minimum",void 0),s(this,"maximum",void 0),n=n||cg.copy(t).add(e).scale(.5),this.center=new Tn(n),this.halfDiagonal=new Tn(e).subtract(this.center),this.minimum=new Tn(t),this.maximum=new Tn(e)}clone(){return new dg(this.minimum,this.maximum,this.center)}equals(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}transform(t){return this.center.transformAsPoint(t),this.halfDiagonal.transform(t),this.minimum.transform(t),this.maximum.transform(t),this}intersectPlane(t){const{halfDiagonal:e}=this,n=ug.from(t.normal),i=e.x*Math.abs(n.x)+e.y*Math.abs(n.y)+e.z*Math.abs(n.z),r=this.center.dot(n)+t.distance;return r-i>0?lg:r+i<0?sg:ag}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const e=cg.from(t).subtract(this.center),{halfDiagonal:n}=this;let i,r=0;return i=Math.abs(e.x)-n.x,i>0&&(r+=i*i),i=Math.abs(e.y)-n.y,i>0&&(r+=i*i),i=Math.abs(e.z)-n.z,i>0&&(r+=i*i),r}}const hg=new Tn,fg=new Tn;class pg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s(this,"center",void 0),s(this,"radius",void 0),this.radius=-0,this.center=new Tn,this.fromCenterRadius(t,e)}fromCenterRadius(t,e){return this.center.from(t),this.radius=e,this}fromCornerPoints(t,e){return e=hg.from(e),this.center=(new Tn).from(t).add(e).scale(.5),this.radius=this.center.distance(e),this}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}clone(){return new pg(this.center,this.radius)}union(t){const e=this.center,n=this.radius,i=t.center,r=t.radius,o=hg.copy(i).subtract(e),s=o.magnitude();if(n>=s+r)return this.clone();if(r>=s+n)return t.clone();const a=.5*(n+s+r);return fg.copy(o).scale((-n+a)/s).add(e),this.center.copy(fg),this.radius=a,this}expand(t){const e=hg.from(t).subtract(this.center).magnitude();return e>this.radius&&(this.radius=e),this}transform(t){this.center.transform(t);const e=zn(hg,t);return this.radius=Math.max(e[0],Math.max(e[1],e[2]))*this.radius,this}distanceSquaredTo(t){const e=this.distanceTo(t);return e*e}distanceTo(t){const e=hg.from(t).subtract(this.center);return Math.max(0,e.len()-this.radius)}intersectPlane(t){const e=this.center,n=this.radius,i=t.normal.dot(e)+t.distance;return i<-n?sg:i<n?ag:lg}}function gg(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=n[0],f=n[1],p=n[2],g=n[3],m=n[4],y=n[5],v=n[6],b=n[7],_=n[8];return t[0]=h*i+f*s+p*c,t[1]=h*r+f*a+p*u,t[2]=h*o+f*l+p*d,t[3]=g*i+m*s+y*c,t[4]=g*r+m*a+y*u,t[5]=g*o+m*l+y*d,t[6]=v*i+b*s+_*c,t[7]=v*r+b*a+_*u,t[8]=v*o+b*l+_*d,t}function mg(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}var yg;!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"}(yg||(yg={}));const vg=Object.freeze([1,0,0,0,1,0,0,0,1]);class bg extends kn{static get IDENTITY(){return function(){wg||(wg=new bg,Object.freeze(wg));return wg}()}static get ZERO(){return function(){_g||(_g=new bg([0,0,0,0,0,0,0,0,0]),Object.freeze(_g));return _g}()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return yg}constructor(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):n.length>0?this.copy([t,...n]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy(vg)}fromObject(t){return this.check()}fromQuaternion(t){return function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n+n,a=i+i,l=r+r,c=n*s,u=i*s,d=i*a,h=r*s,f=r*a,p=r*l,g=o*s,m=o*a,y=o*l;t[0]=1-d-p,t[3]=u-y,t[6]=h+m,t[1]=u+y,t[4]=1-c-p,t[7]=f-g,t[2]=h-m,t[5]=f+g,t[8]=1-c-d}(this,t),this.check()}set(t,e,n,i,r,o,s,a,l){return this[0]=t,this[1]=e,this[2]=n,this[3]=i,this[4]=r,this[5]=o,this[6]=s,this[7]=a,this[8]=l,this.check()}setRowMajor(t,e,n,i,r,o,s,a,l){return this[0]=t,this[1]=i,this[2]=s,this[3]=e,this[4]=r,this[5]=a,this[6]=n,this[7]=o,this[8]=l,this.check()}determinant(){return function(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],l=t[7],c=t[8];return e*(c*o-s*l)+n*(-c*r+s*a)+i*(l*r-o*a)}(this)}transpose(){return function(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]}(this,this),this.check()}invert(){return function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*s-a*c,h=-u*o+a*l,f=c*o-s*l,p=n*d+i*h+r*f;p&&(p=1/p,t[0]=d*p,t[1]=(-u*i+r*c)*p,t[2]=(a*i-r*s)*p,t[3]=h*p,t[4]=(u*n-r*l)*p,t[5]=(-a*n+r*o)*p,t[6]=f*p,t[7]=(-c*n+i*l)*p,t[8]=(s*n-i*o)*p)}(this,this),this.check()}multiplyLeft(t){return gg(this,t,this),this.check()}multiplyRight(t){return gg(this,this,t),this.check()}rotate(t){return function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=Math.sin(n),f=Math.cos(n);t[0]=f*i+h*s,t[1]=f*r+h*a,t[2]=f*o+h*l,t[3]=f*s-h*i,t[4]=f*a-h*r,t[5]=f*l-h*o,t[6]=c,t[7]=u,t[8]=d}(this,this,t),this.check()}scale(t){return Array.isArray(t)?mg(this,this,t):mg(this,this,[t,t]),this.check()}translate(t){return function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=n[0],f=n[1];t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=h*i+f*s+c,t[7]=h*r+f*a+u,t[8]=h*o+f*l+d}(this,this,t),this.check()}transform(t,e){let n;switch(t.length){case 2:n=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t}(e||[-0,-0],t,this);break;case 3:n=mn(e||[-0,-0,-0],t,this);break;case 4:n=xn(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return sn(n,t.length),n}transformVector(t,e){return this.transform(t,e)}transformVector2(t,e){return this.transform(t,e)}transformVector3(t,e){return this.transform(t,e)}}let _g,wg,xg;class Sg extends ln{static get ZERO(){return xg||(xg=new Sg(0,0,0,0),Object.freeze(xg)),xg}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(-0,-0,-0,-0),Qe(t)&&1===arguments.length?this.copy(t):(Ze.debug&&(on(t),on(e),on(n),on(i)),this[0]=t,this[1]=e,this[2]=n,this[3]=i)}set(t,e,n,i){return this[0]=t,this[1]=e,this[2]=n,this[3]=i,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return Ze.debug&&(on(t.x),on(t.y),on(t.z),on(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=on(t)}get w(){return this[3]}set w(t){this[3]=on(t)}transform(t){return gn(this,this,t),this.check()}transformByMatrix3(t){return xn(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2],t[3]=e[3]}(this,this,t),this.check()}transformByQuaternion(t){return yn(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}function Eg(){var t=new un(4);return un!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Tg(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function Pg(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=n[0],l=n[1],c=n[2],u=n[3];return t[0]=i*u+s*a+r*c-o*l,t[1]=r*u+s*l+o*a-i*c,t[2]=o*u+s*c+i*l-r*a,t[3]=s*u-i*a-r*l-o*c,t}function Ag(t,e,n,i){var r,o,s,a,l,c=e[0],u=e[1],d=e[2],h=e[3],f=n[0],p=n[1],g=n[2],m=n[3];return(o=c*f+u*p+d*g+h*m)<0&&(o=-o,f=-f,p=-p,g=-g,m=-m),1-o>cn?(r=Math.acos(o),s=Math.sin(r),a=Math.sin((1-i)*r)/s,l=Math.sin(i*r)/s):(a=1-i,l=i),t[0]=a*c+l*f,t[1]=a*u+l*p,t[2]=a*d+l*g,t[3]=a*h+l*m,t}function Cg(t,e){var n,i=e[0]+e[4]+e[8];if(i>0)n=Math.sqrt(i+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,s=(r+2)%3;n=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*s+s]+1),t[r]=.5*n,n=.5/n,t[3]=(e[3*o+s]-e[3*s+o])*n,t[o]=(e[3*o+r]+e[3*r+o])*n,t[s]=(e[3*s+r]+e[3*r+s])*n}return t}var Ig=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},Mg=Hn,kg=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},Og=function(t,e,n,i){var r=e[0],o=e[1],s=e[2],a=e[3];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=s+i*(n[2]-s),t[3]=a+i*(n[3]-a),t},Lg=Gn,Rg=qn,Fg=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*n+i*i+r*r+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=n*s,t[1]=i*s,t[2]=r*s,t[3]=o*s,t},Bg=function(){var t=dn(),e=hn(1,0,0),n=hn(0,1,0);return function(i,r,o){var s=fn(r,o);return s<-.999999?(pn(t,e,r),bn(t)<1e-6&&pn(t,n,r),function(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o}(t,t),Tg(i,t,Math.PI),i):s>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(pn(t,r,o),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+s,Fg(i,i))}}();(function(){var t=Eg(),e=Eg()})(),function(){var t=function(){var t=new un(9);return un!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}()}();const Ng=[0,0,0,1];class zg extends rn{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(-0,-0,-0,-0),Array.isArray(t)&&1===arguments.length?this.copy(t):this.set(t,e,n,i)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,e,n,i){return this[0]=t,this[1]=e,this[2]=n,this[3]=i,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return Cg(this,t),this.check()}fromAxisRotation(t,e){return Tg(this,t,e),this.check()}identity(){var t;return(t=this)[0]=0,t[1]=0,t[2]=0,t[3]=1,this.check()}setAxisAngle(t,e){return this.fromAxisRotation(t,e)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=on(t)}get y(){return this[1]}set y(t){this[1]=on(t)}get z(){return this[2]}set z(t){this[2]=on(t)}get w(){return this[3]}set w(t){this[3]=on(t)}len(){return Lg(this)}lengthSquared(){return Rg(this)}dot(t){return kg(this,t)}rotationTo(t,e){return Bg(this,t,e),this.check()}add(t){return Ig(this,this,t),this.check()}calculateW(){return function(t,e){var n=e[0],i=e[1],r=e[2];t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r))}(this,this),this.check()}conjugate(){var t,e;return e=this,(t=this)[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],this.check()}invert(){return function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*n+i*i+r*r+o*o,a=s?1/s:0;t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=o*a}(this,this),this.check()}lerp(t,e,n){return void 0===n?this.lerp(this,t,e):(Og(this,t,e,n),this.check())}multiplyRight(t){return Pg(this,this,t),this.check()}multiplyLeft(t){return Pg(this,t,this),this.check()}normalize(){const t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}rotateX(t){return function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),l=Math.cos(n);t[0]=i*l+s*a,t[1]=r*l+o*a,t[2]=o*l-r*a,t[3]=s*l-i*a}(this,this,t),this.check()}rotateY(t){return function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),l=Math.cos(n);t[0]=i*l-o*a,t[1]=r*l+s*a,t[2]=o*l+i*a,t[3]=s*l-r*a}(this,this,t),this.check()}rotateZ(t){return function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),l=Math.cos(n);t[0]=i*l+r*a,t[1]=r*l-i*a,t[2]=o*l+s*a,t[3]=s*l-o*a}(this,this,t),this.check()}scale(t){return Mg(this,this,t),this.check()}slerp(t,e,n){let i,r,o;switch(arguments.length){case 1:({start:i=Ng,target:r,ratio:o}=t);break;case 2:i=this,r=t,o=e;break;default:i=t,r=e,o=n}return Ag(this,i,r,o),this.check()}transformVector4(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Sg;return function(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],l=n[2],c=n[3],u=c*i+a*o-l*r,d=c*r+l*i-s*o,h=c*o+s*r-a*i,f=-s*i-a*r-l*o;t[0]=u*c+f*-s+d*-l-h*-a,t[1]=d*c+f*-a+h*-s-u*-l,t[2]=h*c+f*-l+u*-a-d*-s,t[3]=e[3]}(e,t,this),sn(e,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,e){return this.setAxisAngle(t,e)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}}const Dg=new Tn,jg=new Tn,Ug=new Tn,Vg=new Tn,Wg=new Tn,Hg=new Tn,Gg=new Tn,qg=0,Yg=1,Xg=2,Kg=3,Zg=4,$g=5,Qg=6,Jg=7,tm=8;class em{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0,0,0,0,0,0];s(this,"center",void 0),s(this,"halfAxes",void 0),this.center=(new Tn).from(t),this.halfAxes=new bg(e)}get halfSize(){const t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new Tn(t).len(),new Tn(e).len(),new Tn(n).len()]}get quaternion(){const t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),i=new Tn(t).normalize(),r=new Tn(e).normalize(),o=new Tn(n).normalize();return(new zg).fromMatrix3(new bg([...i,...r,...o]))}fromCenterHalfSizeQuaternion(t,e,n){const i=new zg(n),r=(new bg).fromQuaternion(i);return r[0]=r[0]*e[0],r[1]=r[1]*e[0],r[2]=r[2]*e[0],r[3]=r[3]*e[1],r[4]=r[4]*e[1],r[5]=r[5]*e[1],r[6]=r[6]*e[2],r[7]=r[7]*e[2],r[8]=r[8]*e[2],this.center=(new Tn).from(t),this.halfAxes=r,this}clone(){return new em(this.center,this.halfAxes)}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}getBoundingSphere(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pg;const e=this.halfAxes,n=e.getColumn(0,Ug),i=e.getColumn(1,Vg),r=e.getColumn(2,Wg),o=Dg.copy(n).add(i).add(r);return t.center.copy(this.center),t.radius=o.magnitude(),t}intersectPlane(t){const e=this.center,n=t.normal,i=this.halfAxes,r=n.x,o=n.y,s=n.z,a=Math.abs(r*i[qg]+o*i[Yg]+s*i[Xg])+Math.abs(r*i[Kg]+o*i[Zg]+s*i[$g])+Math.abs(r*i[Qg]+o*i[Jg]+s*i[tm]),l=n.dot(e)+t.distance;return l<=-a?sg:l>=a?lg:ag}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const e=jg.from(t).subtract(this.center),n=this.halfAxes,i=n.getColumn(0,Ug),r=n.getColumn(1,Vg),o=n.getColumn(2,Wg),s=i.magnitude(),a=r.magnitude(),l=o.magnitude();i.normalize(),r.normalize(),o.normalize();let c,u=0;return c=Math.abs(e.dot(i))-s,c>0&&(u+=c*c),c=Math.abs(e.dot(r))-a,c>0&&(u+=c*c),c=Math.abs(e.dot(o))-l,c>0&&(u+=c*c),u}computePlaneDistances(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-0,-0],i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;const o=this.center,s=this.halfAxes,a=s.getColumn(0,Ug),l=s.getColumn(1,Vg),c=s.getColumn(2,Wg),u=Hg.copy(a).add(l).add(c).add(o),d=Gg.copy(u).subtract(t);let h=e.dot(d);return i=Math.min(h,i),r=Math.max(h,r),u.copy(o).add(a).add(l).subtract(c),d.copy(u).subtract(t),h=e.dot(d),i=Math.min(h,i),r=Math.max(h,r),u.copy(o).add(a).subtract(l).add(c),d.copy(u).subtract(t),h=e.dot(d),i=Math.min(h,i),r=Math.max(h,r),u.copy(o).add(a).subtract(l).subtract(c),d.copy(u).subtract(t),h=e.dot(d),i=Math.min(h,i),r=Math.max(h,r),o.copy(u).subtract(a).add(l).add(c),d.copy(u).subtract(t),h=e.dot(d),i=Math.min(h,i),r=Math.max(h,r),o.copy(u).subtract(a).add(l).subtract(c),d.copy(u).subtract(t),h=e.dot(d),i=Math.min(h,i),r=Math.max(h,r),o.copy(u).subtract(a).subtract(l).add(c),d.copy(u).subtract(t),h=e.dot(d),i=Math.min(h,i),r=Math.max(h,r),o.copy(u).subtract(a).subtract(l).subtract(c),d.copy(u).subtract(t),h=e.dot(d),i=Math.min(h,i),r=Math.max(h,r),n[0]=i,n[1]=r,n}transform(t){this.center.transformAsPoint(t);const e=this.halfAxes.getColumn(0,Ug);e.transformAsPoint(t);const n=this.halfAxes.getColumn(1,Vg);n.transformAsPoint(t);const i=this.halfAxes.getColumn(2,Wg);return i.transformAsPoint(t),this.halfAxes=new bg([...e,...n,...i]),this}getTransform(){throw new Error("not implemented")}}const nm=new Tn,im=new Tn;class rm{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,1],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s(this,"normal",void 0),s(this,"distance",void 0),this.normal=new Tn,this.distance=-0,this.fromNormalDistance(t,e)}fromNormalDistance(t,e){return an(Number.isFinite(e)),this.normal.from(t).normalize(),this.distance=e,this}fromPointNormal(t,e){t=nm.from(t),this.normal.from(e).normalize();const n=-this.normal.dot(t);return this.distance=n,this}fromCoefficients(t,e,n,i){return this.normal.set(t,e,n),an(en(this.normal.len(),1)),this.distance=i,this}clone(){return new rm(this.normal,this.distance)}equals(t){return en(this.distance,t.distance)&&en(this.normal,t.normal)}getPointDistance(t){return this.normal.dot(t)+this.distance}transform(t){const e=im.copy(this.normal).transformAsVector(t).normalize(),n=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(n,e)}projectPointOntoPlane(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];t=nm.from(t);const n=this.getPointDistance(t),i=im.copy(this.normal).scale(n);return t.subtract(i).to(e)}}const om=[new Tn([1,0,0]),new Tn([0,1,0]),new Tn([0,0,1])],sm=new Tn,am=new Tn;new rm(new Tn(1,0,0),0);class lm{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];s(this,"planes",void 0),this.planes=t}fromBoundingSphere(t){this.planes.length=2*om.length;const e=t.center,n=t.radius;let i=0;for(const r of om){let t=this.planes[i],o=this.planes[i+1];t||(t=this.planes[i]=new rm),o||(o=this.planes[i+1]=new rm);const s=sm.copy(r).scale(-n).add(e);r.dot(s);t.fromPointNormal(s,r);const a=sm.copy(r).scale(n).add(e),l=am.copy(r).negate();l.dot(a);o.fromPointNormal(a,l),i+=2}return this}computeVisibility(t){let e=lg;for(const n of this.planes){switch(t.intersectPlane(n)){case sg:return sg;case ag:e=ag}}return e}computeVisibilityWithPlaneMask(t,e){if(an(Number.isFinite(e),"parentPlaneMask is required."),e===lm.MASK_OUTSIDE||e===lm.MASK_INSIDE)return e;let n=lm.MASK_INSIDE;const i=this.planes;for(let r=0;r<this.planes.length;++r){const o=r<31?1<<r:0;if(r<31&&0===(e&o))continue;const s=i[r],a=t.intersectPlane(s);if(a===sg)return lm.MASK_OUTSIDE;a===ag&&(n|=o)}return n}}s(lm,"MASK_OUTSIDE",4294967295),s(lm,"MASK_INSIDE",0),s(lm,"MASK_INDETERMINATE",2147483647);new Tn,new Tn,new Tn,new Tn,new Tn;new Tn,new Tn,new Tn,new Tn,new Tn,new Tn,new Tn,new Tn,new Tn,new Tn,new Tn,new Tn,Math.PI;const cm={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI},um=new bg,dm=new bg,hm=new bg,fm=new bg,pm=new bg;function gm(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=cm.EPSILON20;let i=0,r=0;const o=dm,s=hm;o.identity(),s.copy(t);const a=n*function(t){let e=0;for(let n=0;n<9;++n){const i=t[n];e+=i*i}return Math.sqrt(e)}(s);for(;r<10&&vm(s)>a;)bm(s,fm),pm.copy(fm).transpose(),s.multiplyRight(fm),s.multiplyLeft(pm),o.multiplyRight(fm),++i>2&&(++r,i=0);return e.unitary=o.toTarget(e.unitary),e.diagonal=s.toTarget(e.diagonal),e}const mm=[1,0,0],ym=[2,2,1];function vm(t){let e=0;for(let n=0;n<3;++n){const i=t[um.getElementIndex(ym[n],mm[n])];e+=2*i*i}return Math.sqrt(e)}function bm(t,e){const n=cm.EPSILON15;let i=0,r=1;for(let c=0;c<3;++c){const e=Math.abs(t[um.getElementIndex(ym[c],mm[c])]);e>i&&(r=c,i=e)}const o=mm[r],s=ym[r];let a=1,l=0;if(Math.abs(t[um.getElementIndex(s,o)])>n){const e=(t[um.getElementIndex(s,s)]-t[um.getElementIndex(o,o)])/2/t[um.getElementIndex(s,o)];let n;n=e<0?-1/(-e+Math.sqrt(1+e*e)):1/(e+Math.sqrt(1+e*e)),a=1/Math.sqrt(1+n*n),l=n*a}return bg.IDENTITY.to(e),e[um.getElementIndex(o,o)]=e[um.getElementIndex(s,s)]=a,e[um.getElementIndex(s,o)]=l,e[um.getElementIndex(o,s)]=-l,e}const _m=new Tn,wm=new Tn,xm=new Tn,Sm=new Tn,Em=new Tn,Tm=new bg,Pm={diagonal:new bg,unitary:new bg};const Am=512,Cm=3,Im=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],Mm=Im.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),km=Mm.concat([[.25,.5],[.75,.5]]);class Om{constructor(t,e,n){s(this,"x",void 0),s(this,"y",void 0),s(this,"z",void 0),s(this,"childVisible",void 0),s(this,"selected",void 0),s(this,"_children",void 0),this.x=t,this.y=e,this.z=n}get children(){if(!this._children){const t=2*this.x,e=2*this.y,n=this.z+1;this._children=[new Om(t,e,n),new Om(t,e+1,n),new Om(t+1,e,n),new Om(t+1,e+1,n)]}return this._children}update(t){const{viewport:e,cullingVolume:n,elevationBounds:i,minZ:r,maxZ:o,bounds:s,offset:a,project:l}=t,c=this.getBoundingVolume(i,a,l);if(s&&!this.insideBounds(s))return!1;if(n.computeVisibility(c)<0)return!1;if(!this.childVisible){let{z:t}=this;if(t<o&&t>=r){const n=c.distanceTo(e.cameraPosition)*e.scale/e.height;t+=Math.floor(Math.log2(n))}if(t>=o)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const u of this.children)u.update(t);return!0}getSelected(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this.selected&&t.push(this),this._children)for(const e of this._children)e.getSelected(t);return t}insideBounds(t){let[e,n,i,r]=t;const o=Math.pow(2,this.z),s=Am/o;return this.x*s<i&&this.y*s<r&&(this.x+1)*s>e&&(this.y+1)*s>n}getBoundingVolume(t,e,n){if(n){const e=this.z<1?km:this.z<2?Mm:Im,i=[];for(const r of e){const e=Um(this.x+r[0],this.y+r[1],this.z);e[2]=t[0],i.push(n(e)),t[0]!==t[1]&&(e[2]=t[1],i.push(n(e)))}return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new em;if(!t||0===t.length)return e.halfAxes=new bg([0,0,0,0,0,0,0,0,0]),e.center=new Tn,e;const n=t.length,i=new Tn(0,0,0);for(const T of t)i.add(T);const r=1/n;i.multiplyByScalar(r);let o=0,s=0,a=0,l=0,c=0,u=0;for(const T of t){const t=_m.copy(T).subtract(i);o+=t.x*t.x,s+=t.x*t.y,a+=t.x*t.z,l+=t.y*t.y,c+=t.y*t.z,u+=t.z*t.z}o*=r,s*=r,a*=r,l*=r,c*=r,u*=r;const d=Tm;d[0]=o,d[1]=s,d[2]=a,d[3]=s,d[4]=l,d[5]=c,d[6]=a,d[7]=c,d[8]=u;const{unitary:h}=gm(d,Pm),f=e.halfAxes.copy(h);let p=f.getColumn(0,xm),g=f.getColumn(1,Sm),m=f.getColumn(2,Em),y=-Number.MAX_VALUE,v=-Number.MAX_VALUE,b=-Number.MAX_VALUE,_=Number.MAX_VALUE,w=Number.MAX_VALUE,x=Number.MAX_VALUE;for(const T of t)_m.copy(T),y=Math.max(_m.dot(p),y),v=Math.max(_m.dot(g),v),b=Math.max(_m.dot(m),b),_=Math.min(_m.dot(p),_),w=Math.min(_m.dot(g),w),x=Math.min(_m.dot(m),x);p=p.multiplyByScalar(.5*(_+y)),g=g.multiplyByScalar(.5*(w+v)),m=m.multiplyByScalar(.5*(x+b)),e.center.copy(p).add(g).add(m);const S=wm.set(y-_,v-w,b-x).multiplyByScalar(.5),E=new bg([S[0],0,0,0,S[1],0,0,0,S[2]]);return e.halfAxes.multiplyRight(E),e}(i)}const i=Math.pow(2,this.z),r=Am/i,o=this.x*r+e*Am,s=Am-(this.y+1)*r;return new dg([o,s,t[0]],[o+r,s+r,t[1]])}}const Lm=512,Rm=[-1/0,-1/0,1/0,1/0],Fm={type:"object",value:null,validate:(t,e)=>e.optional&&null===t||"string"===typeof t||Array.isArray(t)&&t.every((t=>"string"===typeof t)),equal:(t,e)=>{if(t===e)return!0;if(!Array.isArray(t)||!Array.isArray(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}};function Bm(t,e){const n=[e.transformAsPoint([t[0],t[1]]),e.transformAsPoint([t[2],t[1]]),e.transformAsPoint([t[0],t[3]]),e.transformAsPoint([t[2],t[3]])];return[Math.min(...n.map((t=>t[0]))),Math.min(...n.map((t=>t[1]))),Math.max(...n.map((t=>t[0]))),Math.max(...n.map((t=>t[1])))]}function Nm(t,e){if(!t||!t.length)return null;const{index:n,id:i}=e;if(Array.isArray(t)){t=t[(r=i,Math.abs(r.split("").reduce(((t,e)=>(t<<5)-t+e.charCodeAt(0)|0),0))%t.length)]}var r;let o=t;for(const s of Object.keys(n)){const t=new RegExp("{".concat(s,"}"),"g");o=o.replace(t,String(n[s]))}return Number.isInteger(n.y)&&Number.isInteger(n.z)&&(o=o.replace(/\{-y\}/g,String(Math.pow(2,n.z)-n.y-1))),o}function zm(t){let{viewport:e,z:n=0,cullRect:i}=t;return(e.subViewports||[e]).map((t=>Dm(t,n,i)))}function Dm(t,e,n){if(!Array.isArray(e)){const i=n.x-t.x,r=n.y-t.y,{width:o,height:s}=n,a={targetZ:e},l=t.unproject([i,r],a),c=t.unproject([i+o,r],a),u=t.unproject([i,r+s],a),d=t.unproject([i+o,r+s],a);return[Math.min(l[0],c[0],u[0],d[0]),Math.min(l[1],c[1],u[1],d[1]),Math.max(l[0],c[0],u[0],d[0]),Math.max(l[1],c[1],u[1],d[1])]}const i=Dm(t,e[0],n),r=Dm(t,e[1],n);return[Math.min(i[0],r[0]),Math.min(i[1],r[1]),Math.max(i[2],r[2]),Math.max(i[3],r[3])]}function jm(t,e){return Math.pow(2,t)*Lm/e}function Um(t,e,n){const i=jm(n,Lm),r=t/i*360-180,o=Math.PI-2*Math.PI*e/i;return[r,180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)))]}function Vm(t,e,n,i){const r=jm(n,i);return[t/r*Lm,e/r*Lm]}function Wm(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Lm;if(t.isGeospatial){const[t,r]=Um(e,n,i),[o,s]=Um(e+1,n+1,i);return{west:t,north:r,east:o,south:s}}const[o,s]=Vm(e,n,i,r),[a,l]=Vm(e+1,n+1,i,r);return{left:o,top:s,right:a,bottom:l}}function Hm(t,e,n,i,r){const o=function(t,e,n){let i;if(e&&2===e.length){const[n,r]=e,o=t.getBounds({z:n}),s=t.getBounds({z:r});i=[Math.min(o[0],s[0]),Math.min(o[1],s[1]),Math.max(o[2],s[2]),Math.max(o[3],s[3])]}else i=t.getBounds();return t.isGeospatial?[Math.max(i[0],n[0]),Math.max(i[1],n[1]),Math.min(i[2],n[2]),Math.min(i[3],n[3])]:[Math.max(Math.min(i[0],n[2]),n[0]),Math.max(Math.min(i[1],n[3]),n[1]),Math.min(Math.max(i[2],n[0]),n[2]),Math.min(Math.max(i[3],n[1]),n[3])]}(t,null,i),s=jm(e,n),[a,l,c,u]=function(t,e,n){if(n)return Bm(t,n).map((t=>t*e/Lm));return t.map((t=>t*e/Lm))}(o,s,r),d=[];for(let h=Math.floor(a);h<c;h++)for(let t=Math.floor(l);t<u;t++)d.push({x:h,y:t,z:e});return d}function Gm(t){let{viewport:e,maxZoom:n,minZoom:i,zRange:r,extent:o,tileSize:s=Lm,modelMatrix:a,modelMatrixInverse:l,zoomOffset:c=0}=t,u=e.isGeospatial?Math.round(e.zoom+Math.log2(Lm/s))+c:Math.ceil(e.zoom)+c;if("number"===typeof i&&Number.isFinite(i)&&u<i){if(!o)return[];u=i}"number"===typeof n&&Number.isFinite(n)&&u>n&&(u=n);let d=o;return a&&l&&o&&!e.isGeospatial&&(d=Bm(o,a)),e.isGeospatial?function(t,e,n,i){const r=t instanceof rg&&t.resolution?t.projectPosition:null,o=Object.values(t.getFrustumPlanes()).map((t=>{let{normal:e,distance:n}=t;return new rm(e.clone().negate(),n)})),s=new lm(o),a=t.distanceScales.unitsPerMeter[2],l=n&&n[0]*a||0,c=n&&n[1]*a||0,u=t instanceof Ja&&t.pitch<=60?e:0;if(i){const[t,e,n,r]=i,o=yi([t,r]),s=yi([n,e]);i=[o[0],Am-o[1],s[0],Am-s[1]]}const d=new Om(0,0,0),h={viewport:t,project:r,cullingVolume:s,elevationBounds:[l,c],minZ:u,maxZ:e,bounds:i,offset:0};if(d.update(h),t instanceof Ja&&t.subViewports&&t.subViewports.length>1){for(h.offset=-1;d.update(h)&&!(--h.offset<-Cm););for(h.offset=1;d.update(h)&&!(++h.offset>Cm););}return d.getSelected()}(e,u,r,o):Hm(e,u,s,d||Rm,l)}function qm(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}return!1}const Ym=2,Xm="best-available",Km={[Xm]:function(t){for(const e of t)e.state=0;for(const e of t)e.isSelected&&!$m(e)&&Qm(e);for(const e of t)e.isVisible=Boolean(e.state&Ym)},"no-overlap":function(t){for(const n of t)n.state=0;for(const n of t)n.isSelected&&$m(n);const e=Array.from(t).sort(((t,e)=>t.zoom-e.zoom));for(const n of e)if(n.isVisible=Boolean(n.state&Ym),n.children&&(n.isVisible||1&n.state))for(const t of n.children)t.state=1;else n.isSelected&&Qm(n)},never:()=>{}},Zm={extent:null,tileSize:512,maxZoom:null,minZoom:null,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:6,zoomOffset:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{}};function $m(t){let e=t;for(;e;){if(e.isLoaded||e.content)return e.state|=Ym,!0;e=e.parent}return!1}function Qm(t){for(const e of t.children)e.isLoaded||e.content?e.state|=Ym:Qm(e)}const Jm={TilesetClass:class{constructor(t){s(this,"opts",void 0),s(this,"_requestScheduler",void 0),s(this,"_cache",void 0),s(this,"_dirty",void 0),s(this,"_tiles",void 0),s(this,"_cacheByteSize",void 0),s(this,"_viewport",void 0),s(this,"_zRange",void 0),s(this,"_selectedTiles",void 0),s(this,"_frameNumber",void 0),s(this,"_modelMatrix",void 0),s(this,"_modelMatrixInverse",void 0),s(this,"_maxZoom",void 0),s(this,"_minZoom",void 0),s(this,"onTileLoad",void 0),s(this,"_getCullBounds",function(t){let e,n={};return i=>{for(const r in i)if(!qm(i[r],n[r])){e=t(i),n=i;break}return e}}(zm)),this.opts={...Zm,...t},this.onTileLoad=t=>{var e,n;null===(e=(n=this.opts).onTileLoad)||void 0===e||e.call(n,t),this.opts.maxCacheByteSize&&(this._cacheByteSize+=t.byteLength,this._resizeCache())},this._requestScheduler=new $p({maxRequests:t.maxRequests,throttleRequests:Boolean(t.maxRequests&&t.maxRequests>0)}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new ti,this._modelMatrixInverse=new ti,this.setOptions(t)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return null!==this._selectedTiles&&this._selectedTiles.every((t=>t.isLoaded))}get needsReload(){return null!==this._selectedTiles&&this._selectedTiles.some((t=>t.needsReload))}setOptions(t){Object.assign(this.opts,t),Number.isFinite(t.maxZoom)&&(this._maxZoom=Math.floor(t.maxZoom)),Number.isFinite(t.minZoom)&&(this._minZoom=Math.ceil(t.minZoom))}finalize(){for(const t of this._cache.values())t.isLoading&&t.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const t of this._cache.keys()){const e=this._cache.get(t);this._selectedTiles&&this._selectedTiles.includes(e)?e.setNeedsReload():this._cache.delete(t)}}update(t){let{zRange:e,modelMatrix:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new ti(n),r=!i.equals(this._modelMatrix);if(this._viewport&&t.equals(this._viewport)&&en(this._zRange,e)&&!r)this.needsReload&&(this._selectedTiles=this._selectedTiles.map((t=>this._getTile(t.index,!0))));else{r&&(this._modelMatrixInverse=i.clone().invert(),this._modelMatrix=i),this._viewport=t,this._zRange=e;const n=this.getTileIndices({viewport:t,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:e,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=n.map((t=>this._getTile(t,!0))),this._dirty&&this._rebuildTree()}const o=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),o&&this._frameNumber++,this._frameNumber}isTileVisible(t,e){if(!t.isVisible)return!1;if(e&&this._viewport){const n=this._getCullBounds({viewport:this._viewport,z:this._zRange,cullRect:e}),{bbox:i}=t;for(const[t,e,r,o]of n){let n;if("west"in i)n=i.west<r&&i.east>t&&i.south<o&&i.north>e;else{const s=Math.min(i.top,i.bottom),a=Math.max(i.top,i.bottom);n=i.left<r&&i.right>t&&s<o&&a>e}if(n)return!0}return!1}return!0}getTileIndices(t){let{viewport:e,maxZoom:n,minZoom:i,zRange:r,modelMatrix:o,modelMatrixInverse:s}=t;const{tileSize:a,extent:l,zoomOffset:c}=this.opts;return Gm({viewport:e,maxZoom:n,minZoom:i,zRange:r,tileSize:a,extent:l,modelMatrix:o,modelMatrixInverse:s,zoomOffset:c})}getTileId(t){return"".concat(t.x,"-").concat(t.y,"-").concat(t.z)}getTileZoom(t){return t.z}getTileMetadata(t){const{tileSize:e}=this.opts;return{bbox:Wm(this._viewport,t.x,t.y,t.z,e)}}getParentIndex(t){return{x:Math.floor(t.x/2),y:Math.floor(t.y/2),z:t.z-1}}updateTileStates(){const t=this.opts.refinementStrategy||Xm,e=new Array(this._cache.size);let n=0;for(const i of this._cache.values())e[n++]=i.isVisible,i.isSelected=!1,i.isVisible=!1;for(const i of this._selectedTiles)i.isSelected=!0,i.isVisible=!0;("function"===typeof t?t:Km[t])(Array.from(this._cache.values())),n=0;for(const i of this._cache.values())if(e[n++]!==i.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:t=0}=this.opts,e=[];let n=0;for(const i of this._cache.values())i.isLoading&&(n++,i.isSelected||i.isVisible||e.push(i));for(;t>0&&n>t&&e.length>0;){e.shift().abort(),n--}}_rebuildTree(){const{_cache:t}=this;for(const e of t.values())e.parent=null,e.children&&(e.children.length=0);for(const e of t.values()){const t=this._getNearestAncestor(e);e.parent=t,null!==t&&void 0!==t&&t.children&&t.children.push(e)}}_resizeCache(){const{_cache:t,opts:e}=this,n=e.maxCacheSize||(e.maxCacheByteSize?1/0:5*this.selectedTiles.length),i=e.maxCacheByteSize||1/0;if(t.size>n||this._cacheByteSize>i){for(const[s,a]of t){var r,o;if(!a.isVisible&&!a.isSelected)this._cacheByteSize-=e.maxCacheByteSize?a.byteLength:0,t.delete(s),null===(r=(o=this.opts).onTileUnload)||void 0===r||r.call(o,a);if(t.size<=n&&this._cacheByteSize<=i)break}this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort(((t,e)=>t.zoom-e.zoom)),this._dirty=!1)}_getTile(t,e){const n=this.getTileId(t);let i=this._cache.get(n),r=!1;return!i&&e?(i=new Qp(t),Object.assign(i,this.getTileMetadata(i.index)),Object.assign(i,{id:n,zoom:this.getTileZoom(i.index)}),r=!0,this._cache.set(n,i),this._dirty=!0):i&&i.needsReload&&(r=!0),i&&r&&i.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),i}_getNearestAncestor(t){const{_minZoom:e=0}=this;let n=t.index;for(;this.getTileZoom(n)>e;){n=this.getParentIndex(n);const t=this._getTile(n);if(t)return t}return null}},data:{type:"data",value:[]},dataComparator:Fm.equal,renderSubLayers:{type:"function",value:t=>new qp(t)},getTileData:{type:"function",optional:!0,value:null},onViewportLoad:{type:"function",optional:!0,value:null},onTileLoad:{type:"function",value:t=>{}},onTileUnload:{type:"function",value:t=>{}},onTileError:{type:"function",value:t=>console.error(t)},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:Xm,zRange:null,maxRequests:6,zoomOffset:0};class ty extends Uh{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var t,e;null===(t=this.state)||void 0===t||null===(e=t.tileset)||void 0===e||e.finalize()}get isLoaded(){var t,e,n;return null===(t=this.state)||void 0===t||null===(e=t.tileset)||void 0===e||null===(n=e.selectedTiles)||void 0===n?void 0:n.every((t=>t.isLoaded&&t.layers&&t.layers.every((t=>t.isLoaded))))}shouldUpdateState(t){let{changeFlags:e}=t;return e.somethingChanged}updateState(t){let{changeFlags:e}=t,{tileset:n}=this.state;const i=e.propsOrDataChanged||e.updateTriggersChanged,r=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getTileData);n?i&&(n.setOptions(this._getTilesetOptions()),r?n.reloadAll():this.state.tileset.tiles.forEach((t=>{t.layers=null}))):(n=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:n})),this._updateTileset()}_getTilesetOptions(){const{tileSize:t,maxCacheSize:e,maxCacheByteSize:n,refinementStrategy:i,extent:r,maxZoom:o,minZoom:s,maxRequests:a,zoomOffset:l}=this.props;return{maxCacheSize:e,maxCacheByteSize:n,maxZoom:o,minZoom:s,tileSize:t,refinementStrategy:i,extent:r,maxRequests:a,zoomOffset:l,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const{tileset:t}=this.state,{zRange:e,modelMatrix:n}=this.props,i=t.update(this.context.viewport,{zRange:e,modelMatrix:n}),{isLoaded:r}=t,o=this.state.isLoaded!==r,s=this.state.frameNumber!==i;r&&(o||s)&&this._onViewportLoad(),s&&this.setState({frameNumber:i}),this.state.isLoaded=r}_onViewportLoad(){const{tileset:t}=this.state,{onViewportLoad:e}=this.props;e&&e(t.selectedTiles)}_onTileLoad(t){this.props.onTileLoad(t),t.layers=null,this.setNeedsUpdate()}_onTileError(t,e){this.props.onTileError(t),e.layers=null,this.setNeedsUpdate()}_onTileUnload(t){this.props.onTileUnload(t)}getTileData(t){const{data:e,getTileData:n,fetch:i}=this.props,{signal:r}=t;return t.url="string"===typeof e||Array.isArray(e)?Nm(e,t):null,n?n(t):i&&t.url?i(t.url,{propName:"data",layer:this,signal:r}):null}renderSubLayers(t){return this.props.renderSubLayers(t)}getSubLayerPropsByTile(t){return null}getPickingInfo(t){let{info:e,sourceLayer:n}=t;const i=n.props.tile;return e.picked&&(e.tile=i),e.sourceTile=i,e}_updateAutoHighlight(t){const e=t.sourceTile;if(e&&e.layers)for(const n of e.layers)n.updateAutoHighlight(t)}renderLayers(){return this.state.tileset.tiles.map((t=>{const e=this.getSubLayerPropsByTile(t);if(t.isLoaded||t.content)if(t.layers)e&&t.layers[0]&&Object.keys(e).some((n=>t.layers[0].props[n]!==e[n]))&&(t.layers=t.layers.map((t=>t.clone(e))));else{const n=this.renderSubLayers({...this.props,...this.getSubLayerProps({id:t.id,updateTriggers:this.props.updateTriggers}),data:t.content,_offset:0,tile:t});t.layers=Y(n,Boolean).map((n=>n.clone({tile:t,...e})))}else;return t.layers}))}filterSubLayer(t){let{layer:e,cullRect:n}=t;const{tile:i}=e.props;return this.state.tileset.isTileVisible(i,n)}}s(ty,"defaultProps",Jm),s(ty,"layerName","TileLayer");const ey=(new ti).lookAt({eye:[0,0,1]});function ny(t){let{width:e,height:n,near:i,far:r,padding:o}=t,s=-e/2,a=e/2,l=-n/2,c=n/2;if(o){const{left:t=0,right:i=0,top:r=0,bottom:u=0}=o,d=Je((t+e-i)/2,0,e)-e/2,h=Je((r+n-u)/2,0,n)-n/2;s-=d,a-=d,l+=h,c+=h}return(new ti).ortho({left:s,right:a,bottom:l,top:c,near:i,far:r})}class iy extends Di{constructor(t){const{width:e,height:n,near:i=.1,far:r=1e3,zoom:o=0,target:s=[0,0,0],padding:a=null,flipY:l=!0}=t,c=Array.isArray(o)?o[0]:o,u=Array.isArray(o)?o[1]:o,d=Math.min(c,u),h=Math.pow(2,d);let f;if(c!==u){const t=Math.pow(2,c),e=Math.pow(2,u);f={unitsPerMeter:[t/h,e/h,1],metersPerUnit:[h/t,h/e,1]}}super({...t,longitude:void 0,position:s,viewMatrix:ey.clone().scale([h,h*(l?-1:1),h]),projectionMatrix:ny({width:e||1,height:n||1,padding:a,near:i,far:r}),zoom:d,distanceScales:f})}projectFlat(t){let[e,n]=t;const{unitsPerMeter:i}=this.distanceScales;return[e*i[0],n*i[1]]}unprojectFlat(t){let[e,n]=t;const{metersPerUnit:i}=this.distanceScales;return[e*i[0],n*i[1]]}panByPosition(t,e){const n=Ai(e,this.pixelUnprojectionMatrix),i=Un([],this.projectFlat(t),Vn([],n)),r=Un([],this.center,i);return{target:this.unprojectFlat(r)}}}class ry extends wl{constructor(t){const{width:e,height:n,rotationX:i=0,rotationOrbit:r=0,target:o=[0,0,0],zoom:a=0,minRotationX:l=-90,maxRotationX:c=90,minZoom:u=-1/0,maxZoom:d=1/0,startPanPosition:h,startRotatePos:f,startRotationX:p,startRotationOrbit:g,startZoomPosition:m,startZoom:y}=t;super({width:e,height:n,rotationX:i,rotationOrbit:r,target:o,zoom:a,minRotationX:l,maxRotationX:c,minZoom:u,maxZoom:d},{startPanPosition:h,startRotatePos:f,startRotationX:p,startRotationOrbit:g,startZoomPosition:m,startZoom:y}),s(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart(t){let{pos:e}=t;return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan(t){let{pos:e,startPosition:n}=t;const i=this.getState().startPanPosition||n;if(!i)return this;const r=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(r)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart(t){let{pos:e}=t;return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate(t){let{pos:e,deltaAngleX:n=0,deltaAngleY:i=0}=t;const{startRotatePos:r,startRotationX:o,startRotationOrbit:s}=this.getState(),{width:a,height:l}=this.getViewportProps();if(!r||void 0===o||void 0===s)return this;let c;if(e){let t=(e[0]-r[0])/a;(o<-90||o>90)&&(t*=-1),c={rotationX:o+180*((e[1]-r[1])/l),rotationOrbit:s+180*t}}else c={rotationX:o+i,rotationOrbit:s+n};return this._getUpdatedState(c)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(t){const e=t.getViewportProps(),n={...this.getViewportProps()},{rotationOrbit:i}=n;return Math.abs(i-e.rotationOrbit)>180&&(n.rotationOrbit=i<0?i+360:i-360),n}zoomStart(t){let{pos:e}=t;return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom(t){let{pos:e,startPos:n,scale:i}=t,{startZoom:r,startZoomPosition:o}=this.getState();if(o||(r=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const s=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport({...this.getViewportProps(),zoom:s});return this._getUpdatedState({zoom:s,...a.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}zoomOut(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}moveLeft(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([-t,0])}moveRight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([t,0])}moveUp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([0,-t])}moveDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([0,t])}rotateLeft(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-t})}rotateRight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+t})}rotateUp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-t})}rotateDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+t})}_unproject(t){const e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_calculateNewZoom(t){let{scale:e,startZoom:n}=t;const{maxZoom:i,minZoom:r}=this.getViewportProps();void 0===n&&(n=this.getViewportProps().zoom);return Je(n+Math.log2(e),r,i)}_panFromCenter(t){const{width:e,height:n,target:i}=this.getViewportProps();return this.pan({startPosition:i,pos:[e/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}applyConstraints(t){const{maxZoom:e,minZoom:n,zoom:i,maxRotationX:r,minRotationX:o,rotationOrbit:s}=t;return t.zoom=Array.isArray(i)?[Je(i[0],n,e),Je(i[1],n,e)]:Je(i,n,e),t.rotationX=Je(t.rotationX,o,r),(s<-180||s>180)&&(t.rotationOrbit=function(t,e){const n=t%e;return n<0?e+n:n}(s+180,360)-180),t}}class oy extends ry{constructor(t){super(t),s(this,"zoomAxis",void 0),this.zoomAxis=t.zoomAxis||"all"}_calculateNewZoom(t){let{scale:e,startZoom:n}=t;const{maxZoom:i,minZoom:r}=this.getViewportProps();void 0===n&&(n=this.getViewportProps().zoom);let o=Math.log2(e);if(Array.isArray(n)){let[t,e]=n;switch(this.zoomAxis){case"X":t=Je(t+o,r,i);break;case"Y":e=Je(e+o,r,i);break;default:let n=Math.min(t+o,e+o);n<r&&(o+=r-n),n=Math.max(t+o,e+o),n>i&&(o+=i-n),t+=o,e+=o}return[t,e]}return Je(n+o,r,i)}}class sy extends _l{constructor(){super(...arguments),s(this,"ControllerState",oy),s(this,"transition",{transitionDuration:300,transitionInterpolator:new ul(["target","zoom"])}),s(this,"dragMode","pan")}_onPanRotate(){return!1}}class ay extends Qa{get ViewportType(){return iy}get ControllerType(){return sy}}s(ay,"displayName","OrthographicView");const ly=9728,cy=10240,uy=10241;function dy(){return dy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},dy.apply(this,arguments)}function hy(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}function fy(t){var e,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=fy(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}const py=function(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=fy(t))&&(i&&(i+=" "),i+=e);return i};function gy(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const i={};return Object.keys(t).forEach((r=>{i[r]=t[r].reduce(((t,i)=>{if(i){const r=e(i);""!==r&&t.push(r),n&&n[i]&&t.push(n[i])}return t}),[]).join(" ")})),i}let my=0;const yy=e["useId".toString()];function vy(e){if(void 0!==yy){const t=yy();return null!=e?e:t}return function(e){const[n,i]=t.useState(e),r=e||n;return t.useEffect((()=>{null==n&&(my+=1,i("mui-".concat(my)))}),[n]),r}(e)}function by(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}var _y=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,wy=by((function(t){return _y.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91}));var xy=function(){function t(t){var e=this;this._insertTag=function(t){var n;n=0===e.tags.length?e.insertionPoint?e.insertionPoint.nextSibling:e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,n),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{n.insertRule(t,n.cssRules.length)}catch(i){0}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}(),Sy=Math.abs,Ey=String.fromCharCode,Ty=Object.assign;function Py(t){return t.trim()}function Ay(t,e,n){return t.replace(e,n)}function Cy(t,e){return t.indexOf(e)}function Iy(t,e){return 0|t.charCodeAt(e)}function My(t,e,n){return t.slice(e,n)}function ky(t){return t.length}function Oy(t){return t.length}function Ly(t,e){return e.push(t),t}var Ry=1,Fy=1,By=0,Ny=0,zy=0,Dy="";function jy(t,e,n,i,r,o,s){return{value:t,root:e,parent:n,type:i,props:r,children:o,line:Ry,column:Fy,length:s,return:""}}function Uy(t,e){return Ty(jy("",null,null,"",null,null,0),t,{length:-t.length},e)}function Vy(){return zy=Ny>0?Iy(Dy,--Ny):0,Fy--,10===zy&&(Fy=1,Ry--),zy}function Wy(){return zy=Ny<By?Iy(Dy,Ny++):0,Fy++,10===zy&&(Fy=1,Ry++),zy}function Hy(){return Iy(Dy,Ny)}function Gy(){return Ny}function qy(t,e){return My(Dy,t,e)}function Yy(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Xy(t){return Ry=Fy=1,By=ky(Dy=t),Ny=0,[]}function Ky(t){return Dy="",t}function Zy(t){return Py(qy(Ny-1,Jy(91===t?t+2:40===t?t+1:t)))}function $y(t){for(;(zy=Hy())&&zy<33;)Wy();return Yy(t)>2||Yy(zy)>3?"":" "}function Qy(t,e){for(;--e&&Wy()&&!(zy<48||zy>102||zy>57&&zy<65||zy>70&&zy<97););return qy(t,Gy()+(e<6&&32==Hy()&&32==Wy()))}function Jy(t){for(;Wy();)switch(zy){case t:return Ny;case 34:case 39:34!==t&&39!==t&&Jy(zy);break;case 40:41===t&&Jy(t);break;case 92:Wy()}return Ny}function tv(t,e){for(;Wy()&&t+zy!==57&&(t+zy!==84||47!==Hy()););return"/*"+qy(e,Ny-1)+"*"+Ey(47===t?t:Wy())}function ev(t){for(;!Yy(Hy());)Wy();return qy(t,Ny)}var nv="-ms-",iv="-moz-",rv="-webkit-",ov="comm",sv="rule",av="decl",lv="@keyframes";function cv(t,e){for(var n="",i=Oy(t),r=0;r<i;r++)n+=e(t[r],r,t,e)||"";return n}function uv(t,e,n,i){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case av:return t.return=t.return||t.value;case ov:return"";case lv:return t.return=t.value+"{"+cv(t.children,i)+"}";case sv:t.value=t.props.join(",")}return ky(n=cv(t.children,i))?t.return=t.value+"{"+n+"}":""}function dv(t){return Ky(hv("",null,null,null,[""],t=Xy(t),0,[0],t))}function hv(t,e,n,i,r,o,s,a,l){for(var c=0,u=0,d=s,h=0,f=0,p=0,g=1,m=1,y=1,v=0,b="",_=r,w=o,x=i,S=b;m;)switch(p=v,v=Wy()){case 40:if(108!=p&&58==Iy(S,d-1)){-1!=Cy(S+=Ay(Zy(v),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:S+=Zy(v);break;case 9:case 10:case 13:case 32:S+=$y(p);break;case 92:S+=Qy(Gy()-1,7);continue;case 47:switch(Hy()){case 42:case 47:Ly(pv(tv(Wy(),Gy()),e,n),l);break;default:S+="/"}break;case 123*g:a[c++]=ky(S)*y;case 125*g:case 59:case 0:switch(v){case 0:case 125:m=0;case 59+u:-1==y&&(S=Ay(S,/\f/g,"")),f>0&&ky(S)-d&&Ly(f>32?gv(S+";",i,n,d-1):gv(Ay(S," ","")+";",i,n,d-2),l);break;case 59:S+=";";default:if(Ly(x=fv(S,e,n,c,u,r,a,b,_=[],w=[],d),o),123===v)if(0===u)hv(S,e,x,x,_,o,d,a,w);else switch(99===h&&110===Iy(S,3)?100:h){case 100:case 108:case 109:case 115:hv(t,x,x,i&&Ly(fv(t,x,x,0,0,r,a,b,r,_=[],d),w),r,w,d,a,i?_:w);break;default:hv(S,x,x,x,[""],w,0,a,w)}}c=u=f=0,g=y=1,b=S="",d=s;break;case 58:d=1+ky(S),f=p;default:if(g<1)if(123==v)--g;else if(125==v&&0==g++&&125==Vy())continue;switch(S+=Ey(v),v*g){case 38:y=u>0?1:(S+="\f",-1);break;case 44:a[c++]=(ky(S)-1)*y,y=1;break;case 64:45===Hy()&&(S+=Zy(Wy())),h=Hy(),u=d=ky(b=S+=ev(Gy())),v++;break;case 45:45===p&&2==ky(S)&&(g=0)}}return o}function fv(t,e,n,i,r,o,s,a,l,c,u){for(var d=r-1,h=0===r?o:[""],f=Oy(h),p=0,g=0,m=0;p<i;++p)for(var y=0,v=My(t,d+1,d=Sy(g=s[p])),b=t;y<f;++y)(b=Py(g>0?h[y]+" "+v:Ay(v,/&\f/g,h[y])))&&(l[m++]=b);return jy(t,e,n,0===r?sv:a,l,c,u)}function pv(t,e,n){return jy(t,e,n,ov,Ey(zy),My(t,2,-2),0)}function gv(t,e,n,i){return jy(t,e,n,av,My(t,0,i),My(t,i+1,-1),i)}var mv=function(t,e,n){for(var i=0,r=0;i=r,r=Hy(),38===i&&12===r&&(e[n]=1),!Yy(r);)Wy();return qy(t,Ny)},yv=function(t,e){return Ky(function(t,e){var n=-1,i=44;do{switch(Yy(i)){case 0:38===i&&12===Hy()&&(e[n]=1),t[n]+=mv(Ny-1,e,n);break;case 2:t[n]+=Zy(i);break;case 4:if(44===i){t[++n]=58===Hy()?"&\f":"",e[n]=t[n].length;break}default:t[n]+=Ey(i)}}while(i=Wy());return t}(Xy(t),e))},vv=new WeakMap,bv=function(t){if("rule"===t.type&&t.parent&&!(t.length<1)){for(var e=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||vv.get(n))&&!i){vv.set(t,!0);for(var r=[],o=yv(e,r),s=n.props,a=0,l=0;a<o.length;a++)for(var c=0;c<s.length;c++,l++)t.props[l]=r[a]?o[a].replace(/&\f/g,s[c]):s[c]+" "+o[a]}}},_v=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}};function wv(t,e){switch(function(t,e){return 45^Iy(t,0)?(((e<<2^Iy(t,0))<<2^Iy(t,1))<<2^Iy(t,2))<<2^Iy(t,3):0}(t,e)){case 5103:return rv+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return rv+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return rv+t+iv+t+nv+t+t;case 6828:case 4268:return rv+t+nv+t+t;case 6165:return rv+t+nv+"flex-"+t+t;case 5187:return rv+t+Ay(t,/(\w+).+(:[^]+)/,rv+"box-$1$2"+nv+"flex-$1$2")+t;case 5443:return rv+t+nv+"flex-item-"+Ay(t,/flex-|-self/,"")+t;case 4675:return rv+t+nv+"flex-line-pack"+Ay(t,/align-content|flex-|-self/,"")+t;case 5548:return rv+t+nv+Ay(t,"shrink","negative")+t;case 5292:return rv+t+nv+Ay(t,"basis","preferred-size")+t;case 6060:return rv+"box-"+Ay(t,"-grow","")+rv+t+nv+Ay(t,"grow","positive")+t;case 4554:return rv+Ay(t,/([^-])(transform)/g,"$1"+rv+"$2")+t;case 6187:return Ay(Ay(Ay(t,/(zoom-|grab)/,rv+"$1"),/(image-set)/,rv+"$1"),t,"")+t;case 5495:case 3959:return Ay(t,/(image-set\([^]*)/,rv+"$1$`$1");case 4968:return Ay(Ay(t,/(.+:)(flex-)?(.*)/,rv+"box-pack:$3"+nv+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+rv+t+t;case 4095:case 3583:case 4068:case 2532:return Ay(t,/(.+)-inline(.+)/,rv+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ky(t)-1-e>6)switch(Iy(t,e+1)){case 109:if(45!==Iy(t,e+4))break;case 102:return Ay(t,/(.+:)(.+)-([^]+)/,"$1"+rv+"$2-$3$1"+iv+(108==Iy(t,e+3)?"$3":"$2-$3"))+t;case 115:return~Cy(t,"stretch")?wv(Ay(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==Iy(t,e+1))break;case 6444:switch(Iy(t,ky(t)-3-(~Cy(t,"!important")&&10))){case 107:return Ay(t,":",":"+rv)+t;case 101:return Ay(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+rv+(45===Iy(t,14)?"inline-":"")+"box$3$1"+rv+"$2$3$1"+nv+"$2box$3")+t}break;case 5936:switch(Iy(t,e+11)){case 114:return rv+t+nv+Ay(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return rv+t+nv+Ay(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return rv+t+nv+Ay(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return rv+t+nv+t+t}return t}var xv=[function(t,e,n,i){if(t.length>-1&&!t.return)switch(t.type){case av:t.return=wv(t.value,t.length);break;case lv:return cv([Uy(t,{value:Ay(t.value,"@","@"+rv)})],i);case sv:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t,e){return(t=e.exec(t))?t[0]:t}(e,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return cv([Uy(t,{props:[Ay(e,/:(read-\w+)/,":-moz-$1")]})],i);case"::placeholder":return cv([Uy(t,{props:[Ay(e,/:(plac\w+)/,":"+rv+"input-$1")]}),Uy(t,{props:[Ay(e,/:(plac\w+)/,":-moz-$1")]}),Uy(t,{props:[Ay(e,/:(plac\w+)/,nv+"input-$1")]})],i)}return""}))}}],Sv=function(t){var e=t.key;if("css"===e){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var i=t.stylisPlugins||xv;var r,o,s={},a=[];r=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),n=1;n<e.length;n++)s[e[n]]=!0;a.push(t)}));var l,c,u=[uv,(c=function(t){l.insert(t)},function(t){t.root||(t=t.return)&&c(t)})],d=function(t){var e=Oy(t);return function(n,i,r,o){for(var s="",a=0;a<e;a++)s+=t[a](n,i,r,o)||"";return s}}([bv,_v].concat(i,u));o=function(t,e,n,i){l=n,function(t){cv(dv(t),d)}(t?t+"{"+e.styles+"}":e.styles),i&&(h.inserted[e.name]=!0)};var h={key:e,sheet:new xy({key:e,container:r,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:o};return h.sheet.hydrate(a),h};var Ev={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Tv=/[A-Z]|^ms/g,Pv=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Av=function(t){return 45===t.charCodeAt(1)},Cv=function(t){return null!=t&&"boolean"!==typeof t},Iv=by((function(t){return Av(t)?t:t.replace(Tv,"-$&").toLowerCase()})),Mv=function(t,e){switch(t){case"animation":case"animationName":if("string"===typeof e)return e.replace(Pv,(function(t,e,n){return Ov={name:e,styles:n,next:Ov},e}))}return 1===Ev[t]||Av(t)||"number"!==typeof e||0===e?e:e+"px"};function kv(t,e,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Ov={name:n.name,styles:n.styles,next:Ov},n.name;if(void 0!==n.styles){var i=n.next;if(void 0!==i)for(;void 0!==i;)Ov={name:i.name,styles:i.styles,next:Ov},i=i.next;return n.styles+";"}return function(t,e,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=kv(t,e,n[r])+";";else for(var o in n){var s=n[o];if("object"!==typeof s)null!=e&&void 0!==e[s]?i+=o+"{"+e[s]+"}":Cv(s)&&(i+=Iv(o)+":"+Mv(o,s)+";");else if(!Array.isArray(s)||"string"!==typeof s[0]||null!=e&&void 0!==e[s[0]]){var a=kv(t,e,s);switch(o){case"animation":case"animationName":i+=Iv(o)+":"+a+";";break;default:i+=o+"{"+a+"}"}}else for(var l=0;l<s.length;l++)Cv(s[l])&&(i+=Iv(o)+":"+Mv(o,s[l])+";")}return i}(t,e,n);case"function":if(void 0!==t){var r=Ov,o=n(t);return Ov=r,kv(t,e,o)}}if(null==e)return n;var s=e[n];return void 0!==s?s:n}var Ov,Lv=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Rv=function(t,e,n){if(1===t.length&&"object"===typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var i=!0,r="";Ov=void 0;var o=t[0];null==o||void 0===o.raw?(i=!1,r+=kv(n,e,o)):r+=o[0];for(var s=1;s<t.length;s++)r+=kv(n,e,t[s]),i&&(r+=o[s]);Lv.lastIndex=0;for(var a,l="";null!==(a=Lv.exec(r));)l+="-"+a[1];var c=function(t){for(var e,n=0,i=0,r=t.length;r>=4;++i,r-=4)e=1540483477*(65535&(e=255&t.charCodeAt(i)|(255&t.charCodeAt(++i))<<8|(255&t.charCodeAt(++i))<<16|(255&t.charCodeAt(++i))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(r){case 3:n^=(255&t.charCodeAt(i+2))<<16;case 2:n^=(255&t.charCodeAt(i+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(i)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(r)+l;return{name:c,styles:r,next:Ov}},Fv=!!e.useInsertionEffect&&e.useInsertionEffect,Bv=Fv||function(t){return t()},Nv=Fv||t.useLayoutEffect,zv=t.createContext("undefined"!==typeof HTMLElement?Sv({key:"css"}):null);zv.Provider;var Dv=function(e){return(0,t.forwardRef)((function(n,i){var r=(0,t.useContext)(zv);return e(n,r,i)}))};var jv=t.createContext({});var Uv=function(t,e,n){var i=t.key+"-"+e.name;!1===n&&void 0===t.registered[i]&&(t.registered[i]=e.styles)},Vv=function(t,e,n){Uv(t,e,n);var i=t.key+"-"+e.name;if(void 0===t.inserted[e.name]){var r=e;do{t.insert(e===r?"."+i:"",r,t.sheet,!0),r=r.next}while(void 0!==r)}},Wv=wy,Hv=function(t){return"theme"!==t},Gv=function(t){return"string"===typeof t&&t.charCodeAt(0)>96?Wv:Hv},qv=function(t,e,n){var i;if(e){var r=e.shouldForwardProp;i=t.__emotion_forwardProp&&r?function(e){return t.__emotion_forwardProp(e)&&r(e)}:r}return"function"!==typeof i&&n&&(i=t.__emotion_forwardProp),i},Yv=function(t){var e=t.cache,n=t.serialized,i=t.isStringTag;return Uv(e,n,i),Bv((function(){return Vv(e,n,i)})),null},Xv=function e(n,i){var r,o,s=n.__emotion_real===n,a=s&&n.__emotion_base||n;void 0!==i&&(r=i.label,o=i.target);var l=qv(n,i,s),c=l||Gv(a),u=!c("as");return function(){var d=arguments,h=s&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==r&&h.push("label:"+r+";"),null==d[0]||void 0===d[0].raw)h.push.apply(h,d);else{0,h.push(d[0][0]);for(var f=d.length,p=1;p<f;p++)h.push(d[p],d[0][p])}var g=Dv((function(e,n,i){var r=u&&e.as||a,s="",d=[],f=e;if(null==e.theme){for(var p in f={},e)f[p]=e[p];f.theme=t.useContext(jv)}"string"===typeof e.className?s=function(t,e,n){var i="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]+";"):i+=n+" "})),i}(n.registered,d,e.className):null!=e.className&&(s=e.className+" ");var g=Rv(h.concat(d),n.registered,f);s+=n.key+"-"+g.name,void 0!==o&&(s+=" "+o);var m=u&&void 0===l?Gv(r):c,y={};for(var v in e)u&&"as"===v||m(v)&&(y[v]=e[v]);return y.className=s,y.ref=i,t.createElement(t.Fragment,null,t.createElement(Yv,{cache:n,serialized:g,isStringTag:"string"===typeof r}),t.createElement(r,y))}));return g.displayName=void 0!==r?r:"Styled("+("string"===typeof a?a:a.displayName||a.name||"Component")+")",g.defaultProps=n.defaultProps,g.__emotion_real=g,g.__emotion_base=a,g.__emotion_styles=h,g.__emotion_forwardProp=l,Object.defineProperty(g,"toString",{value:function(){return"."+o}}),g.withComponent=function(t,n){return e(t,dy({},i,n,{shouldForwardProp:qv(g,n,!0)})).apply(void 0,h)},g}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(t){Xv[t]=Xv(t)}));function Kv(t){return null!==t&&"object"===typeof t&&t.constructor===Object}function Zv(t){if(!Kv(t))return t;const e={};return Object.keys(t).forEach((n=>{e[n]=Zv(t[n])})),e}function $v(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const i=n.clone?dy({},t):t;return Kv(t)&&Kv(e)&&Object.keys(e).forEach((r=>{"__proto__"!==r&&(Kv(e[r])&&r in t&&Kv(t[r])?i[r]=$v(t[r],e[r],n):n.clone?i[r]=Kv(e[r])?Zv(e[r]):e[r]:i[r]=e[r])})),i}const Qv=["values","unit","step"],Jv=t=>{const e=Object.keys(t).map((e=>({key:e,val:t[e]})))||[];return e.sort(((t,e)=>t.val-e.val)),e.reduce(((t,e)=>dy({},t,{[e.key]:e.val})),{})};const tb={borderRadius:4},eb={xs:0,sm:600,md:900,lg:1200,xl:1536},nb={keys:["xs","sm","md","lg","xl"],up:t=>"@media (min-width:".concat(eb[t],"px)")};function ib(t,e,n){const i=t.theme||{};if(Array.isArray(e)){const t=i.breakpoints||nb;return e.reduce(((i,r,o)=>(i[t.up(t.keys[o])]=n(e[o]),i)),{})}if("object"===typeof e){const t=i.breakpoints||nb;return Object.keys(e).reduce(((i,r)=>{if(-1!==Object.keys(t.values||eb).indexOf(r)){i[t.up(r)]=n(e[r],r)}else{const t=r;i[t]=e[t]}return i}),{})}return n(e)}function rb(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e;return(null==(e=t.keys)?void 0:e.reduce(((e,n)=>(e[t.up(n)]={},e)),{}))||{}}function ob(t,e){return t.reduce(((t,e)=>{const n=t[e];return(!n||0===Object.keys(n).length)&&delete t[e],t}),e)}function sb(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}function ab(t){if("string"!==typeof t)throw new Error(sb(7));return t.charAt(0).toUpperCase()+t.slice(1)}function lb(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||"string"!==typeof e)return null;if(t&&t.vars&&n){const n="vars.".concat(e).split(".").reduce(((t,e)=>t&&t[e]?t[e]:null),t);if(null!=n)return n}return e.split(".").reduce(((t,e)=>t&&null!=t[e]?t[e]:null),t)}function cb(t,e,n){let i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return i="function"===typeof t?t(n):Array.isArray(t)?t[n]||r:lb(t,n)||r,e&&(i=e(i,r,t)),i}const ub=function(t){const{prop:e,cssProperty:n=t.prop,themeKey:i,transform:r}=t,o=t=>{if(null==t[e])return null;const o=t[e],s=lb(t.theme,i)||{};return ib(t,o,(t=>{let i=cb(s,r,t);return t===i&&"string"===typeof t&&(i=cb(s,r,"".concat(e).concat("default"===t?"":ab(t)),t)),!1===n?i:{[n]:i}}))};return o.propTypes={},o.filterProps=[e],o};const db=function(t,e){return e?$v(t,e,{clone:!1}):t};const hb={m:"margin",p:"padding"},fb={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},pb={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},gb=function(t){const e={};return n=>(void 0===e[n]&&(e[n]=t(n)),e[n])}((t=>{if(t.length>2){if(!pb[t])return[t];t=pb[t]}const[e,n]=t.split(""),i=hb[e],r=fb[n]||"";return Array.isArray(r)?r.map((t=>i+t)):[i+r]})),mb=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],yb=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],vb=[...mb,...yb];function bb(t,e,n,i){var r;const o=null!=(r=lb(t,e,!1))?r:n;return"number"===typeof o?t=>"string"===typeof t?t:o*t:Array.isArray(o)?t=>"string"===typeof t?t:o[t]:"function"===typeof o?o:()=>{}}function _b(t){return bb(t,"spacing",8)}function wb(t,e){if("string"===typeof e||null==e)return e;const n=t(Math.abs(e));return e>=0?n:"number"===typeof n?-n:"-".concat(n)}function xb(t,e,n,i){if(-1===e.indexOf(n))return null;const r=function(t,e){return n=>t.reduce(((t,i)=>(t[i]=wb(e,n),t)),{})}(gb(n),i);return ib(t,t[n],r)}function Sb(t,e){const n=_b(t.theme);return Object.keys(t).map((i=>xb(t,e,i,n))).reduce(db,{})}function Eb(t){return Sb(t,mb)}function Tb(t){return Sb(t,yb)}function Pb(t){return Sb(t,vb)}Eb.propTypes={},Eb.filterProps=mb,Tb.propTypes={},Tb.filterProps=yb,Pb.propTypes={},Pb.filterProps=vb;const Ab=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=e.reduce(((t,e)=>(e.filterProps.forEach((n=>{t[n]=e})),t)),{}),r=t=>Object.keys(t).reduce(((e,n)=>i[n]?db(e,i[n](t)):e),{});return r.propTypes={},r.filterProps=e.reduce(((t,e)=>t.concat(e.filterProps)),[]),r};function Cb(t){return"number"!==typeof t?t:"".concat(t,"px solid")}function Ib(t,e){return ub({prop:t,themeKey:"borders",transform:e})}const Mb=Ib("border",Cb),kb=Ib("borderTop",Cb),Ob=Ib("borderRight",Cb),Lb=Ib("borderBottom",Cb),Rb=Ib("borderLeft",Cb),Fb=Ib("borderColor"),Bb=Ib("borderTopColor"),Nb=Ib("borderRightColor"),zb=Ib("borderBottomColor"),Db=Ib("borderLeftColor"),jb=Ib("outline",Cb),Ub=Ib("outlineColor"),Vb=t=>{if(void 0!==t.borderRadius&&null!==t.borderRadius){const e=bb(t.theme,"shape.borderRadius",4),n=t=>({borderRadius:wb(e,t)});return ib(t,t.borderRadius,n)}return null};Vb.propTypes={},Vb.filterProps=["borderRadius"];Ab(Mb,kb,Ob,Lb,Rb,Fb,Bb,Nb,zb,Db,Vb,jb,Ub);const Wb=t=>{if(void 0!==t.gap&&null!==t.gap){const e=bb(t.theme,"spacing",8),n=t=>({gap:wb(e,t)});return ib(t,t.gap,n)}return null};Wb.propTypes={},Wb.filterProps=["gap"];const Hb=t=>{if(void 0!==t.columnGap&&null!==t.columnGap){const e=bb(t.theme,"spacing",8),n=t=>({columnGap:wb(e,t)});return ib(t,t.columnGap,n)}return null};Hb.propTypes={},Hb.filterProps=["columnGap"];const Gb=t=>{if(void 0!==t.rowGap&&null!==t.rowGap){const e=bb(t.theme,"spacing",8),n=t=>({rowGap:wb(e,t)});return ib(t,t.rowGap,n)}return null};Gb.propTypes={},Gb.filterProps=["rowGap"];Ab(Wb,Hb,Gb,ub({prop:"gridColumn"}),ub({prop:"gridRow"}),ub({prop:"gridAutoFlow"}),ub({prop:"gridAutoColumns"}),ub({prop:"gridAutoRows"}),ub({prop:"gridTemplateColumns"}),ub({prop:"gridTemplateRows"}),ub({prop:"gridTemplateAreas"}),ub({prop:"gridArea"}));function qb(t,e){return"grey"===e?e:t}Ab(ub({prop:"color",themeKey:"palette",transform:qb}),ub({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:qb}),ub({prop:"backgroundColor",themeKey:"palette",transform:qb}));function Yb(t){return t<=1&&0!==t?"".concat(100*t,"%"):t}const Xb=ub({prop:"width",transform:Yb}),Kb=t=>{if(void 0!==t.maxWidth&&null!==t.maxWidth){const e=e=>{var n,i;const r=(null==(n=t.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[e])||eb[e];return r?"px"!==(null==(i=t.theme)||null==(i=i.breakpoints)?void 0:i.unit)?{maxWidth:"".concat(r).concat(t.theme.breakpoints.unit)}:{maxWidth:r}:{maxWidth:Yb(e)}};return ib(t,t.maxWidth,e)}return null};Kb.filterProps=["maxWidth"];const Zb=ub({prop:"minWidth",transform:Yb}),$b=ub({prop:"height",transform:Yb}),Qb=ub({prop:"maxHeight",transform:Yb}),Jb=ub({prop:"minHeight",transform:Yb}),t_=(ub({prop:"size",cssProperty:"width",transform:Yb}),ub({prop:"size",cssProperty:"height",transform:Yb}),Ab(Xb,Kb,Zb,$b,Qb,Jb,ub({prop:"boxSizing"})),{border:{themeKey:"borders",transform:Cb},borderTop:{themeKey:"borders",transform:Cb},borderRight:{themeKey:"borders",transform:Cb},borderBottom:{themeKey:"borders",transform:Cb},borderLeft:{themeKey:"borders",transform:Cb},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Cb},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Vb},color:{themeKey:"palette",transform:qb},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:qb},backgroundColor:{themeKey:"palette",transform:qb},p:{style:Tb},pt:{style:Tb},pr:{style:Tb},pb:{style:Tb},pl:{style:Tb},px:{style:Tb},py:{style:Tb},padding:{style:Tb},paddingTop:{style:Tb},paddingRight:{style:Tb},paddingBottom:{style:Tb},paddingLeft:{style:Tb},paddingX:{style:Tb},paddingY:{style:Tb},paddingInline:{style:Tb},paddingInlineStart:{style:Tb},paddingInlineEnd:{style:Tb},paddingBlock:{style:Tb},paddingBlockStart:{style:Tb},paddingBlockEnd:{style:Tb},m:{style:Eb},mt:{style:Eb},mr:{style:Eb},mb:{style:Eb},ml:{style:Eb},mx:{style:Eb},my:{style:Eb},margin:{style:Eb},marginTop:{style:Eb},marginRight:{style:Eb},marginBottom:{style:Eb},marginLeft:{style:Eb},marginX:{style:Eb},marginY:{style:Eb},marginInline:{style:Eb},marginInlineStart:{style:Eb},marginInlineEnd:{style:Eb},marginBlock:{style:Eb},marginBlockStart:{style:Eb},marginBlockEnd:{style:Eb},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Wb},rowGap:{style:Gb},columnGap:{style:Hb},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Yb},maxWidth:{style:Kb},minWidth:{transform:Yb},height:{transform:Yb},maxHeight:{transform:Yb},minHeight:{transform:Yb},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});const e_=function(){function t(t,e,n,i){const r={[t]:e,theme:n},o=i[t];if(!o)return{[t]:e};const{cssProperty:s=t,themeKey:a,transform:l,style:c}=o;if(null==e)return null;if("typography"===a&&"inherit"===e)return{[t]:e};const u=lb(n,a)||{};if(c)return c(r);return ib(r,e,(e=>{let n=cb(u,l,e);return e===n&&"string"===typeof e&&(n=cb(u,l,"".concat(t).concat("default"===e?"":ab(e)),e)),!1===s?n:{[s]:n}}))}return function e(n){var i;const{sx:r,theme:o={}}=n||{};if(!r)return null;const s=null!=(i=o.unstable_sxConfig)?i:t_;function a(n){let i=n;if("function"===typeof n)i=n(o);else if("object"!==typeof n)return n;if(!i)return null;const r=rb(o.breakpoints),a=Object.keys(r);let l=r;return Object.keys(i).forEach((n=>{const r=(a=i[n],c=o,"function"===typeof a?a(c):a);var a,c;if(null!==r&&void 0!==r)if("object"===typeof r)if(s[n])l=db(l,t(n,r,o,s));else{const t=ib({theme:o},r,(t=>({[n]:t})));!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=e.reduce(((t,e)=>t.concat(Object.keys(e))),[]),r=new Set(i);return e.every((t=>r.size===Object.keys(t).length))}(t,r)?l=db(l,t):l[n]=e({sx:r,theme:o})}else l=db(l,t(n,r,o,s))})),ob(a,l)}return Array.isArray(r)?r.map(a):a(r)}}();e_.filterProps=["sx"];const n_=e_,i_=["breakpoints","palette","spacing","shape"];const r_=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:e={},palette:n={},spacing:i,shape:r={}}=t,o=hy(t,i_),s=function(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:i=5}=t,r=hy(t,Qv),o=Jv(e),s=Object.keys(o);function a(t){const i="number"===typeof e[t]?e[t]:t;return"@media (min-width:".concat(i).concat(n,")")}function l(t){const r="number"===typeof e[t]?e[t]:t;return"@media (max-width:".concat(r-i/100).concat(n,")")}function c(t,r){const o=s.indexOf(r);return"@media (min-width:".concat("number"===typeof e[t]?e[t]:t).concat(n,") and ")+"(max-width:".concat((-1!==o&&"number"===typeof e[s[o]]?e[s[o]]:r)-i/100).concat(n,")")}return dy({keys:s,values:o,up:a,down:l,between:c,only:function(t){return s.indexOf(t)+1<s.length?c(t,s[s.indexOf(t)+1]):a(t)},not:function(t){const e=s.indexOf(t);return 0===e?a(s[1]):e===s.length-1?l(s[e]):c(t,s[s.indexOf(t)+1]).replace("@media","@media not all and")},unit:n},r)}(e),a=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(t.mui)return t;const e=_b({spacing:t}),n=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(0===n.length?[1]:n).map((t=>{const n=e(t);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(i);let l=$v({breakpoints:s,direction:"ltr",components:{},palette:dy({mode:"light"},n),spacing:a,shape:dy({},tb,r)},o);for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];return l=u.reduce(((t,e)=>$v(t,e)),l),l.unstable_sxConfig=dy({},t_,null==o?void 0:o.unstable_sxConfig),l.unstable_sx=function(t){return n_({sx:t,theme:this})},l},o_=["variant"];function s_(t){return 0===t.length}function a_(t){const{variant:e}=t,n=hy(t,o_);let i=e||"";return Object.keys(n).sort().forEach((e=>{i+="color"===e?s_(i)?t[e]:ab(t[e]):"".concat(s_(i)?e:ab(e)).concat(ab(t[e].toString()))})),i}const l_=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];const c_=t=>{const e={};return t&&t.forEach((t=>{const n=a_(t.props);e[n]=t.style})),e},u_=(t,e,n)=>{const{ownerState:i={}}=t,r=[];return n&&n.forEach((n=>{let o=!0;Object.keys(n.props).forEach((e=>{i[e]!==n.props[e]&&t[e]!==n.props[e]&&(o=!1)})),o&&r.push(e[a_(n.props)])})),r};function d_(t){return"ownerState"!==t&&"theme"!==t&&"sx"!==t&&"as"!==t}const h_=r_(),f_=t=>t?t.charAt(0).toLowerCase()+t.slice(1):t;function p_(t){let{defaultTheme:e,theme:n,themeId:i}=t;return r=n,0===Object.keys(r).length?e:n[i]||n;var r}function g_(t){return t?(e,n)=>n[t]:null}const m_=t=>{let{styledArg:e,props:n,defaultTheme:i,themeId:r}=t;const o=e(dy({},n,{theme:p_(dy({},n,{defaultTheme:i,themeId:r}))}));let s;if(o&&o.variants&&(s=o.variants,delete o.variants),s){return[o,...u_(n,c_(s),s)]}return o};function y_(t,e){return dy({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}function v_(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)}function b_(t){if(t.type)return t;if("#"===t.charAt(0))return b_(function(t){t=t.slice(1);const e=new RegExp(".{1,".concat(t.length>=6?2:1,"}"),"g");let n=t.match(e);return n&&1===n[0].length&&(n=n.map((t=>t+t))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((t,e)=>e<3?parseInt(t,16):Math.round(parseInt(t,16)/255*1e3)/1e3)).join(", "),")"):""}(t));const e=t.indexOf("("),n=t.substring(0,e);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(sb(9,t));let i,r=t.substring(e+1,t.length-1);if("color"===n){if(r=r.split(" "),i=r.shift(),4===r.length&&"/"===r[3].charAt(0)&&(r[3]=r[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error(sb(10,i))}else r=r.split(",");return r=r.map((t=>parseFloat(t))),{type:n,values:r,colorSpace:i}}function __(t){const{type:e,colorSpace:n}=t;let{values:i}=t;return-1!==e.indexOf("rgb")?i=i.map(((t,e)=>e<3?parseInt(t,10):t)):-1!==e.indexOf("hsl")&&(i[1]="".concat(i[1],"%"),i[2]="".concat(i[2],"%")),i=-1!==e.indexOf("color")?"".concat(n," ").concat(i.join(" ")):"".concat(i.join(", ")),"".concat(e,"(").concat(i,")")}function w_(t){let e="hsl"===(t=b_(t)).type||"hsla"===t.type?b_(function(t){t=b_(t);const{values:e}=t,n=e[0],i=e[1]/100,r=e[2]/100,o=i*Math.min(r,1-r),s=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+n/30)%12;return r-o*Math.max(Math.min(e-3,9-e,1),-1)};let a="rgb";const l=[Math.round(255*s(0)),Math.round(255*s(8)),Math.round(255*s(4))];return"hsla"===t.type&&(a+="a",l.push(e[3])),__({type:a,values:l})}(t)).values:t.values;return e=e.map((e=>("color"!==t.type&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4))),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function x_(t,e){return t=b_(t),e=v_(e),"rgb"!==t.type&&"hsl"!==t.type||(t.type+="a"),"color"===t.type?t.values[3]="/".concat(e):t.values[3]=e,__(t)}function S_(t,e){if(t=b_(t),e=v_(e),-1!==t.type.indexOf("hsl"))t.values[2]*=1-e;else if(-1!==t.type.indexOf("rgb")||-1!==t.type.indexOf("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return __(t)}function E_(t,e){if(t=b_(t),e=v_(e),-1!==t.type.indexOf("hsl"))t.values[2]+=(100-t.values[2])*e;else if(-1!==t.type.indexOf("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(-1!==t.type.indexOf("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return __(t)}const T_={black:"#000",white:"#fff"},P_={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},A_={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},C_={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},I_={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},M_={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},k_={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},O_={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},L_=["mode","contrastThreshold","tonalOffset"],R_={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:T_.white,default:T_.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},F_={text:{primary:T_.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:T_.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function B_(t,e,n,i){const r=i.light||i,o=i.dark||1.5*i;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:"light"===e?t.light=E_(t.main,r):"dark"===e&&(t.dark=S_(t.main,o)))}function N_(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:i=.2}=t,r=hy(t,L_),o=t.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:M_[200],light:M_[50],dark:M_[400]}:{main:M_[700],light:M_[400],dark:M_[800]}}(e),s=t.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:A_[200],light:A_[50],dark:A_[400]}:{main:A_[500],light:A_[300],dark:A_[700]}}(e),a=t.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:C_[500],light:C_[300],dark:C_[700]}:{main:C_[700],light:C_[400],dark:C_[800]}}(e),l=t.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:k_[400],light:k_[300],dark:k_[700]}:{main:k_[700],light:k_[500],dark:k_[900]}}(e),c=t.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:O_[400],light:O_[300],dark:O_[700]}:{main:O_[800],light:O_[500],dark:O_[900]}}(e),u=t.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:I_[400],light:I_[300],dark:I_[700]}:{main:"#ed6c02",light:I_[500],dark:I_[900]}}(e);function d(t){const e=function(t,e){const n=w_(t),i=w_(e);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}(t,F_.text.primary)>=n?F_.text.primary:R_.text.primary;return e}const h=t=>{let{color:e,name:n,mainShade:r=500,lightShade:o=300,darkShade:s=700}=t;if(e=dy({},e),!e.main&&e[r]&&(e.main=e[r]),!e.hasOwnProperty("main"))throw new Error(sb(11,n?" (".concat(n,")"):"",r));if("string"!==typeof e.main)throw new Error(sb(12,n?" (".concat(n,")"):"",JSON.stringify(e.main)));return B_(e,"light",o,i),B_(e,"dark",s,i),e.contrastText||(e.contrastText=d(e.main)),e},f={dark:F_,light:R_};return $v(dy({common:dy({},T_),mode:e,primary:h({color:o,name:"primary"}),secondary:h({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:a,name:"error"}),warning:h({color:u,name:"warning"}),info:h({color:l,name:"info"}),success:h({color:c,name:"success"}),grey:P_,contrastThreshold:n,getContrastText:d,augmentColor:h,tonalOffset:i},f[e]),r)}const z_=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const D_={textTransform:"uppercase"},j_='"Roboto", "Helvetica", "Arial", sans-serif';function U_(t,e){const n="function"===typeof e?e(t):e,{fontFamily:i=j_,fontSize:r=14,fontWeightLight:o=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:d}=n,h=hy(n,z_);const f=r/14,p=d||(t=>"".concat(t/c*f,"rem")),g=(t,e,n,r,o)=>{return dy({fontFamily:i,fontWeight:t,fontSize:p(e),lineHeight:n},i===j_?{letterSpacing:"".concat((s=r/e,Math.round(1e5*s)/1e5),"em")}:{},o,u);var s},m={h1:g(o,96,1.167,-1.5),h2:g(o,60,1.2,-.5),h3:g(s,48,1.167,0),h4:g(s,34,1.235,.25),h5:g(s,24,1.334,0),h6:g(a,20,1.6,.15),subtitle1:g(s,16,1.75,.15),subtitle2:g(a,14,1.57,.1),body1:g(s,16,1.5,.15),body2:g(s,14,1.43,.15),button:g(a,14,1.75,.4,D_),caption:g(s,12,1.66,.4),overline:g(s,12,2.66,1,D_),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return $v(dy({htmlFontSize:c,pxToRem:p,fontFamily:i,fontSize:r,fontWeightLight:o,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:l},m),h,{clone:!1})}function V_(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const W_=["none",V_(0,2,1,-1,0,1,1,0,0,1,3,0),V_(0,3,1,-2,0,2,2,0,0,1,5,0),V_(0,3,3,-2,0,3,4,0,0,1,8,0),V_(0,2,4,-1,0,4,5,0,0,1,10,0),V_(0,3,5,-1,0,5,8,0,0,1,14,0),V_(0,3,5,-1,0,6,10,0,0,1,18,0),V_(0,4,5,-2,0,7,10,1,0,2,16,1),V_(0,5,5,-3,0,8,10,1,0,3,14,2),V_(0,5,6,-3,0,9,12,1,0,3,16,2),V_(0,6,6,-3,0,10,14,1,0,4,18,3),V_(0,6,7,-4,0,11,15,1,0,4,20,3),V_(0,7,8,-4,0,12,17,2,0,5,22,4),V_(0,7,8,-4,0,13,19,2,0,5,24,4),V_(0,7,9,-4,0,14,21,2,0,5,26,4),V_(0,8,9,-5,0,15,22,2,0,6,28,5),V_(0,8,10,-5,0,16,24,2,0,6,30,5),V_(0,8,11,-5,0,17,26,2,0,6,32,5),V_(0,9,11,-5,0,18,28,2,0,7,34,6),V_(0,9,12,-6,0,19,29,2,0,7,36,6),V_(0,10,13,-6,0,20,31,3,0,8,38,7),V_(0,10,13,-6,0,21,33,3,0,8,40,7),V_(0,10,14,-6,0,22,35,3,0,8,42,7),V_(0,11,14,-7,0,23,36,3,0,9,44,8),V_(0,11,15,-7,0,24,38,3,0,9,46,8)],H_=["duration","easing","delay"],G_={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},q_={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Y_(t){return"".concat(Math.round(t),"ms")}function X_(t){if(!t)return 0;const e=t/36;return Math.round(10*(4+15*e**.25+e/5))}function K_(t){const e=dy({},G_,t.easing),n=dy({},q_,t.duration);return dy({getAutoHeightDuration:X_,create:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:r=n.standard,easing:o=e.easeInOut,delay:s=0}=i;hy(i,H_);return(Array.isArray(t)?t:[t]).map((t=>"".concat(t," ").concat("string"===typeof r?r:Y_(r)," ").concat(o," ").concat("string"===typeof s?s:Y_(s)))).join(",")}},t,{easing:e,duration:n})}const Z_={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},$_=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Q_(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:e={},palette:n={},transitions:i={},typography:r={}}=t,o=hy(t,$_);if(t.vars)throw new Error(sb(18));const s=N_(n),a=r_(t);let l=$v(a,{mixins:y_(a.breakpoints,e),palette:s,shadows:W_.slice(),typography:U_(s,r),transitions:K_(i),zIndex:dy({},Z_)});l=$v(l,o);for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];return l=u.reduce(((t,e)=>$v(t,e)),l),l.unstable_sxConfig=dy({},t_,null==o?void 0:o.unstable_sxConfig),l.unstable_sx=function(t){return n_({sx:t,theme:this})},l}const J_=Q_(),tw="$$material",ew=t=>d_(t)&&"classes"!==t,nw=d_,iw=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:e,defaultTheme:n=h_,rootShouldForwardProp:i=d_,slotShouldForwardProp:r=d_}=t,o=t=>n_(dy({},t,{theme:p_(dy({},t,{defaultTheme:n,themeId:e}))}));return o.__mui_systemSx=!0,function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};((t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))})(t,(t=>t.filter((t=>!(null!=t&&t.__mui_systemSx)))));const{name:a,slot:l,skipVariantsResolver:c,skipSx:u,overridesResolver:d=g_(f_(l))}=s,h=hy(s,l_),f=void 0!==c?c:l&&"Root"!==l&&"root"!==l||!1,p=u||!1;let g=d_;"Root"===l||"root"===l?g=i:l?g=r:function(t){return"string"===typeof t&&t.charCodeAt(0)>96}(t)&&(g=void 0);const m=function(t,e){return Xv(t,e)}(t,dy({shouldForwardProp:g,label:undefined},h)),y=function(i){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];const c=s?s.map((t=>{if("function"===typeof t&&t.__emotion_real!==t)return i=>m_({styledArg:t,props:i,defaultTheme:n,themeId:e});if(Kv(t)){let e,n=t;return t&&t.variants&&(e=t.variants,delete n.variants,n=n=>{let i=t;return u_(n,c_(e),e).forEach((t=>{i=$v(i,t)})),i}),n}return t})):[];let u=i;if(Kv(i)){let t;i&&i.variants&&(t=i.variants,delete u.variants,u=e=>{let n=i;return u_(e,c_(t),t).forEach((t=>{n=$v(n,t)})),n})}else"function"===typeof i&&i.__emotion_real!==i&&(u=t=>m_({styledArg:i,props:t,defaultTheme:n,themeId:e}));a&&d&&c.push((t=>{const i=p_(dy({},t,{defaultTheme:n,themeId:e})),r=((t,e)=>e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null)(a,i);if(r){const e={};return Object.entries(r).forEach((n=>{let[r,o]=n;e[r]="function"===typeof o?o(dy({},t,{theme:i})):o})),d(t,e)}return null})),a&&!f&&c.push((t=>{const i=p_(dy({},t,{defaultTheme:n,themeId:e}));return((t,e,n,i)=>{var r;const o=null==n||null==(r=n.components)||null==(r=r[i])?void 0:r.variants;return u_(t,e,o)})(t,((t,e)=>{let n=[];return e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants),c_(n)})(a,i),i,a)})),p||c.push(o);const h=c.length-s.length;if(Array.isArray(i)&&h>0){const t=new Array(h).fill("");u=[...i,...t],u.raw=[...i.raw,...t]}const g=m(u,...c);return t.muiName&&(g.muiName=t.muiName),g};return m.withConfig&&(y.withConfig=m.withConfig),y}}({themeId:tw,defaultTheme:J_,rootShouldForwardProp:ew}),rw=iw;function ow(t,e){const n=dy({},e);return Object.keys(t).forEach((i=>{if(i.toString().match(/^(components|slots)$/))n[i]=dy({},t[i],n[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const r=t[i]||{},o=e[i];n[i]={},o&&Object.keys(o)?r&&Object.keys(r)?(n[i]=dy({},o),Object.keys(r).forEach((t=>{n[i][t]=ow(r[t],o[t])}))):n[i]=o:n[i]=r}else void 0===n[i]&&(n[i]=t[i])})),n}function sw(t){const{theme:e,name:n,props:i}=t;return e&&e.components&&e.components[n]&&e.components[n].defaultProps?ow(e.components[n].defaultProps,i):i}const aw=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const n=t.useContext(jv);return n&&(i=n,0!==Object.keys(i).length)?n:e;var i},lw=r_();const cw=function(){return aw(arguments.length>0&&void 0!==arguments[0]?arguments[0]:lw)};function uw(t){let{props:e,name:n}=t;return function(t){let{props:e,name:n,defaultTheme:i,themeId:r}=t,o=cw(i);return r&&(o=o[r]||o),sw({theme:o,name:n,props:e})}({props:e,name:n,defaultTheme:J_,themeId:tw})}function dw(t,e){"function"===typeof t?t(e):t&&(t.current=e)}function hw(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.useMemo((()=>n.every((t=>null==t))?null:t=>{n.forEach((e=>{dw(e,t)}))}),n)}function fw(t){return t&&t.ownerDocument||document}function pw(t){return fw(t).defaultView||window}const gw="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;function mw(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function i(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];clearTimeout(e),e=setTimeout((()=>{t.apply(this,r)}),n)}return i.clear=()=>{clearTimeout(e)},i}var yw=n(184);const vw=["onChange","maxRows","minRows","style","value"];function bw(t){return parseInt(t,10)||0}const _w={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function ww(t){return void 0===t||null===t||0===Object.keys(t).length||0===t.outerHeightStyle&&!t.overflow}const xw=t.forwardRef((function(e,n){const{onChange:r,maxRows:o,minRows:s=1,style:a,value:l}=e,c=hy(e,vw),{current:u}=t.useRef(null!=l),d=t.useRef(null),h=hw(n,d),f=t.useRef(null),p=t.useRef(0),[g,m]=t.useState({outerHeightStyle:0}),y=t.useCallback((()=>{const t=d.current,n=pw(t).getComputedStyle(t);if("0px"===n.width)return{outerHeightStyle:0};const i=f.current;i.style.width=n.width,i.value=t.value||e.placeholder||"x","\n"===i.value.slice(-1)&&(i.value+=" ");const r=n.boxSizing,a=bw(n.paddingBottom)+bw(n.paddingTop),l=bw(n.borderBottomWidth)+bw(n.borderTopWidth),c=i.scrollHeight;i.value="x";const u=i.scrollHeight;let h=c;s&&(h=Math.max(Number(s)*u,h)),o&&(h=Math.min(Number(o)*u,h)),h=Math.max(h,u);return{outerHeightStyle:h+("border-box"===r?a+l:0),overflow:Math.abs(h-c)<=1}}),[o,s,e.placeholder]),v=(t,e)=>{const{outerHeightStyle:n,overflow:i}=e;return p.current<20&&(n>0&&Math.abs((t.outerHeightStyle||0)-n)>1||t.overflow!==i)?(p.current+=1,{overflow:i,outerHeightStyle:n}):t},b=t.useCallback((()=>{const t=y();ww(t)||m((e=>v(e,t)))}),[y]);gw((()=>{const t=()=>{p.current=0,(()=>{const t=y();ww(t)||i.flushSync((()=>{m((e=>v(e,t)))}))})()};let e;const n=mw(t),r=d.current,o=pw(r);let s;return o.addEventListener("resize",n),"undefined"!==typeof ResizeObserver&&(s=new ResizeObserver(t),s.observe(r)),()=>{n.clear(),cancelAnimationFrame(e),o.removeEventListener("resize",n),s&&s.disconnect()}}),[y]),gw((()=>{b()})),t.useEffect((()=>{p.current=0}),[l]);return(0,yw.jsxs)(t.Fragment,{children:[(0,yw.jsx)("textarea",dy({value:l,onChange:t=>{p.current=0,u||b(),r&&r(t)},ref:h,rows:s,style:dy({height:g.outerHeightStyle,overflow:g.overflow?"hidden":void 0},a)},c)),(0,yw.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:f,tabIndex:-1,style:dy({},_w,a,{paddingTop:0,paddingBottom:0})})]})}));function Sw(t){return"string"===typeof t}function Ew(t){let{props:e,states:n,muiFormControl:i}=t;return n.reduce(((t,n)=>(t[n]=e[n],i&&"undefined"===typeof e[n]&&(t[n]=i[n]),t)),{})}const Tw=t.createContext(void 0);function Pw(){return t.useContext(Tw)}const Aw=ab,Cw=hw,Iw=gw;var Mw=n(110),kw=n.n(Mw),Ow=Dv((function(e,n){var i=e.styles,r=Rv([i],void 0,t.useContext(jv)),o=t.useRef();return Nv((function(){var t=n.key+"-global",e=new n.sheet.constructor({key:t,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),i=!1,s=document.querySelector('style[data-emotion="'+t+" "+r.name+'"]');return n.sheet.tags.length&&(e.before=n.sheet.tags[0]),null!==s&&(i=!0,s.setAttribute("data-emotion",t),e.hydrate([s])),o.current=[e,i],function(){e.flush()}}),[n]),Nv((function(){var t=o.current,e=t[0];if(t[1])t[1]=!1;else{if(void 0!==r.next&&Vv(n,r.next,!0),e.tags.length){var i=e.tags[e.tags.length-1].nextElementSibling;e.before=i,e.flush()}n.insert("",r,e,!1)}}),[n,r.name]),null}));function Lw(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Rv(e)}var Rw=function(){var t=Lw.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function Fw(t){const{styles:e,defaultTheme:n={}}=t,i="function"===typeof e?t=>{return e(void 0===(i=t)||null===i||0===Object.keys(i).length?n:t);var i}:e;return(0,yw.jsx)(Ow,{styles:i})}const Bw=function(t){let{styles:e,themeId:n,defaultTheme:i={}}=t;const r=cw(i),o="function"===typeof e?e(n&&r[n]||r):e;return(0,yw.jsx)(Fw,{styles:o})};const Nw=function(t){return(0,yw.jsx)(Bw,dy({},t,{defaultTheme:J_,themeId:tw}))};function zw(t){return null!=t&&!(Array.isArray(t)&&0===t.length)}function Dw(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&(zw(t.value)&&""!==t.value||e&&zw(t.defaultValue)&&""!==t.defaultValue)}const jw=t=>t,Uw=(()=>{let t=jw;return{configure(e){t=e},generate:e=>t(e),reset(){t=jw}}})(),Vw={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Ww(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const i=Vw[e];return i?"".concat(n,"-").concat(i):"".concat(Uw.generate(t),"-").concat(e)}function Hw(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const i={};return e.forEach((e=>{i[e]=Ww(t,e,n)})),i}function Gw(t){return Ww("MuiInputBase",t)}const qw=Hw("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Yw=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Xw=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,"small"===n.size&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e["color".concat(Aw(n.color))],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},Kw=(t,e)=>{const{ownerState:n}=t;return[e.input,"small"===n.size&&e.inputSizeSmall,n.multiline&&e.inputMultiline,"search"===n.type&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},Zw=rw("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Xw})((t=>{let{theme:e,ownerState:n}=t;return dy({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",["&.".concat(qw.disabled)]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},n.multiline&&dy({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),$w=rw("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Kw})((t=>{let{theme:e,ownerState:n}=t;const i="light"===e.palette.mode,r=dy({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),o={opacity:"0 !important"},s=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5};return dy({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},["label[data-shrink=false] + .".concat(qw.formControl," &")]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},["&.".concat(qw.disabled)]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})})),Qw=(0,yw.jsx)(Nw,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Jw=t.forwardRef((function(e,n){var i;const r=uw({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:s,autoFocus:a,className:l,components:c={},componentsProps:u={},defaultValue:d,disabled:h,disableInjectingGlobalStyles:f,endAdornment:p,fullWidth:g=!1,id:m,inputComponent:y="input",inputProps:v={},inputRef:b,maxRows:_,minRows:w,multiline:x=!1,name:S,onBlur:E,onChange:T,onClick:P,onFocus:A,onKeyDown:C,onKeyUp:I,placeholder:M,readOnly:k,renderSuffix:O,rows:L,slotProps:R={},slots:F={},startAdornment:B,type:N="text",value:z}=r,D=hy(r,Yw),j=null!=v.value?v.value:z,{current:U}=t.useRef(null!=j),V=t.useRef(),W=t.useCallback((t=>{0}),[]),H=Cw(V,b,v.ref,W),[G,q]=t.useState(!1),Y=Pw();const X=Ew({props:r,muiFormControl:Y,states:["color","disabled","error","hiddenLabel","size","required","filled"]});X.focused=Y?Y.focused:G,t.useEffect((()=>{!Y&&h&&G&&(q(!1),E&&E())}),[Y,h,G,E]);const K=Y&&Y.onFilled,Z=Y&&Y.onEmpty,$=t.useCallback((t=>{Dw(t)?K&&K():Z&&Z()}),[K,Z]);Iw((()=>{U&&$({value:j})}),[j,$,U]);t.useEffect((()=>{$(V.current)}),[]);let Q=y,J=v;x&&"input"===Q&&(J=dy(L?{type:void 0,minRows:L,maxRows:L}:{type:void 0,maxRows:_,minRows:w},J),Q=xw);t.useEffect((()=>{Y&&Y.setAdornedStart(Boolean(B))}),[Y,B]);const tt=dy({},r,{color:X.color||"primary",disabled:X.disabled,endAdornment:p,error:X.error,focused:X.focused,formControl:Y,fullWidth:g,hiddenLabel:X.hiddenLabel,multiline:x,size:X.size,startAdornment:B,type:N}),et=(t=>{const{classes:e,color:n,disabled:i,error:r,endAdornment:o,focused:s,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:h,startAdornment:f,type:p}=t;return gy({root:["root","color".concat(Aw(n)),i&&"disabled",r&&"error",l&&"fullWidth",s&&"focused",a&&"formControl",h&&"medium"!==h&&"size".concat(Aw(h)),u&&"multiline",f&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",i&&"disabled","search"===p&&"inputTypeSearch",u&&"inputMultiline","small"===h&&"inputSizeSmall",c&&"inputHiddenLabel",f&&"inputAdornedStart",o&&"inputAdornedEnd",d&&"readOnly"]},Gw,e)})(tt),nt=F.root||c.Root||Zw,it=R.root||u.root||{},rt=F.input||c.Input||$w;return J=dy({},J,null!=(i=R.input)?i:u.input),(0,yw.jsxs)(t.Fragment,{children:[!f&&Qw,(0,yw.jsxs)(nt,dy({},it,!Sw(nt)&&{ownerState:dy({},tt,it.ownerState)},{ref:n,onClick:t=>{V.current&&t.currentTarget===t.target&&V.current.focus(),P&&P(t)}},D,{className:py(et.root,it.className,l,k&&"MuiInputBase-readOnly"),children:[B,(0,yw.jsx)(Tw.Provider,{value:null,children:(0,yw.jsx)(rt,dy({ownerState:tt,"aria-invalid":X.error,"aria-describedby":o,autoComplete:s,autoFocus:a,defaultValue:d,disabled:X.disabled,id:m,onAnimationStart:t=>{$("mui-auto-fill-cancel"===t.animationName?V.current:{value:"x"})},name:S,placeholder:M,readOnly:k,required:X.required,rows:L,value:j,onKeyDown:C,onKeyUp:I,type:N},J,!Sw(rt)&&{as:Q,ownerState:dy({},tt,J.ownerState)},{ref:H,className:py(et.input,J.className,k&&"MuiInputBase-readOnly"),onBlur:t=>{E&&E(t),v.onBlur&&v.onBlur(t),Y&&Y.onBlur?Y.onBlur(t):q(!1)},onChange:function(t){if(!U){const e=t.target||V.current;if(null==e)throw new Error(sb(1));$({value:e.value})}for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];v.onChange&&v.onChange(t,...n),T&&T(t,...n)},onFocus:t=>{X.disabled?t.stopPropagation():(A&&A(t),v.onFocus&&v.onFocus(t),Y&&Y.onFocus?Y.onFocus(t):q(!0))}}))}),p,O?O(dy({},X,{startAdornment:B})):null]}))]})})),tx=Jw;function ex(t){return Ww("MuiInput",t)}const nx=dy({},qw,Hw("MuiInput",["root","underline","input"])),ix=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],rx=rw(Zw,{shouldForwardProp:t=>ew(t)||"classes"===t,name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...Xw(t,e),!n.disableUnderline&&e.underline]}})((t=>{let{theme:e,ownerState:n}=t;let i="light"===e.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(i="rgba(".concat(e.vars.palette.common.onBackgroundChannel," / ").concat(e.vars.opacity.inputUnderline,")")),dy({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&{"&:after":{borderBottom:"2px solid ".concat((e.vars||e).palette[n.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(nx.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(nx.error)]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:"1px solid ".concat(i),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(nx.disabled,", .").concat(nx.error,"):before")]:{borderBottom:"2px solid ".concat((e.vars||e).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(i)}},["&.".concat(nx.disabled,":before")]:{borderBottomStyle:"dotted"}})})),ox=rw($w,{name:"MuiInput",slot:"Input",overridesResolver:Kw})({}),sx=t.forwardRef((function(t,e){var n,i,r,o;const s=uw({props:t,name:"MuiInput"}),{disableUnderline:a,components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:d="input",multiline:h=!1,slotProps:f,slots:p={},type:g="text"}=s,m=hy(s,ix),y=(t=>{const{classes:e,disableUnderline:n}=t;return dy({},e,gy({root:["root",!n&&"underline"],input:["input"]},ex,e))})(s),v={root:{ownerState:{disableUnderline:a}}},b=(null!=f?f:c)?$v(null!=f?f:c,v):v,_=null!=(n=null!=(i=p.root)?i:l.Root)?n:rx,w=null!=(r=null!=(o=p.input)?o:l.Input)?r:ox;return(0,yw.jsx)(tx,dy({slots:{root:_,input:w},slotProps:b,fullWidth:u,inputComponent:d,multiline:h,ref:e,type:g},m,{classes:y}))}));sx.muiName="Input";const ax=sx;function lx(t){return Ww("MuiFilledInput",t)}const cx=dy({},qw,Hw("MuiFilledInput",["root","underline","input"])),ux=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],dx=rw(Zw,{shouldForwardProp:t=>ew(t)||"classes"===t,name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...Xw(t,e),!n.disableUnderline&&e.underline]}})((t=>{let{theme:e,ownerState:n}=t;var i;const r="light"===e.palette.mode,o=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",l=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return dy({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s}},["&.".concat(cx.focused)]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s},["&.".concat(cx.disabled)]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:l}},!n.disableUnderline&&{"&:after":{borderBottom:"2px solid ".concat(null==(i=(e.vars||e).palette[n.color||"primary"])?void 0:i.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(cx.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(cx.error)]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:"1px solid ".concat(e.vars?"rgba(".concat(e.vars.palette.common.onBackgroundChannel," / ").concat(e.vars.opacity.inputUnderline,")"):o),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(cx.disabled,", .").concat(cx.error,"):before")]:{borderBottom:"1px solid ".concat((e.vars||e).palette.text.primary)},["&.".concat(cx.disabled,":before")]:{borderBottomStyle:"dotted"}},n.startAdornment&&{paddingLeft:12},n.endAdornment&&{paddingRight:12},n.multiline&&dy({padding:"25px 12px 8px"},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9}))})),hx=rw($w,{name:"MuiFilledInput",slot:"Input",overridesResolver:Kw})((t=>{let{theme:e,ownerState:n}=t;return dy({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})})),fx=t.forwardRef((function(t,e){var n,i,r,o;const s=uw({props:t,name:"MuiFilledInput"}),{components:a={},componentsProps:l,fullWidth:c=!1,inputComponent:u="input",multiline:d=!1,slotProps:h,slots:f={},type:p="text"}=s,g=hy(s,ux),m=dy({},s,{fullWidth:c,inputComponent:u,multiline:d,type:p}),y=(t=>{const{classes:e,disableUnderline:n}=t;return dy({},e,gy({root:["root",!n&&"underline"],input:["input"]},lx,e))})(s),v={root:{ownerState:m},input:{ownerState:m}},b=(null!=h?h:l)?$v(v,null!=h?h:l):v,_=null!=(n=null!=(i=f.root)?i:a.Root)?n:dx,w=null!=(r=null!=(o=f.input)?o:a.Input)?r:hx;return(0,yw.jsx)(tx,dy({slots:{root:_,input:w},componentsProps:b,fullWidth:c,inputComponent:u,multiline:d,ref:e,type:p},g,{classes:y}))}));fx.muiName="Input";const px=fx;var gx;const mx=["children","classes","className","label","notched"],yx=rw("fieldset",{shouldForwardProp:ew})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),vx=rw("legend",{shouldForwardProp:ew})((t=>{let{ownerState:e,theme:n}=t;return dy({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},e.withLabel&&dy({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function bx(t){return Ww("MuiOutlinedInput",t)}const _x=dy({},qw,Hw("MuiOutlinedInput",["root","notchedOutline","input"])),wx=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],xx=rw(Zw,{shouldForwardProp:t=>ew(t)||"classes"===t,name:"MuiOutlinedInput",slot:"Root",overridesResolver:Xw})((t=>{let{theme:e,ownerState:n}=t;const i="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return dy({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,["&:hover .".concat(_x.notchedOutline)]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{["&:hover .".concat(_x.notchedOutline)]:{borderColor:e.vars?"rgba(".concat(e.vars.palette.common.onBackgroundChannel," / 0.23)"):i}},["&.".concat(_x.focused," .").concat(_x.notchedOutline)]:{borderColor:(e.vars||e).palette[n.color].main,borderWidth:2},["&.".concat(_x.error," .").concat(_x.notchedOutline)]:{borderColor:(e.vars||e).palette.error.main},["&.".concat(_x.disabled," .").concat(_x.notchedOutline)]:{borderColor:(e.vars||e).palette.action.disabled}},n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&dy({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),Sx=rw((function(t){const{className:e,label:n,notched:i}=t,r=hy(t,mx),o=null!=n&&""!==n,s=dy({},t,{notched:i,withLabel:o});return(0,yw.jsx)(yx,dy({"aria-hidden":!0,className:e,ownerState:s},r,{children:(0,yw.jsx)(vx,{ownerState:s,children:o?(0,yw.jsx)("span",{children:n}):gx||(gx=(0,yw.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})((t=>{let{theme:e}=t;const n="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?"rgba(".concat(e.vars.palette.common.onBackgroundChannel," / 0.23)"):n}})),Ex=rw($w,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Kw})((t=>{let{theme:e,ownerState:n}=t;return dy({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),Tx=t.forwardRef((function(e,n){var i,r,o,s,a;const l=uw({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:d="input",label:h,multiline:f=!1,notched:p,slots:g={},type:m="text"}=l,y=hy(l,wx),v=(t=>{const{classes:e}=t;return dy({},e,gy({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},bx,e))})(l),b=Pw(),_=Ew({props:l,muiFormControl:b,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),w=dy({},l,{color:_.color||"primary",disabled:_.disabled,error:_.error,focused:_.focused,formControl:b,fullWidth:u,hiddenLabel:_.hiddenLabel,multiline:f,size:_.size,type:m}),x=null!=(i=null!=(r=g.root)?r:c.Root)?i:xx,S=null!=(o=null!=(s=g.input)?s:c.Input)?o:Ex;return(0,yw.jsx)(tx,dy({slots:{root:x,input:S},renderSuffix:e=>(0,yw.jsx)(Sx,{ownerState:w,className:v.notchedOutline,label:null!=h&&""!==h&&_.required?a||(a=(0,yw.jsxs)(t.Fragment,{children:[h,"\u2009","*"]})):h,notched:"undefined"!==typeof p?p:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:u,inputComponent:d,multiline:f,ref:n,type:m},y,{classes:dy({},v,{notchedOutline:null})}))}));Tx.muiName="Input";const Px=Tx;function Ax(t){return Ww("MuiFormLabel",t)}const Cx=Hw("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Ix=["children","className","color","component","disabled","error","filled","focused","required"],Mx=rw("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,e)=>{let{ownerState:n}=t;return dy({},e.root,"secondary"===n.color&&e.colorSecondary,n.filled&&e.filled)}})((t=>{let{theme:e,ownerState:n}=t;return dy({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",["&.".concat(Cx.focused)]:{color:(e.vars||e).palette[n.color].main},["&.".concat(Cx.disabled)]:{color:(e.vars||e).palette.text.disabled},["&.".concat(Cx.error)]:{color:(e.vars||e).palette.error.main}})})),kx=rw("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})((t=>{let{theme:e}=t;return{["&.".concat(Cx.error)]:{color:(e.vars||e).palette.error.main}}})),Ox=t.forwardRef((function(t,e){const n=uw({props:t,name:"MuiFormLabel"}),{children:i,className:r,component:o="label"}=n,s=hy(n,Ix),a=Ew({props:n,muiFormControl:Pw(),states:["color","required","focused","disabled","error","filled"]}),l=dy({},n,{color:a.color||"primary",component:o,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(t=>{const{classes:e,color:n,focused:i,disabled:r,error:o,filled:s,required:a}=t;return gy({root:["root","color".concat(Aw(n)),r&&"disabled",o&&"error",s&&"filled",i&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]},Ax,e)})(l);return(0,yw.jsxs)(Mx,dy({as:o,ownerState:l,className:py(c.root,r),ref:e},s,{children:[i,a.required&&(0,yw.jsxs)(kx,{ownerState:l,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))})),Lx=Ox;function Rx(t){return Ww("MuiInputLabel",t)}Hw("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Fx=["disableAnimation","margin","shrink","variant","className"],Bx=rw(Lx,{shouldForwardProp:t=>ew(t)||"classes"===t,name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{["& .".concat(Cx.asterisk)]:e.asterisk},e.root,n.formControl&&e.formControl,"small"===n.size&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})((t=>{let{theme:e,ownerState:n}=t;return dy({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},"filled"===n.variant&&dy({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&dy({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&dy({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}),"standard"===n.variant&&{"&:not(label) + div":{marginTop:16}})})),Nx=t.forwardRef((function(t,e){const n=uw({name:"MuiInputLabel",props:t}),{disableAnimation:i=!1,shrink:r,className:o}=n,s=hy(n,Fx),a=Pw();let l=r;"undefined"===typeof l&&a&&(l=a.filled||a.focused||a.adornedStart);const c=Ew({props:n,muiFormControl:a,states:["size","variant","required","focused"]}),u=dy({},n,{disableAnimation:i,formControl:a,shrink:l,size:c.size,variant:c.variant,required:c.required,focused:c.focused}),d=(t=>{const{classes:e,formControl:n,size:i,shrink:r,disableAnimation:o,variant:s,required:a}=t;return dy({},e,gy({root:["root",n&&"formControl",!o&&"animated",r&&"shrink",i&&"normal"!==i&&"size".concat(Aw(i)),s],asterisk:[a&&"asterisk"]},Rx,e))})(u);return(0,yw.jsx)(Bx,dy({"data-shrink":l,ownerState:u,ref:e,className:py(d.root,o)},s,{classes:d}))}));const zx=function(e,n){var i,r;return t.isValidElement(e)&&-1!==n.indexOf(null!=(i=e.type.muiName)?i:null==(r=e.type)||null==(r=r._payload)||null==(r=r.value)?void 0:r.muiName)};function Dx(t){return Ww("MuiFormControl",t)}Hw("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const jx=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Ux=rw("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,e)=>{let{ownerState:n}=t;return dy({},e.root,e["margin".concat(Aw(n.margin))],n.fullWidth&&e.fullWidth)}})((t=>{let{ownerState:e}=t;return dy({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===e.margin&&{marginTop:16,marginBottom:8},"dense"===e.margin&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})})),Vx=t.forwardRef((function(e,n){const i=uw({props:e,name:"MuiFormControl"}),{children:r,className:o,color:s="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:h=!1,margin:f="none",required:p=!1,size:g="medium",variant:m="outlined"}=i,y=hy(i,jx),v=dy({},i,{color:s,component:a,disabled:l,error:c,fullWidth:d,hiddenLabel:h,margin:f,required:p,size:g,variant:m}),b=(t=>{const{classes:e,margin:n,fullWidth:i}=t;return gy({root:["root","none"!==n&&"margin".concat(Aw(n)),i&&"fullWidth"]},Dx,e)})(v),[_,w]=t.useState((()=>{let e=!1;return r&&t.Children.forEach(r,(t=>{if(!zx(t,["Input","Select"]))return;const n=zx(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)})),e})),[x,S]=t.useState((()=>{let e=!1;return r&&t.Children.forEach(r,(t=>{zx(t,["Input","Select"])&&(Dw(t.props,!0)||Dw(t.props.inputProps,!0))&&(e=!0)})),e})),[E,T]=t.useState(!1);l&&E&&T(!1);const P=void 0===u||l?E:u;let A;const C=t.useMemo((()=>({adornedStart:_,setAdornedStart:w,color:s,disabled:l,error:c,filled:x,focused:P,fullWidth:d,hiddenLabel:h,size:g,onBlur:()=>{T(!1)},onEmpty:()=>{S(!1)},onFilled:()=>{S(!0)},onFocus:()=>{T(!0)},registerEffect:A,required:p,variant:m})),[_,s,l,c,x,P,d,h,A,p,g,m]);return(0,yw.jsx)(Tw.Provider,{value:C,children:(0,yw.jsx)(Ux,dy({as:a,ownerState:v,className:py(b.root,o),ref:n},y,{children:r}))})})),Wx=Vx;function Hx(t){return Ww("MuiFormHelperText",t)}const Gx=Hw("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var qx;const Yx=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Xx=rw("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e["size".concat(Aw(n.size))],n.contained&&e.contained,n.filled&&e.filled]}})((t=>{let{theme:e,ownerState:n}=t;return dy({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,["&.".concat(Gx.disabled)]:{color:(e.vars||e).palette.text.disabled},["&.".concat(Gx.error)]:{color:(e.vars||e).palette.error.main}},"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),Kx=t.forwardRef((function(t,e){const n=uw({props:t,name:"MuiFormHelperText"}),{children:i,className:r,component:o="p"}=n,s=hy(n,Yx),a=Ew({props:n,muiFormControl:Pw(),states:["variant","size","disabled","error","filled","focused","required"]}),l=dy({},n,{component:o,contained:"filled"===a.variant||"outlined"===a.variant,variant:a.variant,size:a.size,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(t=>{const{classes:e,contained:n,size:i,disabled:r,error:o,filled:s,focused:a,required:l}=t;return gy({root:["root",r&&"disabled",o&&"error",i&&"size".concat(Aw(i)),n&&"contained",a&&"focused",s&&"filled",l&&"required"]},Hx,e)})(l);return(0,yw.jsx)(Xx,dy({as:o,ownerState:l,className:py(c.root,r),ref:e},s,{children:" "===i?qx||(qx=(0,yw.jsx)("span",{className:"notranslate",children:"\u200b"})):i}))})),Zx=Kx;n(441);const $x=fw;function Qx(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===t)return{};const n={};return Object.keys(t).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof t[n]&&!e.includes(n))).forEach((e=>{n[e]=t[e]})),n}function Jx(t){if(void 0===t)return{};const e={};return Object.keys(t).filter((e=>!(e.match(/^on[A-Z]/)&&"function"===typeof t[e]))).forEach((n=>{e[n]=t[n]})),e}const tS=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function eS(t){var e;const{elementType:n,externalSlotProps:i,ownerState:r,skipResolvingSlotProps:o=!1}=t,s=hy(t,tS),a=o?{}:function(t,e,n){return"function"===typeof t?t(e,n):t}(i,r),{props:l,internalRef:c}=function(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:i,externalForwardedProps:r,className:o}=t;if(!e){const t=py(null==n?void 0:n.className,o,null==r?void 0:r.className,null==i?void 0:i.className),e=dy({},null==n?void 0:n.style,null==r?void 0:r.style,null==i?void 0:i.style),s=dy({},n,r,i);return t.length>0&&(s.className=t),Object.keys(e).length>0&&(s.style=e),{props:s,internalRef:void 0}}const s=Qx(dy({},r,i)),a=Jx(i),l=Jx(r),c=e(s),u=py(null==c?void 0:c.className,null==n?void 0:n.className,o,null==r?void 0:r.className,null==i?void 0:i.className),d=dy({},null==c?void 0:c.style,null==n?void 0:n.style,null==r?void 0:r.style,null==i?void 0:i.style),h=dy({},c,n,l,a);return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:c.ref}}(dy({},s,{externalSlotProps:a})),u=function(t,e,n){return void 0===t||Sw(t)?e:dy({},e,{ownerState:dy({},e.ownerState,n)})}(n,dy({},l,{ref:hw(c,null==a?void 0:a.ref,null==(e=t.additionalProps)?void 0:e.ref)}),r);return u}const nS=t.createContext({});function iS(t){return Ww("MuiList",t)}Hw("MuiList",["root","padding","dense","subheader"]);const rS=["children","className","component","dense","disablePadding","subheader"],oS=rw("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})((t=>{let{ownerState:e}=t;return dy({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})})),sS=t.forwardRef((function(e,n){const i=uw({props:e,name:"MuiList"}),{children:r,className:o,component:s="ul",dense:a=!1,disablePadding:l=!1,subheader:c}=i,u=hy(i,rS),d=t.useMemo((()=>({dense:a})),[a]),h=dy({},i,{component:s,dense:a,disablePadding:l}),f=(t=>{const{classes:e,disablePadding:n,dense:i,subheader:r}=t;return gy({root:["root",!n&&"padding",i&&"dense",r&&"subheader"]},iS,e)})(h);return(0,yw.jsx)(nS.Provider,{value:d,children:(0,yw.jsxs)(oS,dy({as:s,className:py(f.root,o),ref:n,ownerState:h},u,{children:[c,r]}))})}));function aS(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}const lS=aS,cS=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function uS(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function dS(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function hS(t,e){if(void 0===e)return!0;let n=t.innerText;return void 0===n&&(n=t.textContent),n=n.trim().toLowerCase(),0!==n.length&&(e.repeating?n[0]===e.keys[0]:0===n.indexOf(e.keys.join("")))}function fS(t,e,n,i,r,o){let s=!1,a=r(t,e,!!e&&n);for(;a;){if(a===t.firstChild){if(s)return!1;s=!0}const e=!i&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&hS(a,o)&&!e)return a.focus(),!0;a=r(t,a,n)}return!1}const pS=t.forwardRef((function(e,n){const{actions:i,autoFocus:r=!1,autoFocusItem:o=!1,children:s,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu"}=e,h=hy(e,cS),f=t.useRef(null),p=t.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Iw((()=>{r&&f.current.focus()}),[r]),t.useImperativeHandle(i,(()=>({adjustStyleForScrollbar:(t,e)=>{const n=!f.current.style.width;if(t.clientHeight<f.current.clientHeight&&n){const n="".concat(lS($x(t)),"px");f.current.style["rtl"===e.direction?"paddingLeft":"paddingRight"]=n,f.current.style.width="calc(100% + ".concat(n,")")}return f.current}})),[]);const g=Cw(f,n);let m=-1;t.Children.forEach(s,((e,n)=>{t.isValidElement(e)?(e.props.disabled||("selectedMenu"===d&&e.props.selected||-1===m)&&(m=n),m===n&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(m+=1,m>=s.length&&(m=-1))):m===n&&(m+=1,m>=s.length&&(m=-1))}));const y=t.Children.map(s,((e,n)=>{if(n===m){const n={};return o&&(n.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===d&&(n.tabIndex=0),t.cloneElement(e,n)}return e}));return(0,yw.jsx)(sS,dy({role:"menu",ref:g,className:a,onKeyDown:t=>{const e=f.current,n=t.key,i=$x(e).activeElement;if("ArrowDown"===n)t.preventDefault(),fS(e,i,c,l,uS);else if("ArrowUp"===n)t.preventDefault(),fS(e,i,c,l,dS);else if("Home"===n)t.preventDefault(),fS(e,null,c,l,uS);else if("End"===n)t.preventDefault(),fS(e,null,c,l,dS);else if(1===n.length){const r=p.current,o=n.toLowerCase(),s=performance.now();r.keys.length>0&&(s-r.lastTime>500?(r.keys=[],r.repeating=!0,r.previousKeyMatched=!0):r.repeating&&o!==r.keys[0]&&(r.repeating=!1)),r.lastTime=s,r.keys.push(o);const a=i&&!r.repeating&&hS(i,r);r.previousKeyMatched&&(a||fS(e,i,!1,l,uS,r))?t.preventDefault():r.previousKeyMatched=!1}u&&u(t)},tabIndex:r?0:-1},h,{children:y}))})),gS=mw,mS=pw;function yS(t,e){return yS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yS(t,e)}function vS(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,yS(t,e)}const bS=!1,_S=t.createContext(null);var wS="unmounted",xS="exited",SS="entering",ES="entered",TS="exiting",PS=function(e){function n(t,n){var i;i=e.call(this,t,n)||this;var r,o=n&&!n.isMounting?t.enter:t.appear;return i.appearStatus=null,t.in?o?(r=xS,i.appearStatus=SS):r=ES:r=t.unmountOnExit||t.mountOnEnter?wS:xS,i.state={status:r},i.nextCallback=null,i}vS(n,e),n.getDerivedStateFromProps=function(t,e){return t.in&&e.status===wS?{status:xS}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==SS&&n!==ES&&(e=SS):n!==SS&&n!==ES||(e=TS)}this.updateStatus(!1,e)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var t,e,n,i=this.props.timeout;return t=e=n=i,null!=i&&"number"!==typeof i&&(t=i.exit,e=i.enter,n=void 0!==i.appear?i.appear:e),{exit:t,enter:e,appear:n}},r.updateStatus=function(t,e){if(void 0===t&&(t=!1),null!==e)if(this.cancelNextCallback(),e===SS){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:i.findDOMNode(this);n&&function(t){t.scrollTop}(n)}this.performEnter(t)}else this.performExit();else this.props.unmountOnExit&&this.state.status===xS&&this.setState({status:wS})},r.performEnter=function(t){var e=this,n=this.props.enter,r=this.context?this.context.isMounting:t,o=this.props.nodeRef?[r]:[i.findDOMNode(this),r],s=o[0],a=o[1],l=this.getTimeouts(),c=r?l.appear:l.enter;!t&&!n||bS?this.safeSetState({status:ES},(function(){e.props.onEntered(s)})):(this.props.onEnter(s,a),this.safeSetState({status:SS},(function(){e.props.onEntering(s,a),e.onTransitionEnd(c,(function(){e.safeSetState({status:ES},(function(){e.props.onEntered(s,a)}))}))})))},r.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:i.findDOMNode(this);e&&!bS?(this.props.onExit(r),this.safeSetState({status:TS},(function(){t.props.onExiting(r),t.onTransitionEnd(n.exit,(function(){t.safeSetState({status:xS},(function(){t.props.onExited(r)}))}))}))):this.safeSetState({status:xS},(function(){t.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},r.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(i){n&&(n=!1,e.nextCallback=null,t(i))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:i.findDOMNode(this),r=null==t&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=o[0],a=o[1];this.props.addEndListener(s,a)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===wS)return null;var n=this.props,i=n.children,r=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,hy(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(_S.Provider,{value:null},"function"===typeof i?i(e,r):t.cloneElement(t.Children.only(i),r))},n}(t.Component);function AS(){}PS.contextType=_S,PS.propTypes={},PS.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:AS,onEntering:AS,onEntered:AS,onExit:AS,onExiting:AS,onExited:AS},PS.UNMOUNTED=wS,PS.EXITED=xS,PS.ENTERING=SS,PS.ENTERED=ES,PS.EXITING=TS;const CS=PS;function IS(){const t=cw(J_);return t[tw]||t}const MS=t=>t.scrollTop;function kS(t,e){var n,i;const{timeout:r,easing:o,style:s={}}=t;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof r?r:r[e.mode]||0,easing:null!=(i=s.transitionTimingFunction)?i:"object"===typeof o?o[e.mode]:o,delay:s.transitionDelay}}const OS=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function LS(t){return"scale(".concat(t,", ").concat(t**2,")")}const RS={entering:{opacity:1,transform:LS(1)},entered:{opacity:1,transform:"none"}},FS="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),BS=t.forwardRef((function(e,n){const{addEndListener:i,appear:r=!0,children:o,easing:s,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:h,onExiting:f,style:p,timeout:g="auto",TransitionComponent:m=CS}=e,y=hy(e,OS),v=t.useRef(),b=t.useRef(),_=IS(),w=t.useRef(null),x=Cw(w,o.ref,n),S=t=>e=>{if(t){const n=w.current;void 0===e?t(n):t(n,e)}},E=S(u),T=S(((t,e)=>{MS(t);const{duration:n,delay:i,easing:r}=kS({style:p,timeout:g,easing:s},{mode:"enter"});let o;"auto"===g?(o=_.transitions.getAutoHeightDuration(t.clientHeight),b.current=o):o=n,t.style.transition=[_.transitions.create("opacity",{duration:o,delay:i}),_.transitions.create("transform",{duration:FS?o:.666*o,delay:i,easing:r})].join(","),l&&l(t,e)})),P=S(c),A=S(f),C=S((t=>{const{duration:e,delay:n,easing:i}=kS({style:p,timeout:g,easing:s},{mode:"exit"});let r;"auto"===g?(r=_.transitions.getAutoHeightDuration(t.clientHeight),b.current=r):r=e,t.style.transition=[_.transitions.create("opacity",{duration:r,delay:n}),_.transitions.create("transform",{duration:FS?r:.666*r,delay:FS?n:n||.333*r,easing:i})].join(","),t.style.opacity=0,t.style.transform=LS(.75),d&&d(t)})),I=S(h);return t.useEffect((()=>()=>{clearTimeout(v.current)}),[]),(0,yw.jsx)(m,dy({appear:r,in:a,nodeRef:w,onEnter:T,onEntered:P,onEntering:E,onExit:C,onExited:I,onExiting:A,addEndListener:t=>{"auto"===g&&(v.current=setTimeout(t,b.current||0)),i&&i(w.current,t)},timeout:"auto"===g?null:g},y,{children:(e,n)=>t.cloneElement(o,dy({style:dy({opacity:0,transform:LS(.75),visibility:"exited"!==e||a?void 0:"hidden"},RS[e],p,o.props.style),ref:x},n))}))}));BS.muiSupportAuto=!0;const NS=BS;const zS=function(e){const n=t.useRef(e);return gw((()=>{n.current=e})),t.useRef((function(){return(0,n.current)(...arguments)})).current};function DS(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(((t,e)=>null==e?t:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];t.apply(this,i),e.apply(this,i)}),(()=>{}))}function jS(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function US(t){return parseInt(pw(t).getComputedStyle(t).paddingRight,10)||0}function VS(t,e,n,i,r){const o=[e,n,...i];[].forEach.call(t.children,(t=>{const e=-1===o.indexOf(t),n=!function(t){const e=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName),n="INPUT"===t.tagName&&"hidden"===t.getAttribute("type");return e||n}(t);e&&n&&jS(t,r)}))}function WS(t,e){let n=-1;return t.some(((t,i)=>!!e(t)&&(n=i,!0))),n}function HS(t,e){const n=[],i=t.container;if(!e.disableScrollLock){if(function(t){const e=fw(t);return e.body===t?pw(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}(i)){const t=aS(fw(i));n.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight="".concat(US(i)+t,"px");const e=fw(i).querySelectorAll(".mui-fixed");[].forEach.call(e,(e=>{n.push({value:e.style.paddingRight,property:"padding-right",el:e}),e.style.paddingRight="".concat(US(e)+t,"px")}))}let t;if(i.parentNode instanceof DocumentFragment)t=fw(i).body;else{const e=i.parentElement,n=pw(i);t="HTML"===(null==e?void 0:e.nodeName)&&"scroll"===n.getComputedStyle(e).overflowY?e:i}n.push({value:t.style.overflow,property:"overflow",el:t},{value:t.style.overflowX,property:"overflow-x",el:t},{value:t.style.overflowY,property:"overflow-y",el:t}),t.style.overflow="hidden"}return()=>{n.forEach((t=>{let{value:e,el:n,property:i}=t;e?n.style.setProperty(i,e):n.style.removeProperty(i)}))}}const GS=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,e){let n=this.modals.indexOf(t);if(-1!==n)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&jS(t.modalRef,!1);const i=function(t){const e=[];return[].forEach.call(t.children,(t=>{"true"===t.getAttribute("aria-hidden")&&e.push(t)})),e}(e);VS(e,t.mount,t.modalRef,i,!0);const r=WS(this.containers,(t=>t.container===e));return-1!==r?(this.containers[r].modals.push(t),n):(this.containers.push({modals:[t],container:e,restore:null,hiddenSiblings:i}),n)}mount(t,e){const n=WS(this.containers,(e=>-1!==e.modals.indexOf(t))),i=this.containers[n];i.restore||(i.restore=HS(i,e))}remove(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(t);if(-1===n)return n;const i=WS(this.containers,(e=>-1!==e.modals.indexOf(t))),r=this.containers[i];if(r.modals.splice(r.modals.indexOf(t),1),this.modals.splice(n,1),0===r.modals.length)r.restore&&r.restore(),t.modalRef&&jS(t.modalRef,e),VS(r.container,t.mount,t.modalRef,r.hiddenSiblings,!1),this.containers.splice(i,1);else{const t=r.modals[r.modals.length-1];t.modalRef&&jS(t.modalRef,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}};function qS(e){const{container:n,disableEscapeKeyDown:i=!1,disableScrollLock:r=!1,manager:o=GS,closeAfterTransition:s=!1,onTransitionEnter:a,onTransitionExited:l,children:c,onClose:u,open:d,rootRef:h}=e,f=t.useRef({}),p=t.useRef(null),g=t.useRef(null),m=hw(g,h),[y,v]=t.useState(!d),b=function(t){return!!t&&t.props.hasOwnProperty("in")}(c);let _=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(_=!1);const w=()=>(f.current.modalRef=g.current,f.current.mount=p.current,f.current),x=()=>{o.mount(w(),{disableScrollLock:r}),g.current&&(g.current.scrollTop=0)},S=zS((()=>{const t=function(t){return"function"===typeof t?t():t}(n)||fw(p.current).body;o.add(w(),t),g.current&&x()})),E=t.useCallback((()=>o.isTopModal(w())),[o]),T=zS((t=>{p.current=t,t&&(d&&E()?x():g.current&&jS(g.current,_))})),P=t.useCallback((()=>{o.remove(w(),_)}),[_,o]);t.useEffect((()=>()=>{P()}),[P]),t.useEffect((()=>{d?S():b&&s||P()}),[d,P,b,s,S]);const A=t=>e=>{var n;null==(n=t.onKeyDown)||n.call(t,e),"Escape"===e.key&&229!==e.which&&E()&&(i||(e.stopPropagation(),u&&u(e,"escapeKeyDown")))},C=t=>e=>{var n;null==(n=t.onClick)||n.call(t,e),e.target===e.currentTarget&&u&&u(e,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=Qx(e);delete n.onTransitionEnter,delete n.onTransitionExited;const i=dy({},n,t);return dy({role:"presentation"},i,{onKeyDown:A(i),ref:m})},getBackdropProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return dy({"aria-hidden":!0},t,{onClick:C(t),open:d})},getTransitionProps:()=>({onEnter:DS((()=>{v(!1),a&&a()}),null==c?void 0:c.props.onEnter),onExited:DS((()=>{v(!0),l&&l(),s&&P()}),null==c?void 0:c.props.onExited)}),rootRef:m,portalRef:T,isTopModal:E,exited:y,hasTransition:b}}const YS=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function XS(t){const e=[],n=[];return Array.from(t.querySelectorAll(YS)).forEach(((t,i)=>{const r=function(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?"true"===t.contentEditable||("AUDIO"===t.nodeName||"VIDEO"===t.nodeName||"DETAILS"===t.nodeName)&&null===t.getAttribute("tabindex")?0:t.tabIndex:e}(t);-1!==r&&function(t){return!(t.disabled||"INPUT"===t.tagName&&"hidden"===t.type||function(t){if("INPUT"!==t.tagName||"radio"!==t.type)return!1;if(!t.name)return!1;const e=e=>t.ownerDocument.querySelector('input[type="radio"]'.concat(e));let n=e('[name="'.concat(t.name,'"]:checked'));return n||(n=e('[name="'.concat(t.name,'"]'))),n!==t}(t))}(t)&&(0===r?e.push(t):n.push({documentOrder:i,tabIndex:r,node:t}))})),n.sort(((t,e)=>t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex)).map((t=>t.node)).concat(e)}function KS(){return!0}function ZS(e){const{children:n,disableAutoFocus:i=!1,disableEnforceFocus:r=!1,disableRestoreFocus:o=!1,getTabbable:s=XS,isEnabled:a=KS,open:l}=e,c=t.useRef(!1),u=t.useRef(null),d=t.useRef(null),h=t.useRef(null),f=t.useRef(null),p=t.useRef(!1),g=t.useRef(null),m=hw(n.ref,g),y=t.useRef(null);t.useEffect((()=>{l&&g.current&&(p.current=!i)}),[i,l]),t.useEffect((()=>{if(!l||!g.current)return;const t=fw(g.current);return g.current.contains(t.activeElement)||(g.current.hasAttribute("tabIndex")||g.current.setAttribute("tabIndex","-1"),p.current&&g.current.focus()),()=>{o||(h.current&&h.current.focus&&(c.current=!0,h.current.focus()),h.current=null)}}),[l]),t.useEffect((()=>{if(!l||!g.current)return;const t=fw(g.current),e=e=>{y.current=e,!r&&a()&&"Tab"===e.key&&t.activeElement===g.current&&e.shiftKey&&(c.current=!0,d.current&&d.current.focus())},n=()=>{const e=g.current;if(null===e)return;if(!t.hasFocus()||!a()||c.current)return void(c.current=!1);if(e.contains(t.activeElement))return;if(r&&t.activeElement!==u.current&&t.activeElement!==d.current)return;if(t.activeElement!==f.current)f.current=null;else if(null!==f.current)return;if(!p.current)return;let n=[];if(t.activeElement!==u.current&&t.activeElement!==d.current||(n=s(g.current)),n.length>0){var i,o;const t=Boolean((null==(i=y.current)?void 0:i.shiftKey)&&"Tab"===(null==(o=y.current)?void 0:o.key)),e=n[0],r=n[n.length-1];"string"!==typeof e&&"string"!==typeof r&&(t?r.focus():e.focus())}else e.focus()};t.addEventListener("focusin",n),t.addEventListener("keydown",e,!0);const i=setInterval((()=>{t.activeElement&&"BODY"===t.activeElement.tagName&&n()}),50);return()=>{clearInterval(i),t.removeEventListener("focusin",n),t.removeEventListener("keydown",e,!0)}}),[i,r,o,a,l,s]);const v=t=>{null===h.current&&(h.current=t.relatedTarget),p.current=!0};return(0,yw.jsxs)(t.Fragment,{children:[(0,yw.jsx)("div",{tabIndex:l?0:-1,onFocus:v,ref:u,"data-testid":"sentinelStart"}),t.cloneElement(n,{ref:m,onFocus:t=>{null===h.current&&(h.current=t.relatedTarget),p.current=!0,f.current=t.target;const e=n.props.onFocus;e&&e(t)}}),(0,yw.jsx)("div",{tabIndex:l?0:-1,onFocus:v,ref:d,"data-testid":"sentinelEnd"})]})}const $S=t.forwardRef((function(e,n){const{children:r,container:o,disablePortal:s=!1}=e,[a,l]=t.useState(null),c=hw(t.isValidElement(r)?r.ref:null,n);if(gw((()=>{s||l(function(t){return"function"===typeof t?t():t}(o)||document.body)}),[o,s]),gw((()=>{if(a&&!s)return dw(n,a),()=>{dw(n,null)}}),[n,a,s]),s){if(t.isValidElement(r)){const e={ref:c};return t.cloneElement(r,e)}return(0,yw.jsx)(t.Fragment,{children:r})}return(0,yw.jsx)(t.Fragment,{children:a?i.createPortal(r,a):a})}));const QS=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],JS={entering:{opacity:1},entered:{opacity:1}},tE=t.forwardRef((function(e,n){const i=IS(),r={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:o,appear:s=!0,children:a,easing:l,in:c,onEnter:u,onEntered:d,onEntering:h,onExit:f,onExited:p,onExiting:g,style:m,timeout:y=r,TransitionComponent:v=CS}=e,b=hy(e,QS),_=t.useRef(null),w=Cw(_,a.ref,n),x=t=>e=>{if(t){const n=_.current;void 0===e?t(n):t(n,e)}},S=x(h),E=x(((t,e)=>{MS(t);const n=kS({style:m,timeout:y,easing:l},{mode:"enter"});t.style.webkitTransition=i.transitions.create("opacity",n),t.style.transition=i.transitions.create("opacity",n),u&&u(t,e)})),T=x(d),P=x(g),A=x((t=>{const e=kS({style:m,timeout:y,easing:l},{mode:"exit"});t.style.webkitTransition=i.transitions.create("opacity",e),t.style.transition=i.transitions.create("opacity",e),f&&f(t)})),C=x(p);return(0,yw.jsx)(v,dy({appear:s,in:c,nodeRef:_,onEnter:E,onEntered:T,onEntering:S,onExit:A,onExited:C,onExiting:P,addEndListener:t=>{o&&o(_.current,t)},timeout:y},b,{children:(e,n)=>t.cloneElement(a,dy({style:dy({opacity:0,visibility:"exited"!==e||c?void 0:"hidden"},JS[e],m,a.props.style),ref:w},n))}))})),eE=tE;function nE(t){return Ww("MuiBackdrop",t)}Hw("MuiBackdrop",["root","invisible"]);const iE=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],rE=rw("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})((t=>{let{ownerState:e}=t;return dy({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})})),oE=t.forwardRef((function(t,e){var n,i,r;const o=uw({props:t,name:"MuiBackdrop"}),{children:s,className:a,component:l="div",components:c={},componentsProps:u={},invisible:d=!1,open:h,slotProps:f={},slots:p={},TransitionComponent:g=eE,transitionDuration:m}=o,y=hy(o,iE),v=dy({},o,{component:l,invisible:d}),b=(t=>{const{classes:e,invisible:n}=t;return gy({root:["root",n&&"invisible"]},nE,e)})(v),_=null!=(n=f.root)?n:u.root;return(0,yw.jsx)(g,dy({in:h,timeout:m},y,{children:(0,yw.jsx)(rE,dy({"aria-hidden":!0},_,{as:null!=(i=null!=(r=p.root)?r:c.Root)?i:l,className:py(b.root,a,null==_?void 0:_.className),ownerState:dy({},v,null==_?void 0:_.ownerState),classes:b,ref:e,children:s}))}))}));function sE(t){return Ww("MuiModal",t)}Hw("MuiModal",["root","hidden","backdrop"]);const aE=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],lE=rw("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})((t=>{let{theme:e,ownerState:n}=t;return dy({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),cE=rw(oE,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),uE=t.forwardRef((function(e,n){var i,r,o,s,a,l;const c=uw({name:"MuiModal",props:e}),{BackdropComponent:u=cE,BackdropProps:d,className:h,closeAfterTransition:f=!1,children:p,container:g,component:m,components:y={},componentsProps:v={},disableAutoFocus:b=!1,disableEnforceFocus:_=!1,disableEscapeKeyDown:w=!1,disablePortal:x=!1,disableRestoreFocus:S=!1,disableScrollLock:E=!1,hideBackdrop:T=!1,keepMounted:P=!1,onBackdropClick:A,open:C,slotProps:I,slots:M}=c,k=hy(c,aE),O=dy({},c,{closeAfterTransition:f,disableAutoFocus:b,disableEnforceFocus:_,disableEscapeKeyDown:w,disablePortal:x,disableRestoreFocus:S,disableScrollLock:E,hideBackdrop:T,keepMounted:P}),{getRootProps:L,getBackdropProps:R,getTransitionProps:F,portalRef:B,isTopModal:N,exited:z,hasTransition:D}=qS(dy({},O,{rootRef:n})),j=dy({},O,{exited:z}),U=(t=>{const{open:e,exited:n,classes:i}=t;return gy({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},sE,i)})(j),V={};if(void 0===p.props.tabIndex&&(V.tabIndex="-1"),D){const{onEnter:t,onExited:e}=F();V.onEnter=t,V.onExited=e}const W=null!=(i=null!=(r=null==M?void 0:M.root)?r:y.Root)?i:lE,H=null!=(o=null!=(s=null==M?void 0:M.backdrop)?s:y.Backdrop)?o:u,G=null!=(a=null==I?void 0:I.root)?a:v.root,q=null!=(l=null==I?void 0:I.backdrop)?l:v.backdrop,Y=eS({elementType:W,externalSlotProps:G,externalForwardedProps:k,getSlotProps:L,additionalProps:{ref:n,as:m},ownerState:j,className:py(h,null==G?void 0:G.className,null==U?void 0:U.root,!j.open&&j.exited&&(null==U?void 0:U.hidden))}),X=eS({elementType:H,externalSlotProps:q,additionalProps:d,getSlotProps:t=>R(dy({},t,{onClick:e=>{A&&A(e),null!=t&&t.onClick&&t.onClick(e)}})),className:py(null==q?void 0:q.className,null==d?void 0:d.className,null==U?void 0:U.backdrop),ownerState:j});return P||C||D&&!z?(0,yw.jsx)($S,{ref:B,container:g,disablePortal:x,children:(0,yw.jsxs)(W,dy({},Y,{children:[!T&&u?(0,yw.jsx)(H,dy({},X)):null,(0,yw.jsx)(ZS,{disableEnforceFocus:_,disableAutoFocus:b,disableRestoreFocus:S,isEnabled:N,open:C,children:t.cloneElement(p,V)})]}))}):null})),dE=uE,hE=t=>{let e;return e=t<1?5.11916*t**2:4.5*Math.log(t+1)+2,(e/100).toFixed(2)};function fE(t){return Ww("MuiPaper",t)}Hw("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const pE=["className","component","elevation","square","variant"],gE=rw("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,"elevation"===n.variant&&e["elevation".concat(n.elevation)]]}})((t=>{let{theme:e,ownerState:n}=t;var i;return dy({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!n.square&&{borderRadius:e.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat((e.vars||e).palette.divider)},"elevation"===n.variant&&dy({boxShadow:(e.vars||e).shadows[n.elevation]},!e.vars&&"dark"===e.palette.mode&&{backgroundImage:"linear-gradient(".concat(x_("#fff",hE(n.elevation)),", ").concat(x_("#fff",hE(n.elevation)),")")},e.vars&&{backgroundImage:null==(i=e.vars.overlays)?void 0:i[n.elevation]}))})),mE=t.forwardRef((function(t,e){const n=uw({props:t,name:"MuiPaper"}),{className:i,component:r="div",elevation:o=1,square:s=!1,variant:a="elevation"}=n,l=hy(n,pE),c=dy({},n,{component:r,elevation:o,square:s,variant:a}),u=(t=>{const{square:e,elevation:n,variant:i,classes:r}=t;return gy({root:["root",i,!e&&"rounded","elevation"===i&&"elevation".concat(n)]},fE,r)})(c);return(0,yw.jsx)(gE,dy({as:r,ownerState:c,className:py(u.root,i),ref:e},l))}));function yE(t){return Ww("MuiPopover",t)}Hw("MuiPopover",["root","paper"]);const vE=["onEntering"],bE=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],_E=["slotProps"];function wE(t,e){let n=0;return"number"===typeof e?n=e:"center"===e?n=t.height/2:"bottom"===e&&(n=t.height),n}function xE(t,e){let n=0;return"number"===typeof e?n=e:"center"===e?n=t.width/2:"right"===e&&(n=t.width),n}function SE(t){return[t.horizontal,t.vertical].map((t=>"number"===typeof t?"".concat(t,"px"):t)).join(" ")}function EE(t){return"function"===typeof t?t():t}const TE=rw(dE,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),PE=rw(mE,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),AE=t.forwardRef((function(e,n){var i,r,o;const s=uw({props:e,name:"MuiPopover"}),{action:a,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:d="anchorEl",children:h,className:f,container:p,elevation:g=8,marginThreshold:m=16,open:y,PaperProps:v={},slots:b,slotProps:_,transformOrigin:w={vertical:"top",horizontal:"left"},TransitionComponent:x=NS,transitionDuration:S="auto",TransitionProps:{onEntering:E}={},disableScrollLock:T=!1}=s,P=hy(s.TransitionProps,vE),A=hy(s,bE),C=null!=(i=null==_?void 0:_.paper)?i:v,I=t.useRef(),M=Cw(I,C.ref),k=dy({},s,{anchorOrigin:c,anchorReference:d,elevation:g,marginThreshold:m,externalPaperSlotProps:C,transformOrigin:w,TransitionComponent:x,transitionDuration:S,TransitionProps:P}),O=(t=>{const{classes:e}=t;return gy({root:["root"],paper:["paper"]},yE,e)})(k),L=t.useCallback((()=>{if("anchorPosition"===d)return u;const t=EE(l),e=(t&&1===t.nodeType?t:$x(I.current).body).getBoundingClientRect();return{top:e.top+wE(e,c.vertical),left:e.left+xE(e,c.horizontal)}}),[l,c.horizontal,c.vertical,u,d]),R=t.useCallback((t=>({vertical:wE(t,w.vertical),horizontal:xE(t,w.horizontal)})),[w.horizontal,w.vertical]),F=t.useCallback((t=>{const e={width:t.offsetWidth,height:t.offsetHeight},n=R(e);if("none"===d)return{top:null,left:null,transformOrigin:SE(n)};const i=L();let r=i.top-n.vertical,o=i.left-n.horizontal;const s=r+e.height,a=o+e.width,c=mS(EE(l)),u=c.innerHeight-m,h=c.innerWidth-m;if(null!==m&&r<m){const t=r-m;r-=t,n.vertical+=t}else if(null!==m&&s>u){const t=s-u;r-=t,n.vertical+=t}if(null!==m&&o<m){const t=o-m;o-=t,n.horizontal+=t}else if(a>h){const t=a-h;o-=t,n.horizontal+=t}return{top:"".concat(Math.round(r),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:SE(n)}}),[l,d,L,R,m]),[B,N]=t.useState(y),z=t.useCallback((()=>{const t=I.current;if(!t)return;const e=F(t);null!==e.top&&(t.style.top=e.top),null!==e.left&&(t.style.left=e.left),t.style.transformOrigin=e.transformOrigin,N(!0)}),[F]);t.useEffect((()=>(T&&window.addEventListener("scroll",z),()=>window.removeEventListener("scroll",z))),[l,T,z]);t.useEffect((()=>{y&&z()})),t.useImperativeHandle(a,(()=>y?{updatePosition:()=>{z()}}:null),[y,z]),t.useEffect((()=>{if(!y)return;const t=gS((()=>{z()})),e=mS(l);return e.addEventListener("resize",t),()=>{t.clear(),e.removeEventListener("resize",t)}}),[l,y,z]);let D=S;"auto"!==S||x.muiSupportAuto||(D=void 0);const j=p||(l?$x(EE(l)).body:void 0),U=null!=(r=null==b?void 0:b.root)?r:TE,V=null!=(o=null==b?void 0:b.paper)?o:PE,W=eS({elementType:V,externalSlotProps:dy({},C,{style:B?C.style:dy({},C.style,{opacity:0})}),additionalProps:{elevation:g,ref:M},ownerState:k,className:py(O.paper,null==C?void 0:C.className)}),H=eS({elementType:U,externalSlotProps:(null==_?void 0:_.root)||{},externalForwardedProps:A,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:j,open:y},ownerState:k,className:py(O.root,f)}),{slotProps:G}=H,q=hy(H,_E);return(0,yw.jsx)(U,dy({},q,!Sw(U)&&{slotProps:G,disableScrollLock:T},{children:(0,yw.jsx)(x,dy({appear:!0,in:y,onEntering:(t,e)=>{E&&E(t,e),z()},onExited:()=>{N(!1)},timeout:D},P,{children:(0,yw.jsx)(V,dy({},W,{children:h}))}))}))}));function CE(t){return Ww("MuiMenu",t)}Hw("MuiMenu",["root","paper","list"]);const IE=["onEntering"],ME=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],kE={vertical:"top",horizontal:"right"},OE={vertical:"top",horizontal:"left"},LE=rw(AE,{shouldForwardProp:t=>ew(t)||"classes"===t,name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),RE=rw(PE,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),FE=rw(pS,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),BE=t.forwardRef((function(e,n){var i,r;const o=uw({props:e,name:"MuiMenu"}),{autoFocus:s=!0,children:a,className:l,disableAutoFocusItem:c=!1,MenuListProps:u={},onClose:d,open:h,PaperProps:f={},PopoverClasses:p,transitionDuration:g="auto",TransitionProps:{onEntering:m}={},variant:y="selectedMenu",slots:v={},slotProps:b={}}=o,_=hy(o.TransitionProps,IE),w=hy(o,ME),x=IS(),S="rtl"===x.direction,E=dy({},o,{autoFocus:s,disableAutoFocusItem:c,MenuListProps:u,onEntering:m,PaperProps:f,transitionDuration:g,TransitionProps:_,variant:y}),T=(t=>{const{classes:e}=t;return gy({root:["root"],paper:["paper"],list:["list"]},CE,e)})(E),P=s&&!c&&h,A=t.useRef(null);let C=-1;t.Children.map(a,((e,n)=>{t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===y&&e.props.selected||-1===C)&&(C=n))}));const I=null!=(i=v.paper)?i:RE,M=null!=(r=b.paper)?r:f,k=eS({elementType:v.root,externalSlotProps:b.root,ownerState:E,className:[T.root,l]}),O=eS({elementType:I,externalSlotProps:M,ownerState:E,className:T.paper});return(0,yw.jsx)(LE,dy({onClose:d,anchorOrigin:{vertical:"bottom",horizontal:S?"right":"left"},transformOrigin:S?kE:OE,slots:{paper:I,root:v.root},slotProps:{root:k,paper:O},open:h,ref:n,transitionDuration:g,TransitionProps:dy({onEntering:(t,e)=>{A.current&&A.current.adjustStyleForScrollbar(t,x),m&&m(t,e)}},_),ownerState:E},w,{classes:p,children:(0,yw.jsx)(FE,dy({onKeyDown:t=>{"Tab"===t.key&&(t.preventDefault(),d&&d(t,"tabKeyDown"))},actions:A,autoFocus:s&&(-1===C||c),autoFocusItem:P,variant:y},u,{className:py(T.list,u.className),children:a}))}))}));function NE(t){return Ww("MuiNativeSelect",t)}const zE=Hw("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),DE=["className","disabled","error","IconComponent","inputRef","variant"],jE=t=>{let{ownerState:e,theme:n}=t;return dy({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":dy({},n.vars?{backgroundColor:"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},["&.".concat(zE.disabled)]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===e.variant&&{"&&&":{paddingRight:32}},"outlined"===e.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},UE=rw("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:ew,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{["&.".concat(zE.multiple)]:e.multiple}]}})(jE),VE=t=>{let{ownerState:e,theme:n}=t;return dy({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,["&.".concat(zE.disabled)]:{color:(n.vars||n).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},"filled"===e.variant&&{right:7},"outlined"===e.variant&&{right:7})},WE=rw("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e["icon".concat(Aw(n.variant))],n.open&&e.iconOpen]}})(VE),HE=t.forwardRef((function(e,n){const{className:i,disabled:r,error:o,IconComponent:s,inputRef:a,variant:l="standard"}=e,c=hy(e,DE),u=dy({},e,{disabled:r,variant:l,error:o}),d=(t=>{const{classes:e,variant:n,disabled:i,multiple:r,open:o,error:s}=t;return gy({select:["select",n,i&&"disabled",r&&"multiple",s&&"error"],icon:["icon","icon".concat(Aw(n)),o&&"iconOpen",i&&"disabled"]},NE,e)})(u);return(0,yw.jsxs)(t.Fragment,{children:[(0,yw.jsx)(UE,dy({ownerState:u,className:py(d.select,i),disabled:r,ref:a||n},c)),e.multiple?null:(0,yw.jsx)(WE,{as:s,ownerState:u,className:d.icon})]})})),GE=HE;const qE=function(e){let{controlled:n,default:i,name:r,state:o="value"}=e;const{current:s}=t.useRef(void 0!==n),[a,l]=t.useState(i);return[s?n:a,t.useCallback((t=>{s||l(t)}),[])]};function YE(t){return Ww("MuiSelect",t)}const XE=Hw("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var KE;const ZE=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],$E=rw("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{["&.".concat(XE.select)]:e.select},{["&.".concat(XE.select)]:e[n.variant]},{["&.".concat(XE.error)]:e.error},{["&.".concat(XE.multiple)]:e.multiple}]}})(jE,{["&.".concat(XE.select)]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),QE=rw("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e["icon".concat(Aw(n.variant))],n.open&&e.iconOpen]}})(VE),JE=rw("input",{shouldForwardProp:t=>nw(t)&&"classes"!==t,name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function tT(t,e){return"object"===typeof e&&null!==e?t===e:String(t)===String(e)}function eT(t){return null==t||"string"===typeof t&&!t.trim()}const nT=t.forwardRef((function(e,n){var i;const{"aria-describedby":r,"aria-label":o,autoFocus:s,autoWidth:a,children:l,className:c,defaultOpen:u,defaultValue:d,disabled:h,displayEmpty:f,error:p=!1,IconComponent:g,inputRef:m,labelId:y,MenuProps:v={},multiple:b,name:_,onBlur:w,onChange:x,onClose:S,onFocus:E,onOpen:T,open:P,readOnly:A,renderValue:C,SelectDisplayProps:I={},tabIndex:M,value:k,variant:O="standard"}=e,L=hy(e,ZE),[R,F]=qE({controlled:k,default:d,name:"Select"}),[B,N]=qE({controlled:P,default:u,name:"Select"}),z=t.useRef(null),D=t.useRef(null),[j,U]=t.useState(null),{current:V}=t.useRef(null!=P),[W,H]=t.useState(),G=Cw(n,m),q=t.useCallback((t=>{D.current=t,t&&U(t)}),[]),Y=null==j?void 0:j.parentNode;t.useImperativeHandle(G,(()=>({focus:()=>{D.current.focus()},node:z.current,value:R})),[R]),t.useEffect((()=>{u&&B&&j&&!V&&(H(a?null:Y.clientWidth),D.current.focus())}),[j,a]),t.useEffect((()=>{s&&D.current.focus()}),[s]),t.useEffect((()=>{if(!y)return;const t=$x(D.current).getElementById(y);if(t){const e=()=>{getSelection().isCollapsed&&D.current.focus()};return t.addEventListener("click",e),()=>{t.removeEventListener("click",e)}}}),[y]);const X=(t,e)=>{t?T&&T(e):S&&S(e),V||(H(a?null:Y.clientWidth),N(t))},K=t.Children.toArray(l),Z=t=>e=>{let n;if(e.currentTarget.hasAttribute("tabindex")){if(b){n=Array.isArray(R)?R.slice():[];const e=R.indexOf(t.props.value);-1===e?n.push(t.props.value):n.splice(e,1)}else n=t.props.value;if(t.props.onClick&&t.props.onClick(e),R!==n&&(F(n),x)){const i=e.nativeEvent||e,r=new i.constructor(i.type,i);Object.defineProperty(r,"target",{writable:!0,value:{value:n,name:_}}),x(r,t)}b||X(!1,e)}},$=null!==j&&B;let Q,J;delete L["aria-invalid"];const tt=[];let et=!1,nt=!1;(Dw({value:R})||f)&&(C?Q=C(R):et=!0);const it=K.map((e=>{if(!t.isValidElement(e))return null;let n;if(b){if(!Array.isArray(R))throw new Error(sb(2));n=R.some((t=>tT(t,e.props.value))),n&&et&&tt.push(e.props.children)}else n=tT(R,e.props.value),n&&et&&(J=e.props.children);return n&&(nt=!0),t.cloneElement(e,{"aria-selected":n?"true":"false",onClick:Z(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:n,value:void 0,"data-value":e.props.value})}));et&&(Q=b?0===tt.length?null:tt.reduce(((t,e,n)=>(t.push(e),n<tt.length-1&&t.push(", "),t)),[]):J);let rt,ot=W;!a&&V&&j&&(ot=Y.clientWidth),rt="undefined"!==typeof M?M:h?null:0;const st=I.id||(_?"mui-component-select-".concat(_):void 0),at=dy({},e,{variant:O,value:R,open:$,error:p}),lt=(t=>{const{classes:e,variant:n,disabled:i,multiple:r,open:o,error:s}=t;return gy({select:["select",n,i&&"disabled",r&&"multiple",s&&"error"],icon:["icon","icon".concat(Aw(n)),o&&"iconOpen",i&&"disabled"],nativeInput:["nativeInput"]},YE,e)})(at),ct=dy({},v.PaperProps,null==(i=v.slotProps)?void 0:i.paper),ut=vy(),dt=vy();return(0,yw.jsxs)(t.Fragment,{children:[(0,yw.jsx)($E,dy({ref:q,tabIndex:rt,role:"combobox","aria-controls":ut,"aria-disabled":h?"true":void 0,"aria-expanded":$?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[y,st].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:t=>{if(!A){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(t.key)&&(t.preventDefault(),X(!0,t))}},onMouseDown:h||A?null:t=>{0===t.button&&(t.preventDefault(),D.current.focus(),X(!0,t))},onBlur:t=>{!$&&w&&(Object.defineProperty(t,"target",{writable:!0,value:{value:R,name:_}}),w(t))},onFocus:E},I,{ownerState:at,className:py(I.className,lt.select,c),id:st,children:eT(Q)?KE||(KE=(0,yw.jsx)("span",{className:"notranslate",children:"\u200b"})):Q})),(0,yw.jsx)(JE,dy({"aria-invalid":p,value:Array.isArray(R)?R.join(","):R,name:null!=_?_:dt,ref:z,"aria-hidden":!0,onChange:t=>{const e=K.find((e=>e.props.value===t.target.value));void 0!==e&&(F(e.props.value),x&&x(t,e))},tabIndex:-1,disabled:h,className:lt.nativeInput,autoFocus:s,ownerState:at},L)),(0,yw.jsx)(QE,{as:g,className:lt.icon,ownerState:at}),(0,yw.jsx)(BE,dy({id:"menu-".concat(_||""),anchorEl:Y,open:$,onClose:t=>{X(!1,t)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},v,{MenuListProps:dy({"aria-labelledby":y,role:"listbox","aria-multiselectable":b?"true":void 0,disableListWrap:!0,id:ut},v.MenuListProps),slotProps:dy({},v.slotProps,{paper:dy({},ct,{style:dy({minWidth:ot},null!=ct?ct.style:null)})}),children:it}))]})})),iT=nT;function rT(t){return Ww("MuiSvgIcon",t)}Hw("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const oT=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],sT=rw("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,"inherit"!==n.color&&e["color".concat(Aw(n.color))],e["fontSize".concat(Aw(n.fontSize))]]}})((t=>{let{theme:e,ownerState:n}=t;var i,r,o,s,a,l,c,u,d,h,f,p,g;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(i=e.transitions)||null==(r=i.create)?void 0:r.call(i,"fill",{duration:null==(o=e.transitions)||null==(o=o.duration)?void 0:o.shorter}),fontSize:{inherit:"inherit",small:(null==(s=e.typography)||null==(a=s.pxToRem)?void 0:a.call(s,20))||"1.25rem",medium:(null==(l=e.typography)||null==(c=l.pxToRem)?void 0:c.call(l,24))||"1.5rem",large:(null==(u=e.typography)||null==(d=u.pxToRem)?void 0:d.call(u,35))||"2.1875rem"}[n.fontSize],color:null!=(h=null==(f=(e.vars||e).palette)||null==(f=f[n.color])?void 0:f.main)?h:{action:null==(p=(e.vars||e).palette)||null==(p=p.action)?void 0:p.active,disabled:null==(g=(e.vars||e).palette)||null==(g=g.action)?void 0:g.disabled,inherit:void 0}[n.color]}})),aT=t.forwardRef((function(e,n){const i=uw({props:e,name:"MuiSvgIcon"}),{children:r,className:o,color:s="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:d,viewBox:h="0 0 24 24"}=i,f=hy(i,oT),p=t.isValidElement(r)&&"svg"===r.type,g=dy({},i,{color:s,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:h,hasSvgAsChild:p}),m={};u||(m.viewBox=h);const y=(t=>{const{color:e,fontSize:n,classes:i}=t;return gy({root:["root","inherit"!==e&&"color".concat(Aw(e)),"fontSize".concat(Aw(n))]},rT,i)})(g);return(0,yw.jsxs)(sT,dy({as:a,className:py(y.root,o),focusable:"false",color:c,"aria-hidden":!d||void 0,role:d?"img":void 0,ref:n},m,f,p&&r.props,{ownerState:g,children:[p?r.props.children:r,d?(0,yw.jsx)("title",{children:d}):null]}))}));aT.muiName="SvgIcon";const lT=aT;const cT=function(e,n){function i(t,i){return(0,yw.jsx)(lT,dy({"data-testid":"".concat(n,"Icon"),ref:i},t,{children:e}))}return i.muiName=lT.muiName,t.memo(t.forwardRef(i))}((0,yw.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),uT=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],dT=["root"],hT={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>ew(t)&&"variant"!==t,slot:"Root"},fT=rw(ax,hT)(""),pT=rw(Px,hT)(""),gT=rw(px,hT)(""),mT=t.forwardRef((function(e,n){const i=uw({name:"MuiSelect",props:e}),{autoWidth:r=!1,children:o,classes:s={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=cT,id:d,input:h,inputProps:f,label:p,labelId:g,MenuProps:m,multiple:y=!1,native:v=!1,onClose:b,onOpen:_,open:w,renderValue:x,SelectDisplayProps:S,variant:E="outlined"}=i,T=hy(i,uT),P=v?GE:iT,A=Ew({props:i,muiFormControl:Pw(),states:["variant","error"]}),C=A.variant||E,I=dy({},i,{variant:C,classes:s}),M=(t=>{const{classes:e}=t;return e})(I),k=hy(M,dT),O=h||{standard:(0,yw.jsx)(fT,{ownerState:I}),outlined:(0,yw.jsx)(pT,{label:p,ownerState:I}),filled:(0,yw.jsx)(gT,{ownerState:I})}[C],L=Cw(n,O.ref);return(0,yw.jsx)(t.Fragment,{children:t.cloneElement(O,dy({inputComponent:P,inputProps:dy({children:o,error:A.error,IconComponent:u,variant:C,type:void 0,multiple:y},v?{id:d}:{autoWidth:r,defaultOpen:l,displayEmpty:c,labelId:g,MenuProps:m,onClose:b,onOpen:_,open:w,renderValue:x,SelectDisplayProps:dy({id:d},S)},f,{classes:f?$v(k,f.classes):k},h?h.props.inputProps:{})},y&&v&&"outlined"===C?{notched:!0}:{},{ref:L,className:py(O.props.className,a,M.root)},!h&&{variant:C},T))})}));mT.muiName="Select";const yT=mT;function vT(t){return Ww("MuiTextField",t)}Hw("MuiTextField",["root"]);const bT=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],_T={standard:ax,filled:px,outlined:Px},wT=rw(Wx,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),xT=t.forwardRef((function(t,e){const n=uw({props:t,name:"MuiTextField"}),{autoComplete:i,autoFocus:r=!1,children:o,className:s,color:a="primary",defaultValue:l,disabled:c=!1,error:u=!1,FormHelperTextProps:d,fullWidth:h=!1,helperText:f,id:p,InputLabelProps:g,inputProps:m,InputProps:y,inputRef:v,label:b,maxRows:_,minRows:w,multiline:x=!1,name:S,onBlur:E,onChange:T,onFocus:P,placeholder:A,required:C=!1,rows:I,select:M=!1,SelectProps:k,type:O,value:L,variant:R="outlined"}=n,F=hy(n,bT),B=dy({},n,{autoFocus:r,color:a,disabled:c,error:u,fullWidth:h,multiline:x,required:C,select:M,variant:R}),N=(t=>{const{classes:e}=t;return gy({root:["root"]},vT,e)})(B);const z={};"outlined"===R&&(g&&"undefined"!==typeof g.shrink&&(z.notched=g.shrink),z.label=b),M&&(k&&k.native||(z.id=void 0),z["aria-describedby"]=void 0);const D=vy(p),j=f&&D?"".concat(D,"-helper-text"):void 0,U=b&&D?"".concat(D,"-label"):void 0,V=_T[R],W=(0,yw.jsx)(V,dy({"aria-describedby":j,autoComplete:i,autoFocus:r,defaultValue:l,fullWidth:h,multiline:x,name:S,rows:I,maxRows:_,minRows:w,type:O,value:L,id:D,inputRef:v,onBlur:E,onChange:T,onFocus:P,placeholder:A,inputProps:m},z,y));return(0,yw.jsxs)(wT,dy({className:py(N.root,s),disabled:c,error:u,fullWidth:h,ref:e,required:C,color:a,variant:R,ownerState:B},F,{children:[null!=b&&""!==b&&(0,yw.jsx)(Nx,dy({htmlFor:D,id:U},g,{children:b})),M?(0,yw.jsx)(yT,dy({"aria-describedby":j,id:D,labelId:U,value:L,input:W},k,{children:o})):W,f&&(0,yw.jsx)(Zx,dy({id:j},d,{children:f}))]}))})),ST=xT,ET=zS;let TT,PT=!0,AT=!1;const CT={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function IT(t){t.metaKey||t.altKey||t.ctrlKey||(PT=!0)}function MT(){PT=!1}function kT(){"hidden"===this.visibilityState&&AT&&(PT=!0)}function OT(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch(n){}return PT||function(t){const{type:e,tagName:n}=t;return!("INPUT"!==n||!CT[e]||t.readOnly)||"TEXTAREA"===n&&!t.readOnly||!!t.isContentEditable}(e)}const LT=function(){const e=t.useCallback((t=>{var e;null!=t&&((e=t.ownerDocument).addEventListener("keydown",IT,!0),e.addEventListener("mousedown",MT,!0),e.addEventListener("pointerdown",MT,!0),e.addEventListener("touchstart",MT,!0),e.addEventListener("visibilitychange",kT,!0))}),[]),n=t.useRef(!1);return{isFocusVisibleRef:n,onFocus:function(t){return!!OT(t)&&(n.current=!0,!0)},onBlur:function(){return!!n.current&&(AT=!0,window.clearTimeout(TT),TT=window.setTimeout((()=>{AT=!1}),100),n.current=!1,!0)},ref:e}};function RT(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function FT(e,n){var i=Object.create(null);return e&&t.Children.map(e,(function(t){return t})).forEach((function(e){i[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),i}function BT(t,e,n){return null!=n[e]?n[e]:t.props[e]}function NT(e,n,i){var r=FT(e.children),o=function(t,e){function n(n){return n in e?e[n]:t[n]}t=t||{},e=e||{};var i,r=Object.create(null),o=[];for(var s in t)s in e?o.length&&(r[s]=o,o=[]):o.push(s);var a={};for(var l in e){if(r[l])for(i=0;i<r[l].length;i++){var c=r[l][i];a[r[l][i]]=n(c)}a[l]=n(l)}for(i=0;i<o.length;i++)a[o[i]]=n(o[i]);return a}(n,r);return Object.keys(o).forEach((function(s){var a=o[s];if((0,t.isValidElement)(a)){var l=s in n,c=s in r,u=n[s],d=(0,t.isValidElement)(u)&&!u.props.in;!c||l&&!d?c||!l||d?c&&l&&(0,t.isValidElement)(u)&&(o[s]=(0,t.cloneElement)(a,{onExited:i.bind(null,a),in:u.props.in,exit:BT(a,"exit",e),enter:BT(a,"enter",e)})):o[s]=(0,t.cloneElement)(a,{in:!1}):o[s]=(0,t.cloneElement)(a,{onExited:i.bind(null,a),in:!0,exit:BT(a,"exit",e),enter:BT(a,"enter",e)})}})),o}var zT=Object.values||function(t){return Object.keys(t).map((function(e){return t[e]}))},DT=function(e){function n(t,n){var i,r=(i=e.call(this,t,n)||this).handleExited.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i));return i.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},i}vS(n,e);var i=n.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var i,r,o=n.children,s=n.handleExited;return{children:n.firstRender?(i=e,r=s,FT(i.children,(function(e){return(0,t.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:BT(e,"appear",i),enter:BT(e,"enter",i),exit:BT(e,"exit",i)})}))):NT(e,o,s),firstRender:!1}},i.handleExited=function(t,e){var n=FT(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState((function(e){var n=dy({},e.children);return delete n[t.key],{children:n}})))},i.render=function(){var e=this.props,n=e.component,i=e.childFactory,r=hy(e,["component","childFactory"]),o=this.state.contextValue,s=zT(this.state.children).map(i);return delete r.appear,delete r.enter,delete r.exit,null===n?t.createElement(_S.Provider,{value:o},s):t.createElement(_S.Provider,{value:o},t.createElement(n,r,s))},n}(t.Component);DT.propTypes={},DT.defaultProps={component:"div",childFactory:function(t){return t}};const jT=DT;const UT=function(e){const{className:n,classes:i,pulsate:r=!1,rippleX:o,rippleY:s,rippleSize:a,in:l,onExited:c,timeout:u}=e,[d,h]=t.useState(!1),f=py(n,i.ripple,i.rippleVisible,r&&i.ripplePulsate),p={width:a,height:a,top:-a/2+s,left:-a/2+o},g=py(i.child,d&&i.childLeaving,r&&i.childPulsate);return l||d||h(!0),t.useEffect((()=>{if(!l&&null!=c){const t=setTimeout(c,u);return()=>{clearTimeout(t)}}}),[c,l,u]),(0,yw.jsx)("span",{className:f,style:p,children:(0,yw.jsx)("span",{className:g})})};const VT=Hw("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var WT,HT,GT,qT;const YT=["center","classes","className"];let XT,KT,ZT,$T;const QT=Rw(XT||(XT=WT||(WT=RT(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),JT=Rw(KT||(KT=HT||(HT=RT(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),tP=Rw(ZT||(ZT=GT||(GT=RT(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),eP=rw("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),nP=rw(UT,{name:"MuiTouchRipple",slot:"Ripple"})($T||($T=qT||(qT=RT(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),VT.rippleVisible,QT,550,(t=>{let{theme:e}=t;return e.transitions.easing.easeInOut}),VT.ripplePulsate,(t=>{let{theme:e}=t;return e.transitions.duration.shorter}),VT.child,VT.childLeaving,JT,550,(t=>{let{theme:e}=t;return e.transitions.easing.easeInOut}),VT.childPulsate,tP,(t=>{let{theme:e}=t;return e.transitions.easing.easeInOut})),iP=t.forwardRef((function(e,n){const i=uw({props:e,name:"MuiTouchRipple"}),{center:r=!1,classes:o={},className:s}=i,a=hy(i,YT),[l,c]=t.useState([]),u=t.useRef(0),d=t.useRef(null);t.useEffect((()=>{d.current&&(d.current(),d.current=null)}),[l]);const h=t.useRef(!1),f=t.useRef(0),p=t.useRef(null),g=t.useRef(null);t.useEffect((()=>()=>{f.current&&clearTimeout(f.current)}),[]);const m=t.useCallback((t=>{const{pulsate:e,rippleX:n,rippleY:i,rippleSize:r,cb:s}=t;c((t=>[...t,(0,yw.jsx)(nP,{classes:{ripple:py(o.ripple,VT.ripple),rippleVisible:py(o.rippleVisible,VT.rippleVisible),ripplePulsate:py(o.ripplePulsate,VT.ripplePulsate),child:py(o.child,VT.child),childLeaving:py(o.childLeaving,VT.childLeaving),childPulsate:py(o.childPulsate,VT.childPulsate)},timeout:550,pulsate:e,rippleX:n,rippleY:i,rippleSize:r},u.current)])),u.current+=1,d.current=s}),[o]),y=t.useCallback((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:i=!1,center:o=r||e.pulsate,fakeElement:s=!1}=e;if("mousedown"===(null==t?void 0:t.type)&&h.current)return void(h.current=!1);"touchstart"===(null==t?void 0:t.type)&&(h.current=!0);const a=s?null:g.current,l=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,d;if(o||void 0===t||0===t.clientX&&0===t.clientY||!t.clientX&&!t.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:e,clientY:n}=t.touches&&t.touches.length>0?t.touches[0]:t;c=Math.round(e-l.left),u=Math.round(n-l.top)}if(o)d=Math.sqrt((2*l.width**2+l.height**2)/3),d%2===0&&(d+=1);else{const t=2*Math.max(Math.abs((a?a.clientWidth:0)-c),c)+2,e=2*Math.max(Math.abs((a?a.clientHeight:0)-u),u)+2;d=Math.sqrt(t**2+e**2)}null!=t&&t.touches?null===p.current&&(p.current=()=>{m({pulsate:i,rippleX:c,rippleY:u,rippleSize:d,cb:n})},f.current=setTimeout((()=>{p.current&&(p.current(),p.current=null)}),80)):m({pulsate:i,rippleX:c,rippleY:u,rippleSize:d,cb:n})}),[r,m]),v=t.useCallback((()=>{y({},{pulsate:!0})}),[y]),b=t.useCallback(((t,e)=>{if(clearTimeout(f.current),"touchend"===(null==t?void 0:t.type)&&p.current)return p.current(),p.current=null,void(f.current=setTimeout((()=>{b(t,e)})));p.current=null,c((t=>t.length>0?t.slice(1):t)),d.current=e}),[]);return t.useImperativeHandle(n,(()=>({pulsate:v,start:y,stop:b})),[v,y,b]),(0,yw.jsx)(eP,dy({className:py(VT.root,o.root,s),ref:g},a,{children:(0,yw.jsx)(jT,{component:null,exit:!0,children:l})}))}));function rP(t){return Ww("MuiButtonBase",t)}const oP=Hw("MuiButtonBase",["root","disabled","focusVisible"]),sP=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],aP=rw("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(oP.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),lP=t.forwardRef((function(e,n){const i=uw({props:e,name:"MuiButtonBase"}),{action:r,centerRipple:o=!1,children:s,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:h=!1,LinkComponent:f="a",onBlur:p,onClick:g,onContextMenu:m,onDragLeave:y,onFocus:v,onFocusVisible:b,onKeyDown:_,onKeyUp:w,onMouseDown:x,onMouseLeave:S,onMouseUp:E,onTouchEnd:T,onTouchMove:P,onTouchStart:A,tabIndex:C=0,TouchRippleProps:I,touchRippleRef:M,type:k}=i,O=hy(i,sP),L=t.useRef(null),R=t.useRef(null),F=Cw(R,M),{isFocusVisibleRef:B,onFocus:N,onBlur:z,ref:D}=LT(),[j,U]=t.useState(!1);c&&j&&U(!1),t.useImperativeHandle(r,(()=>({focusVisible:()=>{U(!0),L.current.focus()}})),[]);const[V,W]=t.useState(!1);t.useEffect((()=>{W(!0)}),[]);const H=V&&!u&&!c;function G(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;return ET((i=>{e&&e(i);return!n&&R.current&&R.current[t](i),!0}))}t.useEffect((()=>{j&&h&&!u&&V&&R.current.pulsate()}),[u,h,j,V]);const q=G("start",x),Y=G("stop",m),X=G("stop",y),K=G("stop",E),Z=G("stop",(t=>{j&&t.preventDefault(),S&&S(t)})),$=G("start",A),Q=G("stop",T),J=G("stop",P),tt=G("stop",(t=>{z(t),!1===B.current&&U(!1),p&&p(t)}),!1),et=ET((t=>{L.current||(L.current=t.currentTarget),N(t),!0===B.current&&(U(!0),b&&b(t)),v&&v(t)})),nt=()=>{const t=L.current;return l&&"button"!==l&&!("A"===t.tagName&&t.href)},it=t.useRef(!1),rt=ET((t=>{h&&!it.current&&j&&R.current&&" "===t.key&&(it.current=!0,R.current.stop(t,(()=>{R.current.start(t)}))),t.target===t.currentTarget&&nt()&&" "===t.key&&t.preventDefault(),_&&_(t),t.target===t.currentTarget&&nt()&&"Enter"===t.key&&!c&&(t.preventDefault(),g&&g(t))})),ot=ET((t=>{h&&" "===t.key&&R.current&&j&&!t.defaultPrevented&&(it.current=!1,R.current.stop(t,(()=>{R.current.pulsate(t)}))),w&&w(t),g&&t.target===t.currentTarget&&nt()&&" "===t.key&&!t.defaultPrevented&&g(t)}));let st=l;"button"===st&&(O.href||O.to)&&(st=f);const at={};"button"===st?(at.type=void 0===k?"button":k,at.disabled=c):(O.href||O.to||(at.role="button"),c&&(at["aria-disabled"]=c));const lt=Cw(n,D,L);const ct=dy({},i,{centerRipple:o,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:h,tabIndex:C,focusVisible:j}),ut=(t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:i,classes:r}=t,o=gy({root:["root",e&&"disabled",n&&"focusVisible"]},rP,r);return n&&i&&(o.root+=" ".concat(i)),o})(ct);return(0,yw.jsxs)(aP,dy({as:st,className:py(ut.root,a),ownerState:ct,onBlur:tt,onClick:g,onContextMenu:Y,onFocus:et,onKeyDown:rt,onKeyUp:ot,onMouseDown:q,onMouseLeave:Z,onMouseUp:K,onDragLeave:X,onTouchEnd:Q,onTouchMove:J,onTouchStart:$,ref:lt,tabIndex:c?-1:C,type:k},at,O,{children:[s,H?(0,yw.jsx)(iP,dy({ref:F,center:o},I)):null]}))})),cP=lP;function uP(t){return Ww("MuiListItem",t)}const dP=Hw("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);const hP=Hw("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function fP(t){return Ww("MuiListItemSecondaryAction",t)}Hw("MuiListItemSecondaryAction",["root","disableGutters"]);const pP=["className"],gP=rw("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.disableGutters&&e.disableGutters]}})((t=>{let{ownerState:e}=t;return dy({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})})),mP=t.forwardRef((function(e,n){const i=uw({props:e,name:"MuiListItemSecondaryAction"}),{className:r}=i,o=hy(i,pP),s=dy({},i,{disableGutters:t.useContext(nS).disableGutters}),a=(t=>{const{disableGutters:e,classes:n}=t;return gy({root:["root",e&&"disableGutters"]},fP,n)})(s);return(0,yw.jsx)(gP,dy({className:py(a.root,r),ownerState:s,ref:n},o))}));mP.muiName="ListItemSecondaryAction";const yP=mP,vP=["className"],bP=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],_P=rw("div",{name:"MuiListItem",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,"flex-start"===n.alignItems&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.button&&e.button,n.hasSecondaryAction&&e.secondaryAction]}})((t=>{let{theme:e,ownerState:n}=t;return dy({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!n.disablePadding&&dy({paddingTop:8,paddingBottom:8},n.dense&&{paddingTop:4,paddingBottom:4},!n.disableGutters&&{paddingLeft:16,paddingRight:16},!!n.secondaryAction&&{paddingRight:48}),!!n.secondaryAction&&{["& > .".concat(hP.root)]:{paddingRight:48}},{["&.".concat(dP.focusVisible)]:{backgroundColor:(e.vars||e).palette.action.focus},["&.".concat(dP.selected)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):x_(e.palette.primary.main,e.palette.action.selectedOpacity),["&.".concat(dP.focusVisible)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.focusOpacity,"))"):x_(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},["&.".concat(dP.disabled)]:{opacity:(e.vars||e).palette.action.disabledOpacity}},"flex-start"===n.alignItems&&{alignItems:"flex-start"},n.divider&&{borderBottom:"1px solid ".concat((e.vars||e).palette.divider),backgroundClip:"padding-box"},n.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(dP.selected,":hover")]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.hoverOpacity,"))"):x_(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):x_(e.palette.primary.main,e.palette.action.selectedOpacity)}}},n.hasSecondaryAction&&{paddingRight:48})})),wP=rw("li",{name:"MuiListItem",slot:"Container",overridesResolver:(t,e)=>e.container})({position:"relative"}),xP=t.forwardRef((function(e,n){const i=uw({props:e,name:"MuiListItem"}),{alignItems:r="center",autoFocus:o=!1,button:s=!1,children:a,className:l,component:c,components:u={},componentsProps:d={},ContainerComponent:h="li",ContainerProps:{className:f}={},dense:p=!1,disabled:g=!1,disableGutters:m=!1,disablePadding:y=!1,divider:v=!1,focusVisibleClassName:b,secondaryAction:_,selected:w=!1,slotProps:x={},slots:S={}}=i,E=hy(i.ContainerProps,vP),T=hy(i,bP),P=t.useContext(nS),A=t.useMemo((()=>({dense:p||P.dense||!1,alignItems:r,disableGutters:m})),[r,P.dense,p,m]),C=t.useRef(null);Iw((()=>{o&&C.current&&C.current.focus()}),[o]);const I=t.Children.toArray(a),M=I.length&&zx(I[I.length-1],["ListItemSecondaryAction"]),k=dy({},i,{alignItems:r,autoFocus:o,button:s,dense:A.dense,disabled:g,disableGutters:m,disablePadding:y,divider:v,hasSecondaryAction:M,selected:w}),O=(t=>{const{alignItems:e,button:n,classes:i,dense:r,disabled:o,disableGutters:s,disablePadding:a,divider:l,hasSecondaryAction:c,selected:u}=t;return gy({root:["root",r&&"dense",!s&&"gutters",!a&&"padding",l&&"divider",o&&"disabled",n&&"button","flex-start"===e&&"alignItemsFlexStart",c&&"secondaryAction",u&&"selected"],container:["container"]},uP,i)})(k),L=Cw(C,n),R=S.root||u.Root||_P,F=x.root||d.root||{},B=dy({className:py(O.root,F.className,l),disabled:g},T);let N=c||"li";return s&&(B.component=c||"div",B.focusVisibleClassName=py(dP.focusVisible,b),N=cP),M?(N=B.component||c?N:"div","li"===h&&("li"===N?N="div":"li"===B.component&&(B.component="div")),(0,yw.jsx)(nS.Provider,{value:A,children:(0,yw.jsxs)(wP,dy({as:h,className:py(O.container,f),ref:L,ownerState:k},E,{children:[(0,yw.jsx)(R,dy({},F,!Sw(R)&&{as:N,ownerState:dy({},k,F.ownerState)},B,{children:I})),I.pop()]}))})):(0,yw.jsx)(nS.Provider,{value:A,children:(0,yw.jsxs)(R,dy({},F,{as:N,ref:L},!Sw(R)&&{ownerState:dy({},k,F.ownerState)},B,{children:[I,_&&(0,yw.jsx)(yP,{children:_})]}))})})),SP=xP;var EP,TP,PP,AP,CP,IP,MP,kP,OP,LP=n(291);!function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(EP||(EP={})),function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(TP||(TP={})),function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(PP||(PP={})),function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(AP||(AP={})),function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(CP||(CP={})),function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(IP||(IP={})),function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(MP||(MP={})),function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(kP||(kP={})),function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"}(OP||(OP={}));const[RP,FP]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},"undefined"!==typeof BigInt?[BigInt,!0]:[e,!1]})(),[BP,NP]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};return"undefined"!==typeof BigInt64Array?[BigInt64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),[zP,DP]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};return"undefined"!==typeof BigUint64Array?[BigUint64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),jP=t=>"number"===typeof t,UP=t=>"boolean"===typeof t,VP=t=>"function"===typeof t,WP=t=>null!=t&&Object(t)===t,HP=t=>WP(t)&&VP(t.then),GP=t=>WP(t)&&VP(t[Symbol.iterator]),qP=t=>WP(t)&&VP(t[Symbol.asyncIterator]),YP=t=>WP(t)&&WP(t.schema),XP=t=>WP(t)&&"done"in t&&"value"in t,KP=t=>WP(t)&&VP(t.stat)&&jP(t.fd),ZP=t=>WP(t)&&QP(t.body),$P=t=>"_getDOMStream"in t&&"_getNodeStream"in t,QP=t=>WP(t)&&VP(t.cancel)&&VP(t.getReader)&&!$P(t),JP=t=>WP(t)&&VP(t.read)&&VP(t.pipe)&&UP(t.readable)&&!$P(t),tA=t=>WP(t)&&VP(t.clear)&&VP(t.bytes)&&VP(t.position)&&VP(t.setPosition)&&VP(t.capacity)&&VP(t.getBufferIdentifier)&&VP(t.createLong);function eA(t){if(null===t)return"null";if(undefined===t)return"undefined";switch(typeof t){case"number":case"bigint":return"".concat(t);case"string":return'"'.concat(t,'"')}return"function"===typeof t[Symbol.toPrimitive]?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?"[".concat(t instanceof BP||t instanceof zP?[...t].map((t=>eA(t))):t,"]"):ArrayBuffer.isView(t)?"[".concat(t,"]"):JSON.stringify(t,((t,e)=>"bigint"===typeof e?"".concat(e):e))}function nA(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{l(i.next(t))}catch(e){o(e)}}function a(t){try{l(i.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))}Object.create;function iA(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rA(t){return this instanceof rA?(this.v=t,this):new rA(t)}function oA(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(t){r[t]&&(i[t]=function(e){return new Promise((function(n,i){o.push([t,e,n,i])>1||a(t,e)}))})}function a(t,e){try{!function(t){t.value instanceof rA?Promise.resolve(t.value.v).then(l,c):u(o[0][2],t)}(r[t](e))}catch(n){u(o[0][3],n)}}function l(t){a("next",t)}function c(t){a("throw",t)}function u(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function sA(t){var e,n;return e={},i("next"),i("throw",(function(t){throw t})),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,r){e[i]=t[i]?function(e){return(n=!n)?{value:rA(t[i](e)),done:!1}:r?r(e):e}:r}}function aA(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=iA(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){(function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)})(i,r,(e=t[n](e)).done,e.value)}))}}}Object.create;"function"===typeof SuppressedError&&SuppressedError;const lA=new TextDecoder("utf-8"),cA=t=>lA.decode(t),uA=new TextEncoder,dA=t=>uA.encode(t),hA="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function fA(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.byteLength;const r=t.byteLength,o=new Uint8Array(t.buffer,t.byteOffset,r),s=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,r));return o.set(s,n),t}function pA(t,e){const n=function(t){const e=t[0]?[t[0]]:[];let n,i,r,o;for(let s,a,l=0,c=0,u=t.length;++l<u;)s=e[c],a=t[l],!s||!a||s.buffer!==a.buffer||a.byteOffset<s.byteOffset?a&&(e[++c]=a):(({byteOffset:n,byteLength:r}=s),({byteOffset:i,byteLength:o}=a),n+r<i||i+o<n?a&&(e[++c]=a):e[c]=new Uint8Array(s.buffer,n,i-n+o));return e}(t),i=n.reduce(((t,e)=>t+e.byteLength),0);let r,o,s,a=0,l=-1;const c=Math.min(e||Number.POSITIVE_INFINITY,i);for(const u=n.length;++l<u;){if(r=n[l],o=r.subarray(0,Math.min(r.length,c-a)),c<=a+o.length){o.length<r.length?n[l]=r.subarray(o.length):o.length===r.length&&l++,s?fA(s,o,a):s=o;break}fA(s||(s=new Uint8Array(c)),o,a),a+=o.length}return[s||new Uint8Array(0),n.slice(l),i-(s?s.byteLength:0)]}function gA(t,e){let n=XP(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?("string"===typeof n&&(n=dA(n)),n instanceof ArrayBuffer||n instanceof hA?new t(n):tA(n)?gA(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const mA=t=>gA(Int32Array,t),yA=t=>gA(Uint8Array,t),vA=t=>(t.next(),t);function*bA(t,e){const n=function*(t){yield t},i="string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof hA?n(e):GP(e)?e:n(e);return yield*vA(function*(e){let n=null;do{n=e.next(yield gA(t,n))}while(!n.done)}(i[Symbol.iterator]())),new t}function _A(t,e){return oA(this,arguments,(function*(){if(HP(e))return yield rA(yield rA(yield*sA(aA(_A(t,yield rA(e))))));const n=function(t){return oA(this,arguments,(function*(){yield yield rA(yield rA(t))}))},i="string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof hA?n(e):GP(e)?function(t){return oA(this,arguments,(function*(){yield rA(yield*sA(aA(vA(function*(t){let e=null;do{e=t.next(yield null===e||void 0===e?void 0:e.value)}while(!e.done)}(t[Symbol.iterator]())))))}))}(e):qP(e)?e:n(e);return yield rA(yield*sA(aA(vA(function(e){return oA(this,arguments,(function*(){let n=null;do{n=yield rA(e.next(yield yield rA(gA(t,n))))}while(!n.done)}))}(i[Symbol.asyncIterator]()))))),yield rA(new t)}))}function wA(t,e,n){if(0!==t){n=n.slice(0,e+1);for(let i=-1;++i<=e;)n[i]+=t}return n}const xA=Symbol.for("isArrowBigNum");function SA(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return 0===n.length?Object.setPrototypeOf(gA(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...n),this.constructor.prototype)}function EA(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return SA.apply(this,e)}function TA(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return SA.apply(this,e)}function PA(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return SA.apply(this,e)}function AA(t){const{buffer:e,byteOffset:n,length:i,signed:r}=t,o=new zP(e,n,i),s=r&&o[o.length-1]&BigInt(1)<<BigInt(63);let a=s?BigInt(1):BigInt(0),l=BigInt(0);if(s){for(const t of o)a+=~t*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const c of o)a+=c*(BigInt(1)<<BigInt(32)*l++);return a}let CA,IA;function MA(t){let e="";const n=new Uint32Array(2);let i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let o=-1;const s=i.length-1;do{for(n[0]=i[o=0];o<s;)i[o++]=n[1]=n[0]/10,n[0]=(n[0]-10*n[1]<<16)+i[o];i[o]=n[1]=n[0]/10,n[0]=n[0]-10*n[1],e="".concat(n[0]).concat(e)}while(r[0]||r[1]||r[2]||r[3]);return null!==e&&void 0!==e?e:"0"}SA.prototype[xA]=!0,SA.prototype.toJSON=function(){return'"'.concat(CA(this),'"')},SA.prototype.valueOf=function(){return AA(this)},SA.prototype.toString=function(){return CA(this)},SA.prototype[Symbol.toPrimitive]=function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default"){case"number":return AA(this);case"string":return CA(this);case"default":return IA(this)}return CA(this)},Object.setPrototypeOf(EA.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(TA.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(PA.prototype,Object.create(Uint32Array.prototype)),Object.assign(EA.prototype,SA.prototype,{constructor:EA,signed:!0,TypedArray:Int32Array,BigIntArray:BP}),Object.assign(TA.prototype,SA.prototype,{constructor:TA,signed:!1,TypedArray:Uint32Array,BigIntArray:zP}),Object.assign(PA.prototype,SA.prototype,{constructor:PA,signed:!0,TypedArray:Uint32Array,BigIntArray:zP}),FP?(IA=t=>8===t.byteLength?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:MA(t),CA=t=>8===t.byteLength?"".concat(new t.BigIntArray(t.buffer,t.byteOffset,1)[0]):MA(t)):(CA=MA,IA=CA);class kA{static new(t,e){switch(e){case!0:return new EA(t);case!1:return new TA(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BP:return new EA(t)}return 16===t.byteLength?new PA(t):new TA(t)}static signed(t){return new EA(t)}static unsigned(t){return new TA(t)}static decimal(t){return new PA(t)}constructor(t,e){return kA.new(t,e)}}var OA,LA,RA,FA,BA,NA,zA,DA,jA,UA,VA,WA,HA,GA,qA,YA,XA,KA,ZA,$A;class QA{static isNull(t){return(null===t||void 0===t?void 0:t.typeId)===kP.Null}static isInt(t){return(null===t||void 0===t?void 0:t.typeId)===kP.Int}static isFloat(t){return(null===t||void 0===t?void 0:t.typeId)===kP.Float}static isBinary(t){return(null===t||void 0===t?void 0:t.typeId)===kP.Binary}static isUtf8(t){return(null===t||void 0===t?void 0:t.typeId)===kP.Utf8}static isBool(t){return(null===t||void 0===t?void 0:t.typeId)===kP.Bool}static isDecimal(t){return(null===t||void 0===t?void 0:t.typeId)===kP.Decimal}static isDate(t){return(null===t||void 0===t?void 0:t.typeId)===kP.Date}static isTime(t){return(null===t||void 0===t?void 0:t.typeId)===kP.Time}static isTimestamp(t){return(null===t||void 0===t?void 0:t.typeId)===kP.Timestamp}static isInterval(t){return(null===t||void 0===t?void 0:t.typeId)===kP.Interval}static isList(t){return(null===t||void 0===t?void 0:t.typeId)===kP.List}static isStruct(t){return(null===t||void 0===t?void 0:t.typeId)===kP.Struct}static isUnion(t){return(null===t||void 0===t?void 0:t.typeId)===kP.Union}static isFixedSizeBinary(t){return(null===t||void 0===t?void 0:t.typeId)===kP.FixedSizeBinary}static isFixedSizeList(t){return(null===t||void 0===t?void 0:t.typeId)===kP.FixedSizeList}static isMap(t){return(null===t||void 0===t?void 0:t.typeId)===kP.Map}static isDictionary(t){return(null===t||void 0===t?void 0:t.typeId)===kP.Dictionary}static isDenseUnion(t){return QA.isUnion(t)&&t.mode===TP.Dense}static isSparseUnion(t){return QA.isUnion(t)&&t.mode===TP.Sparse}get typeId(){return kP.NONE}}OA=Symbol.toStringTag,QA[OA]=(($A=QA.prototype).children=null,$A.ArrayType=Array,$A[Symbol.toStringTag]="DataType");class JA extends QA{toString(){return"Null"}get typeId(){return kP.Null}}LA=Symbol.toStringTag,JA[LA]=(t=>t[Symbol.toStringTag]="Null")(JA.prototype);class tC extends QA{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return kP.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BP:zP}throw new Error("Unrecognized ".concat(this[Symbol.toStringTag]," type"))}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}RA=Symbol.toStringTag,tC[RA]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(tC.prototype);class eC extends tC{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(class extends tC{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(class extends tC{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(eC.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(class extends tC{constructor(){super(!0,64)}get ArrayType(){return BP}}.prototype,"ArrayType",{value:BP}),Object.defineProperty(class extends tC{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(class extends tC{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(class extends tC{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(class extends tC{constructor(){super(!1,64)}get ArrayType(){return zP}}.prototype,"ArrayType",{value:zP});class nC extends QA{constructor(t){super(),this.precision=t}get typeId(){return kP.Float}get ArrayType(){switch(this.precision){case PP.HALF:return Uint16Array;case PP.SINGLE:return Float32Array;case PP.DOUBLE:return Float64Array}throw new Error("Unrecognized ".concat(this[Symbol.toStringTag]," type"))}toString(){return"Float".concat(this.precision<<5||16)}}FA=Symbol.toStringTag,nC[FA]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(nC.prototype);Object.defineProperty(class extends nC{constructor(){super(PP.HALF)}}.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(class extends nC{constructor(){super(PP.SINGLE)}}.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(class extends nC{constructor(){super(PP.DOUBLE)}}.prototype,"ArrayType",{value:Float64Array});class iC extends QA{constructor(){super()}get typeId(){return kP.Binary}toString(){return"Binary"}}BA=Symbol.toStringTag,iC[BA]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(iC.prototype);class rC extends QA{constructor(){super()}get typeId(){return kP.Utf8}toString(){return"Utf8"}}NA=Symbol.toStringTag,rC[NA]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(rC.prototype);class oC extends QA{constructor(){super()}get typeId(){return kP.Bool}toString(){return"Bool"}}zA=Symbol.toStringTag,oC[zA]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(oC.prototype);class sC extends QA{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;super(),this.scale=t,this.precision=e,this.bitWidth=n}get typeId(){return kP.Decimal}toString(){return"Decimal[".concat(this.precision,"e").concat(this.scale>0?"+":"").concat(this.scale,"]")}}DA=Symbol.toStringTag,sC[DA]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(sC.prototype);class aC extends QA{constructor(t){super(),this.unit=t}get typeId(){return kP.Date}toString(){return"Date".concat(32*(this.unit+1),"<").concat(AP[this.unit],">")}}jA=Symbol.toStringTag,aC[jA]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(aC.prototype);class lC extends QA{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return kP.Time}toString(){return"Time".concat(this.bitWidth,"<").concat(CP[this.unit],">")}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BP}throw new Error("Unrecognized ".concat(this[Symbol.toStringTag]," type"))}}UA=Symbol.toStringTag,lC[UA]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(lC.prototype);class cC extends QA{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return kP.Timestamp}toString(){return"Timestamp<".concat(CP[this.unit]).concat(this.timezone?", ".concat(this.timezone):"",">")}}VA=Symbol.toStringTag,cC[VA]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(cC.prototype);class uC extends QA{constructor(t){super(),this.unit=t}get typeId(){return kP.Interval}toString(){return"Interval<".concat(IP[this.unit],">")}}WA=Symbol.toStringTag,uC[WA]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(uC.prototype);class dC extends QA{constructor(t){super(),this.children=[t]}get typeId(){return kP.List}toString(){return"List<".concat(this.valueType,">")}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}HA=Symbol.toStringTag,dC[HA]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(dC.prototype);class hC extends QA{constructor(t){super(),this.children=t}get typeId(){return kP.Struct}toString(){return"Struct<{".concat(this.children.map((t=>"".concat(t.name,":").concat(t.type))).join(", "),"}>")}}GA=Symbol.toStringTag,hC[GA]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(hC.prototype);class fC extends QA{constructor(t,e,n){super(),this.mode=t,this.children=n,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce(((t,e,n)=>(t[e]=n)&&t||t),Object.create(null))}get typeId(){return kP.Union}toString(){return"".concat(this[Symbol.toStringTag],"<").concat(this.children.map((t=>"".concat(t.type))).join(" | "),">")}}qA=Symbol.toStringTag,fC[qA]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(fC.prototype);class pC extends QA{constructor(t){super(),this.byteWidth=t}get typeId(){return kP.FixedSizeBinary}toString(){return"FixedSizeBinary[".concat(this.byteWidth,"]")}}YA=Symbol.toStringTag,pC[YA]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(pC.prototype);class gC extends QA{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return kP.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}XA=Symbol.toStringTag,gC[XA]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(gC.prototype);class mC extends QA{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.children=[t],this.keysSorted=e}get typeId(){return kP.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return"Map<{".concat(this.children[0].type.children.map((t=>"".concat(t.name,":").concat(t.type))).join(", "),"}>")}}KA=Symbol.toStringTag,mC[KA]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(mC.prototype);const yC=(vC=-1,()=>++vC);var vC;class bC extends QA{constructor(t,e,n,i){super(),this.indices=e,this.dictionary=t,this.isOrdered=i||!1,this.id=null==n?yC():"number"===typeof n?n:n.low}get typeId(){return kP.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return"Dictionary<".concat(this.indices,", ").concat(this.dictionary,">")}}function _C(t){const e=t;switch(t.typeId){case kP.Decimal:return t.bitWidth/32;case kP.Timestamp:return 2;case kP.Date:case kP.Interval:return 1+e.unit;case kP.FixedSizeList:return e.listSize;case kP.FixedSizeBinary:return e.byteWidth;default:return 1}}ZA=Symbol.toStringTag,bC[ZA]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(bC.prototype);class wC{visitMany(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.map(((t,e)=>this.visit(t,...n.map((t=>t[e])))))}visit(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(t){return function(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("number"===typeof e)return xC(t,e,n);if("string"===typeof e&&e in kP)return xC(t,kP[e],n);if(e&&e instanceof QA)return xC(t,SC(e),n);if((null===e||void 0===e?void 0:e.type)&&e.type instanceof QA)return xC(t,SC(e.type),n);return xC(t,kP.NONE,n)}(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}getVisitFnByTypeId(t){return xC(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}visitNull(t){return null}visitBool(t){return null}visitInt(t){return null}visitFloat(t){return null}visitUtf8(t){return null}visitBinary(t){return null}visitFixedSizeBinary(t){return null}visitDate(t){return null}visitTimestamp(t){return null}visitTime(t){return null}visitDecimal(t){return null}visitList(t){return null}visitStruct(t){return null}visitUnion(t){return null}visitDictionary(t){return null}visitInterval(t){return null}visitFixedSizeList(t){return null}visitMap(t){return null}}function xC(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=null;switch(e){case kP.Null:i=t.visitNull;break;case kP.Bool:i=t.visitBool;break;case kP.Int:i=t.visitInt;break;case kP.Int8:i=t.visitInt8||t.visitInt;break;case kP.Int16:i=t.visitInt16||t.visitInt;break;case kP.Int32:i=t.visitInt32||t.visitInt;break;case kP.Int64:i=t.visitInt64||t.visitInt;break;case kP.Uint8:i=t.visitUint8||t.visitInt;break;case kP.Uint16:i=t.visitUint16||t.visitInt;break;case kP.Uint32:i=t.visitUint32||t.visitInt;break;case kP.Uint64:i=t.visitUint64||t.visitInt;break;case kP.Float:i=t.visitFloat;break;case kP.Float16:i=t.visitFloat16||t.visitFloat;break;case kP.Float32:i=t.visitFloat32||t.visitFloat;break;case kP.Float64:i=t.visitFloat64||t.visitFloat;break;case kP.Utf8:i=t.visitUtf8;break;case kP.Binary:i=t.visitBinary;break;case kP.FixedSizeBinary:i=t.visitFixedSizeBinary;break;case kP.Date:i=t.visitDate;break;case kP.DateDay:i=t.visitDateDay||t.visitDate;break;case kP.DateMillisecond:i=t.visitDateMillisecond||t.visitDate;break;case kP.Timestamp:i=t.visitTimestamp;break;case kP.TimestampSecond:i=t.visitTimestampSecond||t.visitTimestamp;break;case kP.TimestampMillisecond:i=t.visitTimestampMillisecond||t.visitTimestamp;break;case kP.TimestampMicrosecond:i=t.visitTimestampMicrosecond||t.visitTimestamp;break;case kP.TimestampNanosecond:i=t.visitTimestampNanosecond||t.visitTimestamp;break;case kP.Time:i=t.visitTime;break;case kP.TimeSecond:i=t.visitTimeSecond||t.visitTime;break;case kP.TimeMillisecond:i=t.visitTimeMillisecond||t.visitTime;break;case kP.TimeMicrosecond:i=t.visitTimeMicrosecond||t.visitTime;break;case kP.TimeNanosecond:i=t.visitTimeNanosecond||t.visitTime;break;case kP.Decimal:i=t.visitDecimal;break;case kP.List:i=t.visitList;break;case kP.Struct:i=t.visitStruct;break;case kP.Union:i=t.visitUnion;break;case kP.DenseUnion:i=t.visitDenseUnion||t.visitUnion;break;case kP.SparseUnion:i=t.visitSparseUnion||t.visitUnion;break;case kP.Dictionary:i=t.visitDictionary;break;case kP.Interval:i=t.visitInterval;break;case kP.IntervalDayTime:i=t.visitIntervalDayTime||t.visitInterval;break;case kP.IntervalYearMonth:i=t.visitIntervalYearMonth||t.visitInterval;break;case kP.FixedSizeList:i=t.visitFixedSizeList;break;case kP.Map:i=t.visitMap}if("function"===typeof i)return i;if(!n)return()=>null;throw new Error("Unrecognized type '".concat(kP[e],"'"))}function SC(t){switch(t.typeId){case kP.Null:return kP.Null;case kP.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?kP.Int8:kP.Uint8;case 16:return n?kP.Int16:kP.Uint16;case 32:return n?kP.Int32:kP.Uint32;case 64:return n?kP.Int64:kP.Uint64}return kP.Int}case kP.Float:switch(t.precision){case PP.HALF:return kP.Float16;case PP.SINGLE:return kP.Float32;case PP.DOUBLE:return kP.Float64}return kP.Float;case kP.Binary:return kP.Binary;case kP.Utf8:return kP.Utf8;case kP.Bool:return kP.Bool;case kP.Decimal:return kP.Decimal;case kP.Time:switch(t.unit){case CP.SECOND:return kP.TimeSecond;case CP.MILLISECOND:return kP.TimeMillisecond;case CP.MICROSECOND:return kP.TimeMicrosecond;case CP.NANOSECOND:return kP.TimeNanosecond}return kP.Time;case kP.Timestamp:switch(t.unit){case CP.SECOND:return kP.TimestampSecond;case CP.MILLISECOND:return kP.TimestampMillisecond;case CP.MICROSECOND:return kP.TimestampMicrosecond;case CP.NANOSECOND:return kP.TimestampNanosecond}return kP.Timestamp;case kP.Date:switch(t.unit){case AP.DAY:return kP.DateDay;case AP.MILLISECOND:return kP.DateMillisecond}return kP.Date;case kP.Interval:switch(t.unit){case IP.DAY_TIME:return kP.IntervalDayTime;case IP.YEAR_MONTH:return kP.IntervalYearMonth}return kP.Interval;case kP.Map:return kP.Map;case kP.List:return kP.List;case kP.Struct:return kP.Struct;case kP.Union:switch(t.mode){case TP.Dense:return kP.DenseUnion;case TP.Sparse:return kP.SparseUnion}return kP.Union;case kP.FixedSizeBinary:return kP.FixedSizeBinary;case kP.FixedSizeList:return kP.FixedSizeList;case kP.Dictionary:return kP.Dictionary}throw new Error("Unrecognized type '".concat(kP[t.typeId],"'"))}wC.prototype.visitInt8=null,wC.prototype.visitInt16=null,wC.prototype.visitInt32=null,wC.prototype.visitInt64=null,wC.prototype.visitUint8=null,wC.prototype.visitUint16=null,wC.prototype.visitUint32=null,wC.prototype.visitUint64=null,wC.prototype.visitFloat16=null,wC.prototype.visitFloat32=null,wC.prototype.visitFloat64=null,wC.prototype.visitDateDay=null,wC.prototype.visitDateMillisecond=null,wC.prototype.visitTimestampSecond=null,wC.prototype.visitTimestampMillisecond=null,wC.prototype.visitTimestampMicrosecond=null,wC.prototype.visitTimestampNanosecond=null,wC.prototype.visitTimeSecond=null,wC.prototype.visitTimeMillisecond=null,wC.prototype.visitTimeMicrosecond=null,wC.prototype.visitTimeNanosecond=null,wC.prototype.visitDenseUnion=null,wC.prototype.visitSparseUnion=null,wC.prototype.visitIntervalDayTime=null,wC.prototype.visitIntervalYearMonth=null;const EC=new Float64Array(1),TC=new Uint32Array(EC.buffer);function PC(t){const e=(31744&t)>>10,n=(1023&t)/1024,i=Math.pow(-1,(32768&t)>>15);switch(e){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,e-15)*(1+n)}class AC extends wC{}function CC(t){return(e,n,i)=>{if(e.setValid(n,null!=i))return t(e,n,i)}}const IC=(t,e,n)=>{t[e]=Math.trunc(n%4294967296),t[e+1]=Math.trunc(n/4294967296)},MC=(t,e,n,i)=>{if(n+1<e.length){const{[n]:r,[n+1]:o}=e;t.set(i.subarray(0,o-r),r)}},kC=(t,e,n)=>{let{values:i}=t;i[e]=n},OC=(t,e,n)=>{let{values:i}=t;i[e]=n},LC=(t,e,n)=>{let{values:i}=t;i[e]=function(t){if(t!==t)return 32256;EC[0]=t;const e=(2147483648&TC[1])>>16&65535;let n=2146435072&TC[1],i=0;return n>=1089470464?TC[0]>0?n=31744:(n=(2080374784&n)>>16,i=(1048575&TC[1])>>10):n<=1056964608?(i=1048576+(1048575&TC[1]),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=512+(1048575&TC[1])>>10),e|n|65535&i}(n)},RC=(t,e,n)=>{let{values:i}=t;((t,e,n)=>{t[e]=Math.trunc(n/864e5)})(i,e,n.valueOf())},FC=(t,e,n)=>{let{values:i}=t;IC(i,2*e,n.valueOf())},BC=(t,e,n)=>{let{values:i}=t;return IC(i,2*e,n/1e3)},NC=(t,e,n)=>{let{values:i}=t;return IC(i,2*e,n)},zC=(t,e,n)=>{let{values:i}=t;return((t,e,n)=>{t[e]=Math.trunc(1e3*n%4294967296),t[e+1]=Math.trunc(1e3*n/4294967296)})(i,2*e,n)},DC=(t,e,n)=>{let{values:i}=t;return((t,e,n)=>{t[e]=Math.trunc(1e6*n%4294967296),t[e+1]=Math.trunc(1e6*n/4294967296)})(i,2*e,n)},jC=(t,e,n)=>{let{values:i}=t;i[e]=n},UC=(t,e,n)=>{let{values:i}=t;i[e]=n},VC=(t,e,n)=>{let{values:i}=t;i[e]=n},WC=(t,e,n)=>{let{values:i}=t;i[e]=n},HC=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[i];XC.visit(r,t.valueOffsets[e],n)},GC=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[i];XC.visit(r,e,n)},qC=(t,e,n)=>{let{values:i}=t;i.set(n.subarray(0,2),2*e)},YC=(t,e,n)=>{let{values:i}=t;i[e]=12*n[0]+n[1]%12};AC.prototype.visitBool=CC(((t,e,n)=>{let{offset:i,values:r}=t;const o=i+e;n?r[o>>3]|=1<<o%8:r[o>>3]&=~(1<<o%8)})),AC.prototype.visitInt=CC(kC),AC.prototype.visitInt8=CC(kC),AC.prototype.visitInt16=CC(kC),AC.prototype.visitInt32=CC(kC),AC.prototype.visitInt64=CC(kC),AC.prototype.visitUint8=CC(kC),AC.prototype.visitUint16=CC(kC),AC.prototype.visitUint32=CC(kC),AC.prototype.visitUint64=CC(kC),AC.prototype.visitFloat=CC(((t,e,n)=>{switch(t.type.precision){case PP.HALF:return LC(t,e,n);case PP.SINGLE:case PP.DOUBLE:return OC(t,e,n)}})),AC.prototype.visitFloat16=CC(LC),AC.prototype.visitFloat32=CC(OC),AC.prototype.visitFloat64=CC(OC),AC.prototype.visitUtf8=CC(((t,e,n)=>{let{values:i,valueOffsets:r}=t;MC(i,r,e,dA(n))})),AC.prototype.visitBinary=CC(((t,e,n)=>{let{values:i,valueOffsets:r}=t;return MC(i,r,e,n)})),AC.prototype.visitFixedSizeBinary=CC(((t,e,n)=>{let{stride:i,values:r}=t;r.set(n.subarray(0,i),i*e)})),AC.prototype.visitDate=CC(((t,e,n)=>{t.type.unit===AP.DAY?RC(t,e,n):FC(t,e,n)})),AC.prototype.visitDateDay=CC(RC),AC.prototype.visitDateMillisecond=CC(FC),AC.prototype.visitTimestamp=CC(((t,e,n)=>{switch(t.type.unit){case CP.SECOND:return BC(t,e,n);case CP.MILLISECOND:return NC(t,e,n);case CP.MICROSECOND:return zC(t,e,n);case CP.NANOSECOND:return DC(t,e,n)}})),AC.prototype.visitTimestampSecond=CC(BC),AC.prototype.visitTimestampMillisecond=CC(NC),AC.prototype.visitTimestampMicrosecond=CC(zC),AC.prototype.visitTimestampNanosecond=CC(DC),AC.prototype.visitTime=CC(((t,e,n)=>{switch(t.type.unit){case CP.SECOND:return jC(t,e,n);case CP.MILLISECOND:return UC(t,e,n);case CP.MICROSECOND:return VC(t,e,n);case CP.NANOSECOND:return WC(t,e,n)}})),AC.prototype.visitTimeSecond=CC(jC),AC.prototype.visitTimeMillisecond=CC(UC),AC.prototype.visitTimeMicrosecond=CC(VC),AC.prototype.visitTimeNanosecond=CC(WC),AC.prototype.visitDecimal=CC(((t,e,n)=>{let{values:i,stride:r}=t;i.set(n.subarray(0,r),r*e)})),AC.prototype.visitList=CC(((t,e,n)=>{const i=t.children[0],r=t.valueOffsets,o=XC.getVisitFn(i);if(Array.isArray(n))for(let s=-1,a=r[e],l=r[e+1];a<l;)o(i,a++,n[++s]);else for(let s=-1,a=r[e],l=r[e+1];a<l;)o(i,a++,n.get(++s))})),AC.prototype.visitStruct=CC(((t,e,n)=>{const i=t.type.children.map((t=>XC.getVisitFn(t.type))),r=n instanceof Map?(o=e,s=n,(t,e,n,i)=>e&&t(e,o,s.get(n.name))):n instanceof dM?((t,e)=>(n,i,r,o)=>i&&n(i,t,e.get(o)))(e,n):Array.isArray(n)?((t,e)=>(n,i,r,o)=>i&&n(i,t,e[o]))(e,n):((t,e)=>(n,i,r,o)=>i&&n(i,t,e[r.name]))(e,n);var o,s;t.type.children.forEach(((e,n)=>r(i[n],t.children[n],e,n)))})),AC.prototype.visitUnion=CC(((t,e,n)=>{t.type.mode===TP.Dense?HC(t,e,n):GC(t,e,n)})),AC.prototype.visitDenseUnion=CC(HC),AC.prototype.visitSparseUnion=CC(GC),AC.prototype.visitDictionary=CC(((t,e,n)=>{var i;null===(i=t.dictionary)||void 0===i||i.set(t.values[e],n)})),AC.prototype.visitInterval=CC(((t,e,n)=>{t.type.unit===IP.DAY_TIME?qC(t,e,n):YC(t,e,n)})),AC.prototype.visitIntervalDayTime=CC(qC),AC.prototype.visitIntervalYearMonth=CC(YC),AC.prototype.visitFixedSizeList=CC(((t,e,n)=>{const{stride:i}=t,r=t.children[0],o=XC.getVisitFn(r);if(Array.isArray(n))for(let s=-1,a=e*i;++s<i;)o(r,a+s,n[s]);else for(let s=-1,a=e*i;++s<i;)o(r,a+s,n.get(s))})),AC.prototype.visitMap=CC(((t,e,n)=>{const i=t.children[0],{valueOffsets:r}=t,o=XC.getVisitFn(i);let{[e]:s,[e+1]:a}=r;const l=n instanceof Map?n.entries():Object.entries(n);for(const c of l)if(o(i,s,c),++s>=a)break}));const XC=new AC,KC=Symbol.for("parent"),ZC=Symbol.for("rowIndex");class $C{constructor(t,e){return this[KC]=t,this[ZC]=e,new Proxy(this,new JC)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[ZC],e=this[KC],n=e.type.children,i={};for(let r=-1,o=n.length;++r<o;)i[n[r].name]=wI.visit(e.children[r],t);return i}toString(){return"{".concat([...this].map((t=>{let[e,n]=t;return"".concat(eA(e),": ").concat(eA(n))})).join(", "),"}")}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new QC(this[KC],this[ZC])}}class QC{constructor(t,e){this.childIndex=0,this.children=t.children,this.rowIndex=e,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,wI.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties($C.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[KC]:{writable:!0,enumerable:!1,configurable:!1,value:null},[ZC]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class JC{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[KC].type.children.map((t=>t.name))}has(t,e){return-1!==t[KC].type.children.findIndex((t=>t.name===e))}getOwnPropertyDescriptor(t,e){if(-1!==t[KC].type.children.findIndex((t=>t.name===e)))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[KC].type.children.findIndex((t=>t.name===e));if(-1!==n){const i=wI.visit(t[KC].children[n],t[ZC]);return Reflect.set(t,e,i),i}}set(t,e,n){const i=t[KC].type.children.findIndex((t=>t.name===e));return-1!==i?(XC.visit(t[KC].children[i],t[ZC],n),Reflect.set(t,e,n)):!(!Reflect.has(t,e)&&"symbol"!==typeof e)&&Reflect.set(t,e,n)}}class tI extends wC{}function eI(t){return(e,n)=>e.getValid(n)?t(e,n):null}const nI=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),iI=t=>new Date(t),rI=(t,e,n)=>{if(n+1>=e.length)return null;const i=e[n],r=e[n+1];return t.subarray(i,r)},oI=(t,e)=>{let{values:n}=t;return((t,e)=>iI(((t,e)=>864e5*t[e])(t,e)))(n,e)},sI=(t,e)=>{let{values:n}=t;return((t,e)=>iI(nI(t,e)))(n,2*e)},aI=(t,e)=>{let{stride:n,values:i}=t;return i[n*e]},lI=(t,e)=>{let{values:n}=t;return n[e]},cI=(t,e)=>{let{values:n}=t;return 1e3*nI(n,2*e)},uI=(t,e)=>{let{values:n}=t;return nI(n,2*e)},dI=(t,e)=>{let{values:n}=t;return((t,e)=>t[e+1]/1e3*4294967296+(t[e]>>>0)/1e3)(n,2*e)},hI=(t,e)=>{let{values:n}=t;return((t,e)=>t[e+1]/1e6*4294967296+(t[e]>>>0)/1e6)(n,2*e)},fI=(t,e)=>{let{values:n}=t;return n[e]},pI=(t,e)=>{let{values:n}=t;return n[e]},gI=(t,e)=>{let{values:n}=t;return n[e]},mI=(t,e)=>{let{values:n}=t;return n[e]},yI=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return wI.visit(i,t.valueOffsets[e])},vI=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return wI.visit(i,e)},bI=(t,e)=>{let{values:n}=t;return n.subarray(2*e,2*(e+1))},_I=(t,e)=>{let{values:n}=t;const i=n[e],r=new Int32Array(2);return r[0]=Math.trunc(i/12),r[1]=Math.trunc(i%12),r};tI.prototype.visitNull=eI(((t,e)=>null)),tI.prototype.visitBool=eI(((t,e)=>{let{offset:n,values:i}=t;const r=n+e;return 0!==(i[r>>3]&1<<r%8)})),tI.prototype.visitInt=eI(((t,e)=>{let{values:n}=t;return n[e]})),tI.prototype.visitInt8=eI(aI),tI.prototype.visitInt16=eI(aI),tI.prototype.visitInt32=eI(aI),tI.prototype.visitInt64=eI(lI),tI.prototype.visitUint8=eI(aI),tI.prototype.visitUint16=eI(aI),tI.prototype.visitUint32=eI(aI),tI.prototype.visitUint64=eI(lI),tI.prototype.visitFloat=eI(((t,e)=>{let{type:n,values:i}=t;return n.precision!==PP.HALF?i[e]:PC(i[e])})),tI.prototype.visitFloat16=eI(((t,e)=>{let{stride:n,values:i}=t;return PC(i[n*e])})),tI.prototype.visitFloat32=eI(aI),tI.prototype.visitFloat64=eI(aI),tI.prototype.visitUtf8=eI(((t,e)=>{let{values:n,valueOffsets:i}=t;const r=rI(n,i,e);return null!==r?cA(r):null})),tI.prototype.visitBinary=eI(((t,e)=>{let{values:n,valueOffsets:i}=t;return rI(n,i,e)})),tI.prototype.visitFixedSizeBinary=eI(((t,e)=>{let{stride:n,values:i}=t;return i.subarray(n*e,n*(e+1))})),tI.prototype.visitDate=eI(((t,e)=>t.type.unit===AP.DAY?oI(t,e):sI(t,e))),tI.prototype.visitDateDay=eI(oI),tI.prototype.visitDateMillisecond=eI(sI),tI.prototype.visitTimestamp=eI(((t,e)=>{switch(t.type.unit){case CP.SECOND:return cI(t,e);case CP.MILLISECOND:return uI(t,e);case CP.MICROSECOND:return dI(t,e);case CP.NANOSECOND:return hI(t,e)}})),tI.prototype.visitTimestampSecond=eI(cI),tI.prototype.visitTimestampMillisecond=eI(uI),tI.prototype.visitTimestampMicrosecond=eI(dI),tI.prototype.visitTimestampNanosecond=eI(hI),tI.prototype.visitTime=eI(((t,e)=>{switch(t.type.unit){case CP.SECOND:return fI(t,e);case CP.MILLISECOND:return pI(t,e);case CP.MICROSECOND:return gI(t,e);case CP.NANOSECOND:return mI(t,e)}})),tI.prototype.visitTimeSecond=eI(fI),tI.prototype.visitTimeMillisecond=eI(pI),tI.prototype.visitTimeMicrosecond=eI(gI),tI.prototype.visitTimeNanosecond=eI(mI),tI.prototype.visitDecimal=eI(((t,e)=>{let{values:n,stride:i}=t;return kA.decimal(n.subarray(i*e,i*(e+1)))})),tI.prototype.visitList=eI(((t,e)=>{const{valueOffsets:n,stride:i,children:r}=t,{[e*i]:o,[e*i+1]:s}=n,a=r[0].slice(o,s-o);return new dM([a])})),tI.prototype.visitStruct=eI(((t,e)=>new $C(t,e))),tI.prototype.visitUnion=eI(((t,e)=>t.type.mode===TP.Dense?yI(t,e):vI(t,e))),tI.prototype.visitDenseUnion=eI(yI),tI.prototype.visitSparseUnion=eI(vI),tI.prototype.visitDictionary=eI(((t,e)=>{var n;return null===(n=t.dictionary)||void 0===n?void 0:n.get(t.values[e])})),tI.prototype.visitInterval=eI(((t,e)=>t.type.unit===IP.DAY_TIME?bI(t,e):_I(t,e))),tI.prototype.visitIntervalDayTime=eI(bI),tI.prototype.visitIntervalYearMonth=eI(_I),tI.prototype.visitFixedSizeList=eI(((t,e)=>{const{stride:n,children:i}=t,r=i[0].slice(e*n,n);return new dM([r])})),tI.prototype.visitMap=eI(((t,e)=>{const{valueOffsets:n,children:i}=t,{[e]:r,[e+1]:o}=n,s=i[0];return new EI(s.slice(r,o-r))}));const wI=new tI,xI=Symbol.for("keys"),SI=Symbol.for("vals");class EI{constructor(t){return this[xI]=new dM([t.children[0]]).memoize(),this[SI]=t.children[1],new Proxy(this,new PI)}[Symbol.iterator](){return new TI(this[xI],this[SI])}get size(){return this[xI].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[xI],e=this[SI],n={};for(let i=-1,r=t.length;++i<r;)n[t.get(i)]=wI.visit(e,i);return n}toString(){return"{".concat([...this].map((t=>{let[e,n]=t;return"".concat(eA(e),": ").concat(eA(n))})).join(", "),"}")}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class TI{constructor(t,e){this.keys=t,this.vals=e,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),wI.visit(this.vals,t)]})}}class PI{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[xI].toArray().map(String)}has(t,e){return t[xI].includes(e)}getOwnPropertyDescriptor(t,e){if(-1!==t[xI].indexOf(e))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[xI].indexOf(e);if(-1!==n){const i=wI.visit(Reflect.get(t,SI),n);return Reflect.set(t,e,i),i}}set(t,e,n){const i=t[xI].indexOf(e);return-1!==i?(XC.visit(Reflect.get(t,SI),i,n),Reflect.set(t,e,n)):!!Reflect.has(t,e)&&Reflect.set(t,e,n)}}let AI;function CI(t,e,n,i){const{length:r=0}=t;let o="number"!==typeof e?0:e,s="number"!==typeof n?r:n;return o<0&&(o=(o%r+r)%r),s<0&&(s=(s%r+r)%r),s<o&&(AI=o,o=s,s=AI),s>r&&(s=r),i?i(t,o,s):[o,s]}Object.defineProperties(EI.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[xI]:{writable:!0,enumerable:!1,configurable:!1,value:null},[SI]:{writable:!0,enumerable:!1,configurable:!1,value:null}});const II=t=>t!==t;function MI(t){if("object"!==typeof t||null===t)return II(t)?II:e=>e===t;if(t instanceof Date){const e=t.valueOf();return t=>t instanceof Date&&t.valueOf()===e}return ArrayBuffer.isView(t)?e=>!!e&&function(t,e){let n=0;const i=t.length;if(i!==e.length)return!1;if(i>0)do{if(t[n]!==e[n])return!1}while(++n<i);return!0}(t,e):t instanceof Map?function(t){let e=-1;const n=[];for(const i of t.values())n[++e]=MI(i);return kI(n)}(t):Array.isArray(t)?function(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=MI(t[n]);return kI(e)}(t):t instanceof dM?function(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=MI(t.get(n));return kI(e)}(t):function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Object.keys(t);if(!e&&0===n.length)return()=>!1;const i=[];for(let r=-1,o=n.length;++r<o;)i[r]=MI(t[n[r]]);return kI(i,n)}(t,!0)}function kI(t,e){return n=>{if(!n||"object"!==typeof n)return!1;switch(n.constructor){case Array:return function(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e[i]))return!1;return!0}(t,n);case Map:return OI(t,n,n.keys());case EI:case $C:case Object:case void 0:return OI(t,n,e||Object.keys(n))}return n instanceof dM&&function(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e.get(i)))return!1;return!0}(t,n)}}function OI(t,e,n){const i=n[Symbol.iterator](),r=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),o=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let s=0;const a=t.length;let l=o.next(),c=i.next(),u=r.next();for(;s<a&&!c.done&&!u.done&&!l.done&&(c.value===u.value&&t[s](l.value));++s,c=i.next(),u=r.next(),l=o.next());return!!(s===a&&c.done&&u.done&&l.done)||(i.return&&i.return(),r.return&&r.return(),o.return&&o.return(),!1)}class LI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;this.numChunks=t,this.getChunkIterator=e,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function RI(t){return t.reduce(((t,e)=>t+e.nullCount),0)}function FI(t){return t.reduce(((t,e,n)=>(t[n+1]=t[n]+e.length,t)),new Uint32Array(t.length+1))}function BI(t,e,n,i){const r=[];for(let o=-1,s=t.length;++o<s;){const s=t[o],a=e[o],{length:l}=s;if(a>=i)break;if(n>=a+l)continue;if(a>=n&&a+l<=i){r.push(s);continue}const c=Math.max(0,n-a),u=Math.min(i-a,l);r.push(s.slice(c,u-c))}return 0===r.length&&r.push(t[0].slice(0,0)),r}function NI(t,e,n,i){let r=0,o=0,s=e.length-1;do{if(r>=s-1)return n<e[s]?i(t,r,n-e[r]):null;o=r+Math.trunc(.5*(s-r)),n<e[o]?s=o:r=o}while(r<s)}function zI(t,e){return t.getValid(e)}function DI(t){function e(e,n,i){return t(e[n],i)}return function(t){return NI(this.data,this._offsets,t,e)}}function jI(t){let e;function n(n,i,r){return t(n[i],r,e)}return function(t,i){const r=this.data;e=i;const o=NI(r,this._offsets,t,n);return e=void 0,o}}function UI(t){let e;function n(n,i,r){let o=r,s=0,a=0;for(let l=i-1,c=n.length;++l<c;){const i=n[l];if(~(s=t(i,e,o)))return a+s;o=0,a+=i.length}return-1}return function(t,i){e=t;const r=this.data,o="number"!==typeof i?n(r,0,0):NI(r,this._offsets,i,n);return e=void 0,o}}function VI(t,e,n,i){return 0!==(n&1<<i)}function WI(t,e,n,i){return(n&1<<i)>>i}function HI(t,e,n){const i=n.byteLength+7&-8;if(t>0||n.byteLength<i){const r=new Uint8Array(i);return r.set(t%8===0?n.subarray(t>>3):GI(new qI(n,t,e,null,VI)).subarray(0,i)),r}return n}function GI(t){const e=[];let n=0,i=0,r=0;for(const s of t)s&&(r|=1<<i),8===++i&&(e[n++]=r,r=i=0);(0===n||i>0)&&(e[n++]=r);const o=new Uint8Array(e.length+7&-8);return o.set(e),o}class qI{constructor(t,e,n,i,r){this.bytes=t,this.length=n,this.context=i,this.get=r,this.bit=e%8,this.byteIndex=e>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function YI(t,e,n){if(n-e<=0)return 0;if(n-e<8){let i=0;for(const r of new qI(t,e,n-e,t,WI))i+=r;return i}const i=n>>3<<3,r=e+(e%8===0?0:8-e%8);return YI(t,e,r)+YI(t,i,n)+function(t,e,n){let i=0,r=Math.trunc(e);const o=new DataView(t.buffer,t.byteOffset,t.byteLength),s=void 0===n?t.byteLength:r+n;for(;s-r>=4;)i+=XI(o.getUint32(r)),r+=4;for(;s-r>=2;)i+=XI(o.getUint16(r)),r+=2;for(;s-r>=1;)i+=XI(o.getUint8(r)),r+=1;return i}(t,r>>3,i-r>>3)}function XI(t){let e=Math.trunc(t);return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24}class KI extends wC{}function ZI(t,e,n){if(void 0===e)return-1;if(null===e)return function(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let i=0;for(const r of new qI(n,t.offset+(e||0),t.length,n,VI)){if(!r)return i;++i}return-1}(t,n);const i=wI.getVisitFn(t),r=MI(e);for(let o=(n||0)-1,s=t.length;++o<s;)if(r(i(t,o)))return o;return-1}function $I(t,e,n){const i=wI.getVisitFn(t),r=MI(e);for(let o=(n||0)-1,s=t.length;++o<s;)if(r(i(t,o)))return o;return-1}KI.prototype.visitNull=function(t,e){return null===e&&t.length>0?0:-1},KI.prototype.visitBool=ZI,KI.prototype.visitInt=ZI,KI.prototype.visitInt8=ZI,KI.prototype.visitInt16=ZI,KI.prototype.visitInt32=ZI,KI.prototype.visitInt64=ZI,KI.prototype.visitUint8=ZI,KI.prototype.visitUint16=ZI,KI.prototype.visitUint32=ZI,KI.prototype.visitUint64=ZI,KI.prototype.visitFloat=ZI,KI.prototype.visitFloat16=ZI,KI.prototype.visitFloat32=ZI,KI.prototype.visitFloat64=ZI,KI.prototype.visitUtf8=ZI,KI.prototype.visitBinary=ZI,KI.prototype.visitFixedSizeBinary=ZI,KI.prototype.visitDate=ZI,KI.prototype.visitDateDay=ZI,KI.prototype.visitDateMillisecond=ZI,KI.prototype.visitTimestamp=ZI,KI.prototype.visitTimestampSecond=ZI,KI.prototype.visitTimestampMillisecond=ZI,KI.prototype.visitTimestampMicrosecond=ZI,KI.prototype.visitTimestampNanosecond=ZI,KI.prototype.visitTime=ZI,KI.prototype.visitTimeSecond=ZI,KI.prototype.visitTimeMillisecond=ZI,KI.prototype.visitTimeMicrosecond=ZI,KI.prototype.visitTimeNanosecond=ZI,KI.prototype.visitDecimal=ZI,KI.prototype.visitList=ZI,KI.prototype.visitStruct=ZI,KI.prototype.visitUnion=ZI,KI.prototype.visitDenseUnion=$I,KI.prototype.visitSparseUnion=$I,KI.prototype.visitDictionary=ZI,KI.prototype.visitInterval=ZI,KI.prototype.visitIntervalDayTime=ZI,KI.prototype.visitIntervalYearMonth=ZI,KI.prototype.visitFixedSizeList=ZI,KI.prototype.visitMap=ZI;const QI=new KI;class JI extends wC{}function tM(t){const{type:e}=t;if(0===t.nullCount&&1===t.stride&&(e.typeId===kP.Timestamp||e instanceof tC&&64!==e.bitWidth||e instanceof lC&&64!==e.bitWidth||e instanceof nC&&e.precision!==PP.HALF))return new LI(t.data.length,(e=>{const n=t.data[e];return n.values.subarray(0,n.length)[Symbol.iterator]()}));let n=0;return new LI(t.data.length,(e=>{const i=t.data[e].length,r=t.slice(n,n+i);return n+=i,new eM(r)}))}class eM{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}JI.prototype.visitNull=tM,JI.prototype.visitBool=tM,JI.prototype.visitInt=tM,JI.prototype.visitInt8=tM,JI.prototype.visitInt16=tM,JI.prototype.visitInt32=tM,JI.prototype.visitInt64=tM,JI.prototype.visitUint8=tM,JI.prototype.visitUint16=tM,JI.prototype.visitUint32=tM,JI.prototype.visitUint64=tM,JI.prototype.visitFloat=tM,JI.prototype.visitFloat16=tM,JI.prototype.visitFloat32=tM,JI.prototype.visitFloat64=tM,JI.prototype.visitUtf8=tM,JI.prototype.visitBinary=tM,JI.prototype.visitFixedSizeBinary=tM,JI.prototype.visitDate=tM,JI.prototype.visitDateDay=tM,JI.prototype.visitDateMillisecond=tM,JI.prototype.visitTimestamp=tM,JI.prototype.visitTimestampSecond=tM,JI.prototype.visitTimestampMillisecond=tM,JI.prototype.visitTimestampMicrosecond=tM,JI.prototype.visitTimestampNanosecond=tM,JI.prototype.visitTime=tM,JI.prototype.visitTimeSecond=tM,JI.prototype.visitTimeMillisecond=tM,JI.prototype.visitTimeMicrosecond=tM,JI.prototype.visitTimeNanosecond=tM,JI.prototype.visitDecimal=tM,JI.prototype.visitList=tM,JI.prototype.visitStruct=tM,JI.prototype.visitUnion=tM,JI.prototype.visitDenseUnion=tM,JI.prototype.visitSparseUnion=tM,JI.prototype.visitDictionary=tM,JI.prototype.visitInterval=tM,JI.prototype.visitIntervalDayTime=tM,JI.prototype.visitIntervalYearMonth=tM,JI.prototype.visitFixedSizeList=tM,JI.prototype.visitMap=tM;const nM=new JI,iM=(t,e)=>t+e;class rM extends wC{visitNull(t,e){return 0}visitInt(t,e){return t.type.bitWidth/8}visitFloat(t,e){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,e){return 1/8}visitDecimal(t,e){return t.type.bitWidth/8}visitDate(t,e){return 4*(t.type.unit+1)}visitTime(t,e){return t.type.bitWidth/8}visitTimestamp(t,e){return t.type.unit===CP.SECOND?4:8}visitInterval(t,e){return 4*(t.type.unit+1)}visitStruct(t,e){return t.children.reduce(((t,n)=>t+aM.visit(n,e)),0)}visitFixedSizeBinary(t,e){return t.type.byteWidth}visitMap(t,e){return 8+t.children.reduce(((t,n)=>t+aM.visit(n,e)),0)}visitDictionary(t,e){var n;return t.type.indices.bitWidth/8+((null===(n=t.dictionary)||void 0===n?void 0:n.getByteLength(t.values[e]))||0)}}const oM=(t,e)=>{let{type:n,children:i,typeIds:r,valueOffsets:o}=t;const s=n.typeIdToChildIndex[r[e]];return 8+aM.visit(i[s],o[e])},sM=(t,e)=>{let{children:n}=t;return 4+aM.visitMany(n,n.map((()=>e))).reduce(iM,0)};rM.prototype.visitUtf8=(t,e)=>{let{valueOffsets:n}=t;return n[e+1]-n[e]+8},rM.prototype.visitBinary=(t,e)=>{let{valueOffsets:n}=t;return n[e+1]-n[e]+8},rM.prototype.visitList=(t,e)=>{let{valueOffsets:n,stride:i,children:r}=t;const o=r[0],{[e*i]:s}=n,{[e*i+1]:a}=n,l=aM.getVisitFn(o.type),c=o.slice(s,a-s);let u=8;for(let d=-1,h=a-s;++d<h;)u+=l(c,d);return u},rM.prototype.visitFixedSizeList=(t,e)=>{let{stride:n,children:i}=t;const r=i[0],o=r.slice(e*n,n),s=aM.getVisitFn(r.type);let a=0;for(let l=-1,c=o.length;++l<c;)a+=s(o,l);return a},rM.prototype.visitUnion=(t,e)=>t.type.mode===TP.Dense?oM(t,e):sM(t,e),rM.prototype.visitDenseUnion=oM,rM.prototype.visitSparseUnion=sM;const aM=new rM;var lM;const cM={},uM={};class dM{constructor(t){var e,n,i;const r=t[0]instanceof dM?t.flatMap((t=>t.data)):t;if(0===r.length||r.some((t=>!(t instanceof fM))))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=null===(e=r[0])||void 0===e?void 0:e.type;switch(r.length){case 0:this._offsets=[0];break;case 1:{const{get:t,set:e,indexOf:n,byteLength:i}=cM[o.typeId],s=r[0];this.isValid=t=>zI(s,t),this.get=e=>t(s,e),this.set=(t,n)=>e(s,t,n),this.indexOf=t=>n(s,t),this.getByteLength=t=>i(s,t),this._offsets=[0,s.length];break}default:Object.setPrototypeOf(this,uM[o.typeId]),this._offsets=FI(r)}this.data=r,this.type=o,this.stride=_C(o),this.numChildren=null!==(i=null===(n=o.children)||void 0===n?void 0:n.length)&&void 0!==i?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return-1===this._byteLength&&(this._byteLength=this.data.reduce(((t,e)=>t+e.byteLength),0)),this._byteLength}get nullCount(){return-1===this._nullCount&&(this._nullCount=RI(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return"".concat(this.VectorName,"<").concat(this.type[Symbol.toStringTag],">")}get VectorName(){return"".concat(kP[this.type.typeId],"Vector")}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}includes(t,e){return this.indexOf(t,e)>0}getByteLength(t){return 0}[Symbol.iterator](){return nM.visit(this)}concat(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new dM(this.data.concat(e.flatMap((t=>t.data)).flat(Number.POSITIVE_INFINITY)))}slice(t,e){return new dM(CI(this,t,e,((t,e,n)=>{let{data:i,_offsets:r}=t;return BI(i,r,e,n)})))}toJSON(){return[...this]}toArray(){const{type:t,data:e,length:n,stride:i,ArrayType:r}=this;switch(t.typeId){case kP.Int:case kP.Float:case kP.Decimal:case kP.Time:case kP.Timestamp:switch(e.length){case 0:return new r;case 1:return e[0].values.subarray(0,n*i);default:return e.reduce(((t,e)=>{let{values:n,length:r}=e;return t.array.set(n.subarray(0,r*i),t.offset),t.offset+=r*i,t}),{array:new r(n*i),offset:0}).array}}return[...this]}toString(){return"[".concat([...this].join(","),"]")}getChild(t){var e;return this.getChildAt(null===(e=this.type.children)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.numChildren?new dM(this.data.map((e=>{let{children:n}=e;return n[t]}))):null}get isMemoized(){return!!QA.isDictionary(this.type)&&this.data[0].dictionary.isMemoized}memoize(){if(QA.isDictionary(this.type)){const t=new hM(this.data[0].dictionary),e=this.data.map((e=>{const n=e.clone();return n.dictionary=t,n}));return new dM(e)}return new hM(this)}unmemoize(){if(QA.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),e=this.data.map((e=>{const n=e.clone();return n.dictionary=t,n}));return new dM(e)}return this}}lM=Symbol.toStringTag,dM[lM]=(t=>{t.type=QA.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._nullCount=-1,t._byteLength=-1,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(kP).map((t=>kP[t])).filter((t=>"number"===typeof t&&t!==kP.NONE));for(const n of e){const e=wI.getVisitFnByTypeId(n),i=XC.getVisitFnByTypeId(n),r=QI.getVisitFnByTypeId(n),o=aM.getVisitFnByTypeId(n);cM[n]={get:e,set:i,indexOf:r,byteLength:o},uM[n]=Object.create(t,{isValid:{value:DI(zI)},get:{value:DI(wI.getVisitFnByTypeId(n))},set:{value:jI(XC.getVisitFnByTypeId(n))},indexOf:{value:UI(QI.getVisitFnByTypeId(n))},getByteLength:{value:DI(aM.getVisitFnByTypeId(n))}})}return"Vector"})(dM.prototype);class hM extends dM{constructor(t){super(t.data);const e=this.get,n=this.set,i=this.slice,r=new Array(this.length);Object.defineProperty(this,"get",{value(t){const n=r[t];if(void 0!==n)return n;const i=e.call(this,t);return r[t]=i,i}}),Object.defineProperty(this,"set",{value(t,e){n.call(this,t,e),r[t]=e}}),Object.defineProperty(this,"slice",{value:(t,e)=>new hM(i.call(this,t,e))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new dM(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class fM{constructor(t,e,n,i,r){let o,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6?arguments[6]:void 0;this.type=t,this.children=s,this.dictionary=a,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1)),r instanceof fM?(this.stride=r.stride,this.values=r.values,this.typeIds=r.typeIds,this.nullBitmap=r.nullBitmap,this.valueOffsets=r.valueOffsets):(this.stride=_C(t),r&&((o=r[0])&&(this.valueOffsets=o),(o=r[1])&&(this.values=o),(o=r[2])&&(this.nullBitmap=o),(o=r[3])&&(this.typeIds=o))),this.nullable=0!==this._nullCount&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:e,values:n,nullBitmap:i,typeIds:r}=this;return e&&(t+=e.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),this.children.reduce(((t,e)=>t+e.byteLength),t)}get nullCount(){let t,e=this._nullCount;return e<=-1&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-YI(t,this.offset,this.offset+this.length)),e}getValid(t){if(this.nullable&&this.nullCount>0){const e=this.offset+t;return 0!==(this.nullBitmap[e>>3]&1<<e%8)}return!0}setValid(t,e){if(!this.nullable)return e;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:t}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:t,_nullCount:0})}const{nullBitmap:n,offset:i}=this,r=i+t>>3,o=(i+t)%8,s=n[r]>>o&1;return e?0===s&&(n[r]|=1<<o,this._nullCount=this.nullCount+1):1===s&&(n[r]&=~(1<<o),this._nullCount=this.nullCount-1),e}clone(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.type,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.offset,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._nullCount,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.children;return new fM(t,e,n,i,r,o,this.dictionary)}slice(t,e){const{stride:n,typeId:i,children:r}=this,o=+(0===this._nullCount)-1,s=16===i?n:1,a=this._sliceBuffers(t,e,n,i);return this.clone(this.type,this.offset+t,e,o,a,0===r.length||this.valueOffsets?r:this._sliceChildren(r,s*t,s*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===kP.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:n}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);i[e>>3]=(1<<e-(-8&e))-1,n>0&&i.set(HI(this.offset,e,this.nullBitmap),0);const r=this.buffers;return r[OP.VALIDITY]=i,this.clone(this.type,0,t,n+(t-e),r)}_sliceBuffers(t,e,n,i){let r;const{buffers:o}=this;return(r=o[OP.TYPE])&&(o[OP.TYPE]=r.subarray(t,t+e)),(r=o[OP.OFFSET])&&(o[OP.OFFSET]=r.subarray(t,t+e+1))||(r=o[OP.DATA])&&(o[OP.DATA]=6===i?r:r.subarray(n*t,n*(t+e))),o}_sliceChildren(t,e,n){return t.map((t=>t.slice(e,n)))}}fM.prototype.children=Object.freeze([]);class pM extends wC{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{type:e,offset:n=0,length:i=0}=t;return new fM(e,n,i,0)}visitBool(t){const{type:e,offset:n=0}=t,i=yA(t.nullBitmap),r=gA(e.ArrayType,t.data),{length:o=r.length>>3,nullCount:s=(t.nullBitmap?-1:0)}=t;return new fM(e,n,o,s,[void 0,r,i])}visitInt(t){const{type:e,offset:n=0}=t,i=yA(t.nullBitmap),r=gA(e.ArrayType,t.data),{length:o=r.length,nullCount:s=(t.nullBitmap?-1:0)}=t;return new fM(e,n,o,s,[void 0,r,i])}visitFloat(t){const{type:e,offset:n=0}=t,i=yA(t.nullBitmap),r=gA(e.ArrayType,t.data),{length:o=r.length,nullCount:s=(t.nullBitmap?-1:0)}=t;return new fM(e,n,o,s,[void 0,r,i])}visitUtf8(t){const{type:e,offset:n=0}=t,i=yA(t.data),r=yA(t.nullBitmap),o=mA(t.valueOffsets),{length:s=o.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new fM(e,n,s,a,[o,i,r])}visitBinary(t){const{type:e,offset:n=0}=t,i=yA(t.data),r=yA(t.nullBitmap),o=mA(t.valueOffsets),{length:s=o.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new fM(e,n,s,a,[o,i,r])}visitFixedSizeBinary(t){const{type:e,offset:n=0}=t,i=yA(t.nullBitmap),r=gA(e.ArrayType,t.data),{length:o=r.length/_C(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new fM(e,n,o,s,[void 0,r,i])}visitDate(t){const{type:e,offset:n=0}=t,i=yA(t.nullBitmap),r=gA(e.ArrayType,t.data),{length:o=r.length/_C(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new fM(e,n,o,s,[void 0,r,i])}visitTimestamp(t){const{type:e,offset:n=0}=t,i=yA(t.nullBitmap),r=gA(e.ArrayType,t.data),{length:o=r.length/_C(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new fM(e,n,o,s,[void 0,r,i])}visitTime(t){const{type:e,offset:n=0}=t,i=yA(t.nullBitmap),r=gA(e.ArrayType,t.data),{length:o=r.length/_C(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new fM(e,n,o,s,[void 0,r,i])}visitDecimal(t){const{type:e,offset:n=0}=t,i=yA(t.nullBitmap),r=gA(e.ArrayType,t.data),{length:o=r.length/_C(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new fM(e,n,o,s,[void 0,r,i])}visitList(t){const{type:e,offset:n=0,child:i}=t,r=yA(t.nullBitmap),o=mA(t.valueOffsets),{length:s=o.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new fM(e,n,s,a,[o,void 0,r],[i])}visitStruct(t){const{type:e,offset:n=0,children:i=[]}=t,r=yA(t.nullBitmap),{length:o=i.reduce(((t,e)=>{let{length:n}=e;return Math.max(t,n)}),0),nullCount:s=(t.nullBitmap?-1:0)}=t;return new fM(e,n,o,s,[void 0,void 0,r],i)}visitUnion(t){const{type:e,offset:n=0,children:i=[]}=t,r=yA(t.nullBitmap),o=gA(e.ArrayType,t.typeIds),{length:s=o.length,nullCount:a=(t.nullBitmap?-1:0)}=t;if(QA.isSparseUnion(e))return new fM(e,n,s,a,[void 0,void 0,r,o],i);const l=mA(t.valueOffsets);return new fM(e,n,s,a,[l,void 0,r,o],i)}visitDictionary(t){const{type:e,offset:n=0}=t,i=yA(t.nullBitmap),r=gA(e.indices.ArrayType,t.data),{dictionary:o=new dM([(new pM).visit({type:e.dictionary})])}=t,{length:s=r.length,nullCount:a=(t.nullBitmap?-1:0)}=t;return new fM(e,n,s,a,[void 0,r,i],[],o)}visitInterval(t){const{type:e,offset:n=0}=t,i=yA(t.nullBitmap),r=gA(e.ArrayType,t.data),{length:o=r.length/_C(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new fM(e,n,o,s,[void 0,r,i])}visitFixedSizeList(t){const{type:e,offset:n=0,child:i=(new pM).visit({type:e.valueType})}=t,r=yA(t.nullBitmap),{length:o=i.length/_C(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new fM(e,n,o,s,[void 0,void 0,r],[i])}visitMap(t){const{type:e,offset:n=0,child:i=(new pM).visit({type:e.childType})}=t,r=yA(t.nullBitmap),o=mA(t.valueOffsets),{length:s=o.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new fM(e,n,s,a,[o,void 0,r],[i])}}function gM(t){return(new pM).visit(t)}class mM{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;this.fields=t||[],this.metadata=e||new Map,n||(n=bM(t)),this.dictionaries=n}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map((t=>t.name))}toString(){return"Schema<{ ".concat(this.fields.map(((t,e)=>"".concat(e,": ").concat(t))).join(", ")," }>")}select(t){const e=new Set(t),n=this.fields.filter((t=>e.has(t.name)));return new mM(n,this.metadata)}selectAt(t){const e=t.map((t=>this.fields[t])).filter(Boolean);return new mM(e,this.metadata)}assign(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=e[0]instanceof mM?e[0]:Array.isArray(e[0])?new mM(e[0]):new mM(e),r=[...this.fields],o=vM(vM(new Map,this.metadata),i.metadata),s=i.fields.filter((t=>{const e=r.findIndex((e=>e.name===t.name));return!~e||(r[e]=t.clone({metadata:vM(vM(new Map,r[e].metadata),t.metadata)}))&&!1})),a=bM(s,new Map);return new mM([...r,...s],o,new Map([...this.dictionaries,...a]))}}mM.prototype.fields=null,mM.prototype.metadata=null,mM.prototype.dictionaries=null;class yM{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;this.name=t,this.type=e,this.nullable=n,this.metadata=i||new Map}static new(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let[i,r,o,s]=e;return e[0]&&"object"===typeof e[0]&&(({name:i}=e[0]),void 0===r&&(r=e[0].type),void 0===o&&(o=e[0].nullable),void 0===s&&(s=e[0].metadata)),new yM("".concat(i),r,o,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return"".concat(this.name,": ").concat(this.type)}clone(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let[i,r,o,s]=e;return e[0]&&"object"===typeof e[0]?({name:i=this.name,type:r=this.type,nullable:o=this.nullable,metadata:s=this.metadata}=e[0]):[i=this.name,r=this.type,o=this.nullable,s=this.metadata]=e,yM.new(i,r,o,s)}}function vM(t,e){return new Map([...t||new Map,...e||new Map])}function bM(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;for(let n=-1,i=t.length;++n<i;){const i=t[n].type;if(QA.isDictionary(i))if(e.has(i.id)){if(e.get(i.id)!==i.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else e.set(i.id,i.dictionary);i.children&&i.children.length>0&&bM(i.children,e)}return e}yM.prototype.type=null,yM.prototype.name=null,yM.prototype.nullable=null,yM.prototype.metadata=null;class _M extends wC{compareSchemas(t,e){return t===e||e instanceof t.constructor&&this.compareManyFields(t.fields,e.fields)}compareManyFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every(((t,n)=>this.compareFields(t,e[n])))}compareFields(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&this.visit(t.type,e.type)}}function wM(t,e){return e instanceof t.constructor}function xM(t,e){return t===e||wM(t,e)}function SM(t,e){return t===e||wM(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function EM(t,e){return t===e||wM(t,e)&&t.precision===e.precision}function TM(t,e){return t===e||wM(t,e)&&t.unit===e.unit}function PM(t,e){return t===e||wM(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function AM(t,e){return t===e||wM(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function CM(t,e){return t===e||wM(t,e)&&t.mode===e.mode&&t.typeIds.every(((t,n)=>t===e.typeIds[n]))&&MM.compareManyFields(t.children,e.children)}function IM(t,e){return t===e||wM(t,e)&&t.unit===e.unit}_M.prototype.visitNull=xM,_M.prototype.visitBool=xM,_M.prototype.visitInt=SM,_M.prototype.visitInt8=SM,_M.prototype.visitInt16=SM,_M.prototype.visitInt32=SM,_M.prototype.visitInt64=SM,_M.prototype.visitUint8=SM,_M.prototype.visitUint16=SM,_M.prototype.visitUint32=SM,_M.prototype.visitUint64=SM,_M.prototype.visitFloat=EM,_M.prototype.visitFloat16=EM,_M.prototype.visitFloat32=EM,_M.prototype.visitFloat64=EM,_M.prototype.visitUtf8=xM,_M.prototype.visitBinary=xM,_M.prototype.visitFixedSizeBinary=function(t,e){return t===e||wM(t,e)&&t.byteWidth===e.byteWidth},_M.prototype.visitDate=TM,_M.prototype.visitDateDay=TM,_M.prototype.visitDateMillisecond=TM,_M.prototype.visitTimestamp=PM,_M.prototype.visitTimestampSecond=PM,_M.prototype.visitTimestampMillisecond=PM,_M.prototype.visitTimestampMicrosecond=PM,_M.prototype.visitTimestampNanosecond=PM,_M.prototype.visitTime=AM,_M.prototype.visitTimeSecond=AM,_M.prototype.visitTimeMillisecond=AM,_M.prototype.visitTimeMicrosecond=AM,_M.prototype.visitTimeNanosecond=AM,_M.prototype.visitDecimal=xM,_M.prototype.visitList=function(t,e){return t===e||wM(t,e)&&t.children.length===e.children.length&&MM.compareManyFields(t.children,e.children)},_M.prototype.visitStruct=function(t,e){return t===e||wM(t,e)&&t.children.length===e.children.length&&MM.compareManyFields(t.children,e.children)},_M.prototype.visitUnion=CM,_M.prototype.visitDenseUnion=CM,_M.prototype.visitSparseUnion=CM,_M.prototype.visitDictionary=function(t,e){return t===e||wM(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&MM.visit(t.indices,e.indices)&&MM.visit(t.dictionary,e.dictionary)},_M.prototype.visitInterval=IM,_M.prototype.visitIntervalDayTime=IM,_M.prototype.visitIntervalYearMonth=IM,_M.prototype.visitFixedSizeList=function(t,e){return t===e||wM(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&MM.compareManyFields(t.children,e.children)},_M.prototype.visitMap=function(t,e){return t===e||wM(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&MM.compareManyFields(t.children,e.children)};const MM=new _M;function kM(t,e){return MM.compareSchemas(t,e)}var OM,LM;class RM{constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];switch(e.length){case 2:if([this.schema]=e,!(this.schema instanceof mM))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=gM({nullCount:0,type:new hC(this.schema.fields),children:this.schema.fields.map((t=>gM({type:t.type,nullCount:0})))})]=e,!(this.data instanceof fM))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=FM(this.schema,this.data.children);break;case 1:{const[t]=e,{fields:n,children:i,length:r}=Object.keys(t).reduce(((e,n,i)=>(e.children[i]=t[n],e.length=Math.max(e.length,t[n].length),e.fields[i]=yM.new({name:n,type:t[n].type,nullable:!0}),e)),{length:0,fields:new Array,children:new Array}),o=new mM(n),s=gM({type:new hC(n),length:r,children:i,nullCount:0});[this.schema,this.data]=FM(o,s.children,r);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=BM(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return wI.visit(this.data,t)}set(t,e){return XC.visit(this.data,t,e)}indexOf(t,e){return QI.visit(this.data,t,e)}getByteLength(t){return aM.visit(this.data,t)}[Symbol.iterator](){return nM.visit(new dM([this.data]))}toArray(){return[...this]}concat(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new jM(this.schema,[this,...e])}slice(t,e){const[n]=new dM([this.data]).slice(t,e).data;return new RM(this.schema,n)}getChild(t){var e;return this.getChildAt(null===(e=this.schema.fields)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new dM([this.data.children[t]]):null}setChild(t,e){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex((e=>e.name===t)),e)}setChildAt(t,e){let n=this.schema,i=this.data;if(t>-1&&t<this.numCols){e||(e=new dM([gM({type:new JA,length:this.numRows})]));const r=n.fields.slice(),o=i.children.slice(),s=r[t].clone({type:e.type});[r[t],o[t]]=[s,e.data[0]],n=new mM(r,new Map(this.schema.metadata)),i=gM({type:new hC(r),children:o})}return new RM(n,i)}select(t){const e=this.schema.select(t),n=new hC(e.fields),i=[];for(const r of t){const t=this.schema.fields.findIndex((t=>t.name===r));~t&&(i[t]=this.data.children[t])}return new RM(e,gM({type:n,length:this.numRows,children:i}))}selectAt(t){const e=this.schema.selectAt(t),n=t.map((t=>this.data.children[t])).filter(Boolean),i=gM({type:new hC(e.fields),length:this.numRows,children:n});return new RM(e,i)}}function FM(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.reduce(((t,e)=>Math.max(t,e.length)),0);var i;const r=[...t.fields],o=[...e],s=(n+63&-64)>>3;for(const[a,l]of t.fields.entries()){const t=e[a];t&&t.length===n||(r[a]=l.clone({nullable:!0}),o[a]=null!==(i=null===t||void 0===t?void 0:t._changeLengthAndBackfillNullBitmap(n))&&void 0!==i?i:gM({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(s)}))}return[t.assign(r),gM({type:new hC(r),length:n,children:o})]}function BM(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;for(let i=-1,r=t.length;++i<r;){const r=t[i].type,o=e[i];if(QA.isDictionary(r))if(n.has(r.id)){if(n.get(r.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else o.dictionary&&n.set(r.id,o.dictionary);r.children&&r.children.length>0&&BM(r.children,o.children,n)}return n}OM=Symbol.toStringTag,RM[OM]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(RM.prototype);class NM extends RM{constructor(t){const e=t.fields.map((t=>gM({type:t.type})));super(t,gM({type:new hC(t.fields),nullCount:0,children:e}))}}function zM(t,e){return function(t,e){const n=[...t.fields],i=[],r={numBatches:e.reduce(((t,e)=>Math.max(t,e.length)),0)};let o=0,s=0,a=-1;const l=e.length;let c,u=[];for(;r.numBatches-- >0;){for(s=Number.POSITIVE_INFINITY,a=-1;++a<l;)u[a]=c=e[a].shift(),s=Math.min(s,c?c.length:s);Number.isFinite(s)&&(u=DM(n,s,u,e,r),s>0&&(i[o++]=gM({type:new hC(n),length:s,nullCount:0,children:u.slice()})))}return[t=t.assign(n),i.map((e=>new RM(t,e)))]}(t,e.map((t=>t.data.concat())))}function DM(t,e,n,i,r){var o;const s=(e+63&-64)>>3;for(let a=-1,l=i.length;++a<l;){const l=n[a],c=null===l||void 0===l?void 0:l.length;if(c>=e)c===e?n[a]=l:(n[a]=l.slice(0,e),r.numBatches=Math.max(r.numBatches,i[a].unshift(l.slice(e,c-e))));else{const i=t[a];t[a]=i.clone({nullable:!0}),n[a]=null!==(o=null===l||void 0===l?void 0:l._changeLengthAndBackfillNullBitmap(e))&&void 0!==o?o:gM({type:i.type,length:e,nullCount:e,nullBitmap:new Uint8Array(s)})}}return n}class jM{constructor(){for(var t,e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];if(0===i.length)return this.batches=[],this.schema=new mM([]),this._offsets=[0],this;let o,s;i[0]instanceof mM&&(o=i.shift()),i[i.length-1]instanceof Uint32Array&&(s=i.pop());const a=t=>{if(t){if(t instanceof RM)return[t];if(t instanceof jM)return t.batches;if(t instanceof fM){if(t.type instanceof hC)return[new RM(new mM(t.type.children),t)]}else{if(Array.isArray(t))return t.flatMap((t=>a(t)));if("function"===typeof t[Symbol.iterator])return[...t].flatMap((t=>a(t)));if("object"===typeof t){const e=Object.keys(t),n=e.map((e=>new dM([t[e]]))),i=new mM(e.map(((t,e)=>new yM(String(t),n[e].type)))),[,r]=zM(i,n);return 0===r.length?[new RM(t)]:r}}}return[]},l=i.flatMap((t=>a(t)));if(o=null!==(e=null!==o&&void 0!==o?o:null===(t=l[0])||void 0===t?void 0:t.schema)&&void 0!==e?e:new mM([]),!(o instanceof mM))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const c of l){if(!(c instanceof RM))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!kM(o,c.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=o,this.batches=l,this._offsets=null!==s&&void 0!==s?s:FI(this.data)}get data(){return this.batches.map((t=>{let{data:e}=t;return e}))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce(((t,e)=>t+e.length),0)}get nullCount(){return-1===this._nullCount&&(this._nullCount=RI(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?nM.visit(new dM(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return"[\n  ".concat(this.toArray().join(",\n  "),"\n]")}concat(){const t=this.schema;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=this.data.concat(n.flatMap((t=>{let{data:e}=t;return e})));return new jM(t,r.map((e=>new RM(t,e))))}slice(t,e){const n=this.schema;[t,e]=CI({length:this.numRows},t,e);const i=BI(this.data,this._offsets,t,e);return new jM(n,i.map((t=>new RM(n,t))))}getChild(t){return this.getChildAt(this.schema.fields.findIndex((e=>e.name===t)))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const e=this.data.map((e=>e.children[t]));if(0===e.length){const{type:n}=this.schema.fields[t],i=gM({type:n,length:0,nullCount:0});e.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new dM(e)}return null}setChild(t,e){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex((e=>e.name===t)),e)}setChildAt(t,e){let n=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){e||(e=new dM([gM({type:new JA,length:this.numRows})]));const r=n.fields.slice(),o=r[t].clone({type:e.type}),s=this.schema.fields.map(((t,e)=>this.getChildAt(e)));[r[t],s[t]]=[o,e],[n,i]=zM(n,s)}return new jM(n,i)}select(t){const e=this.schema.fields.reduce(((t,e,n)=>t.set(e.name,n)),new Map);return this.selectAt(t.map((t=>e.get(t))).filter((t=>t>-1)))}selectAt(t){const e=this.schema.selectAt(t),n=this.batches.map((e=>e.selectAt(t)));return new jM(e,n)}assign(t){const e=this.schema.fields,[n,i]=t.schema.fields.reduce(((t,n,i)=>{const[r,o]=t,s=e.findIndex((t=>t.name===n.name));return~s?o[s]=i:r.push(i),t}),[[],[]]),r=this.schema.assign(t.schema),o=[...e.map(((t,e)=>[e,i[e]])).map((e=>{let[n,i]=e;return void 0===i?this.getChildAt(n):t.getChildAt(i)})),...n.map((e=>t.getChildAt(e)))].filter(Boolean);return new jM(...zM(r,o))}}LM=Symbol.toStringTag,jM[LM]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=DI(zI),t.get=DI(wI.getVisitFn(kP.Struct)),t.set=jI(XC.getVisitFn(kP.Struct)),t.indexOf=UI(QI.getVisitFn(kP.Struct)),t.getByteLength=DI(aM.getVisitFn(kP.Struct)),"Table"))(jM.prototype);class UM{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,e,n,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(n),t.writeInt64(e),t.offset()}}const VM=new Int32Array(2),WM=new Float32Array(VM.buffer),HM=new Float64Array(VM.buffer),GM=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];class qM{constructor(t,e){this.low=0|t,this.high=0|e}static create(t,e){return 0==t&&0==e?qM.ZERO:new qM(t,e)}toFloat64(){return(this.low>>>0)+4294967296*this.high}equals(t){return this.low==t.low&&this.high==t.high}}var YM,XM,KM,ZM,$M;qM.ZERO=new qM(0,0),function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(YM||(YM={}));class QM{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new QM(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new qM(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new qM(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return VM[0]=this.readInt32(t),WM[0]}readFloat64(t){return VM[GM?0:1]=this.readInt32(t),VM[GM?1:0]=this.readInt32(t+4),HM[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)}writeUint64(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)}writeFloat32(t,e){WM[0]=e,this.writeInt32(t,VM[0])}writeFloat64(t,e){HM[0]=e,this.writeInt32(t,VM[GM?0:1]),this.writeInt32(t+4,VM[GM?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}__offset(t,e){const n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);const n=this.readInt32(t);let i="",r=0;if(t+=4,e===YM.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;r<n;){let e;const n=this.readUint8(t+r++);if(n<192)e=n;else{const i=this.readUint8(t+r++);if(n<224)e=(31&n)<<6|63&i;else{const o=this.readUint8(t+r++);if(n<240)e=(15&n)<<12|(63&i)<<6|63&o;else{e=(7&n)<<18|(63&i)<<12|(63&o)<<6|63&this.readUint8(t+r++)}}}e<65536?i+=String.fromCharCode(e):(e-=65536,i+=String.fromCharCode(55296+(e>>10),56320+(1023&e)))}return i}__union_with_string(t,e){return"string"===typeof t?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+4}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}createLong(t,e){return qM.create(t,e)}createScalarList(t,e){const n=[];for(let i=0;i<e;++i)null!==t(i)&&n.push(t(i));return n}createObjList(t,e){const n=[];for(let i=0;i<e;++i){const e=t(i);null!==e&&n.push(e.unpack())}return n}}class JM{constructor(t){let e;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,e=t||1024,this.bb=QM.allocate(e),this.space=e}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,e){t>this.minalign&&(this.minalign=t);const n=1+~(this.bb.capacity()-this.space+e)&t-1;for(;this.space<n+t+e;){const t=this.bb.capacity();this.bb=JM.growByteBuffer(this.bb),this.space+=this.bb.capacity()-t}this.pad(n)}pad(t){for(let e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))}addFieldInt16(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))}addFieldInt32(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))}addFieldInt64(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))}addFieldFloat32(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))}addFieldFloat64(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))}addFieldOffset(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))}addFieldStruct(t,e,n){e!=n&&(this.nested(e),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){null!==this.vtable&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=e<<1,i=QM.allocate(n);return i.setPosition(n-e),i.bytes().set(t.bytes(),n-e),i}addOffset(t){this.prep(4,0),this.writeInt32(this.offset()-t+4)}startObject(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(let e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let e=this.vtable_in_use-1;for(;e>=0&&0==this.vtable[e];e--);const n=e+1;for(;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);const i=2*(n+2);this.addInt16(i);let r=0;const o=this.space;t:for(e=0;e<this.vtables.length;e++){const t=this.bb.capacity()-this.vtables[e];if(i==this.bb.readInt16(t)){for(let e=2;e<i;e+=2)if(this.bb.readInt16(o+e)!=this.bb.readInt16(t+e))continue t;r=this.vtables[e];break}}return r?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,r-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,e,n){const i=n?4:0;if(e){const t=e;if(this.prep(this.minalign,8+i),4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=3;e>=0;e--)this.writeInt8(t.charCodeAt(e))}this.prep(this.minalign,4+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,e){this.finish(t,e,!0)}requiredField(t,e){const n=this.bb.capacity()-t,i=n-this.bb.readInt32(n);if(!(0!=this.bb.readInt16(i+e)))throw new Error("FlatBuffers: field "+e+" must be set")}startVector(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(4,t*e),this.prep(n,t*e)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const e=this.createString(t);return this.string_maps.set(t,e),e}createString(t){if(!t)return 0;let e;if(t instanceof Uint8Array)e=t;else{e=[];let n=0;for(;n<t.length;){let i;const r=t.charCodeAt(n++);if(r<55296||r>=56320)i=r;else{i=(r<<10)+t.charCodeAt(n++)+-56613888}i<128?e.push(i):(i<2048?e.push(i>>6&31|192):(i<65536?e.push(i>>12&15|224):e.push(i>>18&7|240,i>>12&63|128),e.push(i>>6&63|128)),e.push(63&i|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(let n=0,i=this.space,r=this.bb.bytes();n<e.length;n++)r[i++]=e[n];return this.endVector()}createLong(t,e){return qM.create(t,e)}createObjectOffset(t){return null===t?0:"string"===typeof t?this.createString(t):t.pack(this)}createObjectOffsetList(t){const e=[];for(let n=0;n<t.length;++n){const i=t[n];if(null===i)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");e.push(this.createObjectOffset(i))}return e}createStructOffsetList(t,e){return e(this,t.length),this.createObjectOffsetList(t),this.endVector()}}class tk{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,e){return(e||new tk).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,e){return t.setPosition(t.position()+4),(e||new tk).__init(t.readInt32(t.position())+t.position(),t)}key(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,e,n){return tk.startKeyValue(t),tk.addKey(t,e),tk.addValue(t,n),tk.endKeyValue(t)}}!function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(XM||(XM={})),function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"}(KM||(KM={})),function(t){t[t.DenseArray=0]="DenseArray"}(ZM||(ZM={}));class ek{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,e){return(e||new ek).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,e){return t.setPosition(t.position()+4),(e||new ek).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){return t.endObject()}static createInt(t,e,n){return ek.startInt(t),ek.addBitWidth(t,e),ek.addIsSigned(t,n),ek.endInt(t)}}class nk{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new nk).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,e){return t.setPosition(t.position()+4),(e||new nk).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new ek).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):ZM.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static addDictionaryKind(t,e){t.addFieldInt16(3,e,ZM.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"}($M||($M={}));class ik{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(t,e){return(e||new ik).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,e){return t.setPosition(t.position()+4),(e||new ik).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):$M.NONE}type(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(t){const e=this.bb.__offset(this.bb_pos,12);return e?(t||new nk).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}children(t,e){const n=this.bb.__offset(this.bb_pos,14);return n?(e||new ik).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,16);return n?(e||new tk).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(t,e){t.addFieldInt8(2,e,$M.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){return t.endObject()}}class rk{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(t,e){return(e||new rk).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,e){return t.setPosition(t.position()+4),(e||new rk).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):KM.Little}fields(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new ik).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new tk).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,e){t.addFieldInt16(0,e,KM.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static addFeatures(t,e){t.addFieldOffset(3,e,0)}static createFeaturesVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startFeaturesVector(t,e){t.startVector(8,e,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,e){t.finish(e)}static finishSizePrefixedSchemaBuffer(t,e){t.finish(e,void 0,!0)}static createSchema(t,e,n,i,r){return rk.startSchema(t),rk.addEndianness(t,e),rk.addFields(t,n),rk.addCustomMetadata(t,i),rk.addFeatures(t,r),rk.endSchema(t)}}class ok{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new ok).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,e){return t.setPosition(t.position()+4),(e||new ok).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):XM.V1}schema(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new rk).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new UM).__init(this.bb.__vector(this.bb_pos+n)+24*t,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new UM).__init(this.bb.__vector(this.bb_pos+n)+24*t,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new tk).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,XM.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,e){t.finish(e)}static finishSizePrefixedFooterBuffer(t,e){t.finish(e,void 0,!0)}}var sk=qM,ak=JM,lk=QM;class ck{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:EP.V4,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;this.schema=t,this.version=e,n&&(this._recordBatches=n),i&&(this._dictionaryBatches=i)}static decode(t){t=new lk(yA(t));const e=ok.getRootAsFooter(t),n=mM.decode(e.schema());return new uk(n,e)}static encode(t){const e=new ak,n=mM.encode(e,t.schema);ok.startRecordBatchesVector(e,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())dk.encode(e,o);const i=e.endVector();ok.startDictionariesVector(e,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())dk.encode(e,o);const r=e.endVector();return ok.startFooter(e),ok.addSchema(e,n),ok.addVersion(e,EP.V4),ok.addRecordBatches(e,i),ok.addDictionaries(e,r),ok.finishFooterBuffer(e,ok.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,n=this.numRecordBatches;++e<n;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,n=this.numDictionaries;++e<n;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class uk extends ck{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return dk.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return dk.decode(e)}return null}}class dk{constructor(t,e,n){this.metaDataLength=t,this.offset="number"===typeof n?n:n.low,this.bodyLength="number"===typeof e?e:e.low}static decode(t){return new dk(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:n}=e,i=new sk(e.offset,0),r=new sk(e.bodyLength,0);return UM.createBlock(t,i,n,r)}}const hk={fromIterable:t=>fk(function*(t){let e,n,i,r,o=!1,s=[],a=0;function l(){return"peek"===i?pA(s,r)[0]:([n,s,a]=pA(s,r),n)}({cmd:i,size:r}=yield null);const c=(u=t,bA(Uint8Array,u))[Symbol.iterator]();var u;try{do{if(({done:e,value:n}=Number.isNaN(r-a)?c.next():c.next(r-a)),!e&&n.byteLength>0&&(s.push(n),a+=n.byteLength),e||r<=a)do{({cmd:i,size:r}=yield l())}while(r<a)}while(!e)}catch(d){(o=!0)&&"function"===typeof c.throw&&c.throw(d)}finally{!1===o&&"function"===typeof c.return&&c.return(null)}return null}(t)),fromAsyncIterable:t=>fk(function(t){return oA(this,arguments,(function*(){let e,n,i,r,o=!1,s=[],a=0;function l(){return"peek"===i?pA(s,r)[0]:([n,s,a]=pA(s,r),n)}({cmd:i,size:r}=yield yield rA(null));const c=(u=t,_A(Uint8Array,u))[Symbol.asyncIterator]();var u;try{do{if(({done:e,value:n}=Number.isNaN(r-a)?yield rA(c.next()):yield rA(c.next(r-a))),!e&&n.byteLength>0&&(s.push(n),a+=n.byteLength),e||r<=a)do{({cmd:i,size:r}=yield yield rA(l()))}while(r<a)}while(!e)}catch(d){(o=!0)&&"function"===typeof c.throw&&(yield rA(c.throw(d)))}finally{!1===o&&"function"===typeof c.return&&(yield rA(c.return(new Uint8Array(0))))}return yield rA(null)}))}(t)),fromDOMStream:t=>fk(function(t){return oA(this,arguments,(function*(){let e,n,i,r=!1,o=!1,s=[],a=0;function l(){return"peek"===n?pA(s,i)[0]:([e,s,a]=pA(s,i),e)}({cmd:n,size:i}=yield yield rA(null));const c=new pk(t);try{do{if(({done:r,value:e}=Number.isNaN(i-a)?yield rA(c.read()):yield rA(c.read(i-a))),!r&&e.byteLength>0&&(s.push(yA(e)),a+=e.byteLength),r||i<=a)do{({cmd:n,size:i}=yield yield rA(l()))}while(i<a)}while(!r)}catch(u){(o=!0)&&(yield rA(c.cancel(u)))}finally{!1===o?yield rA(c.cancel()):t.locked&&c.releaseLock()}return yield rA(null)}))}(t)),fromNodeStream:t=>fk(function(t){return oA(this,arguments,(function*(){const e=[];let n,i,r,o="error",s=!1,a=null,l=0,c=[];function u(){return"peek"===n?pA(c,i)[0]:([r,c,l]=pA(c,i),r)}if(({cmd:n,size:i}=yield yield rA(null)),t.isTTY)return yield yield rA(new Uint8Array(0)),yield rA(null);try{e[0]=gk(t,"end"),e[1]=gk(t,"error");do{if(e[2]=gk(t,"readable"),[o,a]=yield rA(Promise.race(e.map((t=>t[2])))),"error"===o)break;if((s="end"===o)||(Number.isFinite(i-l)?(r=yA(t.read(i-l)),r.byteLength<i-l&&(r=yA(t.read()))):r=yA(t.read()),r.byteLength>0&&(c.push(r),l+=r.byteLength)),s||i<=l)do{({cmd:n,size:i}=yield yield rA(u()))}while(i<l)}while(!s)}finally{yield rA(d(e,"error"===o?a:null))}return yield rA(null);function d(e,n){return r=c=null,new Promise(((i,r)=>{for(const[n,s]of e)t.off(n,s);try{const e=t.destroy;e&&e.call(t,n),n=void 0}catch(o){n=o||n}finally{null!=n?r(n):i()}}))}}))}(t)),toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},fk=t=>(t.next(),t);class pk{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch((()=>{}))}get closed(){return this.reader?this.reader.closed.catch((()=>{})):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return nA(this,void 0,void 0,(function*(){const{reader:e,source:n}=this;e&&(yield e.cancel(t).catch((()=>{}))),n&&n.locked&&this.releaseLock()}))}read(t){return nA(this,void 0,void 0,(function*(){if(0===t)return{done:null==this.reader,value:new Uint8Array(0)};const e=yield this.reader.read();return!e.done&&(e.value=yA(e)),e}))}}const gk=(t,e)=>{const n=t=>i([e,t]);let i;return[e,n,new Promise((r=>(i=r)&&t.once(e,n)))]};const mk=Object.freeze({done:!0,value:void 0});class yk{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class vk{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class bk extends vk{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}get closed(){return this._closedPromise}cancel(t){return nA(this,void 0,void 0,(function*(){yield this.return(t)}))}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(mk);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return hk.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return hk.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return nA(this,void 0,void 0,(function*(){return yield this.abort(t),mk}))}return(t){return nA(this,void 0,void 0,(function*(){return yield this.close(),mk}))}read(t){return nA(this,void 0,void 0,(function*(){return(yield this.next(t,"read")).value}))}peek(t){return nA(this,void 0,void 0,(function*(){return(yield this.next(t,"peek")).value}))}next(){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise(((t,e)=>{this.resolvers.push({resolve:t,reject:e})})):Promise.resolve(mk)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class _k extends bk{write(t){if((t=yA(t)).byteLength>0)return super.write(t)}toString(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?cA(this.toUint8Array(!0)):this.toUint8Array(!1).then(cA)}toUint8Array(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?pA(this._values)[0]:(()=>nA(this,void 0,void 0,(function*(){var t,e;const n=[];let i=0;try{for(var r,o=aA(this);!(r=yield o.next()).done;){const t=r.value;n.push(t),i+=t.byteLength}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=o.return)&&(yield e.call(o))}finally{if(t)throw t.error}}return pA(n,i)[0]})))()}}class wk{constructor(t){t&&(this.source=new Sk(hk.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class xk{constructor(t){t instanceof xk?this.source=t.source:t instanceof _k?this.source=new Ek(hk.fromAsyncIterable(t)):JP(t)?this.source=new Ek(hk.fromNodeStream(t)):QP(t)?this.source=new Ek(hk.fromDOMStream(t)):ZP(t)?this.source=new Ek(hk.fromDOMStream(t.body)):GP(t)?this.source=new Ek(hk.fromIterable(t)):(HP(t)||qP(t))&&(this.source=new Ek(hk.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Sk{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read";return this.source.next({cmd:e,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||mk)}return(t){return Object.create(this.source.return&&this.source.return(t)||mk)}}class Ek{constructor(t){this.source=t,this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}cancel(t){return nA(this,void 0,void 0,(function*(){yield this.return(t)}))}get closed(){return this._closedPromise}read(t){return nA(this,void 0,void 0,(function*(){return(yield this.next(t,"read")).value}))}peek(t){return nA(this,void 0,void 0,(function*(){return(yield this.next(t,"peek")).value}))}next(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read";return nA(this,void 0,void 0,(function*(){return yield this.source.next({cmd:e,size:t})}))}throw(t){return nA(this,void 0,void 0,(function*(){const e=this.source.throw&&(yield this.source.throw(t))||mk;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}))}return(t){return nA(this,void 0,void 0,(function*(){const e=this.source.return&&(yield this.source.return(t))||mk;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}))}}class Tk extends wk{constructor(t,e){super(),this.position=0,this.buffer=yA(t),this.size="undefined"===typeof e?this.buffer.byteLength:e}readInt32(t){const{buffer:e,byteOffset:n}=this.readAt(t,4);return new DataView(e,n).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:e,size:n,position:i}=this;return e&&i<n?("number"!==typeof t&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(n,i+Math.min(n-i,t)),e.subarray(i,this.position)):null}readAt(t,e){const n=this.buffer,i=Math.min(this.size,t+e);return n?n.subarray(t,i):new Uint8Array(e)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class Pk extends xk{constructor(t,e){super(),this.position=0,this._handle=t,"number"===typeof e?this.size=e:this._pending=(()=>nA(this,void 0,void 0,(function*(){this.size=(yield t.stat()).size,delete this._pending})))()}readInt32(t){return nA(this,void 0,void 0,(function*(){const{buffer:e,byteOffset:n}=yield this.readAt(t,4);return new DataView(e,n).getInt32(0,!0)}))}seek(t){return nA(this,void 0,void 0,(function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size}))}read(t){return nA(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:e,size:n,position:i}=this;if(e&&i<n){"number"!==typeof t&&(t=Number.POSITIVE_INFINITY);let r=i,o=0,s=0;const a=Math.min(n,r+Math.min(n-r,t)),l=new Uint8Array(Math.max(0,(this.position=a)-r));for(;(r+=s)<a&&(o+=s)<l.byteLength;)({bytesRead:s}=yield e.read(l,o,l.byteLength-o,r));return l}return null}))}readAt(t,e){return nA(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:n,size:i}=this;if(n&&t+e<i){const r=Math.min(i,t+e),o=new Uint8Array(r-t);return(yield n.read(o,0,e,t)).buffer}return new Uint8Array(e)}))}close(){return nA(this,void 0,void 0,(function*(){const t=this._handle;this._handle=null,t&&(yield t.close())}))}throw(t){return nA(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:t}}))}return(t){return nA(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:t}}))}}function Ak(t){return t<0&&(t=4294967295+t+1),"0x".concat(t.toString(16))}const Ck=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class Ik{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const e=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),n=new Uint32Array([t.buffer[1]>>>16,65535&t.buffer[1],t.buffer[0]>>>16,65535&t.buffer[0]]);let i=e[3]*n[3];this.buffer[0]=65535&i;let r=i>>>16;return i=e[2]*n[3],r+=i,i=e[3]*n[2]>>>0,r+=i,this.buffer[0]+=r<<16,this.buffer[1]=r>>>0<i?65536:0,this.buffer[1]+=r>>>16,this.buffer[1]+=e[1]*n[3]+e[2]*n[2]+e[3]*n[1],this.buffer[1]+=e[0]*n[3]+e[1]*n[2]+e[2]*n[1]+e[3]*n[0]<<16,this}_plus(t){const e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return"".concat(Ak(this.buffer[1])," ").concat(Ak(this.buffer[0]))}}class Mk extends Ik{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return Mk.fromString("string"===typeof t?t:t.toString(),e)}static fromNumber(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return Mk.fromString(t.toString(),e)}static fromString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);const n=t.length,i=new Mk(e);for(let r=0;r<n;){const e=8<n-r?8:n-r,o=new Mk(new Uint32Array([Number.parseInt(t.slice(r,r+e),10),0])),s=new Mk(new Uint32Array([Ck[e],0]));i.times(s),i.plus(o),r+=e}return i}static convertArray(t){const e=new Uint32Array(2*t.length);for(let n=-1,i=t.length;++n<i;)Mk.from(t[n],new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e}static multiply(t,e){return new Mk(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new Mk(new Uint32Array(t.buffer)).plus(e)}}class kk extends Ik{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const e=this.buffer[1]<<0,n=t.buffer[1]<<0;return e<n||e===n&&this.buffer[0]<t.buffer[0]}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return kk.fromString("string"===typeof t?t:t.toString(),e)}static fromNumber(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return kk.fromString(t.toString(),e)}static fromString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);const n=t.startsWith("-"),i=t.length,r=new kk(e);for(let o=n?1:0;o<i;){const e=8<i-o?8:i-o,n=new kk(new Uint32Array([Number.parseInt(t.slice(o,o+e),10),0])),s=new kk(new Uint32Array([Ck[e],0]));r.times(s),r.plus(n),o+=e}return n?r.negate():r}static convertArray(t){const e=new Uint32Array(2*t.length);for(let n=-1,i=t.length;++n<i;)kk.from(t[n],new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e}static multiply(t,e){return new kk(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new kk(new Uint32Array(t.buffer)).plus(e)}}class Ok{constructor(t){this.buffer=t}high(){return new kk(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new kk(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(t){const e=new Mk(new Uint32Array([this.buffer[3],0])),n=new Mk(new Uint32Array([this.buffer[2],0])),i=new Mk(new Uint32Array([this.buffer[1],0])),r=new Mk(new Uint32Array([this.buffer[0],0])),o=new Mk(new Uint32Array([t.buffer[3],0])),s=new Mk(new Uint32Array([t.buffer[2],0])),a=new Mk(new Uint32Array([t.buffer[1],0])),l=new Mk(new Uint32Array([t.buffer[0],0]));let c=Mk.multiply(r,l);this.buffer[0]=c.low();const u=new Mk(new Uint32Array([c.high(),0]));c=Mk.multiply(i,l),u.plus(c),c=Mk.multiply(r,a),u.plus(c),this.buffer[1]=u.low(),this.buffer[3]=u.lessThan(c)?1:0,this.buffer[2]=u.high();return new Mk(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Mk.multiply(n,l)).plus(Mk.multiply(i,a)).plus(Mk.multiply(r,s)),this.buffer[3]+=Mk.multiply(e,l).plus(Mk.multiply(n,a)).plus(Mk.multiply(i,s)).plus(Mk.multiply(r,o)).low(),this}plus(t){const e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this}hex(){return"".concat(Ak(this.buffer[3])," ").concat(Ak(this.buffer[2])," ").concat(Ak(this.buffer[1])," ").concat(Ak(this.buffer[0]))}static multiply(t,e){return new Ok(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new Ok(new Uint32Array(t.buffer)).plus(e)}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);return Ok.fromString("string"===typeof t?t:t.toString(),e)}static fromNumber(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);return Ok.fromString(t.toString(),e)}static fromString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);const n=t.startsWith("-"),i=t.length,r=new Ok(e);for(let o=n?1:0;o<i;){const e=8<i-o?8:i-o,n=new Ok(new Uint32Array([Number.parseInt(t.slice(o,o+e),10),0,0,0])),s=new Ok(new Uint32Array([Ck[e],0,0,0]));r.times(s),r.plus(n),o+=e}return n?r.negate():r}static convertArray(t){const e=new Uint32Array(4*t.length);for(let n=-1,i=t.length;++n<i;)Ok.from(t[n],new Uint32Array(e.buffer,e.byteOffset+16*n,4));return e}}class Lk extends wC{constructor(t,e,n,i){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=e,this.buffers=n,this.dictionaries=i}visit(t){return super.visit(t instanceof yM?t.type:t)}visitNull(t){let{length:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return gM({type:t,length:e})}visitBool(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return gM({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitInt(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return gM({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFloat(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return gM({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitUtf8(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return gM({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return gM({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return gM({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDate(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return gM({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTimestamp(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return gM({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTime(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return gM({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDecimal(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return gM({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitList(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return gM({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return gM({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===TP.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return gM({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return gM({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return gM({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return gM({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFixedSizeList(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return gM({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),child:this.visit(t.children[0])})}visitMap(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return gM({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nextBufferRange();return e>0&&this.readData(t,n)||new Uint8Array(0)}readOffsets(t,e){return this.readData(t,e)}readTypeIds(t,e){return this.readData(t,e)}readData(t){let{length:e,offset:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return this.bytes.subarray(n,n+e)}readDictionary(t){return this.dictionaries.get(t.id)}}class Rk extends Lk{constructor(t,e,n,i){super(new Uint8Array(0),e,n,i),this.sources=t}readNullBitmap(t,e){let{offset:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nextBufferRange();return e<=0?new Uint8Array(0):GI(this.sources[n])}readOffsets(t){let{offset:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return gA(Uint8Array,gA(Int32Array,this.sources[e]))}readTypeIds(t){let{offset:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return gA(Uint8Array,gA(t.ArrayType,this.sources[e]))}readData(t){let{offset:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();const{sources:n}=this;return QA.isTimestamp(t)||(QA.isInt(t)||QA.isTime(t))&&64===t.bitWidth||QA.isDate(t)&&t.unit===AP.MILLISECOND?gA(Uint8Array,kk.convertArray(n[e])):QA.isDecimal(t)?gA(Uint8Array,Ok.convertArray(n[e])):QA.isBinary(t)||QA.isFixedSizeBinary(t)?function(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let i=0;i<e.length;i+=2)n[i>>1]=Number.parseInt(e.slice(i,i+2),16);return n}(n[e]):QA.isBool(t)?GI(n[e]):QA.isUtf8(t)?dA(n[e].join("")):gA(Uint8Array,gA(t.ArrayType,n[e].map((t=>+t))))}}var Fk,Bk,Nk,zk,Dk,jk,Uk,Vk;!function(t){t[t.BUFFER=0]="BUFFER"}(Fk||(Fk={})),function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"}(Bk||(Bk={}));class Wk{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBodyCompression(t,e){return(e||new Wk).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,e){return t.setPosition(t.position()+4),(e||new Wk).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Bk.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Fk.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,e){t.addFieldInt8(0,e,Bk.LZ4_FRAME)}static addMethod(t,e){t.addFieldInt8(1,e,Fk.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,e,n){return Wk.startBodyCompression(t),Wk.addCodec(t,e),Wk.addMethod(t,n),Wk.endBodyCompression(t)}}class Hk{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}}class Gk{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}}class qk{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(t,e){return(e||new qk).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,e){return t.setPosition(t.position()+4),(e||new qk).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Gk).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new Hk).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const e=this.bb.__offset(this.bb_pos,10);return e?(t||new Wk).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static addCompression(t,e){t.addFieldOffset(3,e,0)}static endRecordBatch(t){return t.endObject()}}class Yk{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(t,e){return(e||new Yk).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,e){return t.setPosition(t.position()+4),(e||new Yk).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new qk).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){return t.endObject()}}!function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(Nk||(Nk={}));class Xk{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new Xk).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,e){return t.setPosition(t.position()+4),(e||new Xk).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Nk.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,e){t.addFieldInt16(0,e,Nk.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,e){return Xk.startFloatingPoint(t),Xk.addPrecision(t,e),Xk.endFloatingPoint(t)}}class Kk{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,e){return(e||new Kk).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,e){return t.setPosition(t.position()+4),(e||new Kk).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static addBitWidth(t,e){t.addFieldInt32(2,e,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,e,n,i){return Kk.startDecimal(t),Kk.addPrecision(t,e),Kk.addScale(t,n),Kk.addBitWidth(t,i),Kk.endDecimal(t)}}!function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(zk||(zk={}));class Zk{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(t,e){return(e||new Zk).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,e){return t.setPosition(t.position()+4),(e||new Zk).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):zk.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,zk.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,e){return Zk.startDate(t),Zk.addUnit(t,e),Zk.endDate(t)}}!function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(Dk||(Dk={}));class $k{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new $k).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,e){return t.setPosition(t.position()+4),(e||new $k).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Dk.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,Dk.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){return t.endObject()}static createTime(t,e,n){return $k.startTime(t),$k.addUnit(t,e),$k.addBitWidth(t,n),$k.endTime(t)}}class Qk{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new Qk).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,e){return t.setPosition(t.position()+4),(e||new Qk).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Dk.SECOND}timezone(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,Dk.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,e,n){return Qk.startTimestamp(t),Qk.addUnit(t,e),Qk.addTimezone(t,n),Qk.endTimestamp(t)}}!function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(jk||(jk={}));class Jk{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new Jk).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,e){return t.setPosition(t.position()+4),(e||new Jk).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):jk.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,jk.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,e){return Jk.startInterval(t),Jk.addUnit(t,e),Jk.endInterval(t)}}!function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(Uk||(Uk={}));class tO{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new tO).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,e){return t.setPosition(t.position()+4),(e||new tO).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Uk.Sparse}typeIds(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,e){t.addFieldInt16(0,e,Uk.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){return t.endObject()}static createUnion(t,e,n){return tO.startUnion(t),tO.addMode(t,e),tO.addTypeIds(t,n),tO.endUnion(t)}}class eO{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,e){return(e||new eO).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,e){return t.setPosition(t.position()+4),(e||new eO).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,e){return eO.startFixedSizeBinary(t),eO.addByteWidth(t,e),eO.endFixedSizeBinary(t)}}class nO{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,e){return(e||new nO).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,e){return t.setPosition(t.position()+4),(e||new nO).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,e){return nO.startFixedSizeList(t),nO.addListSize(t,e),nO.endFixedSizeList(t)}}class iO{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(t,e){return(e||new iO).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,e){return t.setPosition(t.position()+4),(e||new iO).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){return t.endObject()}static createMap(t,e){return iO.startMap(t),iO.addKeysSorted(t,e),iO.endMap(t)}}!function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(Vk||(Vk={}));class rO{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(t,e){return(e||new rO).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,e){return t.setPosition(t.position()+4),(e||new rO).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):XM.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Vk.NONE}header(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new tk).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,XM.V1)}static addHeaderType(t,e){t.addFieldInt8(1,e,Vk.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,t.createLong(0,0))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,e){t.finish(e)}static finishSizePrefixedMessageBuffer(t,e){t.finish(e,void 0,!0)}static createMessage(t,e,n,i,r,o){return rO.startMessage(t),rO.addVersion(t,e),rO.addHeaderType(t,n),rO.addHeader(t,i),rO.addBodyLength(t,r),rO.addCustomMetadata(t,o),rO.endMessage(t)}}class oO{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,e){return(e||new oO).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,e){return t.setPosition(t.position()+4),(e||new oO).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return oO.startNull(t),oO.endNull(t)}}class sO{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,e){return(e||new sO).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,e){return t.setPosition(t.position()+4),(e||new sO).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return sO.startBinary(t),sO.endBinary(t)}}class aO{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,e){return(e||new aO).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,e){return t.setPosition(t.position()+4),(e||new aO).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return aO.startBool(t),aO.endBool(t)}}class lO{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,e){return(e||new lO).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,e){return t.setPosition(t.position()+4),(e||new lO).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return lO.startUtf8(t),lO.endUtf8(t)}}class cO{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,e){return(e||new cO).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,e){return t.setPosition(t.position()+4),(e||new cO).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return cO.startList(t),cO.endList(t)}}class uO{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,e){return(e||new uO).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,e){return t.setPosition(t.position()+4),(e||new uO).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return uO.startStruct_(t),uO.endStruct_(t)}}var dO=qM;const hO=new class extends wC{visit(t,e){return null==t||null==e?void 0:super.visit(t,e)}visitNull(t,e){return oO.startNull(e),oO.endNull(e)}visitInt(t,e){return ek.startInt(e),ek.addBitWidth(e,t.bitWidth),ek.addIsSigned(e,t.isSigned),ek.endInt(e)}visitFloat(t,e){return Xk.startFloatingPoint(e),Xk.addPrecision(e,t.precision),Xk.endFloatingPoint(e)}visitBinary(t,e){return sO.startBinary(e),sO.endBinary(e)}visitBool(t,e){return aO.startBool(e),aO.endBool(e)}visitUtf8(t,e){return lO.startUtf8(e),lO.endUtf8(e)}visitDecimal(t,e){return Kk.startDecimal(e),Kk.addScale(e,t.scale),Kk.addPrecision(e,t.precision),Kk.addBitWidth(e,t.bitWidth),Kk.endDecimal(e)}visitDate(t,e){return Zk.startDate(e),Zk.addUnit(e,t.unit),Zk.endDate(e)}visitTime(t,e){return $k.startTime(e),$k.addUnit(e,t.unit),$k.addBitWidth(e,t.bitWidth),$k.endTime(e)}visitTimestamp(t,e){const n=t.timezone&&e.createString(t.timezone)||void 0;return Qk.startTimestamp(e),Qk.addUnit(e,t.unit),void 0!==n&&Qk.addTimezone(e,n),Qk.endTimestamp(e)}visitInterval(t,e){return Jk.startInterval(e),Jk.addUnit(e,t.unit),Jk.endInterval(e)}visitList(t,e){return cO.startList(e),cO.endList(e)}visitStruct(t,e){return uO.startStruct_(e),uO.endStruct_(e)}visitUnion(t,e){tO.startTypeIdsVector(e,t.typeIds.length);const n=tO.createTypeIdsVector(e,t.typeIds);return tO.startUnion(e),tO.addMode(e,t.mode),tO.addTypeIds(e,n),tO.endUnion(e)}visitDictionary(t,e){const n=this.visit(t.indices,e);return nk.startDictionaryEncoding(e),nk.addId(e,new dO(t.id,0)),nk.addIsOrdered(e,t.isOrdered),void 0!==n&&nk.addIndexType(e,n),nk.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return eO.startFixedSizeBinary(e),eO.addByteWidth(e,t.byteWidth),eO.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return nO.startFixedSizeList(e),nO.addListSize(e,t.listSize),nO.endFixedSizeList(e)}visitMap(t,e){return iO.startMap(e),iO.addKeysSorted(e,t.keysSorted),iO.endMap(e)}};function fO(t){return new EO(t.count,gO(t.columns),mO(t.columns))}function pO(t,e){return(t.children||[]).filter(Boolean).map((t=>yM.fromJSON(t,e)))}function gO(t){return(t||[]).reduce(((t,e)=>{return[...t,new AO(e.count,(n=e.VALIDITY,(n||[]).reduce(((t,e)=>t+ +(0===e)),0))),...gO(e.children)];var n}),[])}function mO(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(let n=-1,i=(t||[]).length;++n<i;){const i=t[n];i.VALIDITY&&e.push(new PO(e.length,i.VALIDITY.length)),i.TYPE&&e.push(new PO(e.length,i.TYPE.length)),i.OFFSET&&e.push(new PO(e.length,i.OFFSET.length)),i.DATA&&e.push(new PO(e.length,i.DATA.length)),e=mO(i.children,e)}return e}function yO(t){return new Map(Object.entries(t||{}))}function vO(t){return new tC(t.isSigned,t.bitWidth)}function bO(t,e){const n=t.type.name;switch(n){case"NONE":case"null":return new JA;case"binary":return new iC;case"utf8":return new rC;case"bool":return new oC;case"list":return new dC((e||[])[0]);case"struct":case"struct_":return new hC(e||[])}switch(n){case"int":{const e=t.type;return new tC(e.isSigned,e.bitWidth)}case"floatingpoint":{const e=t.type;return new nC(PP[e.precision])}case"decimal":{const e=t.type;return new sC(e.scale,e.precision,e.bitWidth)}case"date":{const e=t.type;return new aC(AP[e.unit])}case"time":{const e=t.type;return new lC(CP[e.unit],e.bitWidth)}case"timestamp":{const e=t.type;return new cC(CP[e.unit],e.timezone)}case"interval":{const e=t.type;return new uC(IP[e.unit])}case"union":{const n=t.type;return new fC(TP[n.mode],n.typeIds||[],e||[])}case"fixedsizebinary":{const e=t.type;return new pC(e.byteWidth)}case"fixedsizelist":{const n=t.type;return new gC(n.listSize,(e||[])[0])}case"map":{const n=t.type;return new mC((e||[])[0],n.keysSorted)}}throw new Error('Unrecognized type: "'.concat(n,'"'))}var _O=qM,wO=JM,xO=QM;class SO{constructor(t,e,n,i){this._version=e,this._headerType=n,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength="number"===typeof t?t:t.low}static fromJSON(t,e){const n=new SO(0,EP.V4,e);return n._createHeader=function(t,e){return()=>{switch(e){case MP.Schema:return mM.fromJSON(t);case MP.RecordBatch:return EO.fromJSON(t);case MP.DictionaryBatch:return TO.fromJSON(t)}throw new Error("Unrecognized Message type: { name: ".concat(MP[e],", type: ").concat(e," }"))}}(t,e),n}static decode(t){t=new xO(yA(t));const e=rO.getRootAsMessage(t),n=e.bodyLength(),i=e.version(),r=e.headerType(),o=new SO(n,i,r);return o._createHeader=function(t,e){return()=>{switch(e){case MP.Schema:return mM.decode(t.header(new rk));case MP.RecordBatch:return EO.decode(t.header(new qk),t.version());case MP.DictionaryBatch:return TO.decode(t.header(new Yk),t.version())}throw new Error("Unrecognized Message type: { name: ".concat(MP[e],", type: ").concat(e," }"))}}(e,r),o}static encode(t){const e=new wO;let n=-1;return t.isSchema()?n=mM.encode(e,t.header()):t.isRecordBatch()?n=EO.encode(e,t.header()):t.isDictionaryBatch()&&(n=TO.encode(e,t.header())),rO.startMessage(e),rO.addVersion(e,EP.V4),rO.addHeader(e,n),rO.addHeaderType(e,t.headerType),rO.addBodyLength(e,new _O(t.bodyLength,0)),rO.finishMessageBuffer(e,rO.endMessage(e)),e.asUint8Array()}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t instanceof mM)return new SO(0,EP.V4,MP.Schema,t);if(t instanceof EO)return new SO(e,EP.V4,MP.RecordBatch,t);if(t instanceof TO)return new SO(e,EP.V4,MP.DictionaryBatch,t);throw new Error("Unrecognized Message header: ".concat(t))}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===MP.Schema}isRecordBatch(){return this.headerType===MP.RecordBatch}isDictionaryBatch(){return this.headerType===MP.DictionaryBatch}}class EO{constructor(t,e,n){this._nodes=e,this._buffers=n,this._length="number"===typeof t?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class TO{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._data=t,this._isDelta=n,this._id="number"===typeof e?e:e.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class PO{constructor(t,e){this.offset="number"===typeof t?t:t.low,this.length="number"===typeof e?e:e.low}}class AO{constructor(t,e){this.length="number"===typeof t?t:t.low,this.nullCount="number"===typeof e?e:e.low}}function CO(t,e){const n=[];for(let i,r=-1,o=-1,s=t.childrenLength();++r<s;)(i=t.children(r))&&(n[++o]=yM.decode(i,e));return n}function IO(t){const e=new Map;if(t)for(let n,i,r=-1,o=Math.trunc(t.customMetadataLength());++r<o;)(n=t.customMetadata(r))&&null!=(i=n.key())&&e.set(i,n.value());return e}function MO(t){return new tC(t.isSigned(),t.bitWidth())}function kO(t,e){const n=t.typeType();switch(n){case $M.NONE:case $M.Null:return new JA;case $M.Binary:return new iC;case $M.Utf8:return new rC;case $M.Bool:return new oC;case $M.List:return new dC((e||[])[0]);case $M.Struct_:return new hC(e||[])}switch(n){case $M.Int:{const e=t.type(new ek);return new tC(e.isSigned(),e.bitWidth())}case $M.FloatingPoint:{const e=t.type(new Xk);return new nC(e.precision())}case $M.Decimal:{const e=t.type(new Kk);return new sC(e.scale(),e.precision(),e.bitWidth())}case $M.Date:{const e=t.type(new Zk);return new aC(e.unit())}case $M.Time:{const e=t.type(new $k);return new lC(e.unit(),e.bitWidth())}case $M.Timestamp:{const e=t.type(new Qk);return new cC(e.unit(),e.timezone())}case $M.Interval:{const e=t.type(new Jk);return new uC(e.unit())}case $M.Union:{const n=t.type(new tO);return new fC(n.mode(),n.typeIdsArray()||[],e||[])}case $M.FixedSizeBinary:{const e=t.type(new eO);return new pC(e.byteWidth())}case $M.FixedSizeList:{const n=t.type(new nO);return new gC(n.listSize(),(e||[])[0])}case $M.Map:{const n=t.type(new iO);return new mC((e||[])[0],n.keysSorted())}}throw new Error('Unrecognized type: "'.concat($M[n],'" (').concat(n,")"))}yM.encode=function(t,e){let n=-1,i=-1,r=-1;const o=e.type;let s=e.typeId;QA.isDictionary(o)?(s=o.dictionary.typeId,r=hO.visit(o,t),i=hO.visit(o.dictionary,t)):i=hO.visit(o,t);const a=(o.children||[]).map((e=>yM.encode(t,e))),l=ik.createChildrenVector(t,a),c=e.metadata&&e.metadata.size>0?ik.createCustomMetadataVector(t,[...e.metadata].map((e=>{let[n,i]=e;const r=t.createString("".concat(n)),o=t.createString("".concat(i));return tk.startKeyValue(t),tk.addKey(t,r),tk.addValue(t,o),tk.endKeyValue(t)}))):-1;e.name&&(n=t.createString(e.name));ik.startField(t),ik.addType(t,i),ik.addTypeType(t,s),ik.addChildren(t,l),ik.addNullable(t,!!e.nullable),-1!==n&&ik.addName(t,n);-1!==r&&ik.addDictionary(t,r);-1!==c&&ik.addCustomMetadata(t,c);return ik.endField(t)},yM.decode=function(t,e){let n,i,r,o,s,a;e&&(a=t.dictionary())?e.has(n=a.id().low)?(o=(o=a.indexType())?MO(o):new eC,s=new bC(e.get(n),o,n,a.isOrdered()),i=new yM(t.name(),s,t.nullable(),IO(t))):(o=(o=a.indexType())?MO(o):new eC,e.set(n,r=kO(t,CO(t,e))),s=new bC(r,o,n,a.isOrdered()),i=new yM(t.name(),s,t.nullable(),IO(t))):(r=kO(t,CO(t,e)),i=new yM(t.name(),r,t.nullable(),IO(t)));return i||null},yM.fromJSON=function(t,e){let n,i,r,o,s,a;return e&&(o=t.dictionary)?e.has(n=o.id)?(i=(i=o.indexType)?vO(i):new eC,a=new bC(e.get(n),i,n,o.isOrdered),r=new yM(t.name,a,t.nullable,yO(t.customMetadata))):(i=(i=o.indexType)?vO(i):new eC,e.set(n,s=bO(t,pO(t,e))),a=new bC(s,i,n,o.isOrdered),r=new yM(t.name,a,t.nullable,yO(t.customMetadata))):(s=bO(t,pO(t,e)),r=new yM(t.name,s,t.nullable,yO(t.customMetadata))),r||null},mM.encode=function(t,e){const n=e.fields.map((e=>yM.encode(t,e)));rk.startFieldsVector(t,n.length);const i=rk.createFieldsVector(t,n),r=e.metadata&&e.metadata.size>0?rk.createCustomMetadataVector(t,[...e.metadata].map((e=>{let[n,i]=e;const r=t.createString("".concat(n)),o=t.createString("".concat(i));return tk.startKeyValue(t),tk.addKey(t,r),tk.addValue(t,o),tk.endKeyValue(t)}))):-1;rk.startSchema(t),rk.addFields(t,i),rk.addEndianness(t,OO?KM.Little:KM.Big),-1!==r&&rk.addCustomMetadata(t,r);return rk.endSchema(t)},mM.decode=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;const n=function(t,e){const n=[];for(let i,r=-1,o=-1,s=t.fieldsLength();++r<s;)(i=t.fields(r))&&(n[++o]=yM.decode(i,e));return n}(t,e);return new mM(n,IO(t),e)},mM.fromJSON=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;return new mM(function(t,e){return(t.fields||[]).filter(Boolean).map((t=>yM.fromJSON(t,e)))}(t,e),yO(t.customMetadata),e)},EO.encode=function(t,e){const n=e.nodes||[],i=e.buffers||[];qk.startNodesVector(t,n.length);for(const s of n.slice().reverse())AO.encode(t,s);const r=t.endVector();qk.startBuffersVector(t,i.length);for(const s of i.slice().reverse())PO.encode(t,s);const o=t.endVector();return qk.startRecordBatch(t),qk.addLength(t,new _O(e.length,0)),qk.addNodes(t,r),qk.addBuffers(t,o),qk.endRecordBatch(t)},EO.decode=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:EP.V4;if(null!==t.compression())throw new Error("Record batch compression not implemented");return new EO(t.length(),function(t){const e=[];for(let n,i=-1,r=-1,o=t.nodesLength();++i<o;)(n=t.nodes(i))&&(e[++r]=AO.decode(n));return e}(t),function(t,e){const n=[];for(let i,r=-1,o=-1,s=t.buffersLength();++r<s;)(i=t.buffers(r))&&(e<EP.V4&&(i.bb_pos+=8*(r+1)),n[++o]=PO.decode(i));return n}(t,e))},EO.fromJSON=fO,TO.encode=function(t,e){const n=EO.encode(t,e.data);return Yk.startDictionaryBatch(t),Yk.addId(t,new _O(e.id,0)),Yk.addIsDelta(t,e.isDelta),Yk.addData(t,n),Yk.endDictionaryBatch(t)},TO.decode=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:EP.V4;return new TO(EO.decode(t.data(),e),t.id(),t.isDelta())},TO.fromJSON=function(t){return new TO(fO(t.data),t.id,t.isDelta)},AO.encode=function(t,e){return Gk.createFieldNode(t,new _O(e.length,0),new _O(e.nullCount,0))},AO.decode=function(t){return new AO(t.length(),t.nullCount())},PO.encode=function(t,e){return Hk.createBuffer(t,new _O(e.offset,0),new _O(e.length,0))},PO.decode=function(t){return new PO(t.offset(),t.length())};const OO=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]})(),LO=t=>"Expected ".concat(MP[t]," Message in stream, but was null or length 0."),RO=t=>"Header pointer of flatbuffer-encoded ".concat(MP[t]," Message is null or length 0."),FO=(t,e)=>"Expected to read ".concat(t," metadata bytes, but only read ").concat(e,"."),BO=(t,e)=>"Expected to read ".concat(t," bytes for message body, but only read ").concat(e,".");class NO{constructor(t){this.source=t instanceof wk?t:new wk(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||-1===t.value&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?mk:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(LO(t));return e.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=yA(this.source.read(t));if(e.byteLength<t)throw new Error(BO(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}readSchema(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=MP.Schema,n=this.readMessage(e),i=null===n||void 0===n?void 0:n.header();if(t&&!i)throw new Error(RO(e));return i}readMetadataLength(){const t=this.source.read(jO),e=t&&new QM(t),n=(null===e||void 0===e?void 0:e.readInt32(0))||0;return{done:0===n,value:n}}readMetadata(t){const e=this.source.read(t);if(!e)return mk;if(e.byteLength<t)throw new Error(FO(t,e.byteLength));return{done:!1,value:SO.decode(e)}}}class zO{constructor(t,e){this.source=t instanceof xk?t:KP(t)?new Pk(t,e):new xk(t)}[Symbol.asyncIterator](){return this}next(){return nA(this,void 0,void 0,(function*(){let t;return(t=yield this.readMetadataLength()).done||-1===t.value&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?mk:t}))}throw(t){return nA(this,void 0,void 0,(function*(){return yield this.source.throw(t)}))}return(t){return nA(this,void 0,void 0,(function*(){return yield this.source.return(t)}))}readMessage(t){return nA(this,void 0,void 0,(function*(){let e;if((e=yield this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(LO(t));return e.value}))}readMessageBody(t){return nA(this,void 0,void 0,(function*(){if(t<=0)return new Uint8Array(0);const e=yA(yield this.source.read(t));if(e.byteLength<t)throw new Error(BO(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}))}readSchema(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return nA(this,void 0,void 0,(function*(){const e=MP.Schema,n=yield this.readMessage(e),i=null===n||void 0===n?void 0:n.header();if(t&&!i)throw new Error(RO(e));return i}))}readMetadataLength(){return nA(this,void 0,void 0,(function*(){const t=yield this.source.read(jO),e=t&&new QM(t),n=(null===e||void 0===e?void 0:e.readInt32(0))||0;return{done:0===n,value:n}}))}readMetadata(t){return nA(this,void 0,void 0,(function*(){const e=yield this.source.read(t);if(!e)return mk;if(e.byteLength<t)throw new Error(FO(t,e.byteLength));return{done:!1,value:SO.decode(e)}}))}}class DO extends NO{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof yk?t:new yk(t)}next(){const{_json:t}=this;if(!this._schema){this._schema=!0;return{done:!1,value:SO.fromJSON(t.schema,MP.Schema)}}if(this._dictionaryIndex<t.dictionaries.length){const e=t.dictionaries[this._dictionaryIndex++];this._body=e.data.columns;return{done:!1,value:SO.fromJSON(e,MP.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const e=t.batches[this._batchIndex++];this._body=e.columns;return{done:!1,value:SO.fromJSON(e,MP.RecordBatch)}}return this._body=[],mk}readMessageBody(t){return function t(e){return(e||[]).reduce(((e,n)=>[...e,...n.VALIDITY&&[n.VALIDITY]||[],...n.TYPE&&[n.TYPE]||[],...n.OFFSET&&[n.OFFSET]||[],...n.DATA&&[n.DATA]||[],...t(n.children)]),[])}(this._body)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(LO(t));return e.value}readSchema(){const t=MP.Schema,e=this.readMessage(t),n=null===e||void 0===e?void 0:e.header();if(!e||!n)throw new Error(RO(t));return n}}const jO=4,UO="ARROW1",VO=new Uint8Array(6);for(let n=0;n<6;n+=1)VO[n]=UO.codePointAt(n);function WO(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=-1,i=VO.length;++n<i;)if(VO[n]!==t[e+n])return!1;return!0}const HO=VO.length,GO=HO+jO,qO=2*HO+jO;class YO extends vk{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const e=this._impl.open(t);return HP(e)?e.then((()=>this)):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return hk.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return hk.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof YO?t:YP(t)?function(t){return new XO(new iL(t))}(t):KP(t)?function(t){return nA(this,void 0,void 0,(function*(){const{size:e}=yield t.stat(),n=new Pk(t,e);return e>=qO&&WO(yield n.readAt(0,HO+7&-8))?new $O(new nL(n)):new KO(new tL(n))}))}(t):HP(t)?(()=>nA(this,void 0,void 0,(function*(){return yield YO.from(yield t)})))():ZP(t)||QP(t)||JP(t)||qP(t)?function(t){return nA(this,void 0,void 0,(function*(){const e=yield t.peek(HO+7&-8);return e&&e.byteLength>=4?WO(e)?new ZO(new eL(yield t.read())):new KO(new tL(t)):new KO(new tL(function(){return oA(this,arguments,(function*(){}))}()))}))}(new xk(t)):function(t){const e=t.peek(HO+7&-8);return e&&e.byteLength>=4?WO(e)?new ZO(new eL(t.read())):new XO(new JO(t)):new XO(new JO(function*(){}()))}(new wk(t))}static readAll(t){return t instanceof YO?t.isSync()?oL(t):sL(t):YP(t)||ArrayBuffer.isView(t)||GP(t)||XP(t)?oL(t):sL(t)}}class XO extends YO{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return oA(this,arguments,(function*(){yield rA(yield*sA(aA(this[Symbol.iterator]())))}))}}class KO extends YO{constructor(t){super(t),this._impl=t}readAll(){var t,e;return nA(this,void 0,void 0,(function*(){const n=new Array;try{for(var i,r=aA(this);!(i=yield r.next()).done;){const t=i.value;n.push(t)}}catch(o){t={error:o}}finally{try{i&&!i.done&&(e=r.return)&&(yield e.call(r))}finally{if(t)throw t.error}}return n}))}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class ZO extends XO{constructor(t){super(t),this._impl=t}}class $O extends KO{constructor(t){super(t),this._impl=t}}class QO{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,e){const n=this._loadVectors(t,e,this.schema.fields),i=gM({type:new hC(this.schema.fields),length:t.length,children:n});return new RM(this.schema,i)}_loadDictionaryBatch(t,e){const{id:n,isDelta:i}=t,{dictionaries:r,schema:o}=this,s=r.get(n);if(i||!s){const r=o.dictionaries.get(n),a=this._loadVectors(t.data,e,[r]);return(s&&i?s.concat(new dM(a)):new dM(a)).memoize()}return s.memoize()}_loadVectors(t,e,n){return new Lk(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)}}class JO extends QO{constructor(t,e){super(e),this._reader=YP(t)?new DO(this._handle=t):new NO(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=rL(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):mk}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):mk}next(){if(this.closed)return mk;let t;const{_reader:e}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),i=e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,i)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),i=e.readMessageBody(t.bodyLength),r=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,r)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new NM(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class tL extends QO{constructor(t,e){super(e),this._reader=new zO(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return nA(this,void 0,void 0,(function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}))}open(t){return nA(this,void 0,void 0,(function*(){return this.closed||(this.autoDestroy=rL(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this}))}throw(t){return nA(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):mk}))}return(t){return nA(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):mk}))}next(){return nA(this,void 0,void 0,(function*(){if(this.closed)return mk;let t;const{_reader:e}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),i=yield e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,i)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),i=yield e.readMessageBody(t.bodyLength),r=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,r)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new NM(this.schema)}):yield this.return()}))}_readNextMessageAndValidate(t){return nA(this,void 0,void 0,(function*(){return yield this._reader.readMessage(t)}))}}class eL extends JO{constructor(t,e){super(t instanceof Tk?t:new Tk(t),e)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var e;if(this.closed)return null;this._footer||this.open();const n=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(t);if(n&&this._handle.seek(n.offset)){const t=this._reader.readMessage(MP.RecordBatch);if(null===t||void 0===t?void 0:t.isRecordBatch()){const e=t.header(),n=this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,n)}}return null}_readDictionaryBatch(t){var e;const n=null===(e=this._footer)||void 0===e?void 0:e.getDictionaryBatch(t);if(n&&this._handle.seek(n.offset)){const t=this._reader.readMessage(MP.DictionaryBatch);if(null===t||void 0===t?void 0:t.isDictionaryBatch()){const e=t.header(),n=this._reader.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(e,n);this.dictionaries.set(e.id,i)}}}_readFooter(){const{_handle:t}=this,e=t.size-GO,n=t.readInt32(e),i=t.readAt(e-n,n);return ck.decode(i)}_readNextMessageAndValidate(t){var e;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(this._recordBatchIndex);if(n&&this._handle.seek(n.offset))return this._reader.readMessage(t)}return null}}class nL extends tL{constructor(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r="number"!==typeof n[0]?n.shift():void 0,o=n[0]instanceof Map?n.shift():void 0;super(t instanceof Pk?t:new Pk(t,r),o)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const e=Object.create(null,{open:{get:()=>super.open}});return nA(this,void 0,void 0,(function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield e.open.call(this,t)}))}readRecordBatch(t){var e;return nA(this,void 0,void 0,(function*(){if(this.closed)return null;this._footer||(yield this.open());const n=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(t);if(n&&(yield this._handle.seek(n.offset))){const t=yield this._reader.readMessage(MP.RecordBatch);if(null===t||void 0===t?void 0:t.isRecordBatch()){const e=t.header(),n=yield this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,n)}}return null}))}_readDictionaryBatch(t){var e;return nA(this,void 0,void 0,(function*(){const n=null===(e=this._footer)||void 0===e?void 0:e.getDictionaryBatch(t);if(n&&(yield this._handle.seek(n.offset))){const t=yield this._reader.readMessage(MP.DictionaryBatch);if(null===t||void 0===t?void 0:t.isDictionaryBatch()){const e=t.header(),n=yield this._reader.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(e,n);this.dictionaries.set(e.id,i)}}}))}_readFooter(){return nA(this,void 0,void 0,(function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const e=t.size-GO,n=yield t.readInt32(e),i=yield t.readAt(e-n,n);return ck.decode(i)}))}_readNextMessageAndValidate(t){return nA(this,void 0,void 0,(function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer.getRecordBatch(this._recordBatchIndex);if(e&&(yield this._handle.seek(e.offset)))return yield this._reader.readMessage(t)}return null}))}}class iL extends JO{constructor(t,e){super(t,e)}_loadVectors(t,e,n){return new Rk(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)}}function rL(t,e){return e&&"boolean"===typeof e.autoDestroy?e.autoDestroy:t.autoDestroy}function*oL(t){const e=YO.from(t);try{if(!e.open({autoDestroy:!1}).closed)do{yield e}while(!e.reset().open().closed)}finally{e.cancel()}}function sL(t){return oA(this,arguments,(function*(){const e=yield rA(YO.from(t));try{if(!(yield rA(e.open({autoDestroy:!1}))).closed)do{yield yield rA(e)}while(!(yield rA(e.reset().open())).closed)}finally{yield rA(e.cancel())}}))}class aL extends wC{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(){const t=e=>e.flatMap((e=>Array.isArray(e)?t(e):e instanceof RM?e.data.children:e.data)),e=new aL;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.visitMany(t(i)),e}visit(t){if(t instanceof dM)return this.visitMany(t.data),this;const{type:e}=t;if(!QA.isDictionary(e)){const{length:n,nullCount:i}=t;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");QA.isNull(e)||lL.call(this,i<=0?new Uint8Array(0):HI(t.offset,n,t.nullBitmap)),this.nodes.push(new AO(n,i))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function lL(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new PO(this._byteLength,e)),this._byteLength+=e,this}function cL(t){return lL.call(this,t.values.subarray(0,t.length*t.stride))}function uL(t){const{length:e,values:n,valueOffsets:i}=t,r=i[0],o=i[e],s=Math.min(o-r,n.byteLength-r);return lL.call(this,wA(-i[0],e,i)),lL.call(this,n.subarray(r,r+s)),this}function dL(t){const{length:e,valueOffsets:n}=t;return n&&lL.call(this,wA(n[0],e,n)),this.visit(t.children[0])}function hL(t){return this.visitMany(t.type.children.map(((e,n)=>t.children[n])).filter(Boolean))[0]}aL.prototype.visitBool=function(t){let e;return t.nullCount>=t.length?lL.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?lL.call(this,HI(t.offset,t.length,e)):lL.call(this,GI(t.values))},aL.prototype.visitInt=cL,aL.prototype.visitFloat=cL,aL.prototype.visitUtf8=uL,aL.prototype.visitBinary=uL,aL.prototype.visitFixedSizeBinary=cL,aL.prototype.visitDate=cL,aL.prototype.visitTimestamp=cL,aL.prototype.visitTime=cL,aL.prototype.visitDecimal=cL,aL.prototype.visitList=dL,aL.prototype.visitStruct=hL,aL.prototype.visitUnion=function(t){const{type:e,length:n,typeIds:i,valueOffsets:r}=t;if(lL.call(this,i),e.mode===TP.Sparse)return hL.call(this,t);if(e.mode===TP.Dense){if(t.offset<=0)return lL.call(this,r),hL.call(this,t);{const o=i.reduce(((t,e)=>Math.max(t,e)),i[0]),s=new Int32Array(o+1),a=new Int32Array(o+1).fill(-1),l=new Int32Array(n),c=wA(-r[0],n,r);for(let t,e,r=-1;++r<n;)-1===(e=a[t=i[r]])&&(e=a[t]=c[t]),l[r]=c[r]-e,++s[t];lL.call(this,l);for(let i,r=-1,u=e.children.length;++r<u;)if(i=t.children[r]){const t=e.typeIds[r],o=Math.min(n,s[t]);this.visit(i.slice(a[t],o))}}}return this},aL.prototype.visitInterval=cL,aL.prototype.visitFixedSizeList=dL,aL.prototype.visitMap=dL;class fL extends vk{constructor(t){super(),this._position=0,this._started=!1,this._sink=new _k,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,WP(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!==typeof t.autoDestroy||t.autoDestroy,this._writeLegacyIpcFormat="boolean"===typeof t.writeLegacyIpcFormat&&t.writeLegacyIpcFormat}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}toString(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sink.toString(t)}toUint8Array(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sink.toUint8Array(t)}writeAll(t){return HP(t)?t.then((t=>this.writeAll(t))):qP(t)?yL(this,t):mL(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._sink,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var n;return t===this._sink||t instanceof _k?this._sink=t:(this._sink=new _k,t&&(WP(n=t)&&VP(n.abort)&&VP(n.getWriter)&&!$P(n))?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&(t=>WP(t)&&VP(t.end)&&VP(t.write)&&UP(t.writable)&&!$P(t))(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,e&&kM(e,this._schema)||(null==e?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null==t)return this.finish()&&void 0;if(t instanceof jM&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof RM&&!(e=t.schema))return this.finish()&&void 0;if(e&&!kM(e,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof RM?t instanceof NM||this._writeRecordBatch(t):t instanceof jM?this.writeAll(t.batches):GP(t)&&this.writeAll(t)}_writeMessage(t){const e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-1,n=SO.encode(t),i=n.byteLength,r=this._writeLegacyIpcFormat?4:8,o=i+r+e&~e,s=o-i-r;return t.headerType===MP.RecordBatch?this._recordBatchBlocks.push(new dk(o,t.bodyLength,this._position)):t.headerType===MP.DictionaryBatch&&this._dictionaryBlocks.push(new dk(o,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-r)),i>0&&this._write(n),this._writePadding(s)}_write(t){if(this._started){const e=yA(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(SO.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(VO)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:e,nodes:n,bufferRegions:i,buffers:r}=aL.assemble(t),o=new EO(t.numRows,n,i),s=SO.from(o,e);return this._writeDictionaries(t)._writeMessage(s)._writeBodyBuffers(r)}_writeDictionaryBatch(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));const{byteLength:i,nodes:r,bufferRegions:o,buffers:s}=aL.assemble(new dM([t])),a=new EO(t.length,r,o),l=new TO(a,e,n),c=SO.from(l,i);return this._writeMessage(c)._writeBodyBuffers(s)}_writeBodyBuffers(t){let e,n,i;for(let r=-1,o=t.length;++r<o;)(e=t[r])&&(n=e.byteLength)>0&&(this._write(e),(i=(n+7&-8)-n)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[e,n]of t.dictionaries){let t=this._dictionaryDeltaOffsets.get(e)||0;if(0===t||(n=null===n||void 0===n?void 0:n.slice(t)).length>0)for(const i of n.data)this._writeDictionaryBatch(i,e,t>0),t+=i.length}return this}}class pL extends fL{static writeAll(t,e){const n=new pL(e);return HP(t)?t.then((t=>n.writeAll(t))):qP(t)?yL(n,t):mL(n,t)}}class gL extends fL{static writeAll(t){const e=new gL;return HP(t)?t.then((t=>e.writeAll(t))):qP(t)?yL(e,t):mL(e,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const e=ck.encode(new ck(t,EP.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(e)._write(Int32Array.of(e.byteLength))._writeMagic()}}function mL(t,e){let n=e;e instanceof jM&&(n=e.batches,t.reset(void 0,e.schema));for(const i of n)t.write(i);return t.finish()}function yL(t,e){var n,i,r,o;return nA(this,void 0,void 0,(function*(){try{for(n=aA(e);!(i=yield n.next()).done;){const e=i.value;t.write(e)}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}return t.finish()}))}function vL(t){const e=YO.from(t);return HP(e)?e.then((t=>vL(t))):e.isAsync()?e.readAll().then((t=>new jM(t))):new jM(e.readAll())}function bL(t){return("stream"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stream")?pL:gL).writeAll(t).toUint8Array(!0)}var _L,wL=function(){function t(t,e,n,i){var r=this;this.getCell=function(t,e){var n=t<r.headerRows&&e<r.headerColumns,i=t>=r.headerRows&&e<r.headerColumns,o=t<r.headerRows&&e>=r.headerColumns;if(n){var s=["blank"];return e>0&&s.push("level"+t),{type:"blank",classNames:s.join(" "),content:""}}if(o)return{type:"columns",classNames:(s=["col_heading","level"+t,"col"+(l=e-r.headerColumns)]).join(" "),content:r.getContent(r.columnsTable,l,t)};if(i){s=["row_heading","level"+e,"row"+(a=t-r.headerRows)];return{type:"index",id:"T_".concat(r.uuid,"level").concat(e,"_row").concat(a),classNames:s.join(" "),content:r.getContent(r.indexTable,a,e)}}s=["data","row"+(a=t-r.headerRows),"col"+(l=e-r.headerColumns)];var a,l,c=r.styler?r.getContent(r.styler.displayValuesTable,a,l):r.getContent(r.dataTable,a,l);return{type:"data",id:"T_".concat(r.uuid,"row").concat(a,"_col").concat(l),classNames:s.join(" "),content:c}},this.getContent=function(t,e,n){var i=t.getChildAt(n);return null===i?"":r.getColumnTypeId(t,n)===kP.Timestamp?r.nanosToDate(i.get(e)):i.get(e)},this.dataTable=vL(t),this.indexTable=vL(e),this.columnsTable=vL(n),this.styler=i?{caption:i.caption,displayValuesTable:vL(i.displayValues),styles:i.styles,uuid:i.uuid}:void 0}return Object.defineProperty(t.prototype,"rows",{get:function(){return this.indexTable.numRows+this.columnsTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this.indexTable.numCols+this.columnsTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerRows",{get:function(){return this.rows-this.dataRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerColumns",{get:function(){return this.columns-this.dataColumns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataRows",{get:function(){return this.dataTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataColumns",{get:function(){return this.dataTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uuid",{get:function(){return this.styler&&this.styler.uuid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"caption",{get:function(){return this.styler&&this.styler.caption},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){return this.styler&&this.styler.styles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"table",{get:function(){return this.dataTable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.indexTable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnTable",{get:function(){return this.columnsTable},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){return{data:bL(this.dataTable),index:bL(this.indexTable),columns:bL(this.columnsTable)}},t.prototype.getColumnTypeId=function(t,e){return t.schema.fields[e].type.typeId},t.prototype.nanosToDate=function(t){return new Date(t/1e6)},t}(),xL=function(){return xL=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},xL.apply(this,arguments)};!function(t){t.COMPONENT_READY="streamlit:componentReady",t.SET_COMPONENT_VALUE="streamlit:setComponentValue",t.SET_FRAME_HEIGHT="streamlit:setFrameHeight"}(_L||(_L={}));var SL=function(){function t(){}return t.API_VERSION=1,t.RENDER_EVENT="streamlit:render",t.events=new EventTarget,t.registeredMessageListener=!1,t.setComponentReady=function(){t.registeredMessageListener||(window.addEventListener("message",t.onMessageEvent),t.registeredMessageListener=!0),t.sendBackMsg(_L.COMPONENT_READY,{apiVersion:t.API_VERSION})},t.setFrameHeight=function(e){void 0===e&&(e=document.body.scrollHeight),e!==t.lastFrameHeight&&(t.lastFrameHeight=e,t.sendBackMsg(_L.SET_FRAME_HEIGHT,{height:e}))},t.setComponentValue=function(e){var n;e instanceof wL?(n="dataframe",e=e.serialize()):!function(t){var e=!1;try{e=t instanceof BigInt64Array||t instanceof BigUint64Array}catch(n){}return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array||e}(e)?e instanceof ArrayBuffer?(n="bytes",e=new Uint8Array(e)):n="json":(n="bytes",e=new Uint8Array(e.buffer)),t.sendBackMsg(_L.SET_COMPONENT_VALUE,{value:e,dataType:n})},t.onMessageEvent=function(e){if(e.data.type===t.RENDER_EVENT)t.onRenderMessage(e.data)},t.onRenderMessage=function(e){var n=e.args;null==n&&(console.error("Got null args in onRenderMessage. This should never happen"),n={});var i=e.dfs&&e.dfs.length>0?t.argsDataframeToObject(e.dfs):{};n=xL(xL({},n),i);var r=Boolean(e.disabled),o=e.theme;o&&EL(o);var s={disabled:r,args:n,theme:o},a=new CustomEvent(t.RENDER_EVENT,{detail:s});t.events.dispatchEvent(a)},t.argsDataframeToObject=function(e){var n=e.map((function(e){var n=e.key,i=e.value;return[n,t.toArrowTable(i)]}));return Object.fromEntries(n)},t.toArrowTable=function(t){var e,n=(e=t.data).data,i=e.index,r=e.columns,o=e.styler;return new wL(n,i,r,o)},t.sendBackMsg=function(t,e){window.parent.postMessage(xL({isStreamlitMessage:!0,type:t},e),"*")},t}(),EL=function(t){var e=document.createElement("style");document.head.appendChild(e),e.innerHTML="\n    :root {\n      --primary-color: ".concat(t.primaryColor,";\n      --background-color: ").concat(t.backgroundColor,";\n      --secondary-background-color: ").concat(t.secondaryBackgroundColor,";\n      --text-color: ").concat(t.textColor,";\n      --font: ").concat(t.font,";\n    }\n\n    body {\n      background-color: var(--background-color);\n      color: var(--text-color);\n    }\n  ")};var TL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}TL(e,t),e.prototype.componentDidMount=function(){SL.setFrameHeight()},e.prototype.componentDidUpdate=function(){SL.setFrameHeight()}}(LP.PureComponent);const PL=[[0,0,0,0],[228,26,28,175],[55,126,184,175],[77,175,74,175],[152,78,163,175],[255,193,7,175],[166,86,40,175],[247,129,191,175],[153,153,153,175]],AL=function(t){var e=function(e){function n(t){var n=e.call(this,t)||this;return n.componentDidMount=function(){SL.events.addEventListener(SL.RENDER_EVENT,n.onRenderEvent),SL.setComponentReady()},n.componentDidUpdate=function(){null!=n.state.componentError&&SL.setFrameHeight()},n.componentWillUnmount=function(){SL.events.removeEventListener(SL.RENDER_EVENT,n.onRenderEvent)},n.onRenderEvent=function(t){n.setState({renderData:t.detail})},n.state={renderData:void 0,componentError:void 0},n}return TL(n,e),n.prototype.render=function(){return null!=this.state.componentError?LP.createElement("div",null,LP.createElement("h1",null,"Component Error"),LP.createElement("span",null,this.state.componentError.message)):null==this.state.renderData?null:LP.createElement(t,{width:window.innerWidth,disabled:this.state.renderData.disabled,args:this.state.renderData.args,theme:this.state.renderData.theme})},n.getDerivedStateFromError=function(t){return{componentError:t}},n}(LP.PureComponent);return kw()(e,t)}((e=>{(0,t.useEffect)((()=>SL.setFrameHeight()));const{config:n}=e.args,i=n.tileSize/2**(1+n.maxZoom),[r,o]=(0,t.useState)(0),[s,a]=(0,t.useState)([]),[l,c]=(0,t.useState)({}),[u,d]=(0,t.useState)(null),[h,f]=(0,t.useState)(!1);(0,t.useEffect)((()=>{c(n.f2label),a(n.classes)}),[]);const p=function(t,e,n){const i=new Uint8Array(t.nrow*t.ncol*4);return Object.entries(e).forEach((e=>{let[r,o]=e;const[s,a]=t.f2coord[r],l=s*t.ncol+a,c=n.indexOf(o);-1!==c&&(i[4*l+0]=PL[c][0],i[4*l+1]=PL[c][1],i[4*l+2]=PL[c][2],i[4*l+3]=PL[c][3])})),i}(n,l,s),g={main:{target:[n.ncol*i/2,n.nrow*i/2,0],zoom:2}},m=new ty({id:"tile-layer-".concat(n.name),data:n.tiles[0],minZoom:n.minZoom,maxZoom:n.maxZoom,tileSize:n.tileSize,coordinateSystem:ki.CARTESIAN,coordinateOrigin:[0,0,0],extent:[0,0,n.ncol*i,n.nrow*i],onTileError:()=>{},renderSubLayers:t=>{const{bbox:{left:e,bottom:n,right:i,top:r}}=t.tile;return new Dh(t,{data:null,image:t.data,bounds:[e,n,i,r],textureParameters:{[uy]:ly,[cy]:ly}})}});(0,t.useEffect)((()=>{const t=async t=>{parseInt(t.key)<=s.length?d((e=>s[parseInt(t.key)])):"Meta"===t.key?(console.log("!!!!! POST",l),SL.setComponentValue([l,s]),f(!1)):d((t=>null))},e=async t=>{d((t=>null))};return document.addEventListener("keydown",t),document.addEventListener("keyup",e),()=>{document.removeEventListener("keydown",t),document.removeEventListener("keyup",e)}}),[r,s,l]);const y=new Dh({id:"ann_layer",image:{width:n.ncol,height:n.nrow,data:p},textureParameters:{[uy]:ly,[cy]:ly},updateTriggers:{image:[l]},extent:[0,0,n.ncol*i,n.nrow*i],bounds:[0,0,n.ncol*i,n.nrow*i],pickable:!0,onHover:t=>{let{bitmap:e}=t;if(e){if(null===u)return;const[t,i]=e.pixel,s=i*e.size.width+t;if(!n.fnames[s])return;o(r+1),c({...l,[n.fnames[s]]:u}),f(!0)}}}),v=new ay({id:"main",controller:{keyboard:{moveSpeed:100}},x:"0%",y:"0%",width:"100%",height:"100%"});return(0,yw.jsxs)(yw.Fragment,{children:[(0,yw.jsxs)("div",{id:"left_pane",className:"split left",children:[(0,yw.jsx)(ST,{id:"class-input",label:"Add Classes...",variant:"standard",style:{paddingRight:"10%"},onKeyDown:t=>{if("Enter"===t.key){var e;if(""===t.target.value)return;return-1!==s.indexOf(t.target.value)?void alert("Alert: ".concat(t.target.value," already exists")):9===s.length?void alert("Alert: You've hit the maximum of 9 classes!"):(t.preventDefault(),a([...s,t.target.value]),t.target.value="",null===(e=document.getElementById("class-input"))||void 0===e||e.blur(),void f(!0))}}}),(0,yw.jsx)(sS,{children:s.map((t=>{if(null===t)return null;let e={};if(t==u){const n=PL[s.indexOf(t)];e.color="white",e.backgroundColor="rgba(".concat(n[0],",").concat(n[1],",").concat(n[2],",").concat(n[3],")")}return(0,yw.jsxs)(SP,{style:e,children:[" ",t," "]},t)}))})]}),(0,yw.jsxs)("div",{id:"right_pane",className:"split right",children:[h?(0,yw.jsxs)(yw.Fragment,{children:[" ",(0,yw.jsx)("div",{style:{paddingLeft:"10px",color:"red"},children:" UNSAVED - Press Cmd to save "})," "]}):(0,yw.jsx)(yw.Fragment,{}),(0,yw.jsx)("div",{children:(0,yw.jsx)(Ph,{views:[v],layers:[m,y],initialViewState:g,getCursor:()=>"crosshair"})})]})]})}));i.render((0,yw.jsx)(AL,{}),document.getElementById("app"))})()})();
//# sourceMappingURL=main.79c85373.js.map